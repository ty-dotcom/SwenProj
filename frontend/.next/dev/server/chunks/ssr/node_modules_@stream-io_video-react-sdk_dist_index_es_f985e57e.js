module.exports = [
"[project]/node_modules/@stream-io/video-react-sdk/dist/index.es.js [app-ssr] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AcceptCallButton",
    ()=>AcceptCallButton,
    "Audio",
    ()=>Audio,
    "Avatar",
    ()=>Avatar,
    "AvatarFallback",
    ()=>AvatarFallback,
    "BackgroundFiltersProvider",
    ()=>BackgroundFiltersProvider,
    "BackstageLayout",
    ()=>BackstageLayout,
    "BaseVideo",
    ()=>BaseVideo,
    "CallControls",
    ()=>CallControls,
    "CallParticipantListing",
    ()=>CallParticipantListing,
    "CallParticipantListingItem",
    ()=>CallParticipantListingItem,
    "CallParticipantsList",
    ()=>CallParticipantsList,
    "CallPreview",
    ()=>CallPreview,
    "CallRecordingList",
    ()=>CallRecordingList,
    "CallRecordingListHeader",
    ()=>CallRecordingListHeader,
    "CallRecordingListItem",
    ()=>CallRecordingListItem,
    "CallStats",
    ()=>CallStats,
    "CallStatsButton",
    ()=>CallStatsButton,
    "CancelCallButton",
    ()=>CancelCallButton,
    "CancelCallConfirmButton",
    ()=>CancelCallConfirmButton,
    "CompositeButton",
    ()=>CompositeButton,
    "DefaultParticipantViewUI",
    ()=>DefaultParticipantViewUI,
    "DefaultReactionsMenu",
    ()=>DefaultReactionsMenu,
    "DefaultScreenShareOverlay",
    ()=>DefaultScreenShareOverlay,
    "DefaultVideoPlaceholder",
    ()=>DefaultVideoPlaceholder,
    "DeviceSelector",
    ()=>DeviceSelector,
    "DeviceSelectorAudioInput",
    ()=>DeviceSelectorAudioInput,
    "DeviceSelectorAudioOutput",
    ()=>DeviceSelectorAudioOutput,
    "DeviceSelectorVideo",
    ()=>DeviceSelectorVideo,
    "DeviceSettings",
    ()=>DeviceSettings,
    "DropDownSelect",
    ()=>DropDownSelect,
    "DropDownSelectOption",
    ()=>DropDownSelectOption,
    "EmptyCallRecordingListing",
    ()=>EmptyCallRecordingListing,
    "GenericMenu",
    ()=>GenericMenu,
    "GenericMenuButtonItem",
    ()=>GenericMenuButtonItem,
    "Icon",
    ()=>Icon,
    "IconButton",
    ()=>IconButton,
    "LivestreamLayout",
    ()=>LivestreamLayout,
    "LivestreamPlayer",
    ()=>LivestreamPlayer,
    "LoadingCallRecordingListing",
    ()=>LoadingCallRecordingListing,
    "LoadingIndicator",
    ()=>LoadingIndicator,
    "MenuToggle",
    ()=>MenuToggle,
    "MenuVisualType",
    ()=>MenuVisualType,
    "NoiseCancellationProvider",
    ()=>NoiseCancellationProvider,
    "Notification",
    ()=>Notification,
    "PaginatedGridLayout",
    ()=>PaginatedGridLayout,
    "ParticipantActionsContextMenu",
    ()=>ParticipantActionsContextMenu,
    "ParticipantDetails",
    ()=>ParticipantDetails,
    "ParticipantView",
    ()=>ParticipantView,
    "ParticipantViewContext",
    ()=>ParticipantViewContext,
    "ParticipantsAudio",
    ()=>ParticipantsAudio,
    "PermissionNotification",
    ()=>PermissionNotification,
    "PermissionRequestList",
    ()=>PermissionRequestList,
    "PermissionRequests",
    ()=>PermissionRequests,
    "PipLayout",
    ()=>PipLayout,
    "Reaction",
    ()=>Reaction,
    "ReactionsButton",
    ()=>ReactionsButton,
    "RecordCallButton",
    ()=>RecordCallButton,
    "RecordCallConfirmationButton",
    ()=>RecordCallConfirmationButton,
    "RecordingInProgressNotification",
    ()=>RecordingInProgressNotification,
    "RingingCall",
    ()=>RingingCall,
    "RingingCallControls",
    ()=>RingingCallControls,
    "ScreenShareButton",
    ()=>ScreenShareButton,
    "SearchInput",
    ()=>SearchInput,
    "SearchResults",
    ()=>SearchResults,
    "SpeakerLayout",
    ()=>SpeakerLayout,
    "SpeakingWhileMutedNotification",
    ()=>SpeakingWhileMutedNotification,
    "SpeechIndicator",
    ()=>SpeechIndicator,
    "StatCard",
    ()=>StatCard,
    "StreamCall",
    ()=>StreamCall,
    "StreamTheme",
    ()=>StreamTheme,
    "StreamVideo",
    ()=>StreamVideo,
    "TextButton",
    ()=>TextButton,
    "ToggleAudioOutputButton",
    ()=>ToggleAudioOutputButton,
    "ToggleAudioPreviewButton",
    ()=>ToggleAudioPreviewButton,
    "ToggleAudioPublishingButton",
    ()=>ToggleAudioPublishingButton,
    "ToggleVideoPreviewButton",
    ()=>ToggleVideoPreviewButton,
    "ToggleVideoPublishingButton",
    ()=>ToggleVideoPublishingButton,
    "Tooltip",
    ()=>Tooltip,
    "Video",
    ()=>Video$1,
    "VideoPreview",
    ()=>VideoPreview,
    "WithTooltip",
    ()=>WithTooltip,
    "applyFilter",
    ()=>applyFilter,
    "defaultEmojiReactionMap",
    ()=>defaultEmojiReactionMap,
    "defaultReactions",
    ()=>defaultReactions,
    "translations",
    ()=>translations,
    "useBackgroundFilters",
    ()=>useBackgroundFilters,
    "useDeviceList",
    ()=>useDeviceList,
    "useFilteredParticipants",
    ()=>useFilteredParticipants,
    "useHorizontalScrollPosition",
    ()=>useHorizontalScrollPosition,
    "useMenuContext",
    ()=>useMenuContext,
    "useNoiseCancellation",
    ()=>useNoiseCancellation,
    "useParticipantViewContext",
    ()=>useParticipantViewContext,
    "usePersistedDevicePreferences",
    ()=>usePersistedDevicePreferences,
    "useRequestPermission",
    ()=>useRequestPermission,
    "useTrackElementVisibility",
    ()=>useTrackElementVisibility,
    "useVerticalScrollPosition",
    ()=>useVerticalScrollPosition
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@stream-io/video-client/dist/index.es.js [app-ssr] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@stream-io/video-react-bindings/dist/index.es.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@floating-ui/react/dist/floating-ui.react.mjs [app-ssr] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs [app-ssr] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$dom$2f$dist$2f$floating$2d$ui$2e$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs [app-ssr] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/clsx/dist/clsx.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$dom$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-dom.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$filters$2d$web$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@stream-io/video-filters-web/dist/index.es.js [app-ssr] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
const Audio = ({ participant, trackType = 'audioTrack', ...rest })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const [audioElement, setAudioElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const { userId, sessionId } = participant;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call || !audioElement) return;
        const cleanup = call.bindAudioElement(audioElement, sessionId, trackType);
        return ()=>{
            cleanup?.();
        };
    }, [
        call,
        sessionId,
        audioElement,
        trackType
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("audio", {
        autoPlay: true,
        ...rest,
        ref: setAudioElement,
        "data-user-id": userId,
        "data-session-id": sessionId,
        "data-track-type": trackType
    });
};
Audio.displayName = 'Audio';
const ParticipantsAudio = (props)=>{
    const { participants, audioProps } = props;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: participants.map((participant)=>{
            if (participant.isLocalParticipant) return null;
            const { audioStream, screenShareAudioStream, sessionId } = participant;
            const hasAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasAudio"])(participant);
            const audioTrackElement = hasAudioTrack && audioStream && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Audio, {
                ...audioProps,
                trackType: "audioTrack",
                participant: participant
            });
            const hasScreenShareAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShareAudio"])(participant);
            const screenShareAudioTrackElement = hasScreenShareAudioTrack && screenShareAudioStream && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Audio, {
                ...audioProps,
                trackType: "screenShareAudioTrack",
                participant: participant
            });
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
                children: [
                    audioTrackElement,
                    screenShareAudioTrackElement
                ]
            }, sessionId);
        })
    });
};
ParticipantsAudio.displayName = 'ParticipantsAudio';
const ParticipantViewContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])(undefined);
const useParticipantViewContext = ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(ParticipantViewContext);
const useFloatingUIPreset = ({ middleware = [], placement, strategy, offset: offsetInPx = 10 })=>{
    const { refs, x, y, update, elements: { domReference, floating }, context } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useFloating"])({
        placement,
        strategy,
        middleware: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["offset"])(offsetInPx),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["shift"])(),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["flip"])(),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["size"])({
                padding: 10,
                apply: ({ availableHeight, elements })=>{
                    Object.assign(elements.floating.style, {
                        maxHeight: `${availableHeight}px`
                    });
                }
            }),
            ...middleware
        ]
    });
    // handle window resizing
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!domReference || !floating) return;
        const cleanup = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$dom$2f$dist$2f$floating$2d$ui$2e$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["autoUpdate"])(domReference, floating, update);
        return ()=>cleanup();
    }, [
        domReference,
        floating,
        update
    ]);
    return {
        refs,
        x,
        y,
        domReference,
        floating,
        strategy,
        context
    };
};
const defaultDevice = 'default';
/**
 * This hook will apply and persist the device preferences from local storage.
 *
 * @param key the key to use for local storage.
 */ const usePersistedDevicePreferences = (key = '@stream-io/device-preferences')=>{
    const { useCallSettings, useCallCallingState, useMicrophoneState, useCameraState, useSpeakerState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const settings = useCallSettings();
    const callingState = useCallCallingState();
    const microphoneState = useMicrophoneState();
    const cameraState = useCameraState();
    const speakerState = useSpeakerState();
    const [applyingState, setApplyingState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])('idle');
    // when the camera is disabled on call type level, we should discard
    // any stored camera preferences.
    const cameraDevices = settings?.video?.enabled ? cameraState.devices : false;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(function apply() {
        if (callingState === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].LEFT || microphoneState.devices.length === 0 || Array.isArray(cameraDevices) && cameraDevices.length === 0 || speakerState.devices.length === 0 || !settings || applyingState !== 'idle') {
            return;
        }
        setApplyingState('applying');
        (async ()=>{
            const { audio, video } = settings;
            for (const [deviceKey, state, defaultMuted, enabledInCallType] of [
                [
                    'microphone',
                    microphoneState,
                    !audio.mic_default_on,
                    true
                ],
                [
                    'camera',
                    cameraState,
                    !video.camera_default_on,
                    video.enabled
                ],
                [
                    'speaker',
                    speakerState,
                    false,
                    true
                ]
            ]){
                const preferences = parseLocalDevicePreferences(key);
                const preference = preferences[deviceKey];
                const manager = state[deviceKey];
                const applyPromise = preference ? applyLocalDevicePreference(manager, [
                    preference
                ].flat(), deviceKey === 'camera' ? cameraDevices || [] : state.devices, enabledInCallType) : applyMutedState(manager, defaultMuted, enabledInCallType);
                await applyPromise.catch((err)=>{
                    console.warn(`Failed to apply ${deviceKey} device preferences`, err);
                });
            }
        })().finally(()=>setApplyingState((state)=>state === 'applying' ? 'applied' : state));
    }, [
        applyingState,
        callingState,
        cameraState,
        cameraDevices,
        key,
        microphoneState,
        microphoneState.devices,
        settings,
        speakerState,
        speakerState.devices
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(function persist() {
        if (callingState === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].LEFT || applyingState !== 'applied') {
            return;
        }
        for (const [deviceKey, devices, selectedDevice, isMute] of [
            [
                'camera',
                cameraDevices || [],
                cameraState.selectedDevice,
                cameraState.isMute
            ],
            [
                'microphone',
                microphoneState.devices,
                microphoneState.selectedDevice,
                microphoneState.isMute
            ],
            [
                'speaker',
                speakerState.devices,
                speakerState.selectedDevice,
                speakerState.isMute
            ]
        ]){
            try {
                patchLocalDevicePreference(key, deviceKey, {
                    devices,
                    selectedDevice,
                    isMute
                });
            } catch (err) {
                console.warn(`Failed to save ${deviceKey} device preferences`, err);
            }
        }
    }, [
        applyingState,
        callingState,
        cameraDevices,
        cameraState.isMute,
        cameraState.selectedDevice,
        key,
        microphoneState.devices,
        microphoneState.isMute,
        microphoneState.selectedDevice,
        speakerState.devices,
        speakerState.isMute,
        speakerState.selectedDevice
    ]);
};
// const usePersistedDevicePreference = <K extends DeviceKey>(
//   key: string,
//   deviceKey: K,
//   state: DeviceState<K>,
//   defaultMuted?: boolean,
// ): void => {
//   const { useCallCallingState } = useCallStateHooks();
//   const callingState = useCallCallingState();
//   const [applyingState, setApplyingState] = useState<
//     'idle' | 'applying' | 'applied'
//   >('idle');
//   const manager = state[deviceKey];
//   useEffect(
//     function apply() {
//       if (
//         callingState === CallingState.LEFT ||
//         !state.devices?.length ||
//         typeof defaultMuted !== 'boolean' ||
//         applyingState !== 'idle'
//       ) {
//         return;
//       }
//       const preferences = parseLocalDevicePreferences(key);
//       const preference = preferences[deviceKey];
//       setApplyingState('applying');
//       if (!manager.state.selectedDevice) {
//         const applyPromise = preference
//           ? applyLocalDevicePreference(
//               manager,
//               [preference].flat(),
//               state.devices,
//             )
//           : applyMutedState(manager, defaultMuted);
//         applyPromise
//           .catch((err) => {
//             console.warn(
//               `Failed to apply ${deviceKey} device preferences`,
//               err,
//             );
//           })
//           .finally(() => setApplyingState('applied'));
//       } else {
//         setApplyingState('applied');
//       }
//     },
//     [
//       applyingState,
//       callingState,
//       defaultMuted,
//       deviceKey,
//       key,
//       manager,
//       state.devices,
//     ],
//   );
//   useEffect(
//     function persist() {
//       if (
//         callingState === CallingState.LEFT ||
//         !state.devices?.length ||
//         applyingState !== 'applied'
//       ) {
//         return;
//       }
//       try {
//         patchLocalDevicePreference(key, deviceKey, {
//           devices: state.devices,
//           selectedDevice: state.selectedDevice,
//           isMute: state.isMute,
//         });
//       } catch (err) {
//         console.warn(`Failed to save ${deviceKey} device preferences`, err);
//       }
//     },
//     [
//       applyingState,
//       callingState,
//       deviceKey,
//       key,
//       state.devices,
//       state.isMute,
//       state.selectedDevice,
//     ],
//   );
// };
const parseLocalDevicePreferences = (key)=>{
    const preferencesStr = window.localStorage.getItem(key);
    let preferences = {};
    if (preferencesStr) {
        try {
            preferences = JSON.parse(preferencesStr);
            if (Object.hasOwn(preferences, 'mic')) {
                // for backwards compatibility
                preferences.microphone = preferences.mic;
            }
        } catch  {
        /* assume preferences are empty */ }
    }
    return preferences;
};
const patchLocalDevicePreference = (key, deviceKey, state)=>{
    const preferences = parseLocalDevicePreferences(key);
    const nextPreference = getSelectedDevicePreference(state.devices, state.selectedDevice);
    const preferenceHistory = [
        preferences[deviceKey] ?? []
    ].flat().filter((p)=>p.selectedDeviceId !== nextPreference.selectedDeviceId && (p.selectedDeviceLabel === '' || p.selectedDeviceLabel !== nextPreference.selectedDeviceLabel));
    window.localStorage.setItem(key, JSON.stringify({
        ...preferences,
        mic: undefined,
        [deviceKey]: [
            {
                ...nextPreference,
                muted: state.isMute
            },
            ...preferenceHistory
        ].slice(0, 3)
    }));
};
const applyLocalDevicePreference = async (manager, preference, devices, enabledInCallType)=>{
    let muted;
    for (const p of preference){
        muted ?? (muted = p.muted);
        if (p.selectedDeviceId === defaultDevice) {
            break;
        }
        const device = devices.find((d)=>d.deviceId === p.selectedDeviceId) ?? devices.find((d)=>d.label === p.selectedDeviceLabel);
        if (device) {
            if (!manager.state.selectedDevice) {
                await manager.select(device.deviceId);
            }
            muted = p.muted;
            break;
        }
    }
    if (typeof muted === 'boolean') {
        await applyMutedState(manager, muted, enabledInCallType);
    }
};
const applyMutedState = async (manager, muted, enabledInCallType)=>{
    if (enabledInCallType && !manager.state.status) {
        await manager[muted ? 'disable' : 'enable']?.();
    }
};
const getSelectedDevicePreference = (devices, selectedDevice)=>({
        selectedDeviceId: selectedDevice || defaultDevice,
        selectedDeviceLabel: devices?.find((d)=>d.deviceId === selectedDevice)?.label ?? ''
    });
const SCROLL_THRESHOLD = 10;
/**
 * Hook which observes element's scroll position and returns text value based on the
 * position of the scrollbar (`top`, `bottom`, `between` and `null` if no scrollbar is available)
 */ const useVerticalScrollPosition = (scrollElement, threshold = SCROLL_THRESHOLD)=>{
    const [scrollPosition, setScrollPosition] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!scrollElement) return;
        const scrollHandler = ()=>{
            const element = scrollElement;
            const hasVerticalScrollbar = element.scrollHeight > element.clientHeight;
            if (!hasVerticalScrollbar) return setScrollPosition(null);
            const isAtTheTop = element.scrollTop <= threshold;
            if (isAtTheTop) return setScrollPosition('top');
            const isAtTheBottom = Math.abs(element.scrollHeight - element.scrollTop - element.clientHeight) <= threshold;
            if (isAtTheBottom) return setScrollPosition('bottom');
            setScrollPosition('between');
        };
        const resizeObserver = new ResizeObserver(scrollHandler);
        resizeObserver.observe(scrollElement);
        scrollElement.addEventListener('scroll', scrollHandler);
        return ()=>{
            scrollElement.removeEventListener('scroll', scrollHandler);
            resizeObserver.disconnect();
        };
    }, [
        scrollElement,
        threshold
    ]);
    return scrollPosition;
};
const useHorizontalScrollPosition = (scrollElement, threshold = SCROLL_THRESHOLD)=>{
    const [scrollPosition, setScrollPosition] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!scrollElement) return;
        const scrollHandler = ()=>{
            const element = scrollElement;
            const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
            if (!hasHorizontalScrollbar) return setScrollPosition(null);
            const isAtTheStart = element.scrollLeft <= threshold;
            if (isAtTheStart) return setScrollPosition('start');
            const isAtTheEnd = Math.abs(element.scrollWidth - element.scrollLeft - element.clientWidth) <= threshold;
            if (isAtTheEnd) return setScrollPosition('end');
            setScrollPosition('between');
        };
        const resizeObserver = new ResizeObserver(scrollHandler);
        resizeObserver.observe(scrollElement);
        scrollElement.addEventListener('scroll', scrollHandler);
        return ()=>{
            scrollElement.removeEventListener('scroll', scrollHandler);
            resizeObserver.disconnect();
        };
    }, [
        scrollElement,
        threshold
    ]);
    return scrollPosition;
};
const useRequestPermission = (permission)=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useHasPermissions } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const hasPermission = useHasPermissions(permission);
    const [isAwaitingPermission, setIsAwaitingPermission] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false); // TODO: load with possibly pending state
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const reset = ()=>setIsAwaitingPermission(false);
        if (hasPermission) reset();
    }, [
        hasPermission
    ]);
    const requestPermission = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        if (hasPermission) return true;
        const canRequestPermission = !!call?.permissionsContext.canRequest(permission);
        if (isAwaitingPermission || !canRequestPermission) return false;
        setIsAwaitingPermission(true);
        try {
            await call?.requestPermissions({
                permissions: [
                    permission
                ]
            });
        } catch (error) {
            setIsAwaitingPermission(false);
            throw new Error(`requestPermission failed: ${error}`);
        }
        return false;
    }, [
        call,
        hasPermission,
        isAwaitingPermission,
        permission
    ]);
    return {
        requestPermission,
        hasPermission,
        canRequestPermission: !!call?.permissionsContext.canRequest(permission),
        isAwaitingPermission
    };
};
/**
 * Utility hook that helps render a list of devices or implement a device selector.
 * Compared to someting like `useCameraState().devices`, it has some handy features:
 * 1. Adds the "Default" device to the list if applicable (either the user did not
 * select a device, or a previously selected device is no longer available).
 * 2. Maps the device list to a format more suitable for rendering.
 */ function useDeviceList(devices, selectedDeviceId) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>{
        let selectedDeviceInfo = null;
        let selectedIndex = null;
        const deviceList = devices.map((d, i)=>{
            const isSelected = d.deviceId === selectedDeviceId;
            const device = {
                deviceId: d.deviceId,
                label: d.label,
                isSelected
            };
            if (isSelected) {
                selectedDeviceInfo = device;
                selectedIndex = i;
            }
            return device;
        });
        if (selectedDeviceInfo === null || selectedIndex === null) {
            const defaultDevice = {
                deviceId: 'default',
                label: t('Default'),
                isSelected: true
            };
            selectedDeviceInfo = defaultDevice;
            selectedIndex = 0;
            deviceList.unshift(defaultDevice);
        }
        return {
            deviceList,
            selectedDeviceInfo,
            selectedIndex
        };
    }, [
        devices,
        selectedDeviceId,
        t
    ]);
}
var MenuVisualType;
(function(MenuVisualType) {
    MenuVisualType["PORTAL"] = "portal";
    MenuVisualType["MENU"] = "menu";
})(MenuVisualType || (MenuVisualType = {}));
/**
 * Used to provide utility APIs to the components rendered inside the portal.
 */ const MenuContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])({});
/**
 * Access to the closes MenuContext.
 */ const useMenuContext = ()=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(MenuContext);
};
const MenuPortal = ({ children, refs })=>{
    const portalId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>`str-video-portal-${Math.random().toString(36).substring(2, 9)}`, []);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                id: portalId,
                className: "str-video__portal"
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FloatingOverlay"], {
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FloatingPortal"], {
                    id: portalId,
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                        className: "str-video__portal-content",
                        ref: refs.setFloating,
                        children: children
                    })
                })
            })
        ]
    });
};
const MenuToggle = ({ ToggleButton, placement = 'top-start', strategy = 'absolute', offset, visualType = MenuVisualType.MENU, children, onToggle })=>{
    const [menuShown, setMenuShown] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const toggleHandler = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(onToggle);
    toggleHandler.current = onToggle;
    const { floating, domReference, refs, x, y } = useFloatingUIPreset({
        placement,
        strategy,
        offset
    });
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const parentDocument = domReference?.ownerDocument;
        const handleClick = (event)=>{
            if (!floating && domReference?.contains(event.target)) {
                setMenuShown(true);
                toggleHandler.current?.(true);
            } else if (floating && !floating?.contains(event.target)) {
                setMenuShown(false);
                toggleHandler.current?.(false);
            }
        };
        const handleKeyDown = (event)=>{
            if (event.key && // key can be undefined in some browsers
            event.key.toLowerCase() === 'escape' && !event.altKey && !event.ctrlKey) {
                setMenuShown(false);
                toggleHandler.current?.(false);
            }
        };
        parentDocument?.addEventListener('click', handleClick, {
            capture: true
        });
        parentDocument?.addEventListener('keydown', handleKeyDown);
        return ()=>{
            parentDocument?.removeEventListener('click', handleClick, {
                capture: true
            });
            parentDocument?.removeEventListener('keydown', handleKeyDown);
        };
    }, [
        floating,
        domReference
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            menuShown && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuContext.Provider, {
                value: {
                    close: ()=>setMenuShown(false)
                },
                children: visualType === MenuVisualType.PORTAL ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuPortal, {
                    refs: refs,
                    children: children
                }) : visualType === MenuVisualType.MENU ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                    className: "str-video__menu-container",
                    ref: refs.setFloating,
                    style: {
                        position: strategy,
                        top: y ?? 0,
                        left: x ?? 0,
                        overflowY: 'auto'
                    },
                    role: "menu",
                    children: children
                }) : null
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ToggleButton, {
                menuShown: menuShown,
                ref: refs.setReference
            })
        ]
    });
};
const GenericMenu = ({ children, onItemClick })=>{
    const ref = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("ul", {
        className: "str-video__generic-menu",
        ref: ref,
        onClick: (e)=>{
            if (onItemClick && e.target !== ref.current && ref.current?.contains(e.target)) {
                onItemClick(e);
            }
        },
        children: children
    });
};
const GenericMenuButtonItem = ({ children, ...rest })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("li", {
        className: "str-video__generic-menu--item",
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
            ...rest,
            children: children
        })
    });
};
const Icon = ({ className, icon })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__icon', icon && `str-video__icon--${icon}`, className)
    });
function usePictureInPictureState(videoElement) {
    const [isPiP, setIsPiP] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(document.pictureInPictureElement === videoElement);
    if (!videoElement && isPiP) setIsPiP(false);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!videoElement) return;
        const handlePiP = ()=>{
            setIsPiP(document.pictureInPictureElement === videoElement);
        };
        videoElement.addEventListener('enterpictureinpicture', handlePiP);
        videoElement.addEventListener('leavepictureinpicture', handlePiP);
        return ()=>{
            videoElement.removeEventListener('enterpictureinpicture', handlePiP);
            videoElement.removeEventListener('leavepictureinpicture', handlePiP);
        };
    }, [
        videoElement
    ]);
    return isPiP;
}
const ParticipantActionsContextMenu = ()=>{
    const { participant, participantViewElement, videoElement } = useParticipantViewContext();
    const [fullscreenModeOn, setFullscreenModeOn] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(!!document.fullscreenElement);
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const isPiP = usePictureInPictureState(videoElement ?? undefined);
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { pin, sessionId, userId } = participant;
    const hasAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasAudio"])(participant);
    const hasVideoTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasVideo"])(participant);
    const hasScreenShareTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"])(participant);
    const hasScreenShareAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShareAudio"])(participant);
    const blockUser = ()=>call?.blockUser(userId);
    const kickUser = ()=>call?.kickUser({
            user_id: userId
        });
    const muteAudio = ()=>call?.muteUser(userId, 'audio');
    const muteVideo = ()=>call?.muteUser(userId, 'video');
    const muteScreenShare = ()=>call?.muteUser(userId, 'screenshare');
    const muteScreenShareAudio = ()=>call?.muteUser(userId, 'screenshare_audio');
    const grantPermission = (permission)=>()=>{
            call?.updateUserPermissions({
                user_id: userId,
                grant_permissions: [
                    permission
                ]
            });
        };
    const revokePermission = (permission)=>()=>{
            call?.updateUserPermissions({
                user_id: userId,
                revoke_permissions: [
                    permission
                ]
            });
        };
    const toggleParticipantPin = ()=>{
        if (pin) {
            call?.unpin(sessionId);
        } else {
            call?.pin(sessionId);
        }
    };
    const pinForEveryone = ()=>{
        call?.pinForEveryone({
            user_id: userId,
            session_id: sessionId
        }).catch((err)=>{
            console.error(`Failed to pin participant ${userId}`, err);
        });
    };
    const unpinForEveryone = ()=>{
        call?.unpinForEveryone({
            user_id: userId,
            session_id: sessionId
        }).catch((err)=>{
            console.error(`Failed to unpin participant ${userId}`, err);
        });
    };
    const toggleFullscreenMode = ()=>{
        if (!fullscreenModeOn) {
            return participantViewElement?.requestFullscreen().catch(console.error);
        }
        return document.exitFullscreen().catch(console.error);
    };
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // handles the case when fullscreen mode is toggled externally,
        // e.g., by pressing ESC key or some other keyboard shortcut
        const handleFullscreenChange = ()=>{
            setFullscreenModeOn(!!document.fullscreenElement);
        };
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        return ()=>{
            document.removeEventListener('fullscreenchange', handleFullscreenChange);
        };
    }, []);
    const togglePictureInPicture = ()=>{
        if (videoElement && !isPiP) {
            return videoElement.requestPictureInPicture().catch(console.error);
        }
        return document.exitPictureInPicture().catch(console.error);
    };
    const { close } = useMenuContext() || {};
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenu, {
        onItemClick: close,
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                onClick: toggleParticipantPin,
                disabled: pin && !pin.isLocalPin,
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        icon: "pin"
                    }),
                    pin ? t('Unpin') : t('Pin')
                ]
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].PIN_FOR_EVERYONE
                ],
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                        onClick: pinForEveryone,
                        disabled: pin && !pin.isLocalPin,
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                icon: "pin"
                            }),
                            t('Pin for everyone')
                        ]
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                        onClick: unpinForEveryone,
                        disabled: !pin || pin.isLocalPin,
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                icon: "pin"
                            }),
                            t('Unpin for everyone')
                        ]
                    })
                ]
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].BLOCK_USERS
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                    onClick: blockUser,
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                            icon: "not-allowed"
                        }),
                        t('Block')
                    ]
                })
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].KICK_USER
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                    onClick: kickUser,
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                            icon: "kick-user"
                        }),
                        t('Kick')
                    ]
                })
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].MUTE_USERS
                ],
                children: [
                    hasVideoTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                        onClick: muteVideo,
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                icon: "camera-off-outline"
                            }),
                            t('Turn off video')
                        ]
                    }),
                    hasScreenShareTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                        onClick: muteScreenShare,
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                icon: "screen-share-off"
                            }),
                            t('Turn off screen share')
                        ]
                    }),
                    hasAudioTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                        onClick: muteAudio,
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                icon: "no-audio"
                            }),
                            t('Mute audio')
                        ]
                    }),
                    hasScreenShareAudioTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(GenericMenuButtonItem, {
                        onClick: muteScreenShareAudio,
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                icon: "no-audio"
                            }),
                            t('Mute screen share audio')
                        ]
                    })
                ]
            }),
            participantViewElement && typeof participantViewElement.requestFullscreen !== 'undefined' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                onClick: toggleFullscreenMode,
                children: t('{{ direction }} fullscreen', {
                    direction: fullscreenModeOn ? t('Leave') : t('Enter')
                })
            }),
            videoElement && document.pictureInPictureEnabled && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                onClick: togglePictureInPicture,
                children: t('{{ direction }} picture-in-picture', {
                    direction: isPiP ? t('Leave') : t('Enter')
                })
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].UPDATE_CALL_PERMISSIONS
                ],
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                        onClick: grantPermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO),
                        children: t('Allow audio')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                        onClick: grantPermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO),
                        children: t('Allow video')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                        onClick: grantPermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE),
                        children: t('Allow screen sharing')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                        onClick: revokePermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO),
                        children: t('Disable audio')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                        onClick: revokePermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO),
                        children: t('Disable video')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                        onClick: revokePermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE),
                        children: t('Disable screen sharing')
                    })
                ]
            })
        ]
    });
};
const isComponentType = (elementOrComponent)=>{
    return elementOrComponent === null ? false : !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["isValidElement"])(elementOrComponent);
};
const chunk = (array, size)=>{
    const chunkCount = Math.ceil(array.length / size);
    return Array.from({
        length: chunkCount
    }, (_, index)=>array.slice(size * index, size * index + size));
};
const applyElementToRef = (ref, element)=>{
    if (!ref) return;
    if (typeof ref === 'function') return ref(element);
    ref.current = element;
};
/**
 * @description Extends video element with `stream` property
 * (`srcObject`) to reactively handle stream changes
 */ const BaseVideo = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function BaseVideo({ stream, ...rest }, ref) {
    const [videoElement, setVideoElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!videoElement || !stream) return;
        if (stream === videoElement.srcObject) return;
        videoElement.srcObject = stream;
        if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Browsers"].isSafari() || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Browsers"].isFirefox()) {
            // Firefox and Safari have some timing issue
            setTimeout(()=>{
                videoElement.srcObject = stream;
                videoElement.play().catch((e)=>{
                    console.error(`Failed to play stream`, e);
                });
            }, 0);
        }
        return ()=>{
            videoElement.pause();
            videoElement.srcObject = null;
        };
    }, [
        stream,
        videoElement
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("video", {
        autoPlay: true,
        playsInline: true,
        ...rest,
        ref: (element)=>{
            applyElementToRef(ref, element);
            setVideoElement(element);
        }
    });
});
const BaseVideoPlaceholder = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function DefaultVideoPlaceholder({ participant, style, children }, ref) {
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const name = participant.name || participant.userId;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__video-placeholder",
        style: style,
        ref: ref,
        children: [
            (!participant.image || error) && (name ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(InitialsFallback, {
                name: name
            }) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__video-placeholder__no-video-label",
                children: children
            })),
            participant.image && !error && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("img", {
                onError: ()=>setError(true),
                alt: name,
                className: "str-video__video-placeholder__avatar",
                src: participant.image
            })
        ]
    });
});
const InitialsFallback = (props)=>{
    const { name } = props;
    const initials = name.split(' ').slice(0, 2).map((n)=>n[0]).join('');
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__video-placeholder__initials-fallback",
        children: initials
    });
};
const DefaultVideoPlaceholder = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function DefaultVideoPlaceholder(props, ref) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BaseVideoPlaceholder, {
        ref: ref,
        ...props,
        children: t('Video is disabled')
    });
});
const DefaultPictureInPicturePlaceholder = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function DefaultPictureInPicturePlaceholder(props, ref) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BaseVideoPlaceholder, {
        ref: ref,
        ...props,
        children: t('Video is playing in a popup')
    });
});
const Video$1 = ({ enabled = true, mirror, trackType, participant, className, VideoPlaceholder = DefaultVideoPlaceholder, PictureInPicturePlaceholder = DefaultPictureInPicturePlaceholder, refs, ...rest })=>{
    const { sessionId, videoStream, screenShareStream, viewportVisibilityState, isLocalParticipant, userId } = participant;
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const [videoElement, setVideoElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    // start with true, will flip once the video starts playing
    const [isVideoPaused, setIsVideoPaused] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(true);
    const [isWideMode, setIsWideMode] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(true);
    const isPiP = usePictureInPictureState(videoElement ?? undefined);
    const stream = trackType === 'videoTrack' ? videoStream : trackType === 'screenShareTrack' ? screenShareStream : undefined;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useLayoutEffect"])(()=>{
        if (!call || !videoElement || trackType === 'none') return;
        const cleanup = call.bindVideoElement(videoElement, sessionId, trackType);
        return ()=>{
            cleanup?.();
        };
    }, [
        call,
        trackType,
        sessionId,
        videoElement
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!stream || !videoElement) return;
        const [track] = stream.getVideoTracks();
        if (!track) return;
        const handlePlayPause = ()=>{
            setIsVideoPaused(videoElement.paused);
            const { width = 0, height = 0 } = track.getSettings();
            setIsWideMode(width >= height);
        };
        // playback may have started before we had a chance to
        // attach the 'play/pause' event listener, so we set the state
        // here to make sure it's in sync
        setIsVideoPaused(videoElement.paused);
        videoElement.addEventListener('play', handlePlayPause);
        videoElement.addEventListener('pause', handlePlayPause);
        track.addEventListener('unmute', handlePlayPause);
        return ()=>{
            videoElement.removeEventListener('play', handlePlayPause);
            videoElement.removeEventListener('pause', handlePlayPause);
            track.removeEventListener('unmute', handlePlayPause);
            // reset the 'pause' state once we unmount the video element
            setIsVideoPaused(true);
        };
    }, [
        stream,
        videoElement
    ]);
    if (!call) return null;
    const isPublishingTrack = trackType === 'videoTrack' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasVideo"])(participant) : trackType === 'screenShareTrack' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"])(participant) : false;
    const isInvisible = trackType === 'none' || viewportVisibilityState?.[trackType] === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["VisibilityState"].INVISIBLE;
    const hasNoVideoOrInvisible = !enabled || !isPublishingTrack || isInvisible || (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasPausedTrack"])(participant, trackType);
    const mirrorVideo = mirror === undefined ? isLocalParticipant && trackType === 'videoTrack' : mirror;
    const isScreenShareTrack = trackType === 'screenShareTrack';
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            !hasNoVideoOrInvisible && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("video", {
                ...rest,
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__video', className, {
                    'str-video__video--not-playing': isVideoPaused,
                    'str-video__video--tall': !isWideMode,
                    'str-video__video--mirror': mirrorVideo,
                    'str-video__video--screen-share': isScreenShareTrack
                }),
                "data-user-id": userId,
                "data-session-id": sessionId,
                ref: (element)=>{
                    setVideoElement(element);
                    refs?.setVideoElement?.(element);
                }
            }),
            isPiP && PictureInPicturePlaceholder && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(PictureInPicturePlaceholder, {
                style: {
                    position: 'absolute'
                },
                participant: participant
            }),
            (hasNoVideoOrInvisible || isVideoPaused) && VideoPlaceholder && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(VideoPlaceholder, {
                style: {
                    position: 'absolute'
                },
                participant: participant,
                ref: refs?.setVideoPlaceholderElement
            })
        ]
    });
};
Video$1.displayName = 'Video';
const useTrackElementVisibility = ({ trackedElement, dynascaleManager: propsDynascaleManager, sessionId, trackType })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const manager = propsDynascaleManager ?? call?.dynascaleManager;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!trackedElement || !manager || !call || trackType === 'none') return;
        const unobserve = manager.trackElementVisibility(trackedElement, sessionId, trackType);
        return ()=>{
            unobserve();
        };
    }, [
        trackedElement,
        manager,
        call,
        sessionId,
        trackType
    ]);
};
const Avatar = ({ imageSrc, name, style, className, ...rest })=>{
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            (!imageSrc || error) && name && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(AvatarFallback, {
                className: className,
                style: style,
                names: [
                    name
                ]
            }),
            imageSrc && !error && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("img", {
                onError: ()=>setError(true),
                alt: "avatar",
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__avatar', className),
                src: imageSrc,
                style: style,
                ...rest
            })
        ]
    });
};
const AvatarFallback = ({ className, names, style })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__avatar--initials-fallback', className),
        style: style,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
            children: [
                names[0][0],
                names[1]?.[0]
            ]
        })
    });
};
/**
 * The context for the background filters.
 */ const BackgroundFiltersContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])(undefined);
/**
 * A hook to access the background filters context API.
 */ const useBackgroundFilters = ()=>{
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(BackgroundFiltersContext);
    if (!context) {
        throw new Error('useBackgroundFilters must be used within a BackgroundFiltersProvider');
    }
    return context;
};
/**
 * A provider component that enables the use of background filters in your app.
 *
 * Please make sure you have the `@stream-io/video-filters-web` package installed
 * in your project before using this component.
 */ const BackgroundFiltersProvider = (props)=>{
    const { children, backgroundImages = [], backgroundFilter: bgFilterFromProps = undefined, backgroundImage: bgImageFromProps = undefined, backgroundBlurLevel: bgBlurLevelFromProps = undefined, tfFilePath, modelFilePath, basePath, onError, forceSafariSupport, forceMobileSupport } = props;
    const [backgroundFilter, setBackgroundFilter] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(bgFilterFromProps);
    const [backgroundImage, setBackgroundImage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(bgImageFromProps);
    const [backgroundBlurLevel, setBackgroundBlurLevel] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(bgBlurLevelFromProps);
    const applyBackgroundImageFilter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((imageUrl)=>{
        setBackgroundFilter('image');
        setBackgroundImage(imageUrl);
    }, []);
    const applyBackgroundBlurFilter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((blurLevel = 'high')=>{
        setBackgroundFilter('blur');
        setBackgroundBlurLevel(blurLevel);
    }, []);
    const disableBackgroundFilter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        setBackgroundFilter(undefined);
        setBackgroundImage(undefined);
        setBackgroundBlurLevel(undefined);
    }, []);
    const [isSupported, setIsSupported] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$filters$2d$web$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["isPlatformSupported"])({
            forceSafariSupport,
            forceMobileSupport
        }).then(setIsSupported);
    }, [
        forceMobileSupport,
        forceSafariSupport
    ]);
    const [tfLite, setTfLite] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // don't try to load TFLite if the platform is not supported
        if (!isSupported) return;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$filters$2d$web$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["loadTFLite"])({
            basePath,
            modelFilePath,
            tfFilePath
        }).then(setTfLite).catch((err)=>console.error('Failed to load TFLite', err));
    }, [
        basePath,
        isSupported,
        modelFilePath,
        tfFilePath
    ]);
    const handleError = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((error)=>{
        console.warn('[filters] Filter encountered an error and will be disabled');
        disableBackgroundFilter();
        onError?.(error);
    }, [
        disableBackgroundFilter,
        onError
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(BackgroundFiltersContext.Provider, {
        value: {
            isSupported,
            isReady: !!tfLite,
            backgroundImage,
            backgroundBlurLevel,
            backgroundFilter,
            disableBackgroundFilter,
            applyBackgroundBlurFilter,
            applyBackgroundImageFilter,
            backgroundImages,
            tfFilePath,
            modelFilePath,
            basePath,
            onError: handleError
        },
        children: [
            children,
            tfLite && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BackgroundFilters, {
                tfLite: tfLite
            })
        ]
    });
};
const BackgroundFilters = (props)=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { children, start } = useRenderer(props.tfLite, call);
    const { backgroundFilter, onError } = useBackgroundFilters();
    const handleErrorRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(undefined);
    handleErrorRef.current = onError;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call || !backgroundFilter) return;
        const { unregister } = call.camera.registerFilter((ms)=>start(ms, (error)=>handleErrorRef.current?.(error)));
        return ()=>{
            unregister().catch((err)=>console.warn(`Can't unregister filter`, err));
        };
    }, [
        backgroundFilter,
        call,
        start
    ]);
    return children;
};
const useRenderer = (tfLite, call)=>{
    const { backgroundFilter, backgroundBlurLevel, backgroundImage } = useBackgroundFilters();
    const videoRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const canvasRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const bgImageRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const [videoSize, setVideoSize] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])({
        width: 1920,
        height: 1080
    });
    const start = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((ms, onError)=>{
        let outputStream;
        let renderer;
        const output = new Promise((resolve, reject)=>{
            if (!backgroundFilter) {
                reject(new Error('No filter specified'));
                return;
            }
            const videoEl = videoRef.current;
            const canvasEl = canvasRef.current;
            const bgImageEl = bgImageRef.current;
            if (!videoEl || !canvasEl || backgroundImage && !bgImageEl) {
                // You should start renderer in effect or event handlers
                reject(new Error('Renderer started before elements are ready'));
                return;
            }
            videoEl.srcObject = ms;
            videoEl.play().then(()=>{
                const [track] = ms.getVideoTracks();
                if (!track) {
                    reject(new Error('No video tracks in input media stream'));
                    return;
                }
                const trackSettings = track.getSettings();
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$dom$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["flushSync"])(()=>setVideoSize({
                        width: trackSettings.width ?? 0,
                        height: trackSettings.height ?? 0
                    }));
                call?.tracer.trace('backgroundFilters.enable', {
                    backgroundFilter,
                    backgroundBlurLevel,
                    backgroundImage
                });
                renderer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$filters$2d$web$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createRenderer"])(tfLite, videoEl, canvasEl, {
                    backgroundFilter,
                    backgroundBlurLevel,
                    backgroundImage: bgImageEl ?? undefined
                }, onError);
                outputStream = canvasEl.captureStream();
                resolve(outputStream);
            }, ()=>{
                reject(new Error('Could not play the source video stream'));
            });
        });
        return {
            output,
            stop: ()=>{
                call?.tracer.trace('backgroundFilters.disable', null);
                renderer?.dispose();
                if (videoRef.current) videoRef.current.srcObject = null;
                if (outputStream) (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["disposeOfMediaStream"])(outputStream);
            }
        };
    }, [
        backgroundBlurLevel,
        backgroundFilter,
        backgroundImage,
        call?.tracer,
        tfLite
    ]);
    const children = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__background-filters",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("video", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__background-filters__video', videoSize.height > videoSize.width && 'str-video__background-filters__video--tall'),
                ref: videoRef,
                playsInline: true,
                muted: true,
                controls: false,
                ...videoSize
            }),
            backgroundImage && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("img", {
                className: "str-video__background-filters__background-image",
                alt: "Background",
                ref: bgImageRef,
                crossOrigin: "anonymous",
                src: backgroundImage,
                ...videoSize
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("canvas", {
                className: "str-video__background-filters__target-canvas",
                ...videoSize,
                ref: canvasRef
            })
        ]
    });
    return {
        start,
        children
    };
};
const IconButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function IconButton(props, ref) {
    const { icon, enabled, variant, onClick, className, ...rest } = props;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__call-controls__button', className, {
            [`str-video__call-controls__button--variant-${variant}`]: variant,
            'str-video__call-controls__button--enabled': enabled
        }),
        onClick: (e)=>{
            e.preventDefault();
            onClick?.(e);
        },
        ref: ref,
        ...rest,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
            icon: icon
        })
    });
});
const CompositeButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function CompositeButton({ disabled, caption, children, className, active, Menu, menuPlacement, menuOffset, title, ToggleMenuButton = DefaultToggleMenuButton, variant, onClick, onMenuToggle, ...restButtonProps }, ref) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__composite-button', className, {
            'str-video__composite-button--caption': caption,
            'str-video__composite-button--menu': Menu
        }),
        title: title,
        ref: ref,
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__composite-button__button-group', {
                    'str-video__composite-button__button-group--active': active,
                    'str-video__composite-button__button-group--active-primary': active && variant === 'primary',
                    'str-video__composite-button__button-group--active-secondary': active && variant === 'secondary',
                    'str-video__composite-button__button-group--disabled': disabled
                }),
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
                        type: "button",
                        className: "str-video__composite-button__button",
                        onClick: (e)=>{
                            e.preventDefault();
                            onClick?.(e);
                        },
                        disabled: disabled,
                        ...restButtonProps,
                        children: children
                    }),
                    Menu && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
                        offset: menuOffset,
                        placement: menuPlacement,
                        ToggleButton: ToggleMenuButton,
                        onToggle: onMenuToggle,
                        children: isComponentType(Menu) ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Menu, {}) : Menu
                    })
                ]
            }),
            caption && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__composite-button__caption",
                children: caption
            })
        ]
    });
});
const DefaultToggleMenuButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function DefaultToggleMenuButton({ menuShown }, ref) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__menu-toggle-button', {
            'str-video__menu-toggle-button--active': menuShown
        }),
        icon: menuShown ? 'caret-down' : 'caret-up',
        ref: ref
    });
});
const TextButton = ({ children, ...rest })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
        ...rest,
        className: "str-video__text-button",
        children: children
    });
};
const AcceptCallButton = ({ disabled, onAccept, onClick })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const handleClick = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (e)=>{
        if (onClick) {
            onClick(e);
        } else if (call) {
            await call.join();
            onAccept?.();
        }
    }, [
        onClick,
        onAccept,
        call
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        disabled: disabled,
        icon: "call-accept",
        variant: "success",
        "data-testid": "accept-call-button",
        onClick: handleClick
    });
};
const Notification = (props)=>{
    const { isVisible, message, children, visibilityTimeout, resetIsVisible, placement = 'top', iconClassName = 'str-video__notification__icon', close } = props;
    const { refs, x, y, strategy } = useFloatingUIPreset({
        placement,
        strategy: 'absolute'
    });
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!isVisible || !visibilityTimeout || !resetIsVisible) return;
        const timeout = setTimeout(()=>{
            resetIsVisible();
        }, visibilityTimeout);
        return ()=>clearTimeout(timeout);
    }, [
        isVisible,
        resetIsVisible,
        visibilityTimeout
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        ref: refs.setReference,
        children: [
            isVisible && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__notification",
                ref: refs.setFloating,
                style: {
                    position: strategy,
                    top: y ?? 0,
                    left: x ?? 0,
                    overflowY: 'auto'
                },
                children: [
                    iconClassName && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("i", {
                        className: iconClassName
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                        className: "str-video__notification__message",
                        children: message
                    }),
                    close ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("i", {
                        className: "str-video__icon str-video__icon--close str-video__notification__close",
                        onClick: close
                    }) : null
                ]
            }),
            children
        ]
    });
};
const PermissionNotification = (props)=>{
    const { permission, isAwaitingApproval, messageApproved, messageAwaitingApproval, messageRevoked, visibilityTimeout = 3500, children } = props;
    const { useHasPermissions } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const hasPermission = useHasPermissions(permission);
    const prevHasPermission = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(hasPermission);
    const [showNotification, setShowNotification] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (prevHasPermission.current === hasPermission) return;
        if (hasPermission) {
            setShowNotification('granted');
            prevHasPermission.current = true;
        } else {
            setShowNotification('revoked');
            prevHasPermission.current = false;
        }
    }, [
        hasPermission
    ]);
    const resetIsVisible = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>setShowNotification(undefined), []);
    if (isAwaitingApproval) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Notification, {
            isVisible: isAwaitingApproval && !hasPermission,
            message: messageAwaitingApproval,
            children: children
        });
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Notification, {
        isVisible: !!showNotification,
        visibilityTimeout: visibilityTimeout,
        resetIsVisible: resetIsVisible,
        message: showNotification === 'granted' ? messageApproved : messageRevoked,
        children: children
    });
};
const SpeakingWhileMutedNotification = ({ children, text, placement })=>{
    const { useMicrophoneState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { isSpeakingWhileMuted } = useMicrophoneState();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const message = text ?? t('You are muted. Unmute to speak.');
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Notification, {
        message: message,
        isVisible: isSpeakingWhileMuted,
        placement: placement || 'top-start',
        children: children
    });
};
const RecordingInProgressNotification = ({ children, text })=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { isCallRecordingInProgress } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useToggleCallRecording"])();
    const [isVisible, setVisible] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const message = text ?? t('Recording in progress...');
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (isCallRecordingInProgress) {
            setVisible(true);
        } else {
            setVisible(false);
        }
    }, [
        isCallRecordingInProgress
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Notification, {
        message: message,
        iconClassName: "str-video__icon str-video__icon--recording-on",
        isVisible: isVisible,
        placement: "top-start",
        close: ()=>setVisible(false),
        children: children
    });
};
const LoadingIndicator = ({ className, type = 'spinner', text, tooltip })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__loading-indicator', className),
        title: tooltip,
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__loading-indicator__icon', type)
            }),
            text && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("p", {
                className: "str-video__loading-indicator-text",
                children: text
            })
        ]
    });
};
const Tooltip = ({ children, referenceElement, tooltipClassName, tooltipPlacement = 'top', visible = false })=>{
    const arrowRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const { refs, x, y, strategy, context } = useFloatingUIPreset({
        placement: tooltipPlacement,
        strategy: 'absolute',
        middleware: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["arrow"])({
                element: arrowRef
            })
        ]
    });
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        refs.setReference(referenceElement);
    }, [
        referenceElement,
        refs
    ]);
    if (!visible) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__tooltip', tooltipClassName),
        ref: refs.setFloating,
        style: {
            position: strategy,
            top: y ?? 0,
            left: x ?? 0
        },
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FloatingArrow"], {
                ref: arrowRef,
                context: context,
                fill: "var(--str-video__tooltip--background-color)"
            }),
            children
        ]
    });
};
const useEnterLeaveHandlers = ({ onMouseEnter, onMouseLeave } = {})=>{
    const [tooltipVisible, setTooltipVisible] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const handleMouseEnter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((e)=>{
        setTooltipVisible(true);
        onMouseEnter?.(e);
    }, [
        onMouseEnter
    ]);
    const handleMouseLeave = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((e)=>{
        setTooltipVisible(false);
        onMouseLeave?.(e);
    }, [
        onMouseLeave
    ]);
    return {
        handleMouseEnter,
        handleMouseLeave,
        tooltipVisible
    };
};
// todo: duplicate of CallParticipantList.tsx#MediaIndicator - refactor to a single component
const WithTooltip = ({ title, tooltipClassName, tooltipPlacement, tooltipDisabled, ...props })=>{
    const { handleMouseEnter, handleMouseLeave, tooltipVisible } = useEnterLeaveHandlers();
    const [tooltipAnchor, setTooltipAnchor] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const tooltipActuallyVisible = !tooltipDisabled && Boolean(title) && tooltipVisible;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Tooltip, {
                referenceElement: tooltipAnchor,
                visible: tooltipActuallyVisible,
                tooltipClassName: tooltipClassName,
                tooltipPlacement: tooltipPlacement,
                children: title || ''
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                ref: setTooltipAnchor,
                onMouseEnter: handleMouseEnter,
                onMouseLeave: handleMouseLeave,
                ...props
            })
        ]
    });
};
const RecordEndConfirmation = ()=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { toggleCallRecording, isAwaitingResponse } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useToggleCallRecording"])();
    const { close } = useMenuContext();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__end-recording__confirmation",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__end-recording__header",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        icon: "recording-on"
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("h2", {
                        className: "str-video__end-recording__heading",
                        children: t('End recording')
                    })
                ]
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("p", {
                className: "str-video__end-recording__description",
                children: t('Are you sure you want end the recording?')
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__end-recording__actions",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
                        variant: "secondary",
                        onClick: close,
                        children: t('Cancel')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
                        variant: "primary",
                        onClick: toggleCallRecording,
                        children: isAwaitingResponse ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LoadingIndicator, {}) : t('End recording')
                    })
                ]
            })
        ]
    });
};
const ToggleEndRecordingMenuButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleEndRecordingMenuButton(props, ref) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
        ref: ref,
        active: true,
        variant: "secondary",
        "data-testid": "recording-stop-button",
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
            icon: "recording-off"
        })
    });
});
const RecordCallConfirmationButton = ({ caption })=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useToggleCallRecording"])();
    if (isCallRecordingInProgress) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
            requiredGrants: [
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].START_RECORD_CALL,
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].STOP_RECORD_CALL
            ],
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
                ToggleButton: ToggleEndRecordingMenuButton,
                visualType: MenuVisualType.PORTAL,
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(RecordEndConfirmation, {})
            })
        });
    }
    const title = isAwaitingResponse ? t('Waiting for recording to start...') : caption ?? t('Record call');
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
        requiredGrants: [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].START_RECORD_CALL,
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].STOP_RECORD_CALL
        ],
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
            title: title,
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
                active: isCallRecordingInProgress,
                caption: caption,
                variant: "secondary",
                "data-testid": "recording-start-button",
                onClick: isAwaitingResponse ? undefined : toggleCallRecording,
                children: isAwaitingResponse ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LoadingIndicator, {}) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                    icon: "recording-off"
                })
            })
        })
    });
};
const RecordCallButton = ({ caption })=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useToggleCallRecording"])();
    let title = caption ?? t('Record call');
    if (isAwaitingResponse) {
        title = isCallRecordingInProgress ? t('Waiting for recording to stop...') : t('Waiting for recording to start...');
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
        requiredGrants: [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].START_RECORD_CALL,
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].STOP_RECORD_CALL
        ],
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
            active: isCallRecordingInProgress,
            caption: caption,
            variant: "secondary",
            "data-testid": isCallRecordingInProgress ? 'recording-stop-button' : 'recording-start-button',
            title: title,
            onClick: isAwaitingResponse ? undefined : toggleCallRecording,
            children: isAwaitingResponse ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LoadingIndicator, {}) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                icon: isCallRecordingInProgress ? 'recording-on' : 'recording-off'
            })
        })
    });
};
const defaultEmojiReactionMap = {
    ':like:': '',
    ':raise-hand:': '',
    ':fireworks:': '',
    ':dislike:': '',
    ':heart:': '',
    ':smile:': ''
};
const Reaction = ({ participant: { reaction, sessionId }, hideAfterTimeoutInMs = 5500, emojiReactionMap = defaultEmojiReactionMap })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call || !reaction) return;
        const timeoutId = setTimeout(()=>{
            call.resetReaction(sessionId);
        }, hideAfterTimeoutInMs);
        return ()=>{
            clearTimeout(timeoutId);
        };
    }, [
        call,
        hideAfterTimeoutInMs,
        reaction,
        sessionId
    ]);
    if (!reaction) return null;
    const { emoji_code: emojiCode } = reaction;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__reaction",
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
            className: "str-video__reaction__emoji",
            children: emojiCode && emojiReactionMap[emojiCode]
        })
    });
};
const defaultReactions = [
    {
        type: 'reaction',
        emoji_code: ':like:'
    },
    {
        // TODO OL: use `prompt` type?
        type: 'raised-hand',
        emoji_code: ':raise-hand:'
    },
    {
        type: 'reaction',
        emoji_code: ':fireworks:'
    },
    {
        type: 'reaction',
        emoji_code: ':dislike:'
    },
    {
        type: 'reaction',
        emoji_code: ':heart:'
    },
    {
        type: 'reaction',
        emoji_code: ':smile:'
    }
];
const ReactionsButton = ({ reactions = defaultReactions })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
        requiredGrants: [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].CREATE_REACTION
        ],
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
            placement: "top",
            ToggleButton: ToggleReactionsMenuButton,
            visualType: MenuVisualType.MENU,
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DefaultReactionsMenu, {
                reactions: reactions
            })
        })
    });
};
const ToggleReactionsMenuButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleReactionsMenuButton({ menuShown }, ref) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        title: t('Reactions'),
        tooltipDisabled: menuShown,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
            ref: ref,
            active: menuShown,
            variant: "primary",
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                icon: "reactions"
            })
        })
    });
});
const DefaultReactionsMenu = ({ reactions, layout = 'horizontal' })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { close } = useMenuContext();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__reactions-menu', {
            'str-video__reactions-menu--horizontal': layout === 'horizontal',
            'str-video__reactions-menu--vertical': layout === 'vertical'
        }),
        children: reactions.map((reaction)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
                type: "button",
                className: "str-video__reactions-menu__button",
                onClick: ()=>{
                    call?.sendReaction(reaction);
                    close?.();
                },
                children: reaction.emoji_code && defaultEmojiReactionMap[reaction.emoji_code]
            }, reaction.emoji_code))
    });
};
/**
 * Wraps an event handler, silencing and logging exceptions (excluding the NotAllowedError
 * DOMException, which is a normal situation handled by the SDK)
 *
 * @param props component props, including the onError callback
 * @param handler event handler to wrap
 */ const createCallControlHandler = (props, handler)=>{
    return async ()=>{
        try {
            await handler();
        } catch (error) {
            if (props.onError) {
                props.onError(error);
                return;
            }
            if (!isNotAllowedError(error)) {
                console.error('Call control handler failed', error);
            }
        }
    };
};
function isNotAllowedError(error) {
    return error instanceof DOMException && error.name === 'NotAllowedError';
}
const ScreenShareButton = (props)=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { caption, optimisticUpdates } = props;
    const { useHasOngoingScreenShare, useScreenShareState, useCallSettings } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const isSomeoneScreenSharing = useHasOngoingScreenShare();
    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE);
    const callSettings = useCallSettings();
    const isScreenSharingAllowed = callSettings?.screensharing.enabled;
    const { screenShare, optionsAwareIsMute, isTogglePending } = useScreenShareState({
        optimisticUpdates
    });
    const amIScreenSharing = !optionsAwareIsMute;
    const disableScreenShareButton = !amIScreenSharing && (isSomeoneScreenSharing || isScreenSharingAllowed === false) || !optimisticUpdates && isTogglePending;
    const handleClick = createCallControlHandler(props, async ()=>{
        if (!hasPermission) {
            await requestPermission();
        } else {
            await screenShare.toggle();
        }
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
        requiredGrants: [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE
        ],
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(PermissionNotification, {
            permission: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE,
            isAwaitingApproval: isAwaitingPermission,
            messageApproved: t('You can now share your screen.'),
            messageAwaitingApproval: t('Awaiting for an approval to share screen.'),
            messageRevoked: t('You can no longer share your screen.'),
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
                title: caption ?? t('Share screen'),
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
                    active: isSomeoneScreenSharing || amIScreenSharing,
                    caption: caption,
                    variant: "primary",
                    "data-testid": isSomeoneScreenSharing ? 'screen-share-stop-button' : 'screen-share-start-button',
                    disabled: disableScreenShareButton,
                    onClick: handleClick,
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        icon: isSomeoneScreenSharing ? 'screen-share-on' : 'screen-share-off'
                    })
                })
            })
        })
    });
};
const SelectContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])({});
const Select = (props)=>{
    const { children, icon, defaultSelectedLabel, defaultSelectedIndex, handleSelect: handleSelectProp } = props;
    const [isOpen, setIsOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const [activeIndex, setActiveIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [selectedIndex, setSelectedIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(defaultSelectedIndex);
    const [selectedLabel, setSelectedLabel] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(defaultSelectedLabel);
    const { refs, context } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useFloating"])({
        placement: 'bottom-start',
        open: isOpen,
        onOpenChange: setIsOpen,
        whileElementsMounted: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$dom$2f$dist$2f$floating$2d$ui$2e$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["autoUpdate"],
        middleware: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2d$dom$2f$dist$2f$floating$2d$ui$2e$react$2d$dom$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["flip"])()
        ]
    });
    const elementsRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])([]);
    const labelsRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])([]);
    const handleSelect = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((index)=>{
        setSelectedIndex(index);
        handleSelectProp(index || 0);
        setIsOpen(false);
        if (index !== null) {
            setSelectedLabel(labelsRef.current[index]);
        }
    }, [
        handleSelectProp
    ]);
    const handleTypeaheadMatch = (index)=>{
        if (isOpen) {
            setActiveIndex(index);
        } else {
            handleSelect(index);
        }
    };
    const listNav = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useListNavigation"])(context, {
        listRef: elementsRef,
        activeIndex,
        selectedIndex,
        onNavigate: setActiveIndex
    });
    const typeahead = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useTypeahead"])(context, {
        listRef: labelsRef,
        activeIndex,
        selectedIndex,
        onMatch: handleTypeaheadMatch
    });
    const click = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useClick"])(context);
    const dismiss = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useDismiss"])(context);
    const role = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useRole"])(context, {
        role: 'listbox'
    });
    const { getReferenceProps, getFloatingProps, getItemProps } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useInteractions"])([
        listNav,
        typeahead,
        click,
        dismiss,
        role
    ]);
    const selectContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
            activeIndex,
            selectedIndex,
            getItemProps,
            handleSelect
        }), [
        activeIndex,
        selectedIndex,
        getItemProps,
        handleSelect
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__dropdown",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__dropdown-selected",
                ref: refs.setReference,
                tabIndex: 0,
                ...getReferenceProps(),
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("label", {
                        className: "str-video__dropdown-selected__label",
                        children: [
                            icon && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                className: "str-video__dropdown-selected__icon",
                                icon: icon
                            }),
                            selectedLabel
                        ]
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        className: "str-video__dropdown-selected__chevron",
                        icon: isOpen ? 'chevron-up' : 'chevron-down'
                    })
                ]
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SelectContext.Provider, {
                value: selectContext,
                children: isOpen && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FloatingFocusManager"], {
                    context: context,
                    modal: false,
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                        className: "str-video__dropdown-list",
                        ref: refs.setFloating,
                        ...getFloatingProps(),
                        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["FloatingList"], {
                            elementsRef: elementsRef,
                            labelsRef: labelsRef,
                            children: children
                        })
                    })
                })
            })
        ]
    });
};
const DropDownSelectOption = (props)=>{
    const { selected, label, icon } = props;
    const { getItemProps, handleSelect } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(SelectContext);
    const { ref, index } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useListItem"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__dropdown-option', {
            'str-video__dropdown-option--selected': selected
        }),
        ref: ref,
        ...getItemProps({
            onClick: ()=>handleSelect(index)
        }),
        children: [
            icon && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                className: "str-video__dropdown-icon",
                icon: icon
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                className: "str-video__dropdown-label",
                children: label
            })
        ]
    });
};
const DropDownSelect = (props)=>{
    const { children, icon, handleSelect, defaultSelectedLabel, defaultSelectedIndex } = props;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Select, {
        icon: icon,
        handleSelect: handleSelect,
        defaultSelectedIndex: defaultSelectedIndex,
        defaultSelectedLabel: defaultSelectedLabel,
        children: children
    });
};
const DeviceSelectorOption = ({ disabled, id, label, onChange, name, selected, defaultChecked, value })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("label", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__device-settings__option', {
            'str-video__device-settings__option--selected': selected,
            'str-video__device-settings__option--disabled': disabled
        }),
        htmlFor: id,
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("input", {
                type: "radio",
                name: name,
                onChange: onChange,
                value: value,
                id: id,
                checked: selected,
                defaultChecked: defaultChecked,
                disabled: disabled
            }),
            label
        ]
    });
};
const DeviceSelectorList = (props)=>{
    const { devices = [], selectedDeviceId, title, type, onChange } = props;
    const { close } = useMenuContext();
    const { deviceList } = useDeviceList(devices, selectedDeviceId);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__device-settings__device-kind",
        children: [
            title && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__device-settings__device-selector-title",
                children: title
            }),
            deviceList.map((device)=>{
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorOption, {
                    id: `${type}--${device.deviceId}`,
                    value: device.deviceId,
                    label: device.label,
                    onChange: (e)=>{
                        const deviceId = e.target.value;
                        if (deviceId !== 'default') {
                            onChange?.(deviceId);
                        }
                        close?.();
                    },
                    name: type,
                    selected: device.isSelected
                }, device.deviceId);
            })
        ]
    });
};
const DeviceSelectorDropdown = (props)=>{
    const { devices = [], selectedDeviceId, title, onChange, icon } = props;
    const { deviceList, selectedDeviceInfo, selectedIndex } = useDeviceList(devices, selectedDeviceId);
    const handleSelect = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((index)=>{
        const deviceId = deviceList[index].deviceId;
        if (deviceId !== 'default') {
            onChange?.(deviceId);
        }
    }, [
        deviceList,
        onChange
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__device-settings__device-kind",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__device-settings__device-selector-title",
                children: title
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DropDownSelect, {
                icon: icon,
                defaultSelectedIndex: selectedIndex,
                defaultSelectedLabel: selectedDeviceInfo.label,
                handleSelect: handleSelect,
                children: deviceList.map((device)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DropDownSelectOption, {
                        icon: icon,
                        label: device.label,
                        selected: device.isSelected
                    }, device.deviceId))
            })
        ]
    });
};
const DeviceSelector = (props)=>{
    const { visualType = 'list', icon, ...rest } = props;
    if (visualType === 'list') {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorList, {
            ...rest
        });
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorDropdown, {
        ...rest,
        icon: icon
    });
};
const DeviceSelectorAudioInput = ({ title, visualType })=>{
    const { useMicrophoneState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { microphone, selectedDevice, devices } = useMicrophoneState();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelector, {
        devices: devices || [],
        selectedDeviceId: selectedDevice,
        type: "audioinput",
        onChange: async (deviceId)=>{
            await microphone.select(deviceId);
        },
        title: title,
        visualType: visualType,
        icon: "mic"
    });
};
const DeviceSelectorAudioOutput = ({ title, visualType })=>{
    const { useSpeakerState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { speaker, selectedDevice, devices, isDeviceSelectionSupported } = useSpeakerState();
    if (!isDeviceSelectionSupported) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelector, {
        devices: devices,
        type: "audiooutput",
        selectedDeviceId: selectedDevice,
        onChange: (deviceId)=>{
            speaker.select(deviceId);
        },
        title: title,
        visualType: visualType,
        icon: "speaker"
    });
};
const DeviceSelectorVideo = ({ title, visualType })=>{
    const { useCameraState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { camera, devices, selectedDevice } = useCameraState();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelector, {
        devices: devices || [],
        type: "videoinput",
        selectedDeviceId: selectedDevice,
        onChange: async (deviceId)=>{
            await camera.select(deviceId);
        },
        title: title,
        visualType: visualType,
        icon: "camera"
    });
};
const DeviceSettings = ({ visualType = MenuVisualType.MENU })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
        placement: "bottom-end",
        ToggleButton: ToggleDeviceSettingsMenuButton,
        visualType: visualType,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Menu, {})
    });
};
const Menu = ()=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__device-settings",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorVideo, {
                title: t('Select a Camera')
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorAudioInput, {
                title: t('Select a Mic')
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorAudioOutput, {
                title: t('Select Speakers')
            })
        ]
    });
};
const ToggleDeviceSettingsMenuButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleDeviceSettingsMenuButton({ menuShown }, ref) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__device-settings__button', {
            'str-video__device-settings__button--active': menuShown
        }),
        title: t('Toggle device menu'),
        icon: "device-settings",
        ref: ref
    });
});
const ToggleAudioPreviewButton = (props)=>{
    const { caption, Menu = DeviceSelectorAudioInput, menuPlacement = 'top', onMenuToggle, optimisticUpdates, ...restCompositeButtonProps } = props;
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { useMicrophoneState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { microphone, hasBrowserPermission, isPromptingPermission, optionsAwareIsMute, isTogglePending } = useMicrophoneState({
        optimisticUpdates
    });
    const [tooltipDisabled, setTooltipDisabled] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const handleClick = createCallControlHandler(props, ()=>microphone.toggle());
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        title: !hasBrowserPermission ? t('Check your browser audio permissions') : caption ?? t('Mic'),
        tooltipDisabled: tooltipDisabled,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(CompositeButton, {
            active: optionsAwareIsMute,
            caption: caption,
            className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(!hasBrowserPermission && 'str-video__device-unavailable'),
            variant: "secondary",
            disabled: !hasBrowserPermission || !optimisticUpdates && isTogglePending,
            "data-testid": optionsAwareIsMute ? 'preview-audio-unmute-button' : 'preview-audio-mute-button',
            onClick: handleClick,
            Menu: Menu,
            menuPlacement: menuPlacement,
            ...restCompositeButtonProps,
            onMenuToggle: (shown)=>{
                setTooltipDisabled(shown);
                onMenuToggle?.(shown);
            },
            children: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                    icon: !optionsAwareIsMute ? 'mic' : 'mic-off'
                }),
                !hasBrowserPermission && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__no-media-permission",
                    title: t('Check your browser audio permissions'),
                    children: "!"
                }),
                isPromptingPermission && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__pending-permission",
                    title: t('Waiting for permission'),
                    children: "?"
                })
            ]
        })
    });
};
const ToggleAudioPublishingButton = (props)=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { caption, Menu = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorAudioInput, {
        visualType: "list"
    }), menuPlacement = 'top', onMenuToggle, optimisticUpdates, ...restCompositeButtonProps } = props;
    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO);
    const { useMicrophoneState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { microphone, hasBrowserPermission, isPromptingPermission, isTogglePending, optionsAwareIsMute } = useMicrophoneState({
        optimisticUpdates
    });
    const [tooltipDisabled, setTooltipDisabled] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const handleClick = createCallControlHandler(props, async ()=>{
        if (!hasPermission) {
            await requestPermission();
        } else {
            await microphone.toggle();
        }
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
        requiredGrants: [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO
        ],
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(PermissionNotification, {
            permission: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO,
            isAwaitingApproval: isAwaitingPermission,
            messageApproved: t('You can now speak.'),
            messageAwaitingApproval: t('Awaiting for an approval to speak.'),
            messageRevoked: t('You can no longer speak.'),
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
                title: !hasPermission ? t('You have no permission to share your audio') : !hasBrowserPermission ? t('Check your browser mic permissions') : caption ?? t('Mic'),
                tooltipDisabled: tooltipDisabled,
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(CompositeButton, {
                    active: optionsAwareIsMute,
                    caption: caption,
                    variant: "secondary",
                    disabled: !hasBrowserPermission || !hasPermission || !optimisticUpdates && isTogglePending,
                    "data-testid": optionsAwareIsMute ? 'audio-unmute-button' : 'audio-mute-button',
                    onClick: handleClick,
                    Menu: Menu,
                    menuPlacement: menuPlacement,
                    menuOffset: 16,
                    ...restCompositeButtonProps,
                    onMenuToggle: (shown)=>{
                        setTooltipDisabled(shown);
                        onMenuToggle?.(shown);
                    },
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                            icon: optionsAwareIsMute ? 'mic-off' : 'mic'
                        }),
                        (!hasBrowserPermission || !hasPermission) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            className: "str-video__no-media-permission",
                            children: "!"
                        }),
                        isPromptingPermission && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            className: "str-video__pending-permission",
                            title: t('Waiting for permission'),
                            children: "?"
                        })
                    ]
                })
            })
        })
    });
};
const ToggleVideoPreviewButton = (props)=>{
    const { caption, Menu = DeviceSelectorVideo, menuPlacement = 'top', onMenuToggle, optimisticUpdates, ...restCompositeButtonProps } = props;
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { useCameraState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { camera, hasBrowserPermission, isPromptingPermission, isTogglePending, optionsAwareIsMute } = useCameraState({
        optimisticUpdates
    });
    const [tooltipDisabled, setTooltipDisabled] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const handleClick = createCallControlHandler(props, ()=>camera.toggle());
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        title: !hasBrowserPermission ? t('Check your browser video permissions') : caption ?? t('Video'),
        tooltipDisabled: tooltipDisabled,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(CompositeButton, {
            active: optionsAwareIsMute,
            caption: caption,
            className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(!hasBrowserPermission && 'str-video__device-unavailable'),
            variant: "secondary",
            "data-testid": optionsAwareIsMute ? 'preview-video-unmute-button' : 'preview-video-mute-button',
            onClick: handleClick,
            disabled: !hasBrowserPermission || !optimisticUpdates && isTogglePending,
            Menu: Menu,
            menuPlacement: menuPlacement,
            ...restCompositeButtonProps,
            onMenuToggle: (shown)=>{
                setTooltipDisabled(shown);
                onMenuToggle?.(shown);
            },
            children: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                    icon: !optionsAwareIsMute ? 'camera' : 'camera-off'
                }),
                !hasBrowserPermission && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__no-media-permission",
                    title: t('Check your browser video permissions'),
                    children: "!"
                }),
                isPromptingPermission && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__pending-permission",
                    title: t('Waiting for permission'),
                    children: "?"
                })
            ]
        })
    });
};
const ToggleVideoPublishingButton = (props)=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { caption, Menu = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DeviceSelectorVideo, {
        visualType: "list"
    }), menuPlacement = 'top', onMenuToggle, optimisticUpdates, ...restCompositeButtonProps } = props;
    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO);
    const { useCameraState, useCallSettings } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { camera, optionsAwareIsMute, hasBrowserPermission, isPromptingPermission, isTogglePending } = useCameraState({
        optimisticUpdates
    });
    const callSettings = useCallSettings();
    const isPublishingVideoAllowed = callSettings?.video.enabled;
    const [tooltipDisabled, setTooltipDisabled] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const handleClick = createCallControlHandler(props, async ()=>{
        if (!hasPermission) {
            await requestPermission();
        } else {
            await camera.toggle();
        }
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
        requiredGrants: [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO
        ],
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(PermissionNotification, {
            permission: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO,
            isAwaitingApproval: isAwaitingPermission,
            messageApproved: t('You can now share your video.'),
            messageAwaitingApproval: t('Awaiting for an approval to share your video.'),
            messageRevoked: t('You can no longer share your video.'),
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
                title: !hasPermission ? t('You have no permission to share your video') : !hasBrowserPermission ? t('Check your browser video permissions') : !isPublishingVideoAllowed ? t('Video publishing is disabled by the system') : caption || t('Video'),
                tooltipDisabled: tooltipDisabled,
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(CompositeButton, {
                    active: optionsAwareIsMute,
                    caption: caption,
                    variant: "secondary",
                    disabled: !hasBrowserPermission || !hasPermission || !isPublishingVideoAllowed || !optimisticUpdates && isTogglePending,
                    "data-testid": optionsAwareIsMute ? 'video-unmute-button' : 'video-mute-button',
                    onClick: handleClick,
                    Menu: Menu,
                    menuPlacement: menuPlacement,
                    menuOffset: 16,
                    ...restCompositeButtonProps,
                    onMenuToggle: (shown)=>{
                        setTooltipDisabled(shown);
                        onMenuToggle?.(shown);
                    },
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                            icon: optionsAwareIsMute ? 'camera-off' : 'camera'
                        }),
                        (!hasBrowserPermission || !hasPermission || !isPublishingVideoAllowed) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            className: "str-video__no-media-permission",
                            children: "!"
                        }),
                        isPromptingPermission && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            className: "str-video__pending-permission",
                            title: t('Waiting for permission'),
                            children: "?"
                        })
                    ]
                })
            })
        })
    });
};
const EndCallMenu = (props)=>{
    const { onLeave, onEnd } = props;
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__end-call__confirmation",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("button", {
                className: "str-video__button str-video__end-call__leave",
                type: "button",
                "data-testid": "leave-call-button",
                onClick: onLeave,
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        className: "str-video__button__icon str-video__end-call__leave-icon",
                        icon: "logout"
                    }),
                    t('Leave call')
                ]
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].END_CALL
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("button", {
                    className: "str-video__button str-video__end-call__end",
                    type: "button",
                    "data-testid": "end-call-for-all-button",
                    onClick: onEnd,
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                            className: "str-video__button__icon str-video__end-call__end-icon",
                            icon: "call-end"
                        }),
                        t('End call for all')
                    ]
                })
            })
        ]
    });
};
const CancelCallToggleMenuButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function CancelCallToggleMenuButton({ menuShown }, ref) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        title: t('Leave call'),
        tooltipDisabled: menuShown,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
            icon: menuShown ? 'close' : 'call-end',
            variant: menuShown ? 'active' : 'danger',
            "data-testid": "leave-call-button",
            ref: ref
        })
    });
});
const CancelCallConfirmButton = ({ onClick, onLeave })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const handleLeave = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (e)=>{
        if (onClick) {
            onClick(e);
        } else if (call) {
            await call.leave();
            onLeave?.();
        }
    }, [
        onClick,
        onLeave,
        call
    ]);
    const handleEndCall = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (e)=>{
        if (onClick) {
            onClick(e);
        } else if (call) {
            await call.endCall();
            onLeave?.();
        }
    }, [
        onClick,
        onLeave,
        call
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
        placement: "top-start",
        ToggleButton: CancelCallToggleMenuButton,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(EndCallMenu, {
            onEnd: handleEndCall,
            onLeave: handleLeave
        })
    });
};
const CancelCallButton = ({ disabled, caption, onClick, onLeave })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const handleClick = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (e)=>{
        if (onClick) {
            onClick(e);
        } else if (call) {
            await call.leave();
            onLeave?.();
        }
    }, [
        onClick,
        onLeave,
        call
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        disabled: disabled,
        icon: "call-end",
        variant: "danger",
        title: caption ?? t('Leave call'),
        "data-testid": "cancel-call-button",
        onClick: handleClick
    });
};
const CallControls = ({ onLeave })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__call-controls",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SpeakingWhileMutedNotification, {
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ToggleAudioPublishingButton, {})
                })
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ToggleVideoPublishingButton, {})
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].CREATE_REACTION
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ReactionsButton, {})
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ScreenShareButton, {})
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].START_RECORD_CALL,
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].STOP_RECORD_CALL
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(RecordCallButton, {})
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CancelCallButton, {
                onLeave: onLeave
            })
        ]
    });
const CallStatsLatencyChart = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["lazy"])(()=>__turbopack_context__.A("[project]/node_modules/@stream-io/video-react-sdk/dist/latency-chart-Bj5OSYzg.es.js [app-ssr] (ecmascript, async loader)"));
var Status;
(function(Status) {
    Status["GOOD"] = "Good";
    Status["OK"] = "Ok";
    Status["BAD"] = "Bad";
})(Status || (Status = {}));
const CallStats = (props)=>{
    const { latencyLowBound = 75, latencyHighBound = 400, showCodecInfo = false, LatencyChartSuspenseFallback = null } = props;
    const [latencyBuffer, setLatencyBuffer] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(()=>{
        const now = Date.now();
        return Array.from({
            length: 20
        }, (_, i)=>({
                x: now + i,
                y: 0
            }));
    });
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const [publishBitrate, setPublishBitrate] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])('-');
    const [subscribeBitrate, setSubscribeBitrate] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])('-');
    const previousStats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(undefined);
    const { useCallStatsReport } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const callStatsReport = useCallStatsReport();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!callStatsReport) return;
        if (!previousStats.current) {
            previousStats.current = callStatsReport;
            return;
        }
        const previousCallStatsReport = previousStats.current;
        setPublishBitrate(()=>{
            return calculatePublishBitrate(previousCallStatsReport, callStatsReport);
        });
        setSubscribeBitrate(()=>{
            return calculateSubscribeBitrate(previousCallStatsReport, callStatsReport);
        });
        setLatencyBuffer((latencyBuf)=>{
            const newLatencyBuffer = latencyBuf.slice(-19);
            newLatencyBuffer.push({
                x: callStatsReport.timestamp,
                y: callStatsReport.publisherStats.averageRoundTripTimeInMs
            });
            return newLatencyBuffer;
        });
        previousStats.current = callStatsReport;
    }, [
        callStatsReport
    ]);
    const latencyComparison = {
        lowBound: latencyLowBound,
        highBound: latencyHighBound,
        value: callStatsReport?.publisherStats.averageRoundTripTimeInMs || 0
    };
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__call-stats",
        children: callStatsReport && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                    className: "str-video__call-stats__header",
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("h3", {
                            className: "str-video__call-stats__heading",
                            children: [
                                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                    className: "str-video__call-stats__icon",
                                    icon: "call-latency"
                                }),
                                t('Call Latency')
                            ]
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("p", {
                            className: "str-video__call-stats__description",
                            children: t('Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.')
                        })
                    ]
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                    className: "str-video__call-stats__latencychart",
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Suspense"], {
                        fallback: LatencyChartSuspenseFallback,
                        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallStatsLatencyChart, {
                            values: latencyBuffer
                        })
                    })
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                    className: "str-video__call-stats__header",
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("h3", {
                            className: "str-video__call-stats__heading",
                            children: [
                                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                                    className: "str-video__call-stats__icon",
                                    icon: "network-quality"
                                }),
                                t('Call performance')
                            ]
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("p", {
                            className: "str-video__call-stats__description",
                            children: t('Review the key data points below to assess call performance')
                        })
                    ]
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                    className: "str-video__call-stats__card-container",
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Region'),
                            value: callStatsReport.datacenter
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Latency'),
                            value: `${callStatsReport.publisherStats.averageRoundTripTimeInMs} ms.`,
                            comparison: latencyComparison
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Receive jitter'),
                            value: `${callStatsReport.subscriberStats.averageJitterInMs} ms.`,
                            comparison: {
                                ...latencyComparison,
                                value: callStatsReport.subscriberStats.averageJitterInMs
                            }
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Publish jitter'),
                            value: `${callStatsReport.publisherStats.averageJitterInMs} ms.`,
                            comparison: {
                                ...latencyComparison,
                                value: callStatsReport.publisherStats.averageJitterInMs
                            }
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: `${t('Publish resolution')}${showCodecInfo ? formatCodec(callStatsReport) : ''}`,
                            value: toFrameSize(callStatsReport.publisherStats)
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Publish quality drop reason'),
                            value: callStatsReport.publisherStats.qualityLimitationReasons
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Receiving resolution'),
                            value: toFrameSize(callStatsReport.subscriberStats)
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Receive quality drop reason'),
                            value: callStatsReport.subscriberStats.qualityLimitationReasons
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Publish bitrate'),
                            value: publishBitrate
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCard, {
                            label: t('Receiving bitrate'),
                            value: subscribeBitrate
                        })
                    ]
                })
            ]
        })
    });
};
const StatCardExplanation = (props)=>{
    const { description } = props;
    const [isOpen, setIsOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const { refs, floatingStyles, context } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useFloating"])({
        open: isOpen,
        onOpenChange: setIsOpen
    });
    const hover = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useHover"])(context);
    const { getReferenceProps, getFloatingProps } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$floating$2d$ui$2f$react$2f$dist$2f$floating$2d$ui$2e$react$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useInteractions"])([
        hover
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-explanation",
                ref: refs.setReference,
                ...getReferenceProps(),
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                    className: "str-video__call-explanation__icon",
                    icon: "info"
                })
            }),
            isOpen && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-explanation__description",
                ref: refs.setFloating,
                style: floatingStyles,
                ...getFloatingProps(),
                children: description
            })
        ]
    });
};
const StatsTag = (props)=>{
    const { children, status } = props;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__call-stats__tag', {
            'str-video__call-stats__tag--good': status === Status.GOOD,
            'str-video__call-stats__tag--ok': status === Status.OK,
            'str-video__call-stats__tag--bad': status === Status.BAD
        }),
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
            className: "str-video__call-stats__tag__text",
            children: children
        })
    });
};
const StatCard = (props)=>{
    const { label, value, description, comparison } = props;
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const status = comparison ? toStatus(comparison) : undefined;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__call-stats__card",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__call-stats__card-content",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                        className: "str-video__call-stats__card-label",
                        children: [
                            label,
                            description && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatCardExplanation, {
                                description: description
                            })
                        ]
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                        className: "str-video__call-stats__card-value",
                        children: value
                    })
                ]
            }),
            status && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StatsTag, {
                status: status,
                children: t(status)
            })
        ]
    });
};
const toStatus = (config)=>{
    const { value, lowBound, highBound } = config;
    if (value <= lowBound) return Status.GOOD;
    if (value >= lowBound && value <= highBound) return Status.OK;
    if (value >= highBound) return Status.BAD;
    return Status.GOOD;
};
const toFrameSize = (stats)=>{
    const { highestFrameWidth: w, highestFrameHeight: h, highestFramesPerSecond: fps } = stats;
    let size = `-`;
    if (w && h) {
        size = `${w}x${h}`;
        if (fps) {
            size += `@${fps}fps.`;
        }
    }
    return size;
};
const formatCodec = (callStatsReport)=>{
    const { codecPerTrackType } = callStatsReport.publisherStats;
    if (!codecPerTrackType || !codecPerTrackType[__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["SfuModels"].TrackType.VIDEO]) {
        return '';
    }
    const [, name] = codecPerTrackType[__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["SfuModels"].TrackType.VIDEO].split('/');
    return name ? ` (${name})` : '';
};
const calculatePublishBitrate = (previousCallStatsReport, callStatsReport)=>{
    const { publisherStats: { totalBytesSent: previousTotalBytesSent, timestamp: previousTimestamp } } = previousCallStatsReport;
    const { publisherStats: { totalBytesSent, timestamp } } = callStatsReport;
    const bytesSent = totalBytesSent - previousTotalBytesSent;
    const timeElapsed = timestamp - previousTimestamp;
    return `${(bytesSent * 8 / timeElapsed).toFixed(2)} kbps`;
};
const calculateSubscribeBitrate = (previousCallStatsReport, callStatsReport)=>{
    const { subscriberStats: { totalBytesReceived: previousTotalBytesReceived, timestamp: previousTimestamp } } = previousCallStatsReport;
    const { subscriberStats: { totalBytesReceived, timestamp } } = callStatsReport;
    const bytesReceived = totalBytesReceived - previousTotalBytesReceived;
    const timeElapsed = timestamp - previousTimestamp;
    return `${(bytesReceived * 8 / timeElapsed).toFixed(2)} kbps`;
};
const CallStatsButton = ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
        placement: "top-end",
        ToggleButton: ToggleMenuButton,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallStats, {})
    });
const ToggleMenuButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleMenuButton(props, ref) {
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { caption, menuShown } = props;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
        ref: ref,
        active: menuShown,
        caption: caption,
        title: caption || t('Statistics'),
        "data-testid": "stats-button",
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
            icon: "stats"
        })
    });
});
const ToggleAudioOutputButton = (props)=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { caption, Menu = DeviceSelectorAudioOutput, menuPlacement = 'top', onMenuToggle } = props;
    const [tooltipDisabled, setTooltipDisabled] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        title: caption || t('Speakers'),
        tooltipDisabled: tooltipDisabled,
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CompositeButton, {
            Menu: Menu,
            menuPlacement: menuPlacement,
            caption: caption,
            "data-testid": "audio-output-button",
            onMenuToggle: (shown)=>{
                setTooltipDisabled(shown);
                onMenuToggle?.(shown);
            },
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                icon: "speaker"
            })
        })
    });
};
const BlockedUserListing = ({ data })=>{
    if (!data.length) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
            className: "str-video__participant-listing",
            children: data.map((userId)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BlockedUserListingItem, {
                    userId: userId
                }, userId))
        })
    });
};
const BlockedUserListingItem = ({ userId })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const unblockUserClickHandler = ()=>{
        if (userId) call?.unblockUser(userId);
    };
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__participant-listing-item",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__participant-listing-item__display-name",
                children: userId
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                requiredGrants: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].BLOCK_USERS
                ],
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(TextButton, {
                    onClick: unblockUserClickHandler,
                    children: "Unblock"
                })
            })
        ]
    });
};
const CallParticipantListHeader = ({ onClose })=>{
    const { useParticipants, useAnonymousParticipantCount } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const participants = useParticipants();
    const anonymousParticipantCount = useAnonymousParticipantCount();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__participant-list-header",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__participant-list-header__title",
                children: [
                    t('Participants'),
                    ' ',
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("span", {
                        className: "str-video__participant-list-header__title-count",
                        children: [
                            "[",
                            participants.length,
                            "]"
                        ]
                    }),
                    anonymousParticipantCount > 0 && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                        className: "str-video__participant-list-header__title-anonymous",
                        children: t('Anonymous', {
                            count: anonymousParticipantCount
                        })
                    })
                ]
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                onClick: onClose,
                className: "str-video__participant-list-header__close-button",
                icon: "close"
            })
        ]
    });
};
const CallParticipantListingItem = ({ participant, DisplayName = DefaultDisplayName })=>{
    const isAudioOn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasAudio"])(participant);
    const isVideoOn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasVideo"])(participant);
    const isPinnedOn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["isPinned"])(participant);
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__participant-listing-item",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Avatar, {
                name: participant.name,
                imageSrc: participant.image
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DisplayName, {
                participant: participant
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__participant-listing-item__media-indicator-group",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MediaIndicator, {
                        title: isAudioOn ? t('Microphone on') : t('Microphone off'),
                        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__participant-listing-item__icon', `str-video__participant-listing-item__icon-${isAudioOn ? 'mic' : 'mic-off'}`)
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MediaIndicator, {
                        title: isVideoOn ? t('Camera on') : t('Camera off'),
                        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__participant-listing-item__icon', `str-video__participant-listing-item__icon-${isVideoOn ? 'camera' : 'camera-off'}`)
                    }),
                    isPinnedOn && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MediaIndicator, {
                        title: t('Pinned'),
                        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__participant-listing-item__icon', 'str-video__participant-listing-item__icon-pinned')
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
                        placement: "bottom-end",
                        ToggleButton: ToggleButton$2,
                        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantViewContext.Provider, {
                            value: {
                                participant,
                                trackType: 'none'
                            },
                            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantActionsContextMenu, {})
                        })
                    })
                ]
            })
        ]
    });
};
const MediaIndicator = (props)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        ...props
    });
const DefaultDisplayName = ({ participant })=>{
    const connectedUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useConnectedUser"])();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const meFlag = participant.userId === connectedUser?.id ? t('Me') : '';
    const nameOrId = participant.name || participant.userId || t('Unknown');
    let displayName;
    if (!participant.name) {
        displayName = meFlag || nameOrId || t('Unknown');
    } else if (meFlag) {
        displayName = `${nameOrId} (${meFlag})`;
    } else {
        displayName = nameOrId;
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(WithTooltip, {
        className: "str-video__participant-listing-item__display-name",
        title: displayName,
        children: displayName
    });
};
const ToggleButton$2 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleButton(props, ref) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        enabled: props.menuShown,
        icon: "ellipsis",
        ref: ref
    });
});
const CallParticipantListing = ({ data })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__participant-listing",
        children: data.map((participant)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallParticipantListingItem, {
                participant: participant
            }, participant.sessionId))
    });
const EmptyParticipantSearchList = ()=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__participant-list--empty",
        children: t('No participants found')
    });
};
const SearchInput = ({ exitSearch, isActive, ...rest })=>{
    const [inputElement, setInputElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!inputElement) return;
        const handleKeyDown = (e)=>{
            if (e.key.toLowerCase() === 'escape') exitSearch();
        };
        inputElement.addEventListener('keydown', handleKeyDown);
        return ()=>{
            inputElement.removeEventListener('keydown', handleKeyDown);
        };
    }, [
        exitSearch,
        inputElement
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__search-input__container', {
            'str-video__search-input__container--active': isActive
        }),
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("input", {
                placeholder: "Search",
                ...rest,
                ref: setInputElement
            }),
            isActive ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
                className: "str-video__search-input__clear-btn",
                onClick: exitSearch,
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__search-input__icon--active"
                })
            }) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                className: "str-video__search-input__icon"
            })
        ]
    });
};
function SearchResults({ EmptySearchResultComponent, LoadingIndicator: LoadingIndicator$1 = LoadingIndicator, searchQueryInProgress, searchResults, SearchResultList }) {
    if (searchQueryInProgress) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
            className: "str-video__search-results--loading",
            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LoadingIndicator$1, {})
        });
    }
    if (!searchResults.length) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(EmptySearchResultComponent, {});
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SearchResultList, {
        data: searchResults
    });
}
const useSearch = ({ debounceInterval = 200, searchFn, searchQuery = '' })=>{
    const [searchResults, setSearchResults] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])([]);
    const [searchQueryInProgress, setSearchQueryInProgress] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const searchFnRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(searchFn);
    searchFnRef.current = searchFn;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!searchQuery.length) {
            setSearchQueryInProgress(false);
            setSearchResults([]);
            return;
        }
        setSearchQueryInProgress(true);
        const timeout = setTimeout(async ()=>{
            try {
                const results = await searchFnRef.current(searchQuery);
                setSearchResults(results);
            } catch (error) {
                console.error(error);
            } finally{
                setSearchQueryInProgress(false);
            }
        }, debounceInterval);
        return ()=>{
            clearTimeout(timeout);
        };
    }, [
        debounceInterval,
        searchQuery
    ]);
    return {
        searchQueryInProgress,
        searchResults
    };
};
const UserListTypes = {
    active: 'Active users',
    blocked: 'Blocked users'
};
const CallParticipantsList = ({ onClose, activeUsersSearchFn, blockedUsersSearchFn, debounceSearchInterval })=>{
    const [searchQuery, setSearchQuery] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])('');
    const [userListType, setUserListType] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])('active');
    const exitSearch = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>setSearchQuery(''), []);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__participant-list",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallParticipantListHeader, {
                onClose: onClose
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SearchInput, {
                value: searchQuery,
                onChange: ({ currentTarget })=>setSearchQuery(currentTarget.value),
                exitSearch: exitSearch,
                isActive: !!searchQuery
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallParticipantListContentHeader, {
                userListType: userListType,
                setUserListType: setUserListType
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__participant-list__content",
                children: [
                    userListType === 'active' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ActiveUsersSearchResults, {
                        searchQuery: searchQuery,
                        activeUsersSearchFn: activeUsersSearchFn,
                        debounceSearchInterval: debounceSearchInterval
                    }),
                    userListType === 'blocked' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BlockedUsersSearchResults, {
                        searchQuery: searchQuery,
                        blockedUsersSearchFn: blockedUsersSearchFn,
                        debounceSearchInterval: debounceSearchInterval
                    })
                ]
            })
        ]
    });
};
const CallParticipantListContentHeader = ({ userListType, setUserListType })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const muteAll = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        call?.muteAllUsers('audio');
    }, [
        call
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__participant-list__content-header",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__participant-list__content-header-title",
                children: userListType === 'active' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Restricted"], {
                    requiredGrants: [
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].MUTE_USERS
                    ],
                    hasPermissionsOnly: true,
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(TextButton, {
                        onClick: muteAll,
                        children: t('Mute all')
                    })
                })
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
                placement: "bottom-end",
                ToggleButton: ToggleButton$1,
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenu, {
                    children: Object.keys(UserListTypes).map((lt)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(GenericMenuButtonItem, {
                            "aria-selected": lt === userListType,
                            onClick: ()=>setUserListType(lt),
                            children: UserListTypes[lt]
                        }, lt))
                })
            })
        ]
    });
};
const ActiveUsersSearchResults = ({ searchQuery, activeUsersSearchFn: activeUsersSearchFnFromProps, debounceSearchInterval })=>{
    const { useParticipants } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const participants = useParticipants({
        sortBy: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["name"]
    });
    const activeUsersSearchFn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (queryString)=>{
        const queryRegExp = new RegExp(queryString, 'i');
        return participants.filter((p)=>p.name.match(queryRegExp));
    }, [
        participants
    ]);
    const { searchQueryInProgress, searchResults } = useSearch({
        searchFn: activeUsersSearchFnFromProps ?? activeUsersSearchFn,
        debounceInterval: debounceSearchInterval,
        searchQuery
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SearchResults, {
        EmptySearchResultComponent: EmptyParticipantSearchList,
        LoadingIndicator: LoadingIndicator,
        searchQueryInProgress: searchQueryInProgress,
        searchResults: searchQuery ? searchResults : participants,
        SearchResultList: CallParticipantListing
    });
};
const BlockedUsersSearchResults = ({ blockedUsersSearchFn: blockedUsersSearchFnFromProps, debounceSearchInterval, searchQuery })=>{
    const { useCallBlockedUserIds } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const blockedUsers = useCallBlockedUserIds();
    const blockedUsersSearchFn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (queryString)=>{
        const queryRegExp = new RegExp(queryString, 'i');
        return blockedUsers.filter((userId)=>userId.match(queryRegExp));
    }, [
        blockedUsers
    ]);
    const { searchQueryInProgress, searchResults } = useSearch({
        searchFn: blockedUsersSearchFnFromProps ?? blockedUsersSearchFn,
        debounceInterval: debounceSearchInterval,
        searchQuery
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SearchResults, {
        EmptySearchResultComponent: EmptyParticipantSearchList,
        LoadingIndicator: LoadingIndicator,
        searchQueryInProgress: searchQueryInProgress,
        searchResults: searchQuery ? searchResults : blockedUsers,
        SearchResultList: BlockedUserListing
    });
};
const ToggleButton$1 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleButton(props, ref) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        enabled: props.menuShown,
        icon: "filter",
        ref: ref
    });
});
const CallPreview = (props)=>{
    const { className, style } = props;
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useCallThumbnail } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const thumbnail = useCallThumbnail();
    const [imageRef, setImageRef] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!imageRef || !call) return;
        const cleanup = call.bindCallThumbnailElement(imageRef);
        return ()=>cleanup();
    }, [
        imageRef,
        call
    ]);
    if (!thumbnail) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("img", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__call-preview', className),
        style: style,
        alt: "Call Preview Thumbnail",
        ref: setImageRef
    });
};
const CallRecordingListHeader = ({ callRecordings, onRefresh })=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__call-recording-list__header",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__call-recording-list__title",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                        children: t('Call Recordings')
                    }),
                    callRecordings.length ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("span", {
                        children: [
                            "(",
                            callRecordings.length,
                            ")"
                        ]
                    }) : null
                ]
            }),
            onRefresh && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                icon: "refresh",
                title: t('Refresh'),
                onClick: onRefresh
            })
        ]
    });
};
const dateFormat = (date)=>{
    const format = new Date(date);
    return format.toTimeString().split(' ')[0];
};
const CallRecordingListItem = ({ recording })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("li", {
        className: "str-video__call-recording-list__item",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-recording-list__table-cell str-video__call-recording-list__filename",
                children: recording.filename
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-recording-list__table-cell str-video__call-recording-list__time",
                children: dateFormat(recording.start_time)
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-recording-list__table-cell str-video__call-recording-list__time",
                children: dateFormat(recording.end_time)
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-recording-list__table-cell str-video__call-recording-list__download",
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("a", {
                    className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__call-recording-list-item__action-button', 'str-video__call-recording-list-item__action-button--download'),
                    role: "button",
                    href: recording.url,
                    download: recording.filename,
                    title: "Download the recording",
                    children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        icon: "download"
                    })
                })
            })
        ]
    });
};
const EmptyCallRecordingListing = ()=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__call-recording-list__listing str-video__call-recording-list__listing--empty",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-recording-list__listing--icon-empty"
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("p", {
                className: "str-video__call-recording-list__listing--text-empty",
                children: "No recordings available"
            })
        ]
    });
};
const LoadingCallRecordingListing = ({ callRecordings })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            callRecordings.map((recording)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallRecordingListItem, {
                    recording: recording
                }, recording.filename)),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LoadingIndicator, {
                text: "Recording getting ready"
            })
        ]
    });
};
const CallRecordingList = ({ callRecordings, CallRecordingListHeader: CallRecordingListHeader$1 = CallRecordingListHeader, CallRecordingListItem: CallRecordingListItem$1 = CallRecordingListItem, EmptyCallRecordingList = EmptyCallRecordingListing, loading, LoadingCallRecordingList = LoadingCallRecordingListing, onRefresh })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__call-recording-list",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallRecordingListHeader$1, {
                callRecordings: callRecordings,
                onRefresh: onRefresh
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-recording-list__listing",
                children: loading ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LoadingCallRecordingList, {
                    callRecordings: callRecordings
                }) : callRecordings.length ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
                    children: [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("ul", {
                            className: "str-video__call-recording-list__list",
                            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("li", {
                                className: "str-video__call-recording-list__item",
                                children: [
                                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                        className: "str-video__call-recording-list__filename",
                                        children: "Name"
                                    }),
                                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                        className: "str-video__call-recording-list__time",
                                        children: "Start time"
                                    }),
                                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                        className: "str-video__call-recording-list__time",
                                        children: "End time"
                                    }),
                                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                        className: "str-video__call-recording-list__download"
                                    })
                                ]
                            })
                        }),
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("ul", {
                            className: "str-video__call-recording-list__list",
                            children: callRecordings.map((recording)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CallRecordingListItem$1, {
                                    recording: recording
                                }, recording.filename))
                        })
                    ]
                }) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(EmptyCallRecordingList, {})
            })
        ]
    });
};
const NoiseCancellationContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])(null);
/**
 * Exposes the NoiseCancellation API.
 * Throws an error if used outside <NoiseCancellationProvider />.
 */ const useNoiseCancellation = ()=>{
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(NoiseCancellationContext);
    if (!context) {
        throw new Error('useNoiseCancellation must be used within a NoiseCancellationProvider');
    }
    return context;
};
const NoiseCancellationProvider = (props)=>{
    const { children, noiseCancellation } = props;
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useCallSettings, useHasPermissions } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const settings = useCallSettings();
    const noiseCancellationAllowed = !!(settings && settings.audio.noise_cancellation && settings.audio.noise_cancellation.mode !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["NoiseCancellationSettingsModeEnum"].DISABLED);
    const hasCapability = useHasPermissions(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].ENABLE_NOISE_CANCELLATION);
    const [isSupportedByBrowser, setIsSupportedByBrowser] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const result = noiseCancellation.isSupported();
        if (typeof result === 'boolean') {
            setIsSupportedByBrowser(result);
        } else {
            result.then((s)=>setIsSupportedByBrowser(s)).catch((err)=>console.error(`Can't determine if noise cancellation is supported`, err));
        }
    }, [
        noiseCancellation
    ]);
    const isSupported = isSupportedByBrowser && hasCapability && noiseCancellationAllowed;
    const [isEnabled, setIsEnabled] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const deinit = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(undefined);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call || !isSupported) return;
        noiseCancellation.isEnabled().then((e)=>setIsEnabled(e));
        const unsubscribe = noiseCancellation.on('change', (v)=>setIsEnabled(v));
        const init = (deinit.current || Promise.resolve()).then(()=>noiseCancellation.init({
                tracer: call.tracer
            })).then(()=>call.microphone.enableNoiseCancellation(noiseCancellation)).catch((e)=>console.error(`Can't initialize noise cancellation`, e));
        return ()=>{
            deinit.current = init.then(()=>call.microphone.disableNoiseCancellation()).then(()=>noiseCancellation.dispose()).then(()=>unsubscribe());
        };
    }, [
        call,
        isSupported,
        noiseCancellation
    ]);
    const contextValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
            isSupported,
            isEnabled,
            setSuppressionLevel: (level)=>{
                if (!noiseCancellation) return;
                noiseCancellation.setSuppressionLevel(level);
            },
            setEnabled: (enabledOrSetter)=>{
                if (!noiseCancellation) return;
                const enable = typeof enabledOrSetter === 'function' ? enabledOrSetter(isEnabled) : enabledOrSetter;
                if (enable) {
                    noiseCancellation.enable();
                } else {
                    noiseCancellation.disable();
                }
            }
        }), [
        isEnabled,
        isSupported,
        noiseCancellation
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(NoiseCancellationContext.Provider, {
        value: contextValue,
        children: children
    });
};
const RingingCallControls = ()=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useCallCallingState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const callCallingState = useCallCallingState();
    if (!call) return null;
    const buttonsDisabled = callCallingState !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].RINGING;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__pending-call-controls",
        children: call.isCreatedByMe ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CancelCallButton, {
            disabled: buttonsDisabled
        }) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(AcceptCallButton, {
                    disabled: buttonsDisabled
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(CancelCallButton, {
                    onClick: ()=>{
                        const reason = call.isCreatedByMe ? 'cancel' : 'decline';
                        call.leave({
                            reject: true,
                            reason
                        });
                    },
                    disabled: buttonsDisabled
                })
            ]
        })
    });
};
const CALLING_STATE_TO_LABEL = {
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].JOINING]: 'Joining',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].RINGING]: 'Ringing',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].MIGRATING]: 'Migrating',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].RECONNECTING]: 'Re-connecting',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].RECONNECTING_FAILED]: 'Failed',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].OFFLINE]: 'No internet connection',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].IDLE]: '',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].UNKNOWN]: '',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].JOINED]: 'Joined',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].LEFT]: 'Left call'
};
const RingingCall = (props)=>{
    const { includeSelf = false, totalMembersToShow = 3 } = props;
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { useCallCallingState, useCallMembers } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const callingState = useCallCallingState();
    const members = useCallMembers();
    const connectedUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useConnectedUser"])();
    if (!call) return null;
    // take the first N members to show their avatars
    const membersToShow = (members || []).slice(0, totalMembersToShow).map(({ user })=>user).filter((user)=>user.id !== connectedUser?.id || includeSelf);
    if (includeSelf && !membersToShow.find((user)=>user.id === connectedUser?.id)) {
        // if the current user is not in the initial batch of members,
        // replace the first item in membersToShow array with the current user
        const self = members.find(({ user })=>user.id === connectedUser?.id);
        if (self) {
            membersToShow.splice(0, 1, self.user);
        }
    }
    const callingStateLabel = CALLING_STATE_TO_LABEL[callingState];
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__call-panel str-video__call-panel--ringing",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-panel__members-list",
                children: membersToShow.map((user)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                        className: "str-video__call-panel__member-box",
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Avatar, {
                                name: user.name,
                                imageSrc: user.image
                            }),
                            user.name && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                className: "str-video__member_details",
                                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                                    className: "str-video__member_name",
                                    children: user.name
                                })
                            })
                        ]
                    }, user.id))
            }),
            callingStateLabel && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__call-panel__calling-state-label",
                children: t(callingStateLabel)
            }),
            [
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].RINGING,
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].JOINING
            ].includes(callingState) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(RingingCallControls, {})
        ]
    });
};
const byNameOrId = (a, b)=>{
    if (a.name && b.name && a.name < b.name) return -1;
    if (a.name && b.name && a.name > b.name) return 1;
    if (a.id < b.id) return -1;
    if (a.id > b.id) return 1;
    return 0;
};
const PermissionRequests = ()=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useLocalParticipant, useHasPermissions } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const localParticipant = useLocalParticipant();
    const [expanded, setExpanded] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const [permissionRequests, setPermissionRequests] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])([]);
    const canUpdateCallPermissions = useHasPermissions(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].UPDATE_CALL_PERMISSIONS);
    const localUserId = localParticipant?.userId;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call || !canUpdateCallPermissions) return;
        return call.on('call.permission_request', (event)=>{
            if (event.user.id !== localUserId) {
                setPermissionRequests((requests)=>[
                        ...requests,
                        event
                    ].sort((a, b)=>byNameOrId(a.user, b.user)));
            }
        });
    }, [
        call,
        canUpdateCallPermissions,
        localUserId
    ]);
    const handleUpdatePermission = (request, type)=>{
        return async ()=>{
            const { user, permissions } = request;
            switch(type){
                case 'grant':
                    await call?.grantPermissions(user.id, permissions);
                    break;
                case 'revoke':
                    await call?.revokePermissions(user.id, permissions);
                    break;
            }
            setPermissionRequests((requests)=>requests.filter((r)=>r !== request));
        };
    };
    const { refs, x, y, strategy } = useFloatingUIPreset({
        placement: 'bottom',
        strategy: 'absolute'
    });
    // don't render anything if there are no permission requests
    if (permissionRequests.length === 0) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__permission-requests",
        ref: refs.setReference,
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__permission-requests__notification",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("span", {
                        className: "str-video__permission-requests__notification__message",
                        children: [
                            permissionRequests.length,
                            " pending permission requests"
                        ]
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Button, {
                        type: "button",
                        onClick: ()=>{
                            setExpanded((e)=>!e);
                        },
                        children: expanded ? 'Hide requests' : 'Show requests'
                    })
                ]
            }),
            expanded && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(PermissionRequestList, {
                ref: refs.setFloating,
                style: {
                    position: strategy,
                    top: y ?? 0,
                    left: x ?? 0,
                    overflowY: 'auto'
                },
                permissionRequests: permissionRequests,
                handleUpdatePermission: handleUpdatePermission
            })
        ]
    });
};
const PermissionRequestList = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function PermissionRequestList(props, ref) {
    const { permissionRequests, handleUpdatePermission, ...rest } = props;
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__permission-requests-list",
        ref: ref,
        ...rest,
        children: permissionRequests.map((request, reqIndex)=>{
            const { user, permissions } = request;
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
                children: permissions.map((permission)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                        className: "str-video__permission-request",
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                className: "str-video__permission-request__message",
                                children: messageForPermission(user.name || user.id, permission, t)
                            }),
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Button, {
                                className: "str-video__permission-request__button--allow",
                                type: "button",
                                onClick: handleUpdatePermission(request, 'grant'),
                                children: t('Allow')
                            }),
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Button, {
                                className: "str-video__permission-request__button--reject",
                                type: "button",
                                onClick: handleUpdatePermission(request, 'revoke'),
                                children: t('Revoke')
                            }),
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Button, {
                                className: "str-video__permission-request__button--reject",
                                type: "button",
                                onClick: handleUpdatePermission(request, 'dismiss'),
                                children: t('Dismiss')
                            })
                        ]
                    }, permission))
            }, `${user.id}/${reqIndex}`);
        })
    });
});
const Button = (props)=>{
    const { className, ...rest } = props;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("button", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__permission-request__button', className),
        ...rest
    });
};
const messageForPermission = (userName, permission, t)=>{
    switch(permission){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_AUDIO:
            return t('{{ userName }} is requesting to speak', {
                userName
            });
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SEND_VIDEO:
            return t('{{ userName }} is requesting to share their camera', {
                userName
            });
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["OwnCapability"].SCREENSHARE:
            return t('{{ userName }} is requesting to present their screen', {
                userName
            });
        default:
            return t('{{ userName }} is requesting permission: {{ permission }}', {
                userName,
                permission
            });
    }
};
const StreamTheme = ({ as: Component = 'div', className, children, ...props })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Component, {
        ...props,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video', className),
        children: children
    });
};
const DefaultDisabledVideoPreview = ()=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str_video__video-preview__disabled-video-preview",
        children: t('Video is disabled')
    });
};
const DefaultNoCameraPreview = ()=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str_video__video-preview__no-camera-preview",
        children: t('No camera found')
    });
};
const VideoPreview = ({ className, mirror = true, DisabledVideoPreview = DefaultDisabledVideoPreview, NoCameraPreview = DefaultNoCameraPreview, StartingCameraPreview = LoadingIndicator })=>{
    const { useCameraState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { devices, status, isMute, mediaStream } = useCameraState();
    let contents;
    if (isMute && devices?.length === 0) {
        contents = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(NoCameraPreview, {});
    } else if (status === 'enabled') {
        const loading = !mediaStream;
        contents = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                mediaStream && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BaseVideo, {
                    stream: mediaStream,
                    className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__video-preview', {
                        'str-video__video-preview--mirror': mirror,
                        'str-video__video-preview--loading': loading
                    })
                }),
                loading && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(StartingCameraPreview, {})
            ]
        });
    } else {
        contents = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DisabledVideoPreview, {});
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__video-preview-container', className),
        children: contents
    });
};
const ToggleButton = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ToggleButton(props, ref) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
        enabled: props.menuShown,
        icon: "ellipsis",
        ref: ref
    });
});
const DefaultScreenShareOverlay = ()=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const stopScreenShare = ()=>{
        call?.screenShare.disable().catch((err)=>{
            console.error('Failed to stop screen sharing:', err);
        });
    };
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__screen-share-overlay",
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                icon: "screen-share-off"
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                className: "str-video__screen-share-overlay__title",
                children: t('You are presenting your screen')
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("button", {
                onClick: stopScreenShare,
                type: "button",
                className: "str-video__screen-share-overlay__button",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        icon: "close"
                    }),
                    " ",
                    t('Stop Screen Sharing')
                ]
            })
        ]
    });
};
const DefaultParticipantViewUI = ({ indicatorsVisible = true, menuPlacement = 'bottom-start', showMenuButton = true, ParticipantActionsContextMenu: ParticipantActionsContextMenu$1 = ParticipantActionsContextMenu })=>{
    const { participant, trackType } = useParticipantViewContext();
    const isScreenSharing = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"])(participant);
    if (participant.isLocalParticipant && isScreenSharing && trackType === 'screenShareTrack') {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DefaultScreenShareOverlay, {}),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantDetails, {
                    indicatorsVisible: indicatorsVisible
                })
            ]
        });
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            showMenuButton && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(MenuToggle, {
                strategy: "fixed",
                placement: menuPlacement,
                ToggleButton: ToggleButton,
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantActionsContextMenu$1, {})
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Reaction, {
                participant: participant
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantDetails, {
                indicatorsVisible: indicatorsVisible
            })
        ]
    });
};
const ParticipantDetails = ({ indicatorsVisible = true })=>{
    const { participant, trackType } = useParticipantViewContext();
    const { isLocalParticipant, connectionQuality, pin, sessionId, name, userId } = participant;
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const connectionQualityAsString = !!connectionQuality && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["SfuModels"].ConnectionQuality[connectionQuality].toLowerCase();
    const hasAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasAudio"])(participant);
    const hasVideoTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasVideo"])(participant);
    const canUnpin = !!pin && pin.isLocalPin;
    const isTrackPaused = trackType !== 'none' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasPausedTrack"])(participant, trackType) : false;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                className: "str-video__participant-details",
                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("span", {
                    className: "str-video__participant-details__name",
                    children: [
                        name || userId,
                        indicatorsVisible && !hasAudioTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            className: "str-video__participant-details__name--audio-muted"
                        }),
                        indicatorsVisible && !hasVideoTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            className: "str-video__participant-details__name--video-muted"
                        }),
                        indicatorsVisible && isTrackPaused && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            title: t('Video paused due to insufficient bandwidth'),
                            className: "str-video__participant-details__name--track-paused"
                        }),
                        indicatorsVisible && canUnpin && // TODO: remove this monstrosity once we have a proper design
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                            title: t('Unpin'),
                            onClick: ()=>call?.unpin(sessionId),
                            className: "str-video__participant-details__name--pinned"
                        }),
                        indicatorsVisible && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(SpeechIndicator, {})
                    ]
                })
            }),
            indicatorsVisible && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Notification, {
                isVisible: isLocalParticipant && connectionQuality === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["SfuModels"].ConnectionQuality.POOR,
                message: t('Poor connection quality'),
                children: connectionQualityAsString && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__participant-details__connection-quality', `str-video__participant-details__connection-quality--${connectionQualityAsString}`),
                    title: connectionQualityAsString
                })
            })
        ]
    });
};
const SpeechIndicator = ()=>{
    const { participant } = useParticipantViewContext();
    const { isSpeaking, isDominantSpeaker } = participant;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("span", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__speech-indicator', isSpeaking && 'str-video__speech-indicator--speaking', isDominantSpeaker && 'str-video__speech-indicator--dominant'),
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                className: "str-video__speech-indicator__bar"
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                className: "str-video__speech-indicator__bar"
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                className: "str-video__speech-indicator__bar"
            })
        ]
    });
};
const ParticipantView = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])(function ParticipantView({ participant, trackType = 'videoTrack', mirror, muteAudio, refs: { setVideoElement, setVideoPlaceholderElement } = {}, className, VideoPlaceholder, PictureInPicturePlaceholder, ParticipantViewUI = DefaultParticipantViewUI }, ref) {
    const { isLocalParticipant, isSpeaking, isDominantSpeaker, sessionId } = participant;
    const hasAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasAudio"])(participant);
    const hasVideoTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasVideo"])(participant);
    const hasScreenShareAudioTrack = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShareAudio"])(participant);
    const [trackedElement, setTrackedElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [contextVideoElement, setContextVideoElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [contextVideoPlaceholderElement, setContextVideoPlaceholderElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    // TODO: allow to pass custom ViewportTracker instance from props
    useTrackElementVisibility({
        sessionId,
        trackedElement,
        trackType
    });
    const { useIncomingVideoSettings } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const { isParticipantVideoEnabled } = useIncomingVideoSettings();
    const participantViewContextValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
            participant,
            participantViewElement: trackedElement,
            videoElement: contextVideoElement,
            videoPlaceholderElement: contextVideoPlaceholderElement,
            trackType
        }), [
        contextVideoElement,
        contextVideoPlaceholderElement,
        participant,
        trackedElement,
        trackType
    ]);
    const videoRefs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
            setVideoElement: (element)=>{
                setVideoElement?.(element);
                setContextVideoElement(element);
            },
            setVideoPlaceholderElement: (element)=>{
                setVideoPlaceholderElement?.(element);
                setContextVideoPlaceholderElement(element);
            }
        }), [
        setVideoElement,
        setVideoPlaceholderElement
    ]);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        "data-testid": "participant-view",
        ref: (element)=>{
            applyElementToRef(ref, element);
            setTrackedElement(element);
        },
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__participant-view', isDominantSpeaker && 'str-video__participant-view--dominant-speaker', isSpeaking && 'str-video__participant-view--speaking', !hasVideoTrack && 'str-video__participant-view--no-video', !hasAudioTrack && 'str-video__participant-view--no-audio', className),
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(ParticipantViewContext.Provider, {
            value: participantViewContextValue,
            children: [
                !isLocalParticipant && !muteAudio && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
                    children: [
                        hasAudioTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Audio, {
                            participant: participant,
                            trackType: "audioTrack"
                        }),
                        hasScreenShareAudioTrack && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Audio, {
                            participant: participant,
                            trackType: "screenShareAudioTrack"
                        })
                    ]
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Video$1, {
                    VideoPlaceholder: VideoPlaceholder,
                    PictureInPicturePlaceholder: PictureInPicturePlaceholder,
                    participant: participant,
                    trackType: trackType,
                    refs: videoRefs,
                    enabled: isLocalParticipant || trackType !== 'videoTrack' || isParticipantVideoEnabled(participant.sessionId),
                    mirror: mirror,
                    autoPlay: true
                }),
                isComponentType(ParticipantViewUI) ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantViewUI, {}) : ParticipantViewUI
            ]
        })
    });
});
ParticipantView.displayName = 'ParticipantView';
// re-exporting the StreamCallProvider as StreamCall
const StreamCall = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["StreamCallProvider"];
StreamCall.displayName = 'StreamCall';
var Joining = "Joining";
var Mic = "Mic";
var Ringing = "Ringing";
var Speakers = "Speakers";
var Video = "Video";
var Live = "Live";
var Reactions = "Reactions";
var Statistics = "Statistics";
var Invite = "Invite";
var Join = "Join";
var You = "You";
var Me = "Me";
var Unknown = "Unknown";
var Default = "Default";
var Refresh = "Refresh";
var Allow = "Allow";
var Revoke = "Revoke";
var Dismiss = "Dismiss";
var Pinned = "Pinned";
var Unpin = "Unpin";
var Pin = "Pin";
var Block = "Block";
var Kick = "Kick";
var Enter = "Enter";
var Leave = "Leave";
var Participants = "Participants";
var Anonymous = ", and ({{ count }}) anonymous";
var en = {
    Joining: Joining,
    Mic: Mic,
    "No internet connection": "No internet connection",
    "Re-connecting": "Re-connecting",
    Ringing: Ringing,
    "Screen Share": "Screen Share",
    "Select a Camera": "Select a Camera",
    "Select a Mic": "Select a Mic",
    "Select Speakers": "Select Speakers",
    Speakers: Speakers,
    Video: Video,
    "You are muted. Unmute to speak.": "You are muted. Unmute to speak.",
    Live: Live,
    "Livestream starts soon": "Livestream starts soon",
    "Livestream starts at {{ startsAt }}": "Livestream starts at {{ startsAt, datetime }}",
    "{{ count }} participants joined early_one": "{{ count }} participant joined early",
    "{{ count }} participants joined early_other": "{{ count }} participants joined early",
    "You can now speak.": "You can now speak.",
    "Awaiting for an approval to speak.": "Awaiting for an approval to speak.",
    "You can no longer speak.": "You can no longer speak.",
    "You can now share your video.": "You can now share your video.",
    "Awaiting for an approval to share your video.": "Awaiting for an approval to share your video.",
    "You can no longer share your video.": "You can no longer share your video.",
    "Waiting for recording to stop...": "Waiting for recording to stop...",
    "Waiting for recording to start...": "Waiting for recording to start...",
    "Record call": "Record call",
    Reactions: Reactions,
    Statistics: Statistics,
    "You can now share your screen.": "You can now share your screen.",
    "Awaiting for an approval to share screen.": "Awaiting for an approval to share screen.",
    "You can no longer share your screen.": "You can no longer share your screen.",
    "Share screen": "Share screen",
    "Incoming Call...": "Incoming Call...",
    "Calling...": "Calling...",
    "Mute All": "Mute All",
    Invite: Invite,
    Join: Join,
    You: You,
    Me: Me,
    Unknown: Unknown,
    "Toggle device menu": "Toggle device menu",
    Default: Default,
    "Call Recordings": "Call Recordings",
    Refresh: Refresh,
    "Check your browser video permissions": "Check your browser video permissions",
    "Video publishing is disabled by the system": "Video publishing is disabled by the system",
    "You have no permission to share your video": "You have no permission to share your video",
    "You have no permission to share your audio": "You have no permission to share your audio",
    "You are presenting your screen": "You are presenting your screen",
    "Stop Screen Sharing": "Stop Screen Sharing",
    Allow: Allow,
    Revoke: Revoke,
    Dismiss: Dismiss,
    "Microphone on": "Microphone on",
    "Microphone off": "Microphone off",
    "Camera on": "Camera on",
    "Camera off": "Camera off",
    "No camera found": "No camera found",
    "Video is disabled": "Video is disabled",
    Pinned: Pinned,
    Unpin: Unpin,
    Pin: Pin,
    "Pin for everyone": "Pin for everyone",
    "Unpin for everyone": "Unpin for everyone",
    Block: Block,
    Kick: Kick,
    "Turn off video": "Turn off video",
    "Turn off screen share": "Turn off screen share",
    "Mute audio": "Mute audio",
    "Mute screen share audio": "Mute screen share audio",
    "Allow audio": "Allow audio",
    "Allow video": "Allow video",
    "Allow screen sharing": "Allow screen sharing",
    "Disable audio": "Disable audio",
    "Disable video": "Disable video",
    "Disable screen sharing": "Disable screen sharing",
    Enter: Enter,
    Leave: Leave,
    "Leave call": "Leave call",
    "End call for all": "End call for all",
    "{{ direction }} fullscreen": "{{ direction }} fullscreen",
    "{{ direction }} picture-in-picture": "{{ direction }} picture-in-picture",
    "Dominant Speaker": "Dominant Speaker",
    "Poor connection quality": "Poor connection quality. Please check your internet connection.",
    "Video paused due to insufficient bandwidth": "Video paused due to insufficient bandwidth",
    Participants: Participants,
    Anonymous: Anonymous,
    "No participants found": "No participants found",
    "Participants ({{ numberOfParticipants }})": "Participants ({{ numberOfParticipants }})",
    "{{ userName }} is sharing their screen": "{{ userName }} is sharing their screen",
    "{{ userName }} is requesting to speak": "{{ userName }} is requesting to speak",
    "{{ userName }} is requesting to share their camera": "{{ userName }} is requesting to share their camera",
    "{{ userName }} is requesting to present their screen": "{{ userName }} is requesting to present their screen",
    "{{ userName }} is requesting permission: {{ permission }}": "{{ userName }} is requesting permission: {{ permission }}"
};
const translations = {
    en
};
const StreamVideo = (props)=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["StreamVideoProvider"], {
        translationsOverrides: translations,
        ...props
    });
};
StreamVideo.displayName = 'StreamVideo';
function applyFilter(obj, filter) {
    if ('$and' in filter) {
        return filter.$and.every((f)=>applyFilter(obj, f));
    }
    if ('$or' in filter) {
        return filter.$or.some((f)=>applyFilter(obj, f));
    }
    if ('$not' in filter) {
        return !applyFilter(obj, filter.$not);
    }
    return checkConditions(obj, filter);
}
const isDateString = (value)=>typeof value === 'string' && /^((?:(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2}(?:\.\d+)?))(Z|[+-]\d{2}:\d{2})?)$/.test(value);
function checkConditions(obj, conditions) {
    let match = true;
    for (const key of Object.keys(conditions)){
        const operator = conditions[key];
        const maybeOperator = operator && typeof operator === 'object';
        let value = obj[key];
        if (value instanceof Date) {
            value = value.getTime();
        } else if (isDateString(value)) {
            value = new Date(value).getTime();
        }
        if (maybeOperator && '$eq' in operator) {
            const eqOperator = operator;
            const eqOperatorValue = isDateString(eqOperator.$eq) ? new Date(eqOperator.$eq).getTime() : eqOperator.$eq;
            match && (match = eqOperatorValue === value);
        } else if (maybeOperator && '$neq' in operator) {
            const neqOperator = operator;
            match && (match = neqOperator.$neq !== value);
        } else if (maybeOperator && '$in' in operator) {
            const inOperator = operator;
            match && (match = inOperator.$in.includes(value));
        } else if (maybeOperator && '$contains' in operator) {
            if (Array.isArray(value)) {
                const containsOperator = operator;
                match && (match = value.includes(containsOperator.$contains));
            } else {
                match = false;
            }
        } else if (maybeOperator && '$gt' in operator) {
            const gtOperator = operator;
            const gtOperatorValue = isDateString(gtOperator.$gt) ? new Date(gtOperator.$gt).getTime() : gtOperator.$gt;
            match && (match = value > gtOperatorValue);
        } else if (maybeOperator && '$gte' in operator) {
            const gteOperator = operator;
            const gteOperatorValue = isDateString(gteOperator.$gte) ? new Date(gteOperator.$gte).getTime() : gteOperator.$gte;
            match && (match = value >= gteOperatorValue);
        } else if (maybeOperator && '$lt' in operator) {
            const ltOperator = operator;
            const ltOperatorValue = isDateString(ltOperator.$lt) ? new Date(ltOperator.$lt).getTime() : ltOperator.$lt;
            match && (match = value < ltOperatorValue);
        } else if (maybeOperator && '$lte' in operator) {
            const lteOperator = operator;
            const lteOperatorValue = isDateString(lteOperator.$lte) ? new Date(lteOperator.$lte).getTime() : lteOperator.$lte;
            match && (match = value <= lteOperatorValue);
        // } else if (maybeOperator && '$autocomplete' in operator) {
        // TODO: regexp solution maybe?
        // match &&= false;
        } else {
            const eqValue = operator;
            match && (match = eqValue === value);
        }
        if (!match) {
            return false;
        }
    }
    return true;
}
const useFilteredParticipants = ({ excludeLocalParticipant = false, filterParticipants })=>{
    const { useParticipants, useRemoteParticipants } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const allParticipants = useParticipants();
    const remoteParticipants = useRemoteParticipants();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>{
        const unfilteredParticipants = excludeLocalParticipant ? remoteParticipants : allParticipants;
        return filterParticipants ? applyParticipantsFilter(unfilteredParticipants, filterParticipants) : unfilteredParticipants;
    }, [
        allParticipants,
        remoteParticipants,
        excludeLocalParticipant,
        filterParticipants
    ]);
};
const applyParticipantsFilter = (participants, filter)=>{
    const filterCallback = typeof filter === 'function' ? filter : (participant)=>applyFilter({
            userId: participant.userId,
            isSpeaking: participant.isSpeaking,
            isDominantSpeaker: participant.isDominantSpeaker,
            name: participant.name,
            roles: participant.roles,
            isPinned: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["isPinned"])(participant),
            hasVideo: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasVideo"])(participant),
            hasAudio: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasAudio"])(participant),
            hasScreenShare: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"])(participant)
        }, filter);
    return participants.filter(filterCallback);
};
const usePaginatedLayoutSortPreset = (call)=>{
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call) return;
        call.setSortParticipantsBy(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["paginatedLayoutSortPreset"]);
        return ()=>{
            resetSortPreset(call);
        };
    }, [
        call
    ]);
};
const useSpeakerLayoutSortPreset = (call, isOneOnOneCall)=>{
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!call) return;
        // always show the remote participant in the spotlight
        if (isOneOnOneCall) {
            call.setSortParticipantsBy((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["combineComparators"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["screenSharing"], loggedIn));
        } else {
            call.setSortParticipantsBy(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["speakerLayoutSortPreset"]);
        }
        return ()=>{
            resetSortPreset(call);
        };
    }, [
        call,
        isOneOnOneCall
    ]);
};
const useRawRemoteParticipants = ()=>{
    const { useRawParticipants } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const rawParticipants = useRawParticipants();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>rawParticipants.filter((p)=>!p.isLocalParticipant), [
        rawParticipants
    ]);
};
const resetSortPreset = (call)=>{
    // reset the sorting to the default for the call type
    const callConfig = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallTypes"].get(call.type);
    call.setSortParticipantsBy(callConfig.options.sortParticipantsBy || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["defaultSortPreset"]);
};
const loggedIn = (a, b)=>{
    if (a.isLocalParticipant) return 1;
    if (b.isLocalParticipant) return -1;
    return 0;
};
const LivestreamLayout = (props)=>{
    const { useParticipants, useHasOngoingScreenShare } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const participants = useParticipants();
    const [currentSpeaker] = participants;
    const remoteParticipants = useRawRemoteParticipants();
    const hasOngoingScreenShare = useHasOngoingScreenShare();
    const presenter = hasOngoingScreenShare ? participants.find(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"]) : undefined;
    usePaginatedLayoutSortPreset(call);
    const overlay = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantOverlay, {
        showParticipantCount: props.showParticipantCount,
        showDuration: props.showDuration,
        showLiveBadge: props.showLiveBadge,
        showSpeakerName: props.showSpeakerName
    });
    const { floatingParticipantProps, muted } = props;
    const floatingParticipantOverlay = hasOngoingScreenShare && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantOverlay, {
        // these elements aren't needed for the video feed
        showParticipantCount: floatingParticipantProps?.showParticipantCount ?? false,
        showDuration: floatingParticipantProps?.showDuration ?? false,
        showLiveBadge: floatingParticipantProps?.showLiveBadge ?? false,
        showSpeakerName: floatingParticipantProps?.showSpeakerName ?? true
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__livestream-layout__wrapper",
        children: [
            !muted && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantsAudio, {
                participants: remoteParticipants
            }),
            hasOngoingScreenShare && presenter && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                className: "str-video__livestream-layout__screen-share",
                participant: presenter,
                ParticipantViewUI: overlay,
                trackType: "screenShareTrack",
                muteAudio: true
            }),
            currentSpeaker && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(hasOngoingScreenShare && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__livestream-layout__floating-participant', `str-video__livestream-layout__floating-participant--${floatingParticipantProps?.position ?? 'top-right'}`)),
                participant: currentSpeaker,
                ParticipantViewUI: floatingParticipantOverlay || overlay,
                mirror: props.mirrorLocalParticipantVideo !== false ? undefined : false,
                muteAudio: true
            })
        ]
    });
};
LivestreamLayout.displayName = 'LivestreamLayout';
const BackstageLayout = (props)=>{
    const { showEarlyParticipantCount = true } = props;
    const { useParticipantCount, useCallStartsAt } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const participantCount = useParticipantCount();
    const startsAt = useCallStartsAt();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__livestream-layout__wrapper",
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
            className: "str-video__livestream-layout__backstage",
            children: [
                startsAt && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__starts-at",
                    children: startsAt.getTime() < Date.now() ? t('Livestream starts soon') : t('Livestream starts at {{ startsAt }}', {
                        startsAt
                    })
                }),
                showEarlyParticipantCount && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__early-viewers-count",
                    children: t('{{ count }} participants joined early', {
                        count: participantCount
                    })
                })
            ]
        })
    });
};
BackstageLayout.displayName = 'BackstageLayout';
const ParticipantOverlay = (props)=>{
    const { enableFullScreen = true, showParticipantCount = true, showDuration = true, showLiveBadge = true, showSpeakerName = false } = props;
    const { participant } = useParticipantViewContext();
    const { useParticipantCount } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const participantCount = useParticipantCount();
    const duration = useUpdateCallDuration();
    const toggleFullScreen = useToggleFullScreen();
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: "str-video__livestream-layout__overlay",
        children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
            className: "str-video__livestream-layout__overlay__bar",
            children: [
                showLiveBadge && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__live-badge",
                    children: t('Live')
                }),
                showParticipantCount && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__viewers-count",
                    children: participantCount
                }),
                showSpeakerName && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__speaker-name",
                    title: participant.name || participant.userId || '',
                    children: participant.name || participant.userId || ''
                }),
                showDuration && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__duration",
                    children: formatDuration(duration)
                }),
                enableFullScreen && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                    className: "str-video__livestream-layout__go-fullscreen",
                    onClick: toggleFullScreen
                })
            ]
        })
    });
};
const useUpdateCallDuration = ()=>{
    const { useIsCallLive, useCallSession } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const isCallLive = useIsCallLive();
    const session = useCallSession();
    const [duration, setDuration] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(()=>{
        if (!session || !session.live_started_at) return 0;
        const liveStartTime = new Date(session.live_started_at);
        const now = new Date();
        return Math.floor((now.getTime() - liveStartTime.getTime()) / 1000);
    });
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!isCallLive) return;
        const interval = setInterval(()=>{
            setDuration((d)=>d + 1);
        }, 1000);
        return ()=>{
            clearInterval(interval);
        };
    }, [
        isCallLive
    ]);
    return duration;
};
const useToggleFullScreen = ()=>{
    const { participantViewElement } = useParticipantViewContext();
    const [isFullscreen, setIsFullscreen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(!!document.fullscreenElement);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const handler = ()=>setIsFullscreen(!!document.fullscreenElement);
        document.addEventListener('fullscreenchange', handler);
        return ()=>{
            document.removeEventListener('fullscreenchange', handler);
        };
    }, []);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        if (isFullscreen) {
            document.exitFullscreen().catch((err)=>{
                console.error('Failed to exit fullscreen', err);
            });
        } else {
            participantViewElement?.requestFullscreen().catch((err)=>{
                console.error('Failed to enter fullscreen', err);
            });
        }
    }, [
        isFullscreen,
        participantViewElement
    ]);
};
const formatDuration = (durationInMs)=>{
    const days = Math.floor(durationInMs / 86400);
    const hours = Math.floor(durationInMs / 3600);
    const minutes = Math.floor(durationInMs % 3600 / 60);
    const seconds = durationInMs % 60;
    return `${days ? days + ' ' : ''}${hours ? hours + ':' : ''}${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
};
const GROUP_SIZE = 16;
const PaginatedGridLayoutGroup = ({ group, mirror, VideoPlaceholder, PictureInPicturePlaceholder, ParticipantViewUI })=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__paginated-grid-layout__group', {
            'str-video__paginated-grid-layout--one': group.length === 1,
            'str-video__paginated-grid-layout--two-four': group.length >= 2 && group.length <= 4,
            'str-video__paginated-grid-layout--five-nine': group.length >= 5 && group.length <= 9
        }),
        children: group.map((participant)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                participant: participant,
                muteAudio: true,
                mirror: mirror,
                VideoPlaceholder: VideoPlaceholder,
                PictureInPicturePlaceholder: PictureInPicturePlaceholder,
                ParticipantViewUI: ParticipantViewUI
            }, participant.sessionId))
    });
};
const PaginatedGridLayout = (props)=>{
    const { groupSize = (props.groupSize || 0) > 0 ? props.groupSize || GROUP_SIZE : GROUP_SIZE, excludeLocalParticipant = false, filterParticipants, mirrorLocalParticipantVideo = true, pageArrowsVisible = true, VideoPlaceholder, ParticipantViewUI = DefaultParticipantViewUI, PictureInPicturePlaceholder, muted } = props;
    const [page, setPage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(0);
    const [paginatedGridLayoutWrapperElement, setPaginatedGridLayoutWrapperElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const remoteParticipants = useRawRemoteParticipants();
    const participants = useFilteredParticipants({
        excludeLocalParticipant,
        filterParticipants
    });
    usePaginatedLayoutSortPreset(call);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!paginatedGridLayoutWrapperElement || !call) return;
        const cleanup = call.setViewport(paginatedGridLayoutWrapperElement);
        return ()=>cleanup();
    }, [
        paginatedGridLayoutWrapperElement,
        call
    ]);
    // only used to render video elements
    const participantGroups = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>chunk(participants, groupSize), [
        participants,
        groupSize
    ]);
    const pageCount = participantGroups.length;
    // update page when page count is reduced and selected page no longer exists
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (page > pageCount - 1) {
            setPage(Math.max(0, pageCount - 1));
        }
    }, [
        page,
        pageCount
    ]);
    const selectedGroup = participantGroups[page];
    const mirror = mirrorLocalParticipantVideo ? undefined : false;
    if (!call) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__paginated-grid-layout__wrapper",
        ref: setPaginatedGridLayoutWrapperElement,
        children: [
            !muted && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantsAudio, {
                participants: remoteParticipants
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__paginated-grid-layout",
                children: [
                    pageArrowsVisible && pageCount > 1 && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                        icon: "caret-left",
                        disabled: page === 0,
                        onClick: ()=>setPage((currentPage)=>Math.max(0, currentPage - 1))
                    }),
                    selectedGroup && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(PaginatedGridLayoutGroup, {
                        group: selectedGroup,
                        mirror: mirror,
                        VideoPlaceholder: VideoPlaceholder,
                        ParticipantViewUI: ParticipantViewUI,
                        PictureInPicturePlaceholder: PictureInPicturePlaceholder
                    }),
                    pageArrowsVisible && pageCount > 1 && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                        disabled: page === pageCount - 1,
                        icon: "caret-right",
                        onClick: ()=>setPage((currentPage)=>Math.min(pageCount - 1, currentPage + 1))
                    })
                ]
            })
        ]
    });
};
PaginatedGridLayout.displayName = 'PaginatedGridLayout';
const useCalculateHardLimit = (/**
 * Element that stretches to 100% of the whole layout component
 */ wrapperElement, /**
 * Element that directly hosts individual `ParticipantView` (or wrapper) elements
 */ hostElement, limit)=>{
    const [calculatedLimit, setCalculatedLimit] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])({
        vertical: typeof limit === 'number' ? limit : null,
        horizontal: typeof limit === 'number' ? limit : null
    });
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!hostElement || !wrapperElement || typeof limit === 'number' || typeof limit === 'undefined') return;
        let childWidth = null;
        let childHeight = null;
        const resizeObserver = new ResizeObserver((entries, observer)=>{
            // this part should ideally run as little times as possible
            // get child measurements and disconnect
            // does not consider dynamically sized children
            // this hook is for SpeakerLayout use only, where children in the bar are fixed size
            if (entries.length > 1) {
                const child = hostElement.firstChild;
                if (child) {
                    childHeight = child.clientHeight;
                    childWidth = child.clientWidth;
                    observer.unobserve(hostElement);
                }
            }
            // keep the state at { vertical: 1, horizontal: 1 }
            // until we get the proper child measurements
            if (childHeight === null || childWidth === null) return;
            const vertical = Math.floor(wrapperElement.clientHeight / childHeight);
            const horizontal = Math.floor(wrapperElement.clientWidth / childWidth);
            setCalculatedLimit((pv)=>{
                if (pv.vertical !== vertical || pv.horizontal !== horizontal) return {
                    vertical,
                    horizontal
                };
                return pv;
            });
        });
        resizeObserver.observe(wrapperElement);
        resizeObserver.observe(hostElement);
        return ()=>{
            resizeObserver.disconnect();
        };
    }, [
        hostElement,
        limit,
        wrapperElement
    ]);
    return calculatedLimit;
};
const DefaultParticipantViewUIBar = ()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(DefaultParticipantViewUI, {
        menuPlacement: "top-end"
    });
const SpeakerLayout = ({ ParticipantViewUIBar = DefaultParticipantViewUIBar, ParticipantViewUISpotlight = DefaultParticipantViewUI, VideoPlaceholder, PictureInPicturePlaceholder, participantsBarPosition = 'bottom', participantsBarLimit, mirrorLocalParticipantVideo = true, excludeLocalParticipant = false, filterParticipants, pageArrowsVisible = true, muted })=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useParticipants } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const allParticipants = useParticipants();
    const remoteParticipants = useRawRemoteParticipants();
    const [participantInSpotlight, ...otherParticipants] = useFilteredParticipants({
        excludeLocalParticipant,
        filterParticipants
    });
    const [participantsBarWrapperElement, setParticipantsBarWrapperElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [participantsBarElement, setParticipantsBarElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [buttonsWrapperElement, setButtonsWrapperElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const isSpeakerScreenSharing = participantInSpotlight && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"])(participantInSpotlight);
    const hardLimit = useCalculateHardLimit(buttonsWrapperElement, participantsBarElement, participantsBarLimit);
    const isVertical = participantsBarPosition === 'left' || participantsBarPosition === 'right';
    const isHorizontal = participantsBarPosition === 'top' || participantsBarPosition === 'bottom';
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!participantsBarWrapperElement || !call) return;
        const cleanup = call.setViewport(participantsBarWrapperElement);
        return ()=>cleanup();
    }, [
        participantsBarWrapperElement,
        call
    ]);
    const isOneOnOneCall = allParticipants.length === 2;
    useSpeakerLayoutSortPreset(call, isOneOnOneCall);
    let participantsWithAppliedLimit = otherParticipants;
    const hardLimitToApply = isVertical ? hardLimit.vertical : hardLimit.horizontal;
    if (typeof participantsBarLimit !== 'undefined' && hardLimitToApply !== null) {
        participantsWithAppliedLimit = otherParticipants.slice(0, // subtract 1 if speaker is sharing screen as
        // that one is rendered independently from otherParticipants array
        hardLimitToApply - (isSpeakerScreenSharing ? 1 : 0));
    }
    const mirror = mirrorLocalParticipantVideo ? undefined : false;
    if (!call) return null;
    const renderParticipantsBar = participantsBarPosition && (participantsWithAppliedLimit.length > 0 || isSpeakerScreenSharing);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__speaker-layout__wrapper",
        children: [
            !muted && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantsAudio, {
                participants: remoteParticipants
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])('str-video__speaker-layout', participantsBarPosition && `str-video__speaker-layout--variant-${participantsBarPosition}`),
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                        className: "str-video__speaker-layout__spotlight",
                        children: participantInSpotlight && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                            participant: participantInSpotlight,
                            muteAudio: true,
                            mirror: mirror,
                            trackType: isSpeakerScreenSharing ? 'screenShareTrack' : 'videoTrack',
                            ParticipantViewUI: ParticipantViewUISpotlight,
                            VideoPlaceholder: VideoPlaceholder,
                            PictureInPicturePlaceholder: PictureInPicturePlaceholder
                        })
                    }),
                    renderParticipantsBar && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                        ref: setButtonsWrapperElement,
                        className: "str-video__speaker-layout__participants-bar-buttons-wrapper",
                        children: [
                            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                className: "str-video__speaker-layout__participants-bar-wrapper",
                                ref: setParticipantsBarWrapperElement,
                                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                                    ref: setParticipantsBarElement,
                                    className: "str-video__speaker-layout__participants-bar",
                                    children: [
                                        isSpeakerScreenSharing && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                            className: "str-video__speaker-layout__participant-tile",
                                            children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                                                participant: participantInSpotlight,
                                                ParticipantViewUI: ParticipantViewUIBar,
                                                VideoPlaceholder: VideoPlaceholder,
                                                PictureInPicturePlaceholder: PictureInPicturePlaceholder,
                                                mirror: mirror,
                                                muteAudio: true
                                            })
                                        }, participantInSpotlight.sessionId),
                                        participantsWithAppliedLimit.map((participant)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("div", {
                                                className: "str-video__speaker-layout__participant-tile",
                                                children: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                                                    participant: participant,
                                                    ParticipantViewUI: ParticipantViewUIBar,
                                                    VideoPlaceholder: VideoPlaceholder,
                                                    PictureInPicturePlaceholder: PictureInPicturePlaceholder,
                                                    mirror: mirror,
                                                    muteAudio: true
                                                })
                                            }, participant.sessionId))
                                    ]
                                })
                            }),
                            pageArrowsVisible && isVertical && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(VerticalScrollButtons, {
                                scrollWrapper: participantsBarWrapperElement
                            }),
                            pageArrowsVisible && isHorizontal && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(HorizontalScrollButtons, {
                                scrollWrapper: participantsBarWrapperElement
                            })
                        ]
                    })
                ]
            })
        ]
    });
};
SpeakerLayout.displayName = 'SpeakerLayout';
const HorizontalScrollButtons = ({ scrollWrapper })=>{
    const scrollPosition = useHorizontalScrollPosition(scrollWrapper);
    const scrollStartClickHandler = ()=>{
        scrollWrapper?.scrollBy({
            left: -150,
            behavior: 'smooth'
        });
    };
    const scrollEndClickHandler = ()=>{
        scrollWrapper?.scrollBy({
            left: 150,
            behavior: 'smooth'
        });
    };
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            scrollPosition && scrollPosition !== 'start' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                onClick: scrollStartClickHandler,
                icon: "caret-left",
                className: "str-video__speaker-layout__participants-bar--button-left"
            }),
            scrollPosition && scrollPosition !== 'end' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                onClick: scrollEndClickHandler,
                icon: "caret-right",
                className: "str-video__speaker-layout__participants-bar--button-right"
            })
        ]
    });
};
const VerticalScrollButtons = ({ scrollWrapper })=>{
    const scrollPosition = useVerticalScrollPosition(scrollWrapper);
    const scrollTopClickHandler = ()=>{
        scrollWrapper?.scrollBy({
            top: -150,
            behavior: 'smooth'
        });
    };
    const scrollBottomClickHandler = ()=>{
        scrollWrapper?.scrollBy({
            top: 150,
            behavior: 'smooth'
        });
    };
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            scrollPosition && scrollPosition !== 'top' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                onClick: scrollTopClickHandler,
                icon: "caret-up",
                className: "str-video__speaker-layout__participants-bar--button-top"
            }),
            scrollPosition && scrollPosition !== 'bottom' && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(IconButton, {
                onClick: scrollBottomClickHandler,
                icon: "caret-down",
                className: "str-video__speaker-layout__participants-bar--button-bottom"
            })
        ]
    });
};
const Pip = (props)=>{
    const { t } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useI18n"])();
    const { excludeLocalParticipant = false, filterParticipants, mirrorLocalParticipantVideo = true, VideoPlaceholder, ParticipantViewUI = DefaultParticipantViewUI } = props;
    const [layoutWrapperElement, setLayoutWrapperElement] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const participants = useFilteredParticipants({
        excludeLocalParticipant,
        filterParticipants
    });
    const screenSharingParticipant = participants.find((p)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["hasScreenShare"])(p));
    usePaginatedLayoutSortPreset(call);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!layoutWrapperElement || !call) return;
        return call.setViewport(layoutWrapperElement);
    }, [
        layoutWrapperElement,
        call
    ]);
    const mirror = mirrorLocalParticipantVideo ? undefined : false;
    if (!call) return null;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
        className: "str-video__pip-layout",
        ref: setLayoutWrapperElement,
        children: [
            screenSharingParticipant && (screenSharingParticipant.isLocalParticipant ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])("div", {
                className: "str-video__pip-screen-share-local",
                children: [
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(Icon, {
                        icon: "screen-share-off"
                    }),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])("span", {
                        className: "str-video__pip-screen-share-local__title",
                        children: t('You are presenting your screen')
                    })
                ]
            }) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                participant: screenSharingParticipant,
                trackType: "screenShareTrack",
                muteAudio: true,
                mirror: false,
                VideoPlaceholder: VideoPlaceholder,
                ParticipantViewUI: ParticipantViewUI
            })),
            participants.map((participant)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantView, {
                    participant: participant,
                    muteAudio: true,
                    mirror: mirror,
                    VideoPlaceholder: VideoPlaceholder,
                    ParticipantViewUI: ParticipantViewUI
                }, participant.sessionId))
        ]
    });
};
Pip.displayName = 'PipLayout.Pip';
const Host = ()=>{
    const remoteParticipants = useRawRemoteParticipants();
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(ParticipantsAudio, {
        participants: remoteParticipants
    });
};
Host.displayName = 'PipLayout.Host';
const PipLayout = {
    Pip,
    Host
};
const LivestreamPlayer = (props)=>{
    const { callType, callId, children, ...restProps } = props;
    const client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useStreamVideoClient"])();
    const [call, setCall] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])();
    const onError = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffectEvent"])(props.onError ?? (()=>{}));
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!client) return;
        const myCall = client.call(callType, callId);
        setCall(myCall);
        myCall.get().catch((e)=>{
            console.error('Failed to fetch call', e);
            onError(e);
        });
        return ()=>{
            myCall.leave().catch((e)=>{
                console.error('Failed to leave call', e);
            });
            setCall(undefined);
        };
    }, [
        callId,
        callType,
        client
    ]);
    if (!call) {
        return null;
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxs"])(StreamCall, {
        call: call,
        children: [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LivestreamCall, {
                ...restProps
            }),
            children
        ]
    });
};
const LivestreamCall = (props)=>{
    const call = useLivestreamCall(props);
    const { useIsCallLive } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const isLive = useIsCallLive();
    if (!call) return null;
    if (isLive) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(LivestreamLayout, {
            ...props.layoutProps
        });
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsx"])(BackstageLayout, {
        ...props.backstageProps
    });
};
const useLivestreamCall = (props)=>{
    const call = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCall"])();
    const { useIsCallLive, useOwnCapabilities } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const canJoinLive = useIsCallLive();
    const canJoinEarly = useCanJoinEarly();
    const canJoinBackstage = useOwnCapabilities()?.includes('join-backstage') ?? false;
    const canJoinAsap = canJoinLive || canJoinEarly || canJoinBackstage;
    const joinBehavior = props.joinBehavior ?? 'asap';
    const canJoin = joinBehavior === 'asap' && canJoinAsap || joinBehavior === 'live' && canJoinLive;
    const onError = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffectEvent"])(props.onError ?? (()=>{}));
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (call && call.state.callingState === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CallingState"].IDLE && canJoin) {
            call.join().catch((e)=>{
                console.error('Failed to join call', e);
                onError(e);
            });
        }
    }, [
        call,
        canJoin
    ]);
    return call;
};
const useCanJoinEarly = ()=>{
    const { useCallStartsAt, useCallSettings } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$react$2d$bindings$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallStateHooks"])();
    const startsAt = useCallStartsAt();
    const settings = useCallSettings();
    const joinAheadTimeSeconds = settings?.backstage.join_ahead_time_seconds;
    const [canJoinEarly, setCanJoinEarly] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(()=>checkCanJoinEarly(startsAt, joinAheadTimeSeconds));
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!canJoinEarly) {
            const handle = setInterval(()=>{
                setCanJoinEarly(checkCanJoinEarly(startsAt, joinAheadTimeSeconds));
            }, 1000);
            return ()=>clearInterval(handle);
        }
    }, [
        canJoinEarly,
        startsAt,
        joinAheadTimeSeconds
    ]);
    return canJoinEarly;
};
const checkCanJoinEarly = (startsAt, joinAheadTimeSeconds)=>{
    if (!startsAt) {
        return false;
    }
    return Date.now() >= +startsAt - (joinAheadTimeSeconds ?? 0) * 1000;
};
const [major, minor, patch] = "1.25.1".split('.');
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["setSdkInfo"])({
    type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$stream$2d$io$2f$video$2d$client$2f$dist$2f$index$2e$es$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["SfuModels"].SdkType.REACT,
    major,
    minor,
    patch
});
;
 //# sourceMappingURL=index.es.js.map
}),
];

//# sourceMappingURL=node_modules_%40stream-io_video-react-sdk_dist_index_es_f985e57e.js.map