{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/components/AudioVolumeIndicator.tsx"],"sourcesContent":["import {\r\n  Icon,\r\n  createSoundDetector,\r\n  useCallStateHooks,\r\n} from \"@stream-io/video-react-sdk\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function AudioVolumeIndicator() {\r\n  const { useMicrophoneState } = useCallStateHooks();\r\n  const { isEnabled, mediaStream } = useMicrophoneState();\r\n  const [audioLevel, setAudioLevel] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (!isEnabled || !mediaStream) return;\r\n\r\n    const disposeSoundDetector = createSoundDetector(\r\n      mediaStream,\r\n      ({ audioLevel: al }) => setAudioLevel(al),\r\n      { detectionFrequencyInMs: 80, destroyStreamOnStop: false },\r\n    );\r\n\r\n    return () => {\r\n      disposeSoundDetector().catch(console.error);\r\n    };\r\n  }, [isEnabled, mediaStream]);\r\n\r\n  if (!isEnabled) return null;\r\n\r\n  return (\r\n    <div className=\"flex w-72 items-center gap-3 rounded-md bg-slate-900 p-4\">\r\n      <Icon icon=\"mic\" />\r\n      <div className=\"h-1.5 flex-1 rounded-md bg-white\">\r\n        <div\r\n          className=\"h-full w-full origin-left bg-blue-500\"\r\n          style={{\r\n            transform: `scaleX(${audioLevel / 100})`,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAKA;;;;AAEe,SAAS;IACtB,MAAM,EAAE,kBAAkB,EAAE,GAAG,IAAA,wMAAiB;IAChD,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6NAAQ,EAAC;IAE7C,IAAA,8NAAS,EAAC;QACR,IAAI,CAAC,aAAa,CAAC,aAAa;QAEhC,MAAM,uBAAuB,IAAA,+LAAmB,EAC9C,aACA,CAAC,EAAE,YAAY,EAAE,EAAE,GAAK,cAAc,KACtC;YAAE,wBAAwB;YAAI,qBAAqB;QAAM;QAG3D,OAAO;YACL,uBAAuB,KAAK,CAAC,QAAQ,KAAK;QAC5C;IACF,GAAG;QAAC;QAAW;KAAY;IAE3B,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC,sMAAI;gBAAC,MAAK;;;;;;0BACX,0PAAC;gBAAI,WAAU;0BACb,cAAA,0PAAC;oBACC,WAAU;oBACV,OAAO;wBACL,WAAW,CAAC,OAAO,EAAE,aAAa,IAAI,CAAC,CAAC;oBAC1C;;;;;;;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/app/meeting/%5Bid%5D/MeetingPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport AudioVolumeIndicator from \"../../../components/AudioVolumeIndicator\";\r\nimport Button, { buttonClassName } from \"@/components/Button\";\r\nimport FlexibleCallLayout from \"@/components/FlexibleCallLayout\";\r\nimport PermissionPrompt from \"@/components/PermissionPrompt\";\r\nimport RecordingsList from \"@/components/RecordingsList\";\r\nimport useLoadCall from \"@/hooks/useLoadCall\";\r\nimport useStreamCall from \"@/hooks/useStreamCall\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport {\r\n  CallingState,\r\n  DeviceSettings,\r\n  StreamCall,\r\n  StreamTheme,\r\n  VideoPreview,\r\n  useCallStateHooks,\r\n} from \"@stream-io/video-react-sdk\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface MeetingPageProps {\r\n  id: string;\r\n}\r\n\r\nexport default function MeetingPage({ id }: MeetingPageProps) {\r\n  const { user, isLoaded: userLoaded } = useUser();\r\n\r\n  const { call, callLoading } = useLoadCall(id);\r\n\r\n  if (!userLoaded || callLoading) {\r\n    return <Loader2 className=\"mx-auto animate-spin\" />;\r\n  }\r\n\r\n  if (!call) {\r\n    return <p className=\"text-center font-bold\">Call not found</p>;\r\n  }\r\n\r\n  const notAllowedToJoin =\r\n    call.type === \"private-meeting\" &&\r\n    (!user || !call.state.members.find((m) => m.user.id === user.id));\r\n\r\n  if (notAllowedToJoin) {\r\n    return (\r\n      <p className=\"text-center font-bold\">\r\n        You are not allowed to view this meeting\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <StreamCall call={call}>\r\n      <StreamTheme>\r\n        <MeetingScreen />\r\n      </StreamTheme>\r\n    </StreamCall>\r\n  );\r\n}\r\n\r\nfunction MeetingScreen() {\r\n  const call = useStreamCall();\r\n\r\n  const { useCallEndedAt, useCallStartsAt } = useCallStateHooks();\r\n\r\n  const callEndedAt = useCallEndedAt();\r\n  const callStartsAt = useCallStartsAt();\r\n\r\n  const [setupComplete, setSetupComplete] = useState(false);\r\n\r\n  async function handleSetupComplete() {\r\n    call.join();\r\n    setSetupComplete(true);\r\n  }\r\n\r\n  const callIsInFuture = callStartsAt && new Date(callStartsAt) > new Date();\r\n\r\n  const callHasEnded = !!callEndedAt;\r\n\r\n  if (callHasEnded) {\r\n    return <MeetingEndedScreen />;\r\n  }\r\n\r\n  if (callIsInFuture) {\r\n    return <UpcomingMeetingScreen />;\r\n  }\r\n\r\n  const description = call.state.custom.description;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {description && (\r\n        <p className=\"text-center\">\r\n          Meeting description: <span className=\"font-bold\">{description}</span>\r\n        </p>\r\n      )}\r\n      {setupComplete ? (\r\n        <CallUI />\r\n      ) : (\r\n        <SetupUI onSetupComplete={handleSetupComplete} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface SetupUIProps {\r\n  onSetupComplete: () => void;\r\n}\r\n\r\nfunction SetupUI({ onSetupComplete }: SetupUIProps) {\r\n  const call = useStreamCall();\r\n\r\n  const { useMicrophoneState, useCameraState } = useCallStateHooks();\r\n\r\n  const micState = useMicrophoneState();\r\n  const camState = useCameraState();\r\n\r\n  const [micCamDisabled, setMicCamDisabled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (micCamDisabled) {\r\n      call.camera.disable();\r\n      call.microphone.disable();\r\n    } else {\r\n      call.camera.enable();\r\n      call.microphone.enable();\r\n    }\r\n  }, [micCamDisabled, call]);\r\n\r\n  if (!micState.hasBrowserPermission || !camState.hasBrowserPermission) {\r\n    return <PermissionPrompt />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-3\">\r\n      <h1 className=\"text-center text-2xl font-bold\">Setup</h1>\r\n      <VideoPreview />\r\n      <div className=\"flex h-16 items-center gap-3\">\r\n        <AudioVolumeIndicator />\r\n        <DeviceSettings />\r\n      </div>\r\n      <label className=\"flex items-center gap-2 font-medium\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={micCamDisabled}\r\n          onChange={(e) => setMicCamDisabled(e.target.checked)}\r\n        />\r\n        Join with mic and camera off\r\n      </label>\r\n      <Button onClick={onSetupComplete}>Join meeting</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CallUI() {\r\n  const { useCallCallingState } = useCallStateHooks();\r\n\r\n  const callingState = useCallCallingState();\r\n\r\n  if (callingState !== CallingState.JOINED) {\r\n    return <Loader2 className=\"mx-auto animate-spin\" />;\r\n  }\r\n\r\n  return <FlexibleCallLayout />;\r\n}\r\n\r\nfunction UpcomingMeetingScreen() {\r\n  const call = useStreamCall();\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-6\">\r\n      <p>\r\n        This meeting has not started yet. It will start at{\" \"}\r\n        <span className=\"font-bold\">\r\n          {call.state.startsAt?.toLocaleString()}\r\n        </span>\r\n      </p>\r\n      {call.state.custom.description && (\r\n        <p>\r\n          Description:{\" \"}\r\n          <span className=\"font-bold\">{call.state.custom.description}</span>\r\n        </p>\r\n      )}\r\n      <Link href=\"/\" className={buttonClassName}>\r\n        Go home\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MeetingEndedScreen() {\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-6\">\r\n      <p className=\"font-bold\">This meeting has ended</p>\r\n      <Link href=\"/\" className={buttonClassName}>\r\n        Go home\r\n      </Link>\r\n      <div className=\"space-y-3\">\r\n        <h2 className=\"text-center text-xl font-bold\">Recordings</h2>\r\n        <RecordingsList />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}