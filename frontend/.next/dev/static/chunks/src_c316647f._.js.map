{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/lib/utils.ts"],"sourcesContent":["import clsx, { ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,mJAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/components/Button.tsx"],"sourcesContent":["import { cn } from \"../lib/utils\";\r\n\r\nexport default function Button({\r\n  className,\r\n  ...props\r\n}: React.ButtonHTMLAttributes<HTMLButtonElement>) {\r\n  return <button className={cn(buttonClassName, className)} {...props} />;\r\n}\r\n\r\nexport const buttonClassName =\r\n  \"flex items-center justify-center gap-2 rounded-full bg-blue-500 px-3 py-2 font-semibold text-white transition-colors hover:bg-blue-600 active:bg-blue-600 disabled:bg-gray-200\";"],"names":[],"mappings":";;;;;;;AAAA;;;AAEe,SAAS,OAAO,EAC7B,SAAS,EACT,GAAG,OAC2C;IAC9C,qBAAO,6LAAC;QAAO,WAAW,IAAA,4HAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AACrE;KALwB;AAOjB,MAAM,kBACX","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/app/actions.ts"],"sourcesContent":["\"use server\";\r\nimport { clerkClient, currentUser } from \"@clerk/nextjs/server\";\r\nimport { StreamClient } from \"@stream-io/node-sdk\";\r\n\r\nexport async function getToken() {\r\n  const streamApiKey = process.env.NEXT_PUBLIC_STREAM_VIDEO_API_KEY;\r\n  const streamApiSecret = process.env.STREAM_VIDEO_API_SECRET;\r\n  if (!streamApiKey || !streamApiSecret) {\r\n    throw new Error(\"Stream API key or secret not set\");\r\n  }\r\n\r\n  const user = await currentUser();\r\n\r\n  // console.log(\"Generating token for user: \", user?.id);\r\n\r\n  if (!user) {\r\n    throw new Error(\"User not authenticated\");\r\n  }\r\n\r\n  const streamClient = new StreamClient(streamApiKey, streamApiSecret);\r\n\r\n  const expirationTime = Math.floor(Date.now() / 1000) + 60 * 60;\r\n\r\n  const issuedAt = Math.floor(Date.now() / 1000) - 60;\r\n\r\n  const token = streamClient.generateUserToken({\r\n    user_id: user.id,\r\n    exp: expirationTime,\r\n    iat: issuedAt\r\n  });\r\n\r\n  // console.log(\"Successfully generated token: \", token);\r\n\r\n  return token;\r\n}\r\n\r\nexport async function getAdminId() {\r\n  const response = await (await clerkClient()).users.getUserList({\r\n    username: [\"admin\"],\r\n  });\r\n\r\n  return response.data[0].id;\r\n}\r\n\r\nexport async function getUserIds(emailAddresses: string[]) {\r\n  const response = await (await clerkClient()).users.getUserList({\r\n    emailAddress: emailAddresses,\r\n  });\r\n  return response.data.map((user) => user.id);\r\n}"],"names":[],"mappings":";;;;;;;IAoCsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/app/actions.ts"],"sourcesContent":["\"use server\";\r\nimport { clerkClient, currentUser } from \"@clerk/nextjs/server\";\r\nimport { StreamClient } from \"@stream-io/node-sdk\";\r\n\r\nexport async function getToken() {\r\n  const streamApiKey = process.env.NEXT_PUBLIC_STREAM_VIDEO_API_KEY;\r\n  const streamApiSecret = process.env.STREAM_VIDEO_API_SECRET;\r\n  if (!streamApiKey || !streamApiSecret) {\r\n    throw new Error(\"Stream API key or secret not set\");\r\n  }\r\n\r\n  const user = await currentUser();\r\n\r\n  // console.log(\"Generating token for user: \", user?.id);\r\n\r\n  if (!user) {\r\n    throw new Error(\"User not authenticated\");\r\n  }\r\n\r\n  const streamClient = new StreamClient(streamApiKey, streamApiSecret);\r\n\r\n  const expirationTime = Math.floor(Date.now() / 1000) + 60 * 60;\r\n\r\n  const issuedAt = Math.floor(Date.now() / 1000) - 60;\r\n\r\n  const token = streamClient.generateUserToken({\r\n    user_id: user.id,\r\n    exp: expirationTime,\r\n    iat: issuedAt\r\n  });\r\n\r\n  // console.log(\"Successfully generated token: \", token);\r\n\r\n  return token;\r\n}\r\n\r\nexport async function getAdminId() {\r\n  const response = await (await clerkClient()).users.getUserList({\r\n    username: [\"admin\"],\r\n  });\r\n\r\n  return response.data[0].id;\r\n}\r\n\r\nexport async function getUserIds(emailAddresses: string[]) {\r\n  const response = await (await clerkClient()).users.getUserList({\r\n    emailAddress: emailAddresses,\r\n  });\r\n  return response.data.map((user) => user.id);\r\n}"],"names":[],"mappings":";;;;;;;IA4CsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tyree/Codes/JS/SWEN/frontend/src/app/CreateMeetingPage.tsx"],"sourcesContent":["\"use client\";\r\n// Will be re-adjusted to the calendar page\r\nimport Button from \"../components/Button\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport {\r\n  Call,\r\n  MemberRequest,\r\n  useStreamVideoClient,\r\n} from \"@stream-io/video-react-sdk\";\r\nimport { Copy, Loader2} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { getAdminId, getUserIds } from \"./actions\";\r\n\r\nexport default function CreateMeetingPage() {\r\n  const [startTimeInput, setStartTimeInput] = useState(\"\");\r\n  const [participantsInput, setParticipantsInput] = useState(\"\");\r\n  const [loadingCall, setLoadingCall] = useState(false);\r\n  const [call, setCall] = useState<Call>();\r\n\r\n  const client = useStreamVideoClient();\r\n\r\n  const { user } = useUser();\r\n\r\n\r\n  async function createMeeting() {\r\n    if (!client || !user) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoadingCall(true);\r\n      const id = crypto.randomUUID();\r\n\r\n      const call = client.call(\"default\", id);\r\n\r\n      const memberEmails = participantsInput\r\n        .split(\",\")\r\n        .map((email) => email.trim());\r\n\r\n      const memberIds = await getUserIds(memberEmails);\r\n      const adminId = await getAdminId();\r\n      \r\n\r\n      const members: MemberRequest[] = memberIds\r\n        .map((id) => ({ user_id: id, role: \"call_member\" }))\r\n        .concat({ user_id: adminId, role: \"host\" })\r\n        .concat({ user_id: user.id, role: \"call_member\" })\r\n        .filter(\r\n          (v, i, a) => a.findIndex((v2) => v2.user_id === v.user_id) === i,\r\n        );\r\n\r\n      const starts_at = new Date(startTimeInput || Date.now()).toISOString();\r\n      await call.getOrCreate({\r\n        data: {\r\n          starts_at,\r\n          members,\r\n        }\r\n      });\r\n\r\n      setCall(call);\r\n      setLoadingCall(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"Something went wrong. Please try again later.\");\r\n    }\r\n  }\r\n\r\n  if (!client || !user) {\r\n    return <Loader2 className=\"mx-auto animate-spin\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center space-y-6 text-black\">\r\n      <h1 className=\"text-center text-2xl font-bold\">\r\n        Welcome {user.username}!\r\n      </h1>\r\n      <div className=\"mx-auto w-80 space-y-6 rounded-md bg-slate-100 p-5\">\r\n        <h2 className=\"text-xl font-bold\">Create a new meeting</h2>\r\n        <StartTimeInput value={startTimeInput} onChange={setStartTimeInput} />\r\n        <ParticipantsInput\r\n          value={participantsInput}\r\n          onChange={setParticipantsInput}\r\n        />\r\n        <Button onClick={createMeeting} className=\"w-full hover:cursor-pointer\">\r\n          Create meeting\r\n        </Button>\r\n      </div>\r\n      {loadingCall && <Loader2 className=\"mx-auto animate-spin\" />}\r\n      {call && \r\n            <MeetingLink call={call} name={user.fullName ? user.fullName : \"\"} />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface StartTimeInputProps {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\nfunction StartTimeInput({ value, onChange }: StartTimeInputProps) {\r\n  const dateTimeLocalNow = new Date(\r\n    new Date().getTime() - new Date().getTimezoneOffset() * 60_000,\r\n  )\r\n    .toISOString()\r\n    .slice(0, 16);\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div className=\"font-medium\">Meeting starts at:</div>\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={value}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            min={dateTimeLocalNow}\r\n            className=\"w-full rounded-md border border-gray-300 p-2\"\r\n          />\r\n \r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ParticipantsInputProps {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\n// Participants must have an account.\r\nfunction ParticipantsInput({ value, onChange }: ParticipantsInputProps) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div className=\"font-medium\">Participants:</div>\r\n          <textarea\r\n            value={value}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            placeholder=\"Enter participant email addresses separated by commas excluding yours.\"\r\n            className=\"w-full rounded-md border border-gray-300 p-2\"\r\n          />\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface MeetingLinkProps {\r\n  call: Call;\r\n  name: string;\r\n}\r\n\r\nfunction MeetingLink({ call, name }: MeetingLinkProps) {\r\n  const meetingLink = `${process.env.NEXT_PUBLIC_BASE_URL}/meeting/${call.id}`;\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3 items-center\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <span>\r\n          Invitation link:{\" \"}\r\n          <Link href={meetingLink} className=\"font-bold text-blue-400 hover:underline\">\r\n            {meetingLink}\r\n          </Link>\r\n        </span>\r\n        <Button\r\n          title=\"Copy invitation link\"\r\n          onClick={() => {\r\n            navigator.clipboard.writeText(meetingLink);\r\n            alert(\"Copied to clipboard\");\r\n          }}\r\n        >\r\n          <Copy />\r\n        </Button>\r\n      </div>\r\n      <a\r\n        href={getMailToLink(\r\n          meetingLink,\r\n          name,\r\n          call.state.startsAt,\r\n        )}\r\n        target=\"_blank\"\r\n        className=\"text-blue-500 hover:underline\"\r\n      >\r\n        Send email invitation\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getMailToLink(\r\n  meetingLink: string,\r\n  name: string,\r\n  startsAt?: Date,\r\n) {\r\n  const startDateFormatted = startsAt\r\n    ? startsAt.toLocaleString(\"en-US\", {\r\n        dateStyle: \"full\",\r\n        timeStyle: \"short\",\r\n      })\r\n    : undefined;\r\n\r\n  const subject =\r\n    \"Join my meeting\" + (startDateFormatted ? ` at ${startDateFormatted}` : \"\");\r\n\r\n  const body =\r\n    `Join my meeting at ${meetingLink}.` +\r\n    (startDateFormatted\r\n      ? `\\n\\nThe meeting starts at ${startDateFormatted}.`\r\n      : \"\") +\r\n    `Welcome ${name}, to your session at Mind, Heart & Soul Counselling. Let's have a splendid time.`;\r\n\r\n  return `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}