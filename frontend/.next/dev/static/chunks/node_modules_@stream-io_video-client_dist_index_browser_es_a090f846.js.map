{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@stream-io/video-client/dist/index.browser.es.js","sources":["file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/coordinator/index.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/types.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/google/protobuf/struct.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/google/protobuf/timestamp.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/video/sfu/models/models.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/video/sfu/signal_rpc/signal.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/video/sfu/event/events.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/types.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/gen/video/sfu/signal_rpc/signal.client.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rpc/createClient.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/utils.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/platforms.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/logger.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rpc/retryable.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/codecs.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/Dispatcher.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/IceTrickleBuffer.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/concurrency.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/store/rxUtils.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/store/CallingState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/store/stateStore.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/sorting/comparator.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/participantUtils.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/sorting/participants.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/sorting/presets.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/store/CallState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/NegotiationError.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/stats/utils.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/client-details.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/browsers.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/stats/CallStateStatsReporter.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/stats/SfuStatsReporter.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/stats/rtc/pc.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/stats/rtc/StatsTracer.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/stats/rtc/Tracer.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/BasePeerConnection.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/TransceiverCache.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/ensureExhausted.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/helpers/tracks.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/layers.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/helpers/sdp.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/Publisher.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/Subscriber.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/signal.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/rtc/helpers/rtcConfiguration.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/promise.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/lazy.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/timers/index.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/StreamSfuClient.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/call.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/call-permissions.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/array.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/internal.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/mutes.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/participant.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/speaker.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/events/callEventHandlers.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/ViewportTracker.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/DynascaleManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/permissions/PermissionsContext.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/CallType.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/utils.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/BrowserPermission.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/devices.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/compatibility.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/DeviceManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/DeviceManagerState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/CameraManagerState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/CameraManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/AudioDeviceManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/AudioDeviceManagerState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/MicrophoneManagerState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/sound-detector.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/RNSpeechDetector.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/MicrophoneManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/ScreenShareState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/ScreenShareManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/SpeakerState.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/devices/SpeakerManager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/Call.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/video-client/https","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/errors.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/connection.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/signing.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/token_manager.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/location.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/coordinator/connection/client.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/helpers/clientUtils.ts","file:///C:/Users/djtho/OneDrive/Documents/SwenProj/frontend/node_modules/%40stream-io/src/StreamVideoClient.ts"],"sourcesContent":["/* tslint:disable */\n\n/**\n *\n * @export\n * @interface APIError\n */\nexport interface APIError {\n  /**\n   * Response HTTP status code\n   * @type {number}\n   * @memberof APIError\n   */\n  StatusCode: number;\n  /**\n   * API error code\n   * @type {number}\n   * @memberof APIError\n   */\n  code: number;\n  /**\n   * Additional error-specific information\n   * @type {Array<number>}\n   * @memberof APIError\n   */\n  details: Array<number>;\n  /**\n   * Request duration\n   * @type {string}\n   * @memberof APIError\n   */\n  duration: string;\n  /**\n   * Additional error info\n   * @type {{ [key: string]: string; }}\n   * @memberof APIError\n   */\n  exception_fields?: { [key: string]: string };\n  /**\n   * Message describing an error\n   * @type {string}\n   * @memberof APIError\n   */\n  message: string;\n  /**\n   * URL with additional information\n   * @type {string}\n   * @memberof APIError\n   */\n  more_info: string;\n  /**\n   * Flag that indicates if the error is unrecoverable, requests that return unrecoverable errors should not be retried, this error only applies to the request that caused it\n   * @type {boolean}\n   * @memberof APIError\n   */\n  unrecoverable?: boolean;\n}\n/**\n * AcceptCallResponse is the payload for accepting a call.\n * @export\n * @interface AcceptCallResponse\n */\nexport interface AcceptCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof AcceptCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface AudioSettingsRequest\n */\nexport interface AudioSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof AudioSettingsRequest\n   */\n  default_device: AudioSettingsRequestDefaultDeviceEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  hifi_audio_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  mic_default_on?: boolean;\n  /**\n   *\n   * @type {NoiseCancellationSettings}\n   * @memberof AudioSettingsRequest\n   */\n  noise_cancellation?: NoiseCancellationSettings;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  opus_dtx_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  redundant_coding_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  speaker_default_on?: boolean;\n}\n\n/**\n * @export\n */\nexport const AudioSettingsRequestDefaultDeviceEnum = {\n  SPEAKER: 'speaker',\n  EARPIECE: 'earpiece',\n} as const;\nexport type AudioSettingsRequestDefaultDeviceEnum =\n  (typeof AudioSettingsRequestDefaultDeviceEnum)[keyof typeof AudioSettingsRequestDefaultDeviceEnum];\n\n/**\n *\n * @export\n * @interface AudioSettingsResponse\n */\nexport interface AudioSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof AudioSettingsResponse\n   */\n  default_device: AudioSettingsResponseDefaultDeviceEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  hifi_audio_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  mic_default_on: boolean;\n  /**\n   *\n   * @type {NoiseCancellationSettings}\n   * @memberof AudioSettingsResponse\n   */\n  noise_cancellation?: NoiseCancellationSettings;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  opus_dtx_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  redundant_coding_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  speaker_default_on: boolean;\n}\n\n/**\n * @export\n */\nexport const AudioSettingsResponseDefaultDeviceEnum = {\n  SPEAKER: 'speaker',\n  EARPIECE: 'earpiece',\n} as const;\nexport type AudioSettingsResponseDefaultDeviceEnum =\n  (typeof AudioSettingsResponseDefaultDeviceEnum)[keyof typeof AudioSettingsResponseDefaultDeviceEnum];\n\n/**\n *\n * @export\n * @interface BackstageSettingsRequest\n */\nexport interface BackstageSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BackstageSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof BackstageSettingsRequest\n   */\n  join_ahead_time_seconds?: number;\n}\n/**\n *\n * @export\n * @interface BackstageSettingsResponse\n */\nexport interface BackstageSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BackstageSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof BackstageSettingsResponse\n   */\n  join_ahead_time_seconds?: number;\n}\n/**\n * BlockUserRequest is the payload for blocking a user.\n * @export\n * @interface BlockUserRequest\n */\nexport interface BlockUserRequest {\n  /**\n   * the user to block\n   * @type {string}\n   * @memberof BlockUserRequest\n   */\n  user_id: string;\n}\n/**\n * BlockUserResponse is the payload for blocking a user.\n * @export\n * @interface BlockUserResponse\n */\nexport interface BlockUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof BlockUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to call participants to notify when a user is blocked on a call, clients can use this event to show a notification.\n * If the user is the current user, the client should leave the call screen as well\n * @export\n * @interface BlockedUserEvent\n */\nexport interface BlockedUserEvent {\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof BlockedUserEvent\n   */\n  blocked_by_user?: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.blocked_user\" in this case\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof BlockedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface Bound\n */\nexport interface Bound {\n  /**\n   *\n   * @type {boolean}\n   * @memberof Bound\n   */\n  inclusive: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof Bound\n   */\n  value: number;\n}\n/**\n *\n * @export\n * @interface BroadcastSettingsRequest\n */\nexport interface BroadcastSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BroadcastSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {HLSSettingsRequest}\n   * @memberof BroadcastSettingsRequest\n   */\n  hls?: HLSSettingsRequest;\n  /**\n   *\n   * @type {RTMPSettingsRequest}\n   * @memberof BroadcastSettingsRequest\n   */\n  rtmp?: RTMPSettingsRequest;\n}\n/**\n * BroadcastSettingsResponse is the payload for broadcasting settings\n * @export\n * @interface BroadcastSettingsResponse\n */\nexport interface BroadcastSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BroadcastSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {HLSSettingsResponse}\n   * @memberof BroadcastSettingsResponse\n   */\n  hls: HLSSettingsResponse;\n  /**\n   *\n   * @type {RTMPSettingsResponse}\n   * @memberof BroadcastSettingsResponse\n   */\n  rtmp: RTMPSettingsResponse;\n}\n/**\n * This event is sent when a user accepts a notification to join a call.\n * @export\n * @interface CallAcceptedEvent\n */\nexport interface CallAcceptedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallAcceptedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.accepted\" in this case\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallAcceptedEvent\n   */\n  user: UserResponse;\n}\n/**\n * CallClosedCaption represents a closed caption of a call.\n * @export\n * @interface CallClosedCaption\n */\nexport interface CallClosedCaption {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  service?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  speaker_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  text: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallClosedCaption\n   */\n  translated: boolean;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallClosedCaption\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent when call closed captions has failed\n * @export\n * @interface CallClosedCaptionsFailedEvent\n */\nexport interface CallClosedCaptionsFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_captions_failed\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call closed caption has started\n * @export\n * @interface CallClosedCaptionsStartedEvent\n */\nexport interface CallClosedCaptionsStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_captions_started\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call closed captions has stopped\n * @export\n * @interface CallClosedCaptionsStoppedEvent\n */\nexport interface CallClosedCaptionsStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.transcription_stopped\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is created. Clients receiving this event should check if the ringing\n * field is set to true and if so, show the call screen\n * @export\n * @interface CallCreatedEvent\n */\nexport interface CallCreatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallCreatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  created_at: string;\n  /**\n   * the members added to this call\n   * @type {Array<MemberResponse>}\n   * @memberof CallCreatedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.created\" in this case\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is deleted. Clients receiving this event should leave the call screen\n * @export\n * @interface CallDeletedEvent\n */\nexport interface CallDeletedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallDeletedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.deleted\" in this case\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallDurationReport\n */\nexport interface CallDurationReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof CallDurationReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface CallDurationReportResponse\n */\nexport interface CallDurationReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallDurationReportResponse>}\n   * @memberof CallDurationReportResponse\n   */\n  daily: Array<DailyAggregateCallDurationReportResponse>;\n}\n/**\n * This event is sent when a call is mark as ended for all its participants. Clients receiving this event should leave the call screen\n * @export\n * @interface CallEndedEvent\n */\nexport interface CallEndedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallEndedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  created_at: string;\n  /**\n   * The reason why the call ended, if available\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  reason?: string;\n  /**\n   * The type of event: \"call.ended\" in this case\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallEndedEvent\n   */\n  user?: UserResponse;\n}\n/**\n * This event is sent when frame recording has failed\n * @export\n * @interface CallFrameRecordingFailedEvent\n */\nexport interface CallFrameRecordingFailedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_failed\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a frame is captured from a call\n * @export\n * @interface CallFrameRecordingFrameReadyEvent\n */\nexport interface CallFrameRecordingFrameReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  call_cid: string;\n  /**\n   * The time the frame was captured\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  captured_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  egress_id: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  session_id: string;\n  /**\n   * The type of the track frame was captured from (TRACK_TYPE_VIDEO|TRACK_TYPE_SCREEN_SHARE)\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  track_type: string;\n  /**\n   * The type of event: \"call.frame_recording_ready\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  type: string;\n  /**\n   * The URL of the frame\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  url: string;\n  /**\n   * The users in the frame\n   * @type {{ [key: string]: UserResponse; }}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  users: { [key: string]: UserResponse };\n}\n/**\n * This event is sent when frame recording has started\n * @export\n * @interface CallFrameRecordingStartedEvent\n */\nexport interface CallFrameRecordingStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_started\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when frame recording has stopped\n * @export\n * @interface CallFrameRecordingStoppedEvent\n */\nexport interface CallFrameRecordingStoppedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_stopped\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has failed\n * @export\n * @interface CallHLSBroadcastingFailedEvent\n */\nexport interface CallHLSBroadcastingFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_failed\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has started\n * @export\n * @interface CallHLSBroadcastingStartedEvent\n */\nexport interface CallHLSBroadcastingStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  hls_playlist_url: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_started\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has stopped\n * @export\n * @interface CallHLSBroadcastingStoppedEvent\n */\nexport interface CallHLSBroadcastingStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_stopped\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  type: string;\n}\n/**\n * CallIngressResponse is the payload for ingress settings\n * @export\n * @interface CallIngressResponse\n */\nexport interface CallIngressResponse {\n  /**\n   *\n   * @type {RTMPIngress}\n   * @memberof CallIngressResponse\n   */\n  rtmp: RTMPIngress;\n  /**\n   *\n   * @type {SRTIngress}\n   * @memberof CallIngressResponse\n   */\n  srt: SRTIngress;\n  /**\n   *\n   * @type {WHIPIngress}\n   * @memberof CallIngressResponse\n   */\n  whip: WHIPIngress;\n}\n/**\n * This event is sent when a call is started. Clients receiving this event should start the call.\n * @export\n * @interface CallLiveStartedEvent\n */\nexport interface CallLiveStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallLiveStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.live_started\" in this case\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are added to a call\n * @export\n * @interface CallMemberAddedEvent\n */\nexport interface CallMemberAddedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberAddedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  created_at: string;\n  /**\n   * the members added to this call\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberAddedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_added\" in this case\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are removed from a call\n * @export\n * @interface CallMemberRemovedEvent\n */\nexport interface CallMemberRemovedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberRemovedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  created_at: string;\n  /**\n   * the list of member IDs removed from the call\n   * @type {Array<string>}\n   * @memberof CallMemberRemovedEvent\n   */\n  members: Array<string>;\n  /**\n   * The type of event: \"call.member_removed\" in this case\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are updated\n * @export\n * @interface CallMemberUpdatedEvent\n */\nexport interface CallMemberUpdatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberUpdatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  created_at: string;\n  /**\n   * The list of members that were updated\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberUpdatedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_updated\" in this case\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members get its role updated\n * @export\n * @interface CallMemberUpdatedPermissionEvent\n */\nexport interface CallMemberUpdatedPermissionEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  call_cid: string;\n  /**\n   * The capabilities by role for this call\n   * @type {{ [key: string]: Array<string>; }}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  capabilities_by_role: { [key: string]: Array<string> };\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  created_at: string;\n  /**\n   * The list of members that were updated\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_added\" in this case\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  type: string;\n}\n/**\n * This event is sent to call members who did not accept/reject/join the call to notify they missed the call\n * @export\n * @interface CallMissedEvent\n */\nexport interface CallMissedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMissedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  created_at: string;\n  /**\n   * List of members who missed the call\n   * @type {Array<MemberResponse>}\n   * @memberof CallMissedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallMissedEvent\n   */\n  notify_user: boolean;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallMissedEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallModerationBlurEvent\n */\nexport interface CallModerationBlurEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallModerationBlurEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface CallModerationWarningEvent\n */\nexport interface CallModerationWarningEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallModerationWarningEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  message: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  user_id: string;\n}\n/**\n * This event is sent to all call members to notify they are getting called\n * @export\n * @interface CallNotificationEvent\n */\nexport interface CallNotificationEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallNotificationEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  created_at: string;\n  /**\n   * Call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallNotificationEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallNotificationEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallParticipantCountReport\n */\nexport interface CallParticipantCountReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof CallParticipantCountReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface CallParticipantCountReportResponse\n */\nexport interface CallParticipantCountReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallParticipantCountReportResponse>}\n   * @memberof CallParticipantCountReportResponse\n   */\n  daily: Array<DailyAggregateCallParticipantCountReportResponse>;\n}\n/**\n *\n * @export\n * @interface CallParticipantResponse\n */\nexport interface CallParticipantResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  joined_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  role: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallParticipantResponse\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  user_session_id: string;\n}\n/**\n *\n * @export\n * @interface CallParticipantTimeline\n */\nexport interface CallParticipantTimeline {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallParticipantTimeline\n   */\n  data: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantTimeline\n   */\n  severity: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantTimeline\n   */\n  timestamp: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantTimeline\n   */\n  type: string;\n}\n/**\n * This event is sent when a reaction is sent in a call, clients should use this to show the reaction in the call screen\n * @export\n * @interface CallReactionEvent\n */\nexport interface CallReactionEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {ReactionResponse}\n   * @memberof CallReactionEvent\n   */\n  reaction: ReactionResponse;\n  /**\n   * The type of event: \"call.reaction_new\" in this case\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  type: string;\n}\n/**\n * CallRecording represents a recording of a call.\n * @export\n * @interface CallRecording\n */\nexport interface CallRecording {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  filename: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  url: string;\n}\n/**\n * This event is sent when call recording has failed\n * @export\n * @interface CallRecordingFailedEvent\n */\nexport interface CallRecordingFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_failed\" in this case\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording is ready\n * @export\n * @interface CallRecordingReadyEvent\n */\nexport interface CallRecordingReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallRecording}\n   * @memberof CallRecordingReadyEvent\n   */\n  call_recording: CallRecording;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_ready\" in this case\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording has started\n * @export\n * @interface CallRecordingStartedEvent\n */\nexport interface CallRecordingStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_started\" in this case\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording has stopped\n * @export\n * @interface CallRecordingStoppedEvent\n */\nexport interface CallRecordingStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_stopped\" in this case\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a user rejects a notification to join a call.\n * @export\n * @interface CallRejectedEvent\n */\nexport interface CallRejectedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallRejectedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  created_at: string;\n  /**\n   * Provides information about why the call was rejected. You can provide any value, but the Stream API and SDKs use these default values: rejected, cancel, timeout and busy\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  reason?: string;\n  /**\n   * The type of event: \"call.rejected\" in this case\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallRejectedEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallReportResponse\n */\nexport interface CallReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallReportResponse\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallReportResponse\n   */\n  score: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallReportResponse\n   */\n  started_at?: string;\n}\n/**\n * CallRequest is the payload for creating a call.\n * @export\n * @interface CallRequest\n */\nexport interface CallRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  channel_cid?: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {Array<MemberRequest>}\n   * @memberof CallRequest\n   */\n  members?: Array<MemberRequest>;\n  /**\n   *\n   * @type {CallSettingsRequest}\n   * @memberof CallRequest\n   */\n  settings_override?: CallSettingsRequest;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  starts_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  team?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallRequest\n   */\n  video?: boolean;\n}\n/**\n * Represents a call\n * @export\n * @interface CallResponse\n */\nexport interface CallResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  backstage: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallResponse\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  captioning: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  channel_cid?: string;\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallResponse\n   */\n  cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallResponse\n   */\n  created_by: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  current_session_id: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof CallResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {EgressResponse}\n   * @memberof CallResponse\n   */\n  egress: EgressResponse;\n  /**\n   * Date/time when the call ended\n   * @type {string}\n   * @memberof CallResponse\n   */\n  ended_at?: string;\n  /**\n   * Call ID\n   * @type {string}\n   * @memberof CallResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {CallIngressResponse}\n   * @memberof CallResponse\n   */\n  ingress: CallIngressResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof CallResponse\n   */\n  join_ahead_time_seconds?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  recording: boolean;\n  /**\n   *\n   * @type {CallSessionResponse}\n   * @memberof CallResponse\n   */\n  session?: CallSessionResponse;\n  /**\n   *\n   * @type {CallSettingsResponse}\n   * @memberof CallResponse\n   */\n  settings: CallSettingsResponse;\n  /**\n   * Date/time when the call will start\n   * @type {string}\n   * @memberof CallResponse\n   */\n  starts_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  team?: string;\n  /**\n   *\n   * @type {ThumbnailResponse}\n   * @memberof CallResponse\n   */\n  thumbnails?: ThumbnailResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  transcribing: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  translating: boolean;\n  /**\n   * The type of call\n   * @type {string}\n   * @memberof CallResponse\n   */\n  type: string;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof CallResponse\n   */\n  updated_at: string;\n}\n/**\n * This event is sent to all call members to notify they are getting called\n * @export\n * @interface CallRingEvent\n */\nexport interface CallRingEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallRingEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  created_at: string;\n  /**\n   * Call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallRingEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallRingEvent\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallRingEvent\n   */\n  video: boolean;\n}\n/**\n * This event is sent when a call RTMP broadcast has failed\n * @export\n * @interface CallRtmpBroadcastFailedEvent\n */\nexport interface CallRtmpBroadcastFailedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_failed\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when RTMP broadcast has started\n * @export\n * @interface CallRtmpBroadcastStartedEvent\n */\nexport interface CallRtmpBroadcastStartedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_started\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when RTMP broadcast has stopped\n * @export\n * @interface CallRtmpBroadcastStoppedEvent\n */\nexport interface CallRtmpBroadcastStoppedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_stopped\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call session ends\n * @export\n * @interface CallSessionEndedEvent\n */\nexport interface CallSessionEndedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallSessionEndedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_ended\" in this case\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when the participant counts in a call session are updated\n * @export\n * @interface CallSessionParticipantCountsUpdatedEvent\n */\nexport interface CallSessionParticipantCountsUpdatedEvent {\n  /**\n   *\n   * @type {number}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  anonymous_participant_count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  participants_count_by_role: { [key: string]: number };\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_count_updated\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a participant joins a call session\n * @export\n * @interface CallSessionParticipantJoinedEvent\n */\nexport interface CallSessionParticipantJoinedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {CallParticipantResponse}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  participant: CallParticipantResponse;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_joined\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a participant leaves a call session\n * @export\n * @interface CallSessionParticipantLeftEvent\n */\nexport interface CallSessionParticipantLeftEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  created_at: string;\n  /**\n   * The duration participant was in the session in seconds\n   * @type {number}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  duration_seconds: number;\n  /**\n   *\n   * @type {CallParticipantResponse}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  participant: CallParticipantResponse;\n  /**\n   * The reason why the participant left the session\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  reason?: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_left\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallSessionResponse\n */\nexport interface CallSessionResponse {\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  accepted_by: { [key: string]: string };\n  /**\n   *\n   * @type {number}\n   * @memberof CallSessionResponse\n   */\n  anonymous_participant_count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  live_ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  live_started_at?: string;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  missed_by: { [key: string]: string };\n  /**\n   *\n   * @type {Array<CallParticipantResponse>}\n   * @memberof CallSessionResponse\n   */\n  participants: Array<CallParticipantResponse>;\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof CallSessionResponse\n   */\n  participants_count_by_role: { [key: string]: number };\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  rejected_by: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  timer_ends_at?: string;\n}\n/**\n * This event is sent when a call session starts\n * @export\n * @interface CallSessionStartedEvent\n */\nexport interface CallSessionStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallSessionStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_started\" in this case\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallSettingsRequest\n */\nexport interface CallSettingsRequest {\n  /**\n   *\n   * @type {AudioSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  audio?: AudioSettingsRequest;\n  /**\n   *\n   * @type {BackstageSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  backstage?: BackstageSettingsRequest;\n  /**\n   *\n   * @type {BroadcastSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  broadcasting?: BroadcastSettingsRequest;\n  /**\n   *\n   * @type {FrameRecordingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  frame_recording?: FrameRecordingSettingsRequest;\n  /**\n   *\n   * @type {GeofenceSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  geofencing?: GeofenceSettingsRequest;\n  /**\n   *\n   * @type {IngressSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  ingress?: IngressSettingsRequest;\n  /**\n   *\n   * @type {LimitsSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  limits?: LimitsSettingsRequest;\n  /**\n   *\n   * @type {RecordSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  recording?: RecordSettingsRequest;\n  /**\n   *\n   * @type {RingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  ring?: RingSettingsRequest;\n  /**\n   *\n   * @type {ScreensharingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  screensharing?: ScreensharingSettingsRequest;\n  /**\n   *\n   * @type {SessionSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  session?: SessionSettingsRequest;\n  /**\n   *\n   * @type {ThumbnailsSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  thumbnails?: ThumbnailsSettingsRequest;\n  /**\n   *\n   * @type {TranscriptionSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  transcription?: TranscriptionSettingsRequest;\n  /**\n   *\n   * @type {VideoSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  video?: VideoSettingsRequest;\n}\n/**\n *\n * @export\n * @interface CallSettingsResponse\n */\nexport interface CallSettingsResponse {\n  /**\n   *\n   * @type {AudioSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  audio: AudioSettingsResponse;\n  /**\n   *\n   * @type {BackstageSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  backstage: BackstageSettingsResponse;\n  /**\n   *\n   * @type {BroadcastSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  broadcasting: BroadcastSettingsResponse;\n  /**\n   *\n   * @type {FrameRecordingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  frame_recording: FrameRecordingSettingsResponse;\n  /**\n   *\n   * @type {GeofenceSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  geofencing: GeofenceSettingsResponse;\n  /**\n   *\n   * @type {IngressSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  ingress?: IngressSettingsResponse;\n  /**\n   *\n   * @type {LimitsSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  limits: LimitsSettingsResponse;\n  /**\n   *\n   * @type {RecordSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  recording: RecordSettingsResponse;\n  /**\n   *\n   * @type {RingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  ring: RingSettingsResponse;\n  /**\n   *\n   * @type {ScreensharingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  screensharing: ScreensharingSettingsResponse;\n  /**\n   *\n   * @type {SessionSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  session: SessionSettingsResponse;\n  /**\n   *\n   * @type {ThumbnailsSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  thumbnails: ThumbnailsSettingsResponse;\n  /**\n   *\n   * @type {TranscriptionSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  transcription: TranscriptionSettingsResponse;\n  /**\n   *\n   * @type {VideoSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  video: VideoSettingsResponse;\n}\n/**\n * CallStateResponseFields is the payload for call state response\n * @export\n * @interface CallStateResponseFields\n */\nexport interface CallStateResponseFields {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallStateResponseFields\n   */\n  call: CallResponse;\n  /**\n   * List of call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallStateResponseFields\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof CallStateResponseFields\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof CallStateResponseFields\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface CallStatsParticipant\n */\nexport interface CallStatsParticipant {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipant\n   */\n  latest_activity_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipant\n   */\n  name?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallStatsParticipant\n   */\n  roles?: Array<string>;\n  /**\n   *\n   * @type {Array<CallStatsParticipantSession>}\n   * @memberof CallStatsParticipant\n   */\n  sessions: Array<CallStatsParticipantSession>;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipant\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface CallStatsParticipantCounts\n */\nexport interface CallStatsParticipantCounts {\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  live_sessions: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  participants: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  publishers: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  sessions: number;\n}\n/**\n *\n * @export\n * @interface CallStatsParticipantSession\n */\nexport interface CallStatsParticipantSession {\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantSession\n   */\n  cq_score?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallStatsParticipantSession\n   */\n  is_live: boolean;\n  /**\n   *\n   * @type {PublishedTrackFlags}\n   * @memberof CallStatsParticipantSession\n   */\n  published_tracks: PublishedTrackFlags;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  publisher_type?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  unified_session_id?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  user_session_id: string;\n}\n/**\n * This event is sent when the insights report is ready\n * @export\n * @interface CallStatsReportReadyEvent\n */\nexport interface CallStatsReportReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  session_id: string;\n  /**\n   * The type of event, \"call.report_ready\" in this case\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallStatsReportSummaryResponse\n */\nexport interface CallStatsReportSummaryResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_duration_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_status: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  created_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  first_stats_time: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  min_user_rating?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  quality_score?: number;\n}\n/**\n * CallTranscription represents a transcription of a call.\n * @export\n * @interface CallTranscription\n */\nexport interface CallTranscription {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  filename: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  url: string;\n}\n/**\n * This event is sent when call transcription has failed\n * @export\n * @interface CallTranscriptionFailedEvent\n */\nexport interface CallTranscriptionFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The error message detailing why transcription failed.\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  error?: string;\n  /**\n   * The type of event: \"call.transcription_failed\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription is ready\n * @export\n * @interface CallTranscriptionReadyEvent\n */\nexport interface CallTranscriptionReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallTranscription}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  call_transcription: CallTranscription;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_ready\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription has started\n * @export\n * @interface CallTranscriptionStartedEvent\n */\nexport interface CallTranscriptionStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_started\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription has stopped\n * @export\n * @interface CallTranscriptionStoppedEvent\n */\nexport interface CallTranscriptionStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_stopped\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is updated, clients should use this update the local state of the call.\n * This event also contains the capabilities by role for the call, clients should update the own_capability for the current.\n * @export\n * @interface CallUpdatedEvent\n */\nexport interface CallUpdatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallUpdatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   * The capabilities by role for this call\n   * @type {{ [key: string]: Array<string>; }}\n   * @memberof CallUpdatedEvent\n   */\n  capabilities_by_role: { [key: string]: Array<string> };\n  /**\n   *\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.updated\" in this case\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a user submits feedback for a call.\n * @export\n * @interface CallUserFeedbackSubmittedEvent\n */\nexport interface CallUserFeedbackSubmittedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  created_at: string;\n  /**\n   * Custom data provided by the user\n   * @type {{ [key: string]: any; }}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  custom?: { [key: string]: any };\n  /**\n   * The rating given by the user (1-5)\n   * @type {number}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  rating: number;\n  /**\n   * The reason provided by the user for the rating\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  reason?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  sdk?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  sdk_version?: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event, \"call.user_feedback\" in this case\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent when a call member is muted\n * @export\n * @interface CallUserMutedEvent\n */\nexport interface CallUserMutedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  from_user_id: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallUserMutedEvent\n   */\n  muted_user_ids: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  reason: string;\n  /**\n   * The type of event: \"call.user_muted\" in this case\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallsPerDayReport\n */\nexport interface CallsPerDayReport {\n  /**\n   *\n   * @type {number}\n   * @memberof CallsPerDayReport\n   */\n  count: number;\n}\n/**\n *\n * @export\n * @interface CallsPerDayReportResponse\n */\nexport interface CallsPerDayReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallsPerDayReportResponse>}\n   * @memberof CallsPerDayReportResponse\n   */\n  daily: Array<DailyAggregateCallsPerDayReportResponse>;\n}\n/**\n *\n * @export\n * @interface ChatActivityStatsResponse\n */\nexport interface ChatActivityStatsResponse {\n  /**\n   *\n   * @type {MessageStatsResponse}\n   * @memberof ChatActivityStatsResponse\n   */\n  Messages?: MessageStatsResponse;\n}\n/**\n * This event is sent when closed captions are being sent in a call, clients should use this to show the closed captions in the call screen\n * @export\n * @interface ClosedCaptionEvent\n */\nexport interface ClosedCaptionEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallClosedCaption}\n   * @memberof ClosedCaptionEvent\n   */\n  closed_caption: CallClosedCaption;\n  /**\n   *\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_caption\" in this case\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CollectUserFeedbackRequest\n */\nexport interface CollectUserFeedbackRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CollectUserFeedbackRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof CollectUserFeedbackRequest\n   */\n  rating: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  reason?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  sdk: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  sdk_version: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  user_session_id?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface CollectUserFeedbackResponse\n */\nexport interface CollectUserFeedbackResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof CollectUserFeedbackResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface ConnectUserDetailsRequest\n */\nexport interface ConnectUserDetailsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof ConnectUserDetailsRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ConnectUserDetailsRequest\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  language?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof ConnectUserDetailsRequest\n   */\n  privacy_settings?: object;\n}\n/**\n * This event is sent when the WS connection is established and authenticated, this event contains the full user object as it is stored on the server\n * @export\n * @interface ConnectedEvent\n */\nexport interface ConnectedEvent {\n  /**\n   * The connection_id for this client\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {OwnUserResponse}\n   * @memberof ConnectedEvent\n   */\n  me: OwnUserResponse;\n  /**\n   * The type of event: \"connection.ok\" in this case\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when the WS connection fails\n * @export\n * @interface ConnectionErrorEvent\n */\nexport interface ConnectionErrorEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {APIError}\n   * @memberof ConnectionErrorEvent\n   */\n  error: APIError;\n  /**\n   * The type of event: \"connection.ok\" in this case\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CountByMinuteResponse\n */\nexport interface CountByMinuteResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof CountByMinuteResponse\n   */\n  count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CountByMinuteResponse\n   */\n  start_ts: string;\n}\n/**\n * Create device request\n * @export\n * @interface CreateDeviceRequest\n */\nexport interface CreateDeviceRequest {\n  /**\n   * Device ID\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  id: string;\n  /**\n   * Push provider\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  push_provider: CreateDeviceRequestPushProviderEnum;\n  /**\n   * Push provider name\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  push_provider_name?: string;\n  /**\n   * When true the token is for Apple VoIP push notifications\n   * @type {boolean}\n   * @memberof CreateDeviceRequest\n   */\n  voip_token?: boolean;\n}\n\n/**\n * @export\n */\nexport const CreateDeviceRequestPushProviderEnum = {\n  FIREBASE: 'firebase',\n  APN: 'apn',\n  HUAWEI: 'huawei',\n  XIAOMI: 'xiaomi',\n} as const;\nexport type CreateDeviceRequestPushProviderEnum =\n  (typeof CreateDeviceRequestPushProviderEnum)[keyof typeof CreateDeviceRequestPushProviderEnum];\n\n/**\n *\n * @export\n * @interface CreateGuestRequest\n */\nexport interface CreateGuestRequest {\n  /**\n   *\n   * @type {UserRequest}\n   * @memberof CreateGuestRequest\n   */\n  user: UserRequest;\n}\n/**\n *\n * @export\n * @interface CreateGuestResponse\n */\nexport interface CreateGuestResponse {\n  /**\n   * the access token to authenticate the user\n   * @type {string}\n   * @memberof CreateGuestResponse\n   */\n  access_token: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof CreateGuestResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CreateGuestResponse\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface Credentials\n */\nexport interface Credentials {\n  /**\n   *\n   * @type {Array<ICEServer>}\n   * @memberof Credentials\n   */\n  ice_servers: Array<ICEServer>;\n  /**\n   *\n   * @type {SFUResponse}\n   * @memberof Credentials\n   */\n  server: SFUResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof Credentials\n   */\n  token: string;\n}\n/**\n * A custom event, this event is used to send custom events to other participants in the call.\n * @export\n * @interface CustomVideoEvent\n */\nexport interface CustomVideoEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  created_at: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof CustomVideoEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   * The type of event, \"custom\" in this case\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CustomVideoEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallDurationReportResponse\n */\nexport interface DailyAggregateCallDurationReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallDurationReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallDurationReport}\n   * @memberof DailyAggregateCallDurationReportResponse\n   */\n  report: CallDurationReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallParticipantCountReportResponse\n */\nexport interface DailyAggregateCallParticipantCountReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallParticipantCountReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallParticipantCountReport}\n   * @memberof DailyAggregateCallParticipantCountReportResponse\n   */\n  report: CallParticipantCountReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallsPerDayReportResponse\n */\nexport interface DailyAggregateCallsPerDayReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallsPerDayReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallsPerDayReport}\n   * @memberof DailyAggregateCallsPerDayReportResponse\n   */\n  report: CallsPerDayReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateQualityScoreReportResponse\n */\nexport interface DailyAggregateQualityScoreReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateQualityScoreReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {QualityScoreReport}\n   * @memberof DailyAggregateQualityScoreReportResponse\n   */\n  report: QualityScoreReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateSDKUsageReportResponse\n */\nexport interface DailyAggregateSDKUsageReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateSDKUsageReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {SDKUsageReport}\n   * @memberof DailyAggregateSDKUsageReportResponse\n   */\n  report: SDKUsageReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateUserFeedbackReportResponse\n */\nexport interface DailyAggregateUserFeedbackReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateUserFeedbackReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {UserFeedbackReport}\n   * @memberof DailyAggregateUserFeedbackReportResponse\n   */\n  report: UserFeedbackReport;\n}\n/**\n * DeleteCallRequest is the payload for deleting a call.\n * @export\n * @interface DeleteCallRequest\n */\nexport interface DeleteCallRequest {\n  /**\n   * if true the call will be hard deleted along with all related data\n   * @type {boolean}\n   * @memberof DeleteCallRequest\n   */\n  hard?: boolean;\n}\n/**\n * DeleteCallResponse is the payload for deleting a call.\n * @export\n * @interface DeleteCallResponse\n */\nexport interface DeleteCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof DeleteCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof DeleteCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof DeleteCallResponse\n   */\n  task_id?: string;\n}\n/**\n * Response for DeleteRecording\n * @export\n * @interface DeleteRecordingResponse\n */\nexport interface DeleteRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof DeleteRecordingResponse\n   */\n  duration: string;\n}\n/**\n * DeleteTranscriptionResponse is the payload for deleting a transcription.\n * @export\n * @interface DeleteTranscriptionResponse\n */\nexport interface DeleteTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof DeleteTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n * Response for Device\n * @export\n * @interface DeviceResponse\n */\nexport interface DeviceResponse {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  created_at: string;\n  /**\n   * Whether device is disabled or not\n   * @type {boolean}\n   * @memberof DeviceResponse\n   */\n  disabled?: boolean;\n  /**\n   * Reason explaining why device had been disabled\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  disabled_reason?: string;\n  /**\n   * Device ID\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  id: string;\n  /**\n   * Push provider\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  push_provider: string;\n  /**\n   * Push provider name\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  push_provider_name?: string;\n  /**\n   * User ID\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  user_id: string;\n  /**\n   * When true the token is for Apple VoIP push notifications\n   * @type {boolean}\n   * @memberof DeviceResponse\n   */\n  voip?: boolean;\n}\n/**\n *\n * @export\n * @interface EdgeResponse\n */\nexport interface EdgeResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  continent_code: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  country_iso_code: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  green: number;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  latency_test_url: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  latitude: number;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  longitude: number;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  red: number;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  subdivision_iso_code: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  yellow: number;\n}\n/**\n *\n * @export\n * @interface EgressHLSResponse\n */\nexport interface EgressHLSResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EgressHLSResponse\n   */\n  playlist_url: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressHLSResponse\n   */\n  status: string;\n}\n/**\n *\n * @export\n * @interface EgressRTMPResponse\n */\nexport interface EgressRTMPResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  started_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  stream_key?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  stream_url?: string;\n}\n/**\n *\n * @export\n * @interface EgressResponse\n */\nexport interface EgressResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof EgressResponse\n   */\n  broadcasting: boolean;\n  /**\n   *\n   * @type {FrameRecordingResponse}\n   * @memberof EgressResponse\n   */\n  frame_recording?: FrameRecordingResponse;\n  /**\n   *\n   * @type {EgressHLSResponse}\n   * @memberof EgressResponse\n   */\n  hls?: EgressHLSResponse;\n  /**\n   *\n   * @type {Array<EgressRTMPResponse>}\n   * @memberof EgressResponse\n   */\n  rtmps: Array<EgressRTMPResponse>;\n}\n/**\n * Response for ending a call\n * @export\n * @interface EndCallResponse\n */\nexport interface EndCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof EndCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface FrameRecordingResponse\n */\nexport interface FrameRecordingResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingResponse\n   */\n  status: string;\n}\n/**\n *\n * @export\n * @interface FrameRecordingSettingsRequest\n */\nexport interface FrameRecordingSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  capture_interval_in_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  mode: FrameRecordingSettingsRequestModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  quality?: FrameRecordingSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type FrameRecordingSettingsRequestModeEnum =\n  (typeof FrameRecordingSettingsRequestModeEnum)[keyof typeof FrameRecordingSettingsRequestModeEnum];\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n} as const;\nexport type FrameRecordingSettingsRequestQualityEnum =\n  (typeof FrameRecordingSettingsRequestQualityEnum)[keyof typeof FrameRecordingSettingsRequestQualityEnum];\n\n/**\n *\n * @export\n * @interface FrameRecordingSettingsResponse\n */\nexport interface FrameRecordingSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  capture_interval_in_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  mode: FrameRecordingSettingsResponseModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  quality?: string;\n}\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsResponseModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type FrameRecordingSettingsResponseModeEnum =\n  (typeof FrameRecordingSettingsResponseModeEnum)[keyof typeof FrameRecordingSettingsResponseModeEnum];\n\n/**\n *\n * @export\n * @interface GeofenceSettingsRequest\n */\nexport interface GeofenceSettingsRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof GeofenceSettingsRequest\n   */\n  names?: Array<string>;\n}\n/**\n *\n * @export\n * @interface GeofenceSettingsResponse\n */\nexport interface GeofenceSettingsResponse {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof GeofenceSettingsResponse\n   */\n  names: Array<string>;\n}\n/**\n * Basic response information\n * @export\n * @interface GetCallReportResponse\n */\nexport interface GetCallReportResponse {\n  /**\n   *\n   * @type {ChatActivityStatsResponse}\n   * @memberof GetCallReportResponse\n   */\n  chat_activity?: ChatActivityStatsResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetCallReportResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ReportResponse}\n   * @memberof GetCallReportResponse\n   */\n  report: ReportResponse;\n  /**\n   *\n   * @type {CallSessionResponse}\n   * @memberof GetCallReportResponse\n   */\n  session?: CallSessionResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallReportResponse\n   */\n  session_id: string;\n  /**\n   *\n   * @type {Array<VideoReactionsResponse>}\n   * @memberof GetCallReportResponse\n   */\n  video_reactions?: Array<VideoReactionsResponse>;\n}\n/**\n *\n * @export\n * @interface GetCallResponse\n */\nexport interface GetCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GetCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof GetCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof GetCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof GetCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n * Basic response information\n * @export\n * @interface GetCallSessionParticipantStatsDetailsResponse\n */\nexport interface GetCallSessionParticipantStatsDetailsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  call_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  call_type: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ParticipantSeriesPublisherStats}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  publisher?: ParticipantSeriesPublisherStats;\n  /**\n   *\n   * @type {ParticipantSeriesSubscriberStats}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  subscriber?: ParticipantSeriesSubscriberStats;\n  /**\n   *\n   * @type {ParticipantSeriesTimeframe}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  timeframe?: ParticipantSeriesTimeframe;\n  /**\n   *\n   * @type {ParticipantSeriesUserStats}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  user?: ParticipantSeriesUserStats;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  user_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  user_session_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface GetEdgesResponse\n */\nexport interface GetEdgesResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetEdgesResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<EdgeResponse>}\n   * @memberof GetEdgesResponse\n   */\n  edges: Array<EdgeResponse>;\n}\n/**\n *\n * @export\n * @interface GetOrCreateCallRequest\n */\nexport interface GetOrCreateCallRequest {\n  /**\n   *\n   * @type {CallRequest}\n   * @memberof GetOrCreateCallRequest\n   */\n  data?: CallRequest;\n  /**\n   *\n   * @type {number}\n   * @memberof GetOrCreateCallRequest\n   */\n  members_limit?: number;\n  /**\n   * if provided it sends a notification event to the members for this call\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  notify?: boolean;\n  /**\n   * if provided it sends a ring event to the members for this call\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  ring?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface GetOrCreateCallResponse\n */\nexport interface GetOrCreateCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GetOrCreateCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GetOrCreateCallResponse\n   */\n  created: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof GetOrCreateCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof GetOrCreateCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof GetOrCreateCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof GetOrCreateCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface GoLiveRequest\n */\nexport interface GoLiveRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof GoLiveRequest\n   */\n  recording_storage_name?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_closed_caption?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_hls?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_recording?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_transcription?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof GoLiveRequest\n   */\n  transcription_storage_name?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface GoLiveResponse\n */\nexport interface GoLiveResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GoLiveResponse\n   */\n  call: CallResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GoLiveResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface GroupedStatsResponse\n */\nexport interface GroupedStatsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof GroupedStatsResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {number}\n   * @memberof GroupedStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface HLSSettingsRequest\n */\nexport interface HLSSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsRequest\n   */\n  auto_on?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof HLSSettingsRequest\n   */\n  quality_tracks: Array<string>;\n}\n/**\n * HLSSettings is the payload for HLS settings\n * @export\n * @interface HLSSettingsResponse\n */\nexport interface HLSSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsResponse\n   */\n  auto_on: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof HLSSettingsResponse\n   */\n  quality_tracks: Array<string>;\n}\n/**\n *\n * @export\n * @interface HealthCheckEvent\n */\nexport interface HealthCheckEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  cid?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof HealthCheckEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  received_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface ICEServer\n */\nexport interface ICEServer {\n  /**\n   *\n   * @type {string}\n   * @memberof ICEServer\n   */\n  password: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ICEServer\n   */\n  urls: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof ICEServer\n   */\n  username: string;\n}\n/**\n *\n * @export\n * @interface IngressAudioEncodingOptionsRequest\n */\nexport interface IngressAudioEncodingOptionsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingOptionsRequest\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingOptionsRequest\n   */\n  channels: IngressAudioEncodingOptionsRequestChannelsEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressAudioEncodingOptionsRequest\n   */\n  enable_dtx?: boolean;\n}\n\n/**\n * @export\n */\nexport const IngressAudioEncodingOptionsRequestChannelsEnum = {\n  NUMBER_1: 1,\n  NUMBER_2: 2,\n} as const;\nexport type IngressAudioEncodingOptionsRequestChannelsEnum =\n  (typeof IngressAudioEncodingOptionsRequestChannelsEnum)[keyof typeof IngressAudioEncodingOptionsRequestChannelsEnum];\n\n/**\n *\n * @export\n * @interface IngressAudioEncodingResponse\n */\nexport interface IngressAudioEncodingResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingResponse\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingResponse\n   */\n  channels: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressAudioEncodingResponse\n   */\n  enable_dtx: boolean;\n}\n/**\n *\n * @export\n * @interface IngressSettingsRequest\n */\nexport interface IngressSettingsRequest {\n  /**\n   *\n   * @type {IngressAudioEncodingOptionsRequest}\n   * @memberof IngressSettingsRequest\n   */\n  audio_encoding_options?: IngressAudioEncodingOptionsRequest;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {{ [key: string]: IngressVideoEncodingOptionsRequest; }}\n   * @memberof IngressSettingsRequest\n   */\n  video_encoding_options?: {\n    [key: string]: IngressVideoEncodingOptionsRequest;\n  };\n}\n/**\n *\n * @export\n * @interface IngressSettingsResponse\n */\nexport interface IngressSettingsResponse {\n  /**\n   *\n   * @type {IngressAudioEncodingResponse}\n   * @memberof IngressSettingsResponse\n   */\n  audio_encoding_options?: IngressAudioEncodingResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {{ [key: string]: IngressVideoEncodingResponse; }}\n   * @memberof IngressSettingsResponse\n   */\n  video_encoding_options?: { [key: string]: IngressVideoEncodingResponse };\n}\n/**\n *\n * @export\n * @interface IngressSourceRequest\n */\nexport interface IngressSourceRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceRequest\n   */\n  fps: IngressSourceRequestFpsEnum;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceRequest\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceRequest\n   */\n  width: number;\n}\n\n/**\n * @export\n */\nexport const IngressSourceRequestFpsEnum = {\n  NUMBER_30: 30,\n  NUMBER_60: 60,\n} as const;\nexport type IngressSourceRequestFpsEnum =\n  (typeof IngressSourceRequestFpsEnum)[keyof typeof IngressSourceRequestFpsEnum];\n\n/**\n *\n * @export\n * @interface IngressSourceResponse\n */\nexport interface IngressSourceResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceResponse\n   */\n  fps: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceResponse\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceResponse\n   */\n  width: number;\n}\n/**\n *\n * @export\n * @interface IngressVideoEncodingOptionsRequest\n */\nexport interface IngressVideoEncodingOptionsRequest {\n  /**\n   *\n   * @type {Array<IngressVideoLayerRequest>}\n   * @memberof IngressVideoEncodingOptionsRequest\n   */\n  layers: Array<IngressVideoLayerRequest>;\n  /**\n   *\n   * @type {IngressSourceRequest}\n   * @memberof IngressVideoEncodingOptionsRequest\n   */\n  source: IngressSourceRequest;\n}\n/**\n *\n * @export\n * @interface IngressVideoEncodingResponse\n */\nexport interface IngressVideoEncodingResponse {\n  /**\n   *\n   * @type {Array<IngressVideoLayerResponse>}\n   * @memberof IngressVideoEncodingResponse\n   */\n  layers: Array<IngressVideoLayerResponse>;\n  /**\n   *\n   * @type {IngressSourceResponse}\n   * @memberof IngressVideoEncodingResponse\n   */\n  source: IngressSourceResponse;\n}\n/**\n *\n * @export\n * @interface IngressVideoLayerRequest\n */\nexport interface IngressVideoLayerRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {string}\n   * @memberof IngressVideoLayerRequest\n   */\n  codec: IngressVideoLayerRequestCodecEnum;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  frame_rate_limit: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  max_dimension: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  min_dimension: number;\n}\n\n/**\n * @export\n */\nexport const IngressVideoLayerRequestCodecEnum = {\n  H264: 'h264',\n  VP8: 'vp8',\n} as const;\nexport type IngressVideoLayerRequestCodecEnum =\n  (typeof IngressVideoLayerRequestCodecEnum)[keyof typeof IngressVideoLayerRequestCodecEnum];\n\n/**\n *\n * @export\n * @interface IngressVideoLayerResponse\n */\nexport interface IngressVideoLayerResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {string}\n   * @memberof IngressVideoLayerResponse\n   */\n  codec: string;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  frame_rate_limit: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  max_dimension: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  min_dimension: number;\n}\n/**\n *\n * @export\n * @interface JoinCallRequest\n */\nexport interface JoinCallRequest {\n  /**\n   * if true the call will be created if it doesn't exist\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  create?: boolean;\n  /**\n   *\n   * @type {CallRequest}\n   * @memberof JoinCallRequest\n   */\n  data?: CallRequest;\n  /**\n   *\n   * @type {string}\n   * @memberof JoinCallRequest\n   */\n  location: string;\n  /**\n   *\n   * @type {number}\n   * @memberof JoinCallRequest\n   */\n  members_limit?: number;\n  /**\n   * If the participant is migrating from another SFU, then this is the ID of the previous SFU\n   * @type {string}\n   * @memberof JoinCallRequest\n   */\n  migrating_from?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  notify?: boolean;\n  /**\n   * if true and the call is created, the notification will include ring=true\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  ring?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface JoinCallResponse\n */\nexport interface JoinCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof JoinCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallResponse\n   */\n  created: boolean;\n  /**\n   *\n   * @type {Credentials}\n   * @memberof JoinCallResponse\n   */\n  credentials: Credentials;\n  /**\n   *\n   * @type {string}\n   * @memberof JoinCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof JoinCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof JoinCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof JoinCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   *\n   * @type {StatsOptions}\n   * @memberof JoinCallResponse\n   */\n  stats_options: StatsOptions;\n}\n/**\n * KickUserRequest is the payload for kicking a user from a call. Optionally block the user as well.\n * @export\n * @interface KickUserRequest\n */\nexport interface KickUserRequest {\n  /**\n   * If true, also block the user from rejoining the call\n   * @type {boolean}\n   * @memberof KickUserRequest\n   */\n  block?: boolean;\n  /**\n   * The user to kick\n   * @type {string}\n   * @memberof KickUserRequest\n   */\n  user_id: string;\n}\n/**\n * KickUserResponse is the payload for kicking a user from a call.\n * @export\n * @interface KickUserResponse\n */\nexport interface KickUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof KickUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to call participants to notify when a user is kicked from a call. Clients should make the kicked user leave the call UI.\n * @export\n * @interface KickedUserEvent\n */\nexport interface KickedUserEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof KickedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof KickedUserEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof KickedUserEvent\n   */\n  kicked_by_user?: UserResponse;\n  /**\n   * The type of event: \"call.kicked_user\" in this case\n   * @type {string}\n   * @memberof KickedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof KickedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface LayoutSettingsRequest\n */\nexport interface LayoutSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof LayoutSettingsRequest\n   */\n  detect_orientation?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  external_app_url?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  external_css_url?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  name: LayoutSettingsRequestNameEnum;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof LayoutSettingsRequest\n   */\n  options?: { [key: string]: any };\n}\n\n/**\n * @export\n */\nexport const LayoutSettingsRequestNameEnum = {\n  SPOTLIGHT: 'spotlight',\n  GRID: 'grid',\n  SINGLE_PARTICIPANT: 'single-participant',\n  MOBILE: 'mobile',\n  CUSTOM: 'custom',\n} as const;\nexport type LayoutSettingsRequestNameEnum =\n  (typeof LayoutSettingsRequestNameEnum)[keyof typeof LayoutSettingsRequestNameEnum];\n\n/**\n *\n * @export\n * @interface LimitsSettingsRequest\n */\nexport interface LimitsSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsRequest\n   */\n  max_duration_seconds?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants_exclude_owner?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants_exclude_roles?: Array<string>;\n}\n/**\n *\n * @export\n * @interface LimitsSettingsResponse\n */\nexport interface LimitsSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsResponse\n   */\n  max_duration_seconds?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants_exclude_owner?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants_exclude_roles: Array<string>;\n}\n/**\n * List devices response\n * @export\n * @interface ListDevicesResponse\n */\nexport interface ListDevicesResponse {\n  /**\n   * List of devices\n   * @type {Array<DeviceResponse>}\n   * @memberof ListDevicesResponse\n   */\n  devices: Array<DeviceResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof ListDevicesResponse\n   */\n  duration: string;\n}\n/**\n * Response for listing recordings\n * @export\n * @interface ListRecordingsResponse\n */\nexport interface ListRecordingsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ListRecordingsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<CallRecording>}\n   * @memberof ListRecordingsResponse\n   */\n  recordings: Array<CallRecording>;\n}\n/**\n *\n * @export\n * @interface ListTranscriptionsResponse\n */\nexport interface ListTranscriptionsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ListTranscriptionsResponse\n   */\n  duration: string;\n  /**\n   * List of transcriptions for the call\n   * @type {Array<CallTranscription>}\n   * @memberof ListTranscriptionsResponse\n   */\n  transcriptions: Array<CallTranscription>;\n}\n/**\n * MemberRequest is the payload for adding a member to a call.\n * @export\n * @interface MemberRequest\n */\nexport interface MemberRequest {\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof MemberRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof MemberRequest\n   */\n  role?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberRequest\n   */\n  user_id: string;\n}\n/**\n * MemberResponse is the payload for a member of a call.\n * @export\n * @interface MemberResponse\n */\nexport interface MemberResponse {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  created_at: string;\n  /**\n   * Custom member response data\n   * @type {{ [key: string]: any; }}\n   * @memberof MemberResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   * Date/time of deletion\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  role?: string;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  updated_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof MemberResponse\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface MessageStatsResponse\n */\nexport interface MessageStatsResponse {\n  /**\n   *\n   * @type {Array<CountByMinuteResponse>}\n   * @memberof MessageStatsResponse\n   */\n  count_over_time?: Array<CountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface MetricThreshold\n */\nexport interface MetricThreshold {\n  /**\n   *\n   * @type {string}\n   * @memberof MetricThreshold\n   */\n  level: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MetricThreshold\n   */\n  operator: string;\n  /**\n   *\n   * @type {number}\n   * @memberof MetricThreshold\n   */\n  value: number;\n  /**\n   *\n   * @type {string}\n   * @memberof MetricThreshold\n   */\n  value_unit?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof MetricThreshold\n   */\n  window_seconds?: number;\n}\n/**\n *\n * @export\n * @interface MuteUsersRequest\n */\nexport interface MuteUsersRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  audio?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  mute_all_users?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  screenshare?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  screenshare_audio?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof MuteUsersRequest\n   */\n  user_ids?: Array<string>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  video?: boolean;\n}\n/**\n * MuteUsersResponse is the response payload for the mute users endpoint.\n * @export\n * @interface MuteUsersResponse\n */\nexport interface MuteUsersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof MuteUsersResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface NetworkMetricsReportResponse\n */\nexport interface NetworkMetricsReportResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_connection_time?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_jitter?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_latency?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_time_to_reconnect?: number;\n}\n/**\n *\n * @export\n * @interface NoiseCancellationSettings\n */\nexport interface NoiseCancellationSettings {\n  /**\n   *\n   * @type {string}\n   * @memberof NoiseCancellationSettings\n   */\n  mode: NoiseCancellationSettingsModeEnum;\n}\n\n/**\n * @export\n */\nexport const NoiseCancellationSettingsModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type NoiseCancellationSettingsModeEnum =\n  (typeof NoiseCancellationSettingsModeEnum)[keyof typeof NoiseCancellationSettingsModeEnum];\n\n/**\n * All possibility of string to use\n * @export\n */\nexport const OwnCapability = {\n  BLOCK_USERS: 'block-users',\n  CHANGE_MAX_DURATION: 'change-max-duration',\n  CREATE_CALL: 'create-call',\n  CREATE_REACTION: 'create-reaction',\n  ENABLE_NOISE_CANCELLATION: 'enable-noise-cancellation',\n  END_CALL: 'end-call',\n  JOIN_BACKSTAGE: 'join-backstage',\n  JOIN_CALL: 'join-call',\n  JOIN_ENDED_CALL: 'join-ended-call',\n  KICK_USER: 'kick-user',\n  MUTE_USERS: 'mute-users',\n  PIN_FOR_EVERYONE: 'pin-for-everyone',\n  READ_CALL: 'read-call',\n  REMOVE_CALL_MEMBER: 'remove-call-member',\n  SCREENSHARE: 'screenshare',\n  SEND_AUDIO: 'send-audio',\n  SEND_CLOSED_CAPTIONS_CALL: 'send-closed-captions-call',\n  SEND_VIDEO: 'send-video',\n  START_BROADCAST_CALL: 'start-broadcast-call',\n  START_CLOSED_CAPTIONS_CALL: 'start-closed-captions-call',\n  START_FRAME_RECORD_CALL: 'start-frame-record-call',\n  START_RECORD_CALL: 'start-record-call',\n  START_TRANSCRIPTION_CALL: 'start-transcription-call',\n  STOP_BROADCAST_CALL: 'stop-broadcast-call',\n  STOP_CLOSED_CAPTIONS_CALL: 'stop-closed-captions-call',\n  STOP_FRAME_RECORD_CALL: 'stop-frame-record-call',\n  STOP_RECORD_CALL: 'stop-record-call',\n  STOP_TRANSCRIPTION_CALL: 'stop-transcription-call',\n  UPDATE_CALL: 'update-call',\n  UPDATE_CALL_MEMBER: 'update-call-member',\n  UPDATE_CALL_PERMISSIONS: 'update-call-permissions',\n  UPDATE_CALL_SETTINGS: 'update-call-settings',\n} as const;\nexport type OwnCapability = (typeof OwnCapability)[keyof typeof OwnCapability];\n\n/**\n *\n * @export\n * @interface OwnUserResponse\n */\nexport interface OwnUserResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof OwnUserResponse\n   */\n  avg_response_time?: number;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof OwnUserResponse\n   */\n  blocked_user_ids?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof OwnUserResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  deactivated_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {Array<DeviceResponse>}\n   * @memberof OwnUserResponse\n   */\n  devices: Array<DeviceResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  image?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  last_active?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof OwnUserResponse\n   */\n  privacy_settings?: object;\n  /**\n   *\n   * @type {PushPreferences}\n   * @memberof OwnUserResponse\n   */\n  push_preferences?: PushPreferences;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  role: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof OwnUserResponse\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof OwnUserResponse\n   */\n  teams_role?: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  updated_at: string;\n}\n/**\n *\n * @export\n * @interface ParticipantCountByMinuteResponse\n */\nexport interface ParticipantCountByMinuteResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  first: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  last: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  max: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  min: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  start_ts: string;\n}\n/**\n *\n * @export\n * @interface ParticipantCountOverTimeResponse\n */\nexport interface ParticipantCountOverTimeResponse {\n  /**\n   *\n   * @type {Array<ParticipantCountByMinuteResponse>}\n   * @memberof ParticipantCountOverTimeResponse\n   */\n  by_minute?: Array<ParticipantCountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface ParticipantReportResponse\n */\nexport interface ParticipantReportResponse {\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_browser?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_country?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_device?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_operating_system?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {ParticipantCountOverTimeResponse}\n   * @memberof ParticipantReportResponse\n   */\n  count_over_time?: ParticipantCountOverTimeResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  max_concurrent?: number;\n  /**\n   *\n   * @type {PublisherStatsResponse}\n   * @memberof ParticipantReportResponse\n   */\n  publishers?: PublisherStatsResponse;\n  /**\n   *\n   * @type {SubscriberStatsResponse}\n   * @memberof ParticipantReportResponse\n   */\n  subscribers?: SubscriberStatsResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  sum: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesPublisherStats\n */\nexport interface ParticipantSeriesPublisherStats {\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  global?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  global_thresholds?: { [key: string]: Array<MetricThreshold> };\n  /**\n   *\n   * @type {{ [key: string]: Array<ParticipantSeriesTrackMetrics>; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  tracks?: { [key: string]: Array<ParticipantSeriesTrackMetrics> };\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesSubscriberStats\n */\nexport interface ParticipantSeriesSubscriberStats {\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  global?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  global_thresholds?: { [key: string]: Array<MetricThreshold> };\n  /**\n   *\n   * @type {Array<ParticipantSeriesSubscriptionTrackMetrics>}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  subscriptions?: Array<ParticipantSeriesSubscriptionTrackMetrics>;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesSubscriptionTrackMetrics\n */\nexport interface ParticipantSeriesSubscriptionTrackMetrics {\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  publisher_name?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  publisher_user_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  publisher_user_session_id?: string;\n  /**\n   *\n   * @type {{ [key: string]: Array<ParticipantSeriesTrackMetrics>; }}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  tracks?: { [key: string]: Array<ParticipantSeriesTrackMetrics> };\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesTimeframe\n */\nexport interface ParticipantSeriesTimeframe {\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  max_points: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  since: string;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  step_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  until: string;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesTrackMetrics\n */\nexport interface ParticipantSeriesTrackMetrics {\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  codec?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  label?: string;\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  metrics?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  rid?: string;\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  thresholds?: { [key: string]: Array<MetricThreshold> };\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  track_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  track_type?: string;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesUserStats\n */\nexport interface ParticipantSeriesUserStats {\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesUserStats\n   */\n  metrics?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesUserStats\n   */\n  thresholds?: { [key: string]: Array<MetricThreshold> };\n}\n/**\n *\n * @export\n * @interface PerSDKUsageReport\n */\nexport interface PerSDKUsageReport {\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof PerSDKUsageReport\n   */\n  by_version: { [key: string]: number };\n  /**\n   *\n   * @type {number}\n   * @memberof PerSDKUsageReport\n   */\n  total: number;\n}\n/**\n * This event is sent when a user requests access to a feature on a call,\n * clients receiving this event should display a permission request to the user\n * @export\n * @interface PermissionRequestEvent\n */\nexport interface PermissionRequestEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  created_at: string;\n  /**\n   * The list of permissions requested by the user\n   * @type {Array<string>}\n   * @memberof PermissionRequestEvent\n   */\n  permissions: Array<string>;\n  /**\n   * The type of event: \"call.permission_request\" in this case\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof PermissionRequestEvent\n   */\n  user: UserResponse;\n}\n/**\n * PinRequest is the payload for pinning a message.\n * @export\n * @interface PinRequest\n */\nexport interface PinRequest {\n  /**\n   * the session ID of the user who pinned the message\n   * @type {string}\n   * @memberof PinRequest\n   */\n  session_id: string;\n  /**\n   * the user ID of the user who pinned the message\n   * @type {string}\n   * @memberof PinRequest\n   */\n  user_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface PinResponse\n */\nexport interface PinResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof PinResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface PublishedTrackFlags\n */\nexport interface PublishedTrackFlags {\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  audio: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  screenshare: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  screenshare_audio: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  video: boolean;\n}\n/**\n *\n * @export\n * @interface PublisherStatsResponse\n */\nexport interface PublisherStatsResponse {\n  /**\n   *\n   * @type {Array<TrackStatsResponse>}\n   * @memberof PublisherStatsResponse\n   */\n  by_track?: Array<TrackStatsResponse>;\n  /**\n   *\n   * @type {number}\n   * @memberof PublisherStatsResponse\n   */\n  total: number;\n  /**\n   *\n   * @type {number}\n   * @memberof PublisherStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface PushPreferences\n */\nexport interface PushPreferences {\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  call_level?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  chat_level?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  disabled_until?: string;\n}\n/**\n *\n * @export\n * @interface QualityScoreReport\n */\nexport interface QualityScoreReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof QualityScoreReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface QualityScoreReportResponse\n */\nexport interface QualityScoreReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateQualityScoreReportResponse>}\n   * @memberof QualityScoreReportResponse\n   */\n  daily: Array<DailyAggregateQualityScoreReportResponse>;\n}\n/**\n *\n * @export\n * @interface QueryAggregateCallStatsRequest\n */\nexport interface QueryAggregateCallStatsRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  from?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  report_types?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  to?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryAggregateCallStatsResponse\n */\nexport interface QueryAggregateCallStatsResponse {\n  /**\n   *\n   * @type {CallDurationReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  call_duration_report?: CallDurationReportResponse;\n  /**\n   *\n   * @type {CallParticipantCountReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  call_participant_count_report?: CallParticipantCountReportResponse;\n  /**\n   *\n   * @type {CallsPerDayReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  calls_per_day_report?: CallsPerDayReportResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {NetworkMetricsReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  network_metrics_report?: NetworkMetricsReportResponse;\n  /**\n   *\n   * @type {QualityScoreReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  quality_score_report?: QualityScoreReportResponse;\n  /**\n   *\n   * @type {SDKUsageReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  sdk_usage_report?: SDKUsageReportResponse;\n  /**\n   *\n   * @type {UserFeedbackReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  user_feedback_report?: UserFeedbackReportResponse;\n}\n/**\n *\n * @export\n * @interface QueryCallMembersRequest\n */\nexport interface QueryCallMembersRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallMembersRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallMembersRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallMembersRequest\n   */\n  sort?: Array<SortParamRequest>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  type: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallMembersResponse\n */\nexport interface QueryCallMembersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof QueryCallMembersResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  prev?: string;\n}\n/**\n *\n * @export\n * @interface QueryCallParticipantsRequest\n */\nexport interface QueryCallParticipantsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallParticipantsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n}\n/**\n *\n * @export\n * @interface QueryCallParticipantsResponse\n */\nexport interface QueryCallParticipantsResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof QueryCallParticipantsResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallParticipantsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof QueryCallParticipantsResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof QueryCallParticipantsResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof QueryCallParticipantsResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   * List of call participants\n   * @type {Array<CallParticipantResponse>}\n   * @memberof QueryCallParticipantsResponse\n   */\n  participants: Array<CallParticipantResponse>;\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallParticipantsResponse\n   */\n  total_participants: number;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallSessionParticipantStatsResponse\n */\nexport interface QueryCallSessionParticipantStatsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_type: string;\n  /**\n   *\n   * @type {CallStatsParticipantCounts}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  counts: CallStatsParticipantCounts;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {Array<CallStatsParticipant>}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  participants: Array<CallStatsParticipant>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  prev?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  tmp_data_source?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallSessionParticipantStatsTimelineResponse\n */\nexport interface QueryCallSessionParticipantStatsTimelineResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  call_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  call_type: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<CallParticipantTimeline>}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  events: Array<CallParticipantTimeline>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  user_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  user_session_id: string;\n}\n/**\n *\n * @export\n * @interface QueryCallStatsRequest\n */\nexport interface QueryCallStatsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallStatsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallStatsRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsRequest\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallStatsRequest\n   */\n  sort?: Array<SortParamRequest>;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallStatsResponse\n */\nexport interface QueryCallStatsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<CallStatsReportSummaryResponse>}\n   * @memberof QueryCallStatsResponse\n   */\n  reports: Array<CallStatsReportSummaryResponse>;\n}\n/**\n *\n * @export\n * @interface QueryCallsRequest\n */\nexport interface QueryCallsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallsRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsRequest\n   */\n  prev?: string;\n  /**\n   * Array of sort parameters\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallsRequest\n   */\n  sort?: Array<SortParamRequest>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof QueryCallsRequest\n   */\n  watch?: boolean;\n}\n/**\n *\n * @export\n * @interface QueryCallsResponse\n */\nexport interface QueryCallsResponse {\n  /**\n   *\n   * @type {Array<CallStateResponseFields>}\n   * @memberof QueryCallsResponse\n   */\n  calls: Array<CallStateResponseFields>;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  prev?: string;\n}\n/**\n * RTMPBroadcastRequest is the payload for starting an RTMP broadcast.\n * @export\n * @interface RTMPBroadcastRequest\n */\nexport interface RTMPBroadcastRequest {\n  /**\n   *\n   * @type {LayoutSettingsRequest}\n   * @memberof RTMPBroadcastRequest\n   */\n  layout?: LayoutSettingsRequest;\n  /**\n   * Name identifier for RTMP broadcast, must be unique in call\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  name: string;\n  /**\n   * If provided, will override the call's RTMP settings quality\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  quality?: RTMPBroadcastRequestQualityEnum;\n  /**\n   * If provided, will be appended at the end of stream_url\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  stream_key?: string;\n  /**\n   * URL for the RTMP server to send the call to\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  stream_url: string;\n}\n\n/**\n * @export\n */\nexport const RTMPBroadcastRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n  PORTRAIT_2160X3840: 'portrait-2160x3840',\n} as const;\nexport type RTMPBroadcastRequestQualityEnum =\n  (typeof RTMPBroadcastRequestQualityEnum)[keyof typeof RTMPBroadcastRequestQualityEnum];\n\n/**\n * RTMP input settings\n * @export\n * @interface RTMPIngress\n */\nexport interface RTMPIngress {\n  /**\n   *\n   * @type {string}\n   * @memberof RTMPIngress\n   */\n  address: string;\n}\n/**\n *\n * @export\n * @interface RTMPSettingsRequest\n */\nexport interface RTMPSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RTMPSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   * Resolution to set for the RTMP stream\n   * @type {string}\n   * @memberof RTMPSettingsRequest\n   */\n  quality?: RTMPSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const RTMPSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n  PORTRAIT_2160X3840: 'portrait-2160x3840',\n} as const;\nexport type RTMPSettingsRequestQualityEnum =\n  (typeof RTMPSettingsRequestQualityEnum)[keyof typeof RTMPSettingsRequestQualityEnum];\n\n/**\n * RTMPSettingsResponse is the payload for RTMP settings\n * @export\n * @interface RTMPSettingsResponse\n */\nexport interface RTMPSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RTMPSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RTMPSettingsResponse\n   */\n  quality: string;\n}\n/**\n *\n * @export\n * @interface ReactionResponse\n */\nexport interface ReactionResponse {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof ReactionResponse\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof ReactionResponse\n   */\n  emoji_code?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ReactionResponse\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof ReactionResponse\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface RecordSettingsRequest\n */\nexport interface RecordSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RecordSettingsRequest\n   */\n  audio_only?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsRequest\n   */\n  mode: RecordSettingsRequestModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsRequest\n   */\n  quality?: RecordSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const RecordSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type RecordSettingsRequestModeEnum =\n  (typeof RecordSettingsRequestModeEnum)[keyof typeof RecordSettingsRequestModeEnum];\n\n/**\n * @export\n */\nexport const RecordSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n  PORTRAIT_2160X3840: 'portrait-2160x3840',\n} as const;\nexport type RecordSettingsRequestQualityEnum =\n  (typeof RecordSettingsRequestQualityEnum)[keyof typeof RecordSettingsRequestQualityEnum];\n\n/**\n * RecordSettings is the payload for recording settings\n * @export\n * @interface RecordSettingsResponse\n */\nexport interface RecordSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RecordSettingsResponse\n   */\n  audio_only: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsResponse\n   */\n  mode: string;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsResponse\n   */\n  quality: string;\n}\n/**\n *\n * @export\n * @interface RejectCallRequest\n */\nexport interface RejectCallRequest {\n  /**\n   * Reason for rejecting the call\n   * @type {string}\n   * @memberof RejectCallRequest\n   */\n  reason?: string;\n}\n/**\n *\n * @export\n * @interface RejectCallResponse\n */\nexport interface RejectCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof RejectCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface ReportByHistogramBucket\n */\nexport interface ReportByHistogramBucket {\n  /**\n   *\n   * @type {string}\n   * @memberof ReportByHistogramBucket\n   */\n  category: string;\n  /**\n   *\n   * @type {number}\n   * @memberof ReportByHistogramBucket\n   */\n  count: number;\n  /**\n   *\n   * @type {Bound}\n   * @memberof ReportByHistogramBucket\n   */\n  lower_bound?: Bound;\n  /**\n   *\n   * @type {number}\n   * @memberof ReportByHistogramBucket\n   */\n  sum: number;\n  /**\n   *\n   * @type {Bound}\n   * @memberof ReportByHistogramBucket\n   */\n  upper_bound?: Bound;\n}\n/**\n *\n * @export\n * @interface ReportResponse\n */\nexport interface ReportResponse {\n  /**\n   *\n   * @type {CallReportResponse}\n   * @memberof ReportResponse\n   */\n  call: CallReportResponse;\n  /**\n   *\n   * @type {ParticipantReportResponse}\n   * @memberof ReportResponse\n   */\n  participants: ParticipantReportResponse;\n  /**\n   *\n   * @type {UserRatingReportResponse}\n   * @memberof ReportResponse\n   */\n  user_ratings: UserRatingReportResponse;\n}\n/**\n *\n * @export\n * @interface RequestPermissionRequest\n */\nexport interface RequestPermissionRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof RequestPermissionRequest\n   */\n  permissions: Array<string>;\n}\n/**\n *\n * @export\n * @interface RequestPermissionResponse\n */\nexport interface RequestPermissionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof RequestPermissionResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface Response\n */\nexport interface Response {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof Response\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface RingSettingsRequest\n */\nexport interface RingSettingsRequest {\n  /**\n   * When none of the callees accept a ring call in this time a rejection will be sent by the caller with reason 'timeout' by the SDKs\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  auto_cancel_timeout_ms: number;\n  /**\n   * When a callee is online but doesn't answer a ring call in this time a rejection will be sent with reason 'timeout' by the SDKs\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  incoming_call_timeout_ms: number;\n  /**\n   * When a callee doesn't accept or reject a ring call in this time a missed call event will be sent\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  missed_call_timeout_ms?: number;\n}\n/**\n *\n * @export\n * @interface RingSettingsResponse\n */\nexport interface RingSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  auto_cancel_timeout_ms: number;\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  incoming_call_timeout_ms: number;\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  missed_call_timeout_ms: number;\n}\n/**\n *\n * @export\n * @interface SDKUsageReport\n */\nexport interface SDKUsageReport {\n  /**\n   *\n   * @type {{ [key: string]: PerSDKUsageReport; }}\n   * @memberof SDKUsageReport\n   */\n  per_sdk_usage: { [key: string]: PerSDKUsageReport };\n}\n/**\n *\n * @export\n * @interface SDKUsageReportResponse\n */\nexport interface SDKUsageReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateSDKUsageReportResponse>}\n   * @memberof SDKUsageReportResponse\n   */\n  daily: Array<DailyAggregateSDKUsageReportResponse>;\n}\n/**\n *\n * @export\n * @interface SFUResponse\n */\nexport interface SFUResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  edge_name: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  url: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  ws_endpoint: string;\n}\n/**\n *\n * @export\n * @interface SRTIngress\n */\nexport interface SRTIngress {\n  /**\n   *\n   * @type {string}\n   * @memberof SRTIngress\n   */\n  address: string;\n}\n/**\n *\n * @export\n * @interface ScreensharingSettingsRequest\n */\nexport interface ScreensharingSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof ScreensharingSettingsRequest\n   */\n  target_resolution?: TargetResolution;\n}\n/**\n *\n * @export\n * @interface ScreensharingSettingsResponse\n */\nexport interface ScreensharingSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof ScreensharingSettingsResponse\n   */\n  target_resolution?: TargetResolution;\n}\n/**\n * Send a call event to the other user\n * @export\n * @interface SendCallEventRequest\n */\nexport interface SendCallEventRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof SendCallEventRequest\n   */\n  custom?: { [key: string]: any };\n}\n/**\n *\n * @export\n * @interface SendCallEventResponse\n */\nexport interface SendCallEventResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof SendCallEventResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface SendReactionRequest\n */\nexport interface SendReactionRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof SendReactionRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof SendReactionRequest\n   */\n  emoji_code?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SendReactionRequest\n   */\n  type: string;\n}\n/**\n * Basic response information\n * @export\n * @interface SendReactionResponse\n */\nexport interface SendReactionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof SendReactionResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ReactionResponse}\n   * @memberof SendReactionResponse\n   */\n  reaction: ReactionResponse;\n}\n/**\n *\n * @export\n * @interface SessionSettingsRequest\n */\nexport interface SessionSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof SessionSettingsRequest\n   */\n  inactivity_timeout_seconds: number;\n}\n/**\n *\n * @export\n * @interface SessionSettingsResponse\n */\nexport interface SessionSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof SessionSettingsResponse\n   */\n  inactivity_timeout_seconds: number;\n}\n/**\n *\n * @export\n * @interface SortParamRequest\n */\nexport interface SortParamRequest {\n  /**\n   * Direction of sorting, 1 for Ascending, -1 for Descending, default is 1\n   * @type {number}\n   * @memberof SortParamRequest\n   */\n  direction?: number;\n  /**\n   * Name of field to sort by\n   * @type {string}\n   * @memberof SortParamRequest\n   */\n  field?: string;\n}\n/**\n *\n * @export\n * @interface SpeechSegmentConfig\n */\nexport interface SpeechSegmentConfig {\n  /**\n   *\n   * @type {number}\n   * @memberof SpeechSegmentConfig\n   */\n  max_speech_caption_ms?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SpeechSegmentConfig\n   */\n  silence_duration_ms?: number;\n}\n/**\n *\n * @export\n * @interface StartClosedCaptionsRequest\n */\nexport interface StartClosedCaptionsRequest {\n  /**\n   * Enable transcriptions along with closed captions\n   * @type {boolean}\n   * @memberof StartClosedCaptionsRequest\n   */\n  enable_transcription?: boolean;\n  /**\n   * Which external storage to use for transcriptions (only applicable if enable_transcription is true)\n   * @type {string}\n   * @memberof StartClosedCaptionsRequest\n   */\n  external_storage?: string;\n  /**\n   * The spoken language in the call, if not provided the language defined in the transcription settings will be used\n   * @type {string}\n   * @memberof StartClosedCaptionsRequest\n   */\n  language?: StartClosedCaptionsRequestLanguageEnum;\n  /**\n   *\n   * @type {SpeechSegmentConfig}\n   * @memberof StartClosedCaptionsRequest\n   */\n  speech_segment_config?: SpeechSegmentConfig;\n}\n\n/**\n * @export\n */\nexport const StartClosedCaptionsRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type StartClosedCaptionsRequestLanguageEnum =\n  (typeof StartClosedCaptionsRequestLanguageEnum)[keyof typeof StartClosedCaptionsRequestLanguageEnum];\n\n/**\n *\n * @export\n * @interface StartClosedCaptionsResponse\n */\nexport interface StartClosedCaptionsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof StartClosedCaptionsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartFrameRecordingRequest\n */\nexport interface StartFrameRecordingRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof StartFrameRecordingRequest\n   */\n  recording_external_storage?: string;\n}\n/**\n * StartFrameRecordingResponse is the response payload for the start frame recording endpoint.\n * @export\n * @interface StartFrameRecordingResponse\n */\nexport interface StartFrameRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartFrameRecordingResponse\n   */\n  duration: string;\n}\n/**\n * StartHLSBroadcastingResponse is the payload for starting an HLS broadcasting.\n * @export\n * @interface StartHLSBroadcastingResponse\n */\nexport interface StartHLSBroadcastingResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof StartHLSBroadcastingResponse\n   */\n  duration: string;\n  /**\n   * the URL of the HLS playlist\n   * @type {string}\n   * @memberof StartHLSBroadcastingResponse\n   */\n  playlist_url: string;\n}\n/**\n * StartRTMPBroadcastsRequest is the payload for starting RTMP broadcasts.\n * @export\n * @interface StartRTMPBroadcastsRequest\n */\nexport interface StartRTMPBroadcastsRequest {\n  /**\n   * List of broadcasts to start\n   * @type {Array<RTMPBroadcastRequest>}\n   * @memberof StartRTMPBroadcastsRequest\n   */\n  broadcasts: Array<RTMPBroadcastRequest>;\n}\n/**\n * StartRTMPBroadcastsResponse is the payload for starting an RTMP broadcast.\n * @export\n * @interface StartRTMPBroadcastsResponse\n */\nexport interface StartRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartRecordingRequest\n */\nexport interface StartRecordingRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof StartRecordingRequest\n   */\n  recording_external_storage?: string;\n}\n/**\n * StartRecordingResponse is the response payload for the start recording endpoint.\n * @export\n * @interface StartRecordingResponse\n */\nexport interface StartRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartRecordingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartTranscriptionRequest\n */\nexport interface StartTranscriptionRequest {\n  /**\n   * Enable closed captions along with transcriptions\n   * @type {boolean}\n   * @memberof StartTranscriptionRequest\n   */\n  enable_closed_captions?: boolean;\n  /**\n   * The spoken language in the call, if not provided the language defined in the transcription settings will be used\n   * @type {string}\n   * @memberof StartTranscriptionRequest\n   */\n  language?: StartTranscriptionRequestLanguageEnum;\n  /**\n   * Store transcriptions in this external storage\n   * @type {string}\n   * @memberof StartTranscriptionRequest\n   */\n  transcription_external_storage?: string;\n}\n\n/**\n * @export\n */\nexport const StartTranscriptionRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type StartTranscriptionRequestLanguageEnum =\n  (typeof StartTranscriptionRequestLanguageEnum)[keyof typeof StartTranscriptionRequestLanguageEnum];\n\n/**\n *\n * @export\n * @interface StartTranscriptionResponse\n */\nexport interface StartTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StatsOptions\n */\nexport interface StatsOptions {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StatsOptions\n   */\n  enable_rtc_stats: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof StatsOptions\n   */\n  reporting_interval_ms: number;\n}\n/**\n *\n * @export\n * @interface StopAllRTMPBroadcastsResponse\n */\nexport interface StopAllRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopAllRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopClosedCaptionsRequest\n */\nexport interface StopClosedCaptionsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopClosedCaptionsRequest\n   */\n  stop_transcription?: boolean;\n}\n/**\n * Basic response information\n * @export\n * @interface StopClosedCaptionsResponse\n */\nexport interface StopClosedCaptionsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopClosedCaptionsResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopFrameRecordingResponse\n */\nexport interface StopFrameRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopFrameRecordingResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopHLSBroadcastingResponse\n */\nexport interface StopHLSBroadcastingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopHLSBroadcastingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopLiveRequest\n */\nexport interface StopLiveRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_closed_caption?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_hls?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_recording?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_rtmp_broadcasts?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_transcription?: boolean;\n}\n/**\n *\n * @export\n * @interface StopLiveResponse\n */\nexport interface StopLiveResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof StopLiveResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof StopLiveResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopRTMPBroadcastsResponse\n */\nexport interface StopRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopRecordingResponse\n */\nexport interface StopRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopRecordingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopTranscriptionRequest\n */\nexport interface StopTranscriptionRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopTranscriptionRequest\n   */\n  stop_closed_captions?: boolean;\n}\n/**\n * Basic response information\n * @export\n * @interface StopTranscriptionResponse\n */\nexport interface StopTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface SubscriberStatsResponse\n */\nexport interface SubscriberStatsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  total: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  total_subscribed_duration_seconds: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface TargetResolution\n */\nexport interface TargetResolution {\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  bitrate?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  width: number;\n}\n/**\n *\n * @export\n * @interface ThumbnailResponse\n */\nexport interface ThumbnailResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ThumbnailResponse\n   */\n  image_url: string;\n}\n/**\n *\n * @export\n * @interface ThumbnailsSettingsRequest\n */\nexport interface ThumbnailsSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ThumbnailsSettingsRequest\n   */\n  enabled?: boolean;\n}\n/**\n *\n * @export\n * @interface ThumbnailsSettingsResponse\n */\nexport interface ThumbnailsSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ThumbnailsSettingsResponse\n   */\n  enabled: boolean;\n}\n/**\n *\n * @export\n * @interface TrackStatsResponse\n */\nexport interface TrackStatsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof TrackStatsResponse\n   */\n  duration_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof TrackStatsResponse\n   */\n  track_type: string;\n}\n/**\n *\n * @export\n * @interface TranscriptionSettingsRequest\n */\nexport interface TranscriptionSettingsRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  closed_caption_mode?: TranscriptionSettingsRequestClosedCaptionModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  language?: TranscriptionSettingsRequestLanguageEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  mode?: TranscriptionSettingsRequestModeEnum;\n  /**\n   *\n   * @type {SpeechSegmentConfig}\n   * @memberof TranscriptionSettingsRequest\n   */\n  speech_segment_config?: SpeechSegmentConfig;\n  /**\n   *\n   * @type {TranslationSettings}\n   * @memberof TranscriptionSettingsRequest\n   */\n  translation?: TranslationSettings;\n}\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestClosedCaptionModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsRequestClosedCaptionModeEnum =\n  (typeof TranscriptionSettingsRequestClosedCaptionModeEnum)[keyof typeof TranscriptionSettingsRequestClosedCaptionModeEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type TranscriptionSettingsRequestLanguageEnum =\n  (typeof TranscriptionSettingsRequestLanguageEnum)[keyof typeof TranscriptionSettingsRequestLanguageEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsRequestModeEnum =\n  (typeof TranscriptionSettingsRequestModeEnum)[keyof typeof TranscriptionSettingsRequestModeEnum];\n\n/**\n *\n * @export\n * @interface TranscriptionSettingsResponse\n */\nexport interface TranscriptionSettingsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  closed_caption_mode: TranscriptionSettingsResponseClosedCaptionModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  language: TranscriptionSettingsResponseLanguageEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  mode: TranscriptionSettingsResponseModeEnum;\n  /**\n   *\n   * @type {SpeechSegmentConfig}\n   * @memberof TranscriptionSettingsResponse\n   */\n  speech_segment_config?: SpeechSegmentConfig;\n  /**\n   *\n   * @type {TranslationSettings}\n   * @memberof TranscriptionSettingsResponse\n   */\n  translation?: TranslationSettings;\n}\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseClosedCaptionModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsResponseClosedCaptionModeEnum =\n  (typeof TranscriptionSettingsResponseClosedCaptionModeEnum)[keyof typeof TranscriptionSettingsResponseClosedCaptionModeEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type TranscriptionSettingsResponseLanguageEnum =\n  (typeof TranscriptionSettingsResponseLanguageEnum)[keyof typeof TranscriptionSettingsResponseLanguageEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsResponseModeEnum =\n  (typeof TranscriptionSettingsResponseModeEnum)[keyof typeof TranscriptionSettingsResponseModeEnum];\n\n/**\n *\n * @export\n * @interface TranslationSettings\n */\nexport interface TranslationSettings {\n  /**\n   *\n   * @type {boolean}\n   * @memberof TranslationSettings\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof TranslationSettings\n   */\n  languages?: Array<string>;\n}\n/**\n * UnblockUserRequest is the payload for unblocking a user.\n * @export\n * @interface UnblockUserRequest\n */\nexport interface UnblockUserRequest {\n  /**\n   * the user to unblock\n   * @type {string}\n   * @memberof UnblockUserRequest\n   */\n  user_id: string;\n}\n/**\n * UnblockUserResponse is the payload for unblocking a user.\n * @export\n * @interface UnblockUserResponse\n */\nexport interface UnblockUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UnblockUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent when a user is unblocked on a call,\n * this can be useful to notify the user that they can now join the call again\n * @export\n * @interface UnblockedUserEvent\n */\nexport interface UnblockedUserEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.unblocked_user\" in this case\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof UnblockedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n * UnpinRequest is the payload for unpinning a message.\n * @export\n * @interface UnpinRequest\n */\nexport interface UnpinRequest {\n  /**\n   * the session ID of the user who pinned the message\n   * @type {string}\n   * @memberof UnpinRequest\n   */\n  session_id: string;\n  /**\n   * the user ID of the user who pinned the message\n   * @type {string}\n   * @memberof UnpinRequest\n   */\n  user_id: string;\n}\n/**\n * UnpinResponse is the payload for unpinning a message.\n * @export\n * @interface UnpinResponse\n */\nexport interface UnpinResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UnpinResponse\n   */\n  duration: string;\n}\n/**\n * Update call members\n * @export\n * @interface UpdateCallMembersRequest\n */\nexport interface UpdateCallMembersRequest {\n  /**\n   * List of userID to remove\n   * @type {Array<string>}\n   * @memberof UpdateCallMembersRequest\n   */\n  remove_members?: Array<string>;\n  /**\n   * List of members to update or insert\n   * @type {Array<MemberRequest>}\n   * @memberof UpdateCallMembersRequest\n   */\n  update_members?: Array<MemberRequest>;\n}\n/**\n * Basic response information\n * @export\n * @interface UpdateCallMembersResponse\n */\nexport interface UpdateCallMembersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UpdateCallMembersResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof UpdateCallMembersResponse\n   */\n  members: Array<MemberResponse>;\n}\n/**\n * Request for updating a call\n * @export\n * @interface UpdateCallRequest\n */\nexport interface UpdateCallRequest {\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof UpdateCallRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {CallSettingsRequest}\n   * @memberof UpdateCallRequest\n   */\n  settings_override?: CallSettingsRequest;\n  /**\n   * the time the call is scheduled to start\n   * @type {string}\n   * @memberof UpdateCallRequest\n   */\n  starts_at?: string;\n}\n/**\n * Response for updating a call\n * @export\n * @interface UpdateCallResponse\n */\nexport interface UpdateCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof UpdateCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdateCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof UpdateCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof UpdateCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof UpdateCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface UpdateUserPermissionsRequest\n */\nexport interface UpdateUserPermissionsRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  grant_permissions?: Array<string>;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  revoke_permissions?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  user_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface UpdateUserPermissionsResponse\n */\nexport interface UpdateUserPermissionsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UpdateUserPermissionsResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to notify about permission changes for a user, clients receiving this event should update their UI accordingly\n * @export\n * @interface UpdatedCallPermissionsEvent\n */\nexport interface UpdatedCallPermissionsEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  created_at: string;\n  /**\n   * The capabilities of the current user\n   * @type {Array<OwnCapability>}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   * The type of event: \"call.permissions_updated\" in this case\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface UserFeedbackReport\n */\nexport interface UserFeedbackReport {\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof UserFeedbackReport\n   */\n  count_by_rating: { [key: string]: number };\n  /**\n   *\n   * @type {number}\n   * @memberof UserFeedbackReport\n   */\n  unreported_count: number;\n}\n/**\n *\n * @export\n * @interface UserFeedbackReportResponse\n */\nexport interface UserFeedbackReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateUserFeedbackReportResponse>}\n   * @memberof UserFeedbackReportResponse\n   */\n  daily: Array<DailyAggregateUserFeedbackReportResponse>;\n}\n/**\n *\n * @export\n * @interface UserRatingReportResponse\n */\nexport interface UserRatingReportResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof UserRatingReportResponse\n   */\n  average: number;\n  /**\n   *\n   * @type {number}\n   * @memberof UserRatingReportResponse\n   */\n  count: number;\n}\n/**\n * User request object\n * @export\n * @interface UserRequest\n */\nexport interface UserRequest {\n  /**\n   * Custom user data\n   * @type {{ [key: string]: any; }}\n   * @memberof UserRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   * User ID\n   * @type {string}\n   * @memberof UserRequest\n   */\n  id: string;\n  /**\n   * User's profile image URL\n   * @type {string}\n   * @memberof UserRequest\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof UserRequest\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof UserRequest\n   */\n  language?: string;\n  /**\n   * Optional name of user\n   * @type {string}\n   * @memberof UserRequest\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof UserRequest\n   */\n  privacy_settings?: object;\n}\n/**\n * User response object\n * @export\n * @interface UserResponse\n */\nexport interface UserResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof UserResponse\n   */\n  avg_response_time?: number;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponse\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof UserResponse\n   */\n  created_at: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof UserResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   * Date of deactivation\n   * @type {string}\n   * @memberof UserResponse\n   */\n  deactivated_at?: string;\n  /**\n   * Date/time of deletion\n   * @type {string}\n   * @memberof UserResponse\n   */\n  deleted_at?: string;\n  /**\n   * Unique user identifier\n   * @type {string}\n   * @memberof UserResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponse\n   */\n  image?: string;\n  /**\n   * Preferred language of a user\n   * @type {string}\n   * @memberof UserResponse\n   */\n  language: string;\n  /**\n   * Date of last activity\n   * @type {string}\n   * @memberof UserResponse\n   */\n  last_active?: string;\n  /**\n   * Optional name of user\n   * @type {string}\n   * @memberof UserResponse\n   */\n  name?: string;\n  /**\n   * Revocation date for tokens\n   * @type {string}\n   * @memberof UserResponse\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   * Determines the set of user permissions\n   * @type {string}\n   * @memberof UserResponse\n   */\n  role: string;\n  /**\n   * List of teams user is a part of\n   * @type {Array<string>}\n   * @memberof UserResponse\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof UserResponse\n   */\n  teams_role?: { [key: string]: string };\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof UserResponse\n   */\n  updated_at: string;\n}\n/**\n *\n * @export\n * @interface UserResponsePrivacyFields\n */\nexport interface UserResponsePrivacyFields {\n  /**\n   *\n   * @type {number}\n   * @memberof UserResponsePrivacyFields\n   */\n  avg_response_time?: number;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponsePrivacyFields\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserResponsePrivacyFields\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  deactivated_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof UserResponsePrivacyFields\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  last_active?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof UserResponsePrivacyFields\n   */\n  privacy_settings?: object;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  role: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponsePrivacyFields\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof UserResponsePrivacyFields\n   */\n  teams_role?: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  updated_at: string;\n}\n/**\n * This event is sent when a user gets updated. The event contains information about the updated user.\n * @export\n * @interface UserUpdatedEvent\n */\nexport interface UserUpdatedEvent {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserUpdatedEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  received_at?: string;\n  /**\n   * The type of event: \"user.updated\" in this case\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponsePrivacyFields}\n   * @memberof UserUpdatedEvent\n   */\n  user: UserResponsePrivacyFields;\n}\n/**\n * @type VideoEvent\n * The discriminator object for all websocket events, it maps events' payload to the final type\n * @export\n */\nexport type VideoEvent =\n  | ({ type: 'call.accepted' } & CallAcceptedEvent)\n  | ({ type: 'call.blocked_user' } & BlockedUserEvent)\n  | ({ type: 'call.closed_caption' } & ClosedCaptionEvent)\n  | ({ type: 'call.closed_captions_failed' } & CallClosedCaptionsFailedEvent)\n  | ({ type: 'call.closed_captions_started' } & CallClosedCaptionsStartedEvent)\n  | ({ type: 'call.closed_captions_stopped' } & CallClosedCaptionsStoppedEvent)\n  | ({ type: 'call.created' } & CallCreatedEvent)\n  | ({ type: 'call.deleted' } & CallDeletedEvent)\n  | ({ type: 'call.ended' } & CallEndedEvent)\n  | ({ type: 'call.frame_recording_failed' } & CallFrameRecordingFailedEvent)\n  | ({ type: 'call.frame_recording_ready' } & CallFrameRecordingFrameReadyEvent)\n  | ({ type: 'call.frame_recording_started' } & CallFrameRecordingStartedEvent)\n  | ({ type: 'call.frame_recording_stopped' } & CallFrameRecordingStoppedEvent)\n  | ({ type: 'call.hls_broadcasting_failed' } & CallHLSBroadcastingFailedEvent)\n  | ({\n      type: 'call.hls_broadcasting_started';\n    } & CallHLSBroadcastingStartedEvent)\n  | ({\n      type: 'call.hls_broadcasting_stopped';\n    } & CallHLSBroadcastingStoppedEvent)\n  | ({ type: 'call.kicked_user' } & KickedUserEvent)\n  | ({ type: 'call.live_started' } & CallLiveStartedEvent)\n  | ({ type: 'call.member_added' } & CallMemberAddedEvent)\n  | ({ type: 'call.member_removed' } & CallMemberRemovedEvent)\n  | ({ type: 'call.member_updated' } & CallMemberUpdatedEvent)\n  | ({\n      type: 'call.member_updated_permission';\n    } & CallMemberUpdatedPermissionEvent)\n  | ({ type: 'call.missed' } & CallMissedEvent)\n  | ({ type: 'call.moderation_blur' } & CallModerationBlurEvent)\n  | ({ type: 'call.moderation_warning' } & CallModerationWarningEvent)\n  | ({ type: 'call.notification' } & CallNotificationEvent)\n  | ({ type: 'call.permission_request' } & PermissionRequestEvent)\n  | ({ type: 'call.permissions_updated' } & UpdatedCallPermissionsEvent)\n  | ({ type: 'call.reaction_new' } & CallReactionEvent)\n  | ({ type: 'call.recording_failed' } & CallRecordingFailedEvent)\n  | ({ type: 'call.recording_ready' } & CallRecordingReadyEvent)\n  | ({ type: 'call.recording_started' } & CallRecordingStartedEvent)\n  | ({ type: 'call.recording_stopped' } & CallRecordingStoppedEvent)\n  | ({ type: 'call.rejected' } & CallRejectedEvent)\n  | ({ type: 'call.ring' } & CallRingEvent)\n  | ({ type: 'call.rtmp_broadcast_failed' } & CallRtmpBroadcastFailedEvent)\n  | ({ type: 'call.rtmp_broadcast_started' } & CallRtmpBroadcastStartedEvent)\n  | ({ type: 'call.rtmp_broadcast_stopped' } & CallRtmpBroadcastStoppedEvent)\n  | ({ type: 'call.session_ended' } & CallSessionEndedEvent)\n  | ({\n      type: 'call.session_participant_count_updated';\n    } & CallSessionParticipantCountsUpdatedEvent)\n  | ({\n      type: 'call.session_participant_joined';\n    } & CallSessionParticipantJoinedEvent)\n  | ({\n      type: 'call.session_participant_left';\n    } & CallSessionParticipantLeftEvent)\n  | ({ type: 'call.session_started' } & CallSessionStartedEvent)\n  | ({ type: 'call.stats_report_ready' } & CallStatsReportReadyEvent)\n  | ({ type: 'call.transcription_failed' } & CallTranscriptionFailedEvent)\n  | ({ type: 'call.transcription_ready' } & CallTranscriptionReadyEvent)\n  | ({ type: 'call.transcription_started' } & CallTranscriptionStartedEvent)\n  | ({ type: 'call.transcription_stopped' } & CallTranscriptionStoppedEvent)\n  | ({ type: 'call.unblocked_user' } & UnblockedUserEvent)\n  | ({ type: 'call.updated' } & CallUpdatedEvent)\n  | ({ type: 'call.user_feedback_submitted' } & CallUserFeedbackSubmittedEvent)\n  | ({ type: 'call.user_muted' } & CallUserMutedEvent)\n  | ({ type: 'connection.error' } & ConnectionErrorEvent)\n  | ({ type: 'connection.ok' } & ConnectedEvent)\n  | ({ type: 'custom' } & CustomVideoEvent)\n  | ({ type: 'health.check' } & HealthCheckEvent)\n  | ({ type: 'user.updated' } & UserUpdatedEvent);\n/**\n *\n * @export\n * @interface VideoReactionOverTimeResponse\n */\nexport interface VideoReactionOverTimeResponse {\n  /**\n   *\n   * @type {Array<CountByMinuteResponse>}\n   * @memberof VideoReactionOverTimeResponse\n   */\n  by_minute?: Array<CountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface VideoReactionsResponse\n */\nexport interface VideoReactionsResponse {\n  /**\n   *\n   * @type {VideoReactionOverTimeResponse}\n   * @memberof VideoReactionsResponse\n   */\n  count_over_time?: VideoReactionOverTimeResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoReactionsResponse\n   */\n  reaction: string;\n}\n/**\n *\n * @export\n * @interface VideoSettingsRequest\n */\nexport interface VideoSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  camera_default_on?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoSettingsRequest\n   */\n  camera_facing?: VideoSettingsRequestCameraFacingEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof VideoSettingsRequest\n   */\n  target_resolution?: TargetResolution;\n}\n\n/**\n * @export\n */\nexport const VideoSettingsRequestCameraFacingEnum = {\n  FRONT: 'front',\n  BACK: 'back',\n  EXTERNAL: 'external',\n} as const;\nexport type VideoSettingsRequestCameraFacingEnum =\n  (typeof VideoSettingsRequestCameraFacingEnum)[keyof typeof VideoSettingsRequestCameraFacingEnum];\n\n/**\n *\n * @export\n * @interface VideoSettingsResponse\n */\nexport interface VideoSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  camera_default_on: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoSettingsResponse\n   */\n  camera_facing: VideoSettingsResponseCameraFacingEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof VideoSettingsResponse\n   */\n  target_resolution: TargetResolution;\n}\n\n/**\n * @export\n */\nexport const VideoSettingsResponseCameraFacingEnum = {\n  FRONT: 'front',\n  BACK: 'back',\n  EXTERNAL: 'external',\n} as const;\nexport type VideoSettingsResponseCameraFacingEnum =\n  (typeof VideoSettingsResponseCameraFacingEnum)[keyof typeof VideoSettingsResponseCameraFacingEnum];\n\n/**\n *\n * @export\n * @interface WHIPIngress\n */\nexport interface WHIPIngress {\n  /**\n   * URL for a new whip input, every time a new link is created\n   * @type {string}\n   * @memberof WHIPIngress\n   */\n  address: string;\n}\n/**\n * Websocket auth message\n * @export\n * @interface WSAuthMessage\n */\nexport interface WSAuthMessage {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof WSAuthMessage\n   */\n  products?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof WSAuthMessage\n   */\n  token: string;\n  /**\n   *\n   * @type {ConnectUserDetailsRequest}\n   * @memberof WSAuthMessage\n   */\n  user_details: ConnectUserDetailsRequest;\n}\n","import { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { ConnectedEvent, UserRequest, VideoEvent } from '../../gen/coordinator';\nimport { AllSfuEvents } from '../../rtc';\nimport type { ConfigureLoggersOptions, LogLevel } from '@stream-io/logger';\n\nexport type UR = Record<string, unknown>;\n\nexport type User =\n  | (Omit<UserRequest, 'role'> & { type?: 'authenticated' })\n  | (Omit<UserRequest, 'role'> & { type: 'guest' })\n  | (Omit<UserRequest, 'id' | 'role'> & {\n      id?: '!anon';\n      type: 'anonymous';\n    });\n\nexport type UserWithId =\n  | (UserRequest & { type?: 'authenticated' })\n  | (UserRequest & { type: 'guest' })\n  | (UserRequest & {\n      id: '!anon';\n      type: 'anonymous';\n    });\n\nexport type { OwnUserResponse } from '../../gen/coordinator';\n\nexport type ConnectAPIResponse = Promise<void | ConnectedEvent>;\n\ntype ErrorResponseDetails = {\n  code: number;\n  messages: string[];\n};\n\nexport type APIErrorResponse = {\n  code: number;\n  duration: string;\n  message: string;\n  more_info: string;\n  StatusCode: number;\n  details?: ErrorResponseDetails;\n  unrecoverable?: boolean;\n};\n\nexport class ErrorFromResponse<T> extends Error {\n  public code: number | null;\n  public status: number;\n  public response: AxiosResponse<T>;\n  public name = 'ErrorFromResponse';\n  public unrecoverable: boolean | null;\n\n  constructor({\n    message,\n    code,\n    status,\n    response,\n    unrecoverable,\n  }: Pick<\n    ErrorFromResponse<T>,\n    'message' | 'code' | 'status' | 'response' | 'unrecoverable'\n  >) {\n    super(message);\n    this.code = code;\n    this.response = response;\n    this.status = status;\n    this.unrecoverable = unrecoverable;\n  }\n\n  // Vitest helper (serialized errors are too large to read)\n  // https://github.com/vitest-dev/vitest/blob/v3.1.3/packages/utils/src/error.ts#L60-L62\n  public toJSON() {\n    const extra = [\n      ['status', this.status],\n      ['code', this.code],\n      ['unrecoverable', this.unrecoverable],\n    ] as const;\n\n    const joinable = [];\n\n    for (const [key, value] of extra) {\n      if (typeof value !== 'undefined' && value !== null) {\n        joinable.push(`${key}: ${value}`);\n      }\n    }\n\n    return {\n      message: `(${joinable.join(', ')}) - ${this.message}`,\n      stack: this.stack,\n      name: this.name,\n    };\n  }\n}\n\nexport type ConnectionChangedEvent = {\n  type: 'connection.changed';\n  online: boolean;\n};\n\nexport type NetworkChangedEvent = {\n  type: 'network.changed';\n  online: boolean;\n};\n\nexport type TransportChangedEvent = {\n  type: 'transport.changed';\n  mode: 'longpoll';\n};\n\nexport type ConnectionRecoveredEvent = {\n  type: 'connection.recovered';\n};\n\nexport type StreamVideoEvent = (\n  | VideoEvent\n  | NetworkChangedEvent\n  | ConnectionChangedEvent\n  | TransportChangedEvent\n  | ConnectionRecoveredEvent\n) & { received_at?: string | Date };\n\n// TODO: we should use WSCallEvent here but that needs fixing\nexport type StreamCallEvent = Extract<StreamVideoEvent, { call_cid: string }>;\nexport type EventTypes = 'all' | VideoEvent['type'];\n\nexport type AllClientEventTypes = 'all' | StreamVideoEvent['type'];\nexport type AllClientEvents = {\n  [K in AllClientEventTypes]: Extract<StreamVideoEvent, { type: K }>;\n};\nexport type ClientEventListener<E extends keyof AllClientEvents> = (\n  event: AllClientEvents[E],\n) => void;\n\nexport type AllClientCallEvents = {\n  [K in EventTypes]: Extract<VideoEvent, { type: K }>;\n};\n\nexport type AllCallEvents = AllClientCallEvents & AllSfuEvents;\nexport type CallEventListener<E extends keyof AllCallEvents> = (\n  event: AllCallEvents[E],\n) => void;\n\nexport type Logger = (\n  logLevel: LogLevel,\n  message: string,\n  ...args: unknown[]\n) => void;\n\nexport type StreamClientOptions = Partial<AxiosRequestConfig> & {\n  /**\n   * Used to disable warnings that are triggered by using connectUser or connectAnonymousUser server-side.\n   */\n  allowServerSideConnect?: boolean;\n  axiosRequestConfig?: AxiosRequestConfig;\n  /**\n   * Base url to use for API\n   * such as https://chat-proxy-dublin.stream-io-api.com\n   */\n  baseURL?: string;\n  browser?: boolean;\n\n  /**\n   *  @deprecated Use `logOptions` instead.\n   *  Custom logger instance used to handle log messages.\n   *  Will be removed in a future release.\n   */\n  logger?: Logger;\n\n  /**\n   *  @deprecated Use `logOptions` instead.\n   *  Sets the minimum log level for all logs.\n   *  Will be removed in a future release.\n   */\n  logLevel?: LogLevel;\n\n  /**\n   * Configuration options where keys are logger scopes.\n   * The `default` scope is reserved is used to set defaults for all loggers.\n   *\n   */\n  logOptions?: ConfigureLoggersOptions;\n\n  /**\n   * The URL to use for the location hint.\n   */\n  locationHintUrl?: string;\n  /**\n   * The default timeout for requesting a location hint.\n   */\n  locationHintTimeout?: number;\n  /**\n   * The maximum number of attempts to request a location hint.\n   */\n  locationHintMaxAttempts?: number;\n  /**\n   * When true, user will be persisted on client. Otherwise if `connectUser` call fails, then you need to\n   * call `connectUser` again to retry.\n   * This is mainly useful for chat application working in offline mode, where you will need client.user to\n   * persist even if connectUser call fails.\n   */\n  persistUserOnConnectionFailure?: boolean;\n\n  /**\n   * The secret key for the API key. This is only needed for server side authentication.\n   */\n  secret?: string;\n\n  /**\n   * The WebSocket implementation to use. This is mainly useful for testing.\n   * In Node.js environment, you can use the `ws` package.\n   */\n  WebSocketImpl?: typeof WebSocket;\n\n  /**\n   * Create Web Worker to initiate timer events like health checks. Can possibly prevent\n   * timer throttling issues in inactive browser tabs.\n   */\n  enableTimerWorker?: boolean;\n\n  /**\n   * The client app identifier.\n   */\n  clientAppIdentifier?: ClientAppIdentifier;\n\n  /**\n   * The default timeout for WebSocket connections.\n   */\n  defaultWsTimeout?: number;\n\n  /**\n   * The maximum number of retries to connect a user.\n   */\n  maxConnectUserRetries?: number;\n\n  /**\n   * A callback to be called one the maxUserConnectRetries is exhausted.\n   * @param lastError the last error.\n   * @param allErrors all errors.\n   */\n  onConnectUserError?: (lastError: Error, allErrors: Error[]) => void;\n\n  /**\n   * When set to true, the incoming calls are rejected when the user is busy in an another call.\n   */\n  rejectCallWhenBusy?: boolean;\n};\n\nexport type ClientAppIdentifier = {\n  sdkName?: 'react' | 'react-native' | 'plain-javascript' | (string & {});\n  sdkVersion?: string;\n  app?: string;\n  app_version?: string;\n  os?: string;\n  device_model?: string;\n};\n\nexport type TokenProvider = () => Promise<string>;\nexport type TokenOrProvider = null | string | TokenProvider | undefined;\n\nexport type BuiltInRejectReason = 'busy' | 'decline' | 'cancel' | 'timeout';\nexport type RejectReason = BuiltInRejectReason | (string & {});\n","/* eslint-disable */\nimport type {\n  JsonObject,\n  JsonReadOptions,\n  JsonValue,\n  JsonWriteOptions,\n} from '@protobuf-ts/runtime';\n// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"google/protobuf/struct.proto\" (package \"google.protobuf\", syntax proto3)\n// tslint:disable\n//\n// Protocol Buffers - Google's data interchange format\n// Copyright 2008 Google Inc.  All rights reserved.\n// https://developers.google.com/protocol-buffers/\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\nimport {\n  isJsonObject,\n  MessageType,\n  typeofJsonValue,\n} from '@protobuf-ts/runtime';\n\n/**\n * `Struct` represents a structured data value, consisting of fields\n * which map to dynamically typed values. In some languages, `Struct`\n * might be supported by a native representation. For example, in\n * scripting languages like JS a struct is represented as an\n * object. The details of that representation are described together\n * with the proto support for the language.\n *\n * The JSON representation for `Struct` is JSON object.\n *\n * @generated from protobuf message google.protobuf.Struct\n */\nexport interface Struct {\n  /**\n   * Unordered map of dynamically typed values.\n   *\n   * @generated from protobuf field: map<string, google.protobuf.Value> fields = 1;\n   */\n  fields: {\n    [key: string]: Value;\n  };\n}\n/**\n * `Value` represents a dynamically typed value which can be either\n * null, a number, a string, a boolean, a recursive struct value, or a\n * list of values. A producer of value is expected to set one of these\n * variants. Absence of any variant indicates an error.\n *\n * The JSON representation for `Value` is JSON value.\n *\n * @generated from protobuf message google.protobuf.Value\n */\nexport interface Value {\n  /**\n   * @generated from protobuf oneof: kind\n   */\n  kind:\n    | {\n        oneofKind: 'nullValue';\n        /**\n         * Represents a null value.\n         *\n         * @generated from protobuf field: google.protobuf.NullValue null_value = 1;\n         */\n        nullValue: NullValue;\n      }\n    | {\n        oneofKind: 'numberValue';\n        /**\n         * Represents a double value.\n         *\n         * @generated from protobuf field: double number_value = 2;\n         */\n        numberValue: number;\n      }\n    | {\n        oneofKind: 'stringValue';\n        /**\n         * Represents a string value.\n         *\n         * @generated from protobuf field: string string_value = 3;\n         */\n        stringValue: string;\n      }\n    | {\n        oneofKind: 'boolValue';\n        /**\n         * Represents a boolean value.\n         *\n         * @generated from protobuf field: bool bool_value = 4;\n         */\n        boolValue: boolean;\n      }\n    | {\n        oneofKind: 'structValue';\n        /**\n         * Represents a structured value.\n         *\n         * @generated from protobuf field: google.protobuf.Struct struct_value = 5;\n         */\n        structValue: Struct;\n      }\n    | {\n        oneofKind: 'listValue';\n        /**\n         * Represents a repeated `Value`.\n         *\n         * @generated from protobuf field: google.protobuf.ListValue list_value = 6;\n         */\n        listValue: ListValue;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * `ListValue` is a wrapper around a repeated field of values.\n *\n * The JSON representation for `ListValue` is JSON array.\n *\n * @generated from protobuf message google.protobuf.ListValue\n */\nexport interface ListValue {\n  /**\n   * Repeated field of dynamically typed values.\n   *\n   * @generated from protobuf field: repeated google.protobuf.Value values = 1;\n   */\n  values: Value[];\n}\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n *  The JSON representation for `NullValue` is JSON `null`.\n *\n * @generated from protobuf enum google.protobuf.NullValue\n */\nexport enum NullValue {\n  /**\n   * Null value.\n   *\n   * @generated from protobuf enum value: NULL_VALUE = 0;\n   */\n  NULL_VALUE = 0,\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass Struct$Type extends MessageType<Struct> {\n  constructor() {\n    super('google.protobuf.Struct', [\n      {\n        no: 1,\n        name: 'fields',\n        kind: 'map',\n        K: 9 /*ScalarType.STRING*/,\n        V: { kind: 'message', T: () => Value },\n      },\n    ]);\n  }\n  /**\n   * Encode `Struct` to JSON object.\n   */\n  internalJsonWrite(message: Struct, options: JsonWriteOptions): JsonValue {\n    let json: JsonObject = {};\n    for (let [k, v] of Object.entries(message.fields)) {\n      json[k] = Value.toJson(v);\n    }\n    return json;\n  }\n  /**\n   * Decode `Struct` from JSON object.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Struct,\n  ): Struct {\n    if (!isJsonObject(json))\n      throw new globalThis.Error(\n        'Unable to parse message ' +\n          this.typeName +\n          ' from JSON ' +\n          typeofJsonValue(json) +\n          '.',\n      );\n    if (!target) target = this.create();\n    for (let [k, v] of globalThis.Object.entries(json)) {\n      target.fields[k] = Value.fromJson(v);\n    }\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Struct\n */\nexport const Struct = new Struct$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Value$Type extends MessageType<Value> {\n  constructor() {\n    super('google.protobuf.Value', [\n      {\n        no: 1,\n        name: 'null_value',\n        kind: 'enum',\n        oneof: 'kind',\n        T: () => ['google.protobuf.NullValue', NullValue],\n      },\n      {\n        no: 2,\n        name: 'number_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 1 /*ScalarType.DOUBLE*/,\n      },\n      {\n        no: 3,\n        name: 'string_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'bool_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 5,\n        name: 'struct_value',\n        kind: 'message',\n        oneof: 'kind',\n        T: () => Struct,\n      },\n      {\n        no: 6,\n        name: 'list_value',\n        kind: 'message',\n        oneof: 'kind',\n        T: () => ListValue,\n      },\n    ]);\n  }\n  /**\n   * Encode `Value` to JSON value.\n   */\n  internalJsonWrite(message: Value, options: JsonWriteOptions): JsonValue {\n    if (message.kind.oneofKind === undefined) throw new globalThis.Error();\n    switch (message.kind.oneofKind) {\n      case undefined:\n        throw new globalThis.Error();\n      case 'boolValue':\n        return message.kind.boolValue;\n      case 'nullValue':\n        return null;\n      case 'numberValue':\n        let numberValue = message.kind.numberValue;\n        if (typeof numberValue == 'number' && !Number.isFinite(numberValue))\n          throw new globalThis.Error();\n        return numberValue;\n      case 'stringValue':\n        return message.kind.stringValue;\n      case 'listValue':\n        let listValueField = this.fields.find((f) => f.no === 6);\n        if (listValueField?.kind !== 'message') throw new globalThis.Error();\n        return listValueField.T().toJson(message.kind.listValue);\n      case 'structValue':\n        let structValueField = this.fields.find((f) => f.no === 5);\n        if (structValueField?.kind !== 'message') throw new globalThis.Error();\n        return structValueField.T().toJson(message.kind.structValue);\n    }\n  }\n  /**\n   * Decode `Value` from JSON value.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Value,\n  ): Value {\n    if (!target) target = this.create();\n    switch (typeof json) {\n      case 'number':\n        target.kind = { oneofKind: 'numberValue', numberValue: json };\n        break;\n      case 'string':\n        target.kind = { oneofKind: 'stringValue', stringValue: json };\n        break;\n      case 'boolean':\n        target.kind = { oneofKind: 'boolValue', boolValue: json };\n        break;\n      case 'object':\n        if (json === null) {\n          target.kind = {\n            oneofKind: 'nullValue',\n            nullValue: NullValue.NULL_VALUE,\n          };\n        } else if (globalThis.Array.isArray(json)) {\n          target.kind = {\n            oneofKind: 'listValue',\n            listValue: ListValue.fromJson(json),\n          };\n        } else {\n          target.kind = {\n            oneofKind: 'structValue',\n            structValue: Struct.fromJson(json),\n          };\n        }\n        break;\n      default:\n        throw new globalThis.Error(\n          'Unable to parse ' +\n            this.typeName +\n            ' from JSON ' +\n            typeofJsonValue(json),\n        );\n    }\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Value\n */\nexport const Value = new Value$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ListValue$Type extends MessageType<ListValue> {\n  constructor() {\n    super('google.protobuf.ListValue', [\n      {\n        no: 1,\n        name: 'values',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Value,\n      },\n    ]);\n  }\n  /**\n   * Encode `ListValue` to JSON array.\n   */\n  internalJsonWrite(message: ListValue, options: JsonWriteOptions): JsonValue {\n    return message.values.map((v) => Value.toJson(v));\n  }\n  /**\n   * Decode `ListValue` from JSON array.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: ListValue,\n  ): ListValue {\n    if (!globalThis.Array.isArray(json))\n      throw new globalThis.Error(\n        'Unable to parse ' +\n          this.typeName +\n          ' from JSON ' +\n          typeofJsonValue(json),\n      );\n    if (!target) target = this.create();\n    let values = json.map((v) => Value.fromJson(v));\n    target.values.push(...values);\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.ListValue\n */\nexport const ListValue = new ListValue$Type();\n","/* eslint-disable */\nimport type {\n  JsonReadOptions,\n  JsonValue,\n  JsonWriteOptions,\n} from '@protobuf-ts/runtime';\n// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"google/protobuf/timestamp.proto\" (package \"google.protobuf\", syntax proto3)\n// tslint:disable\n//\n// Protocol Buffers - Google's data interchange format\n// Copyright 2008 Google Inc.  All rights reserved.\n// https://developers.google.com/protocol-buffers/\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\nimport { MessageType, PbLong, typeofJsonValue } from '@protobuf-ts/runtime';\n\n/**\n * A Timestamp represents a point in time independent of any time zone or local\n * calendar, encoded as a count of seconds and fractions of seconds at\n * nanosecond resolution. The count is relative to an epoch at UTC midnight on\n * January 1, 1970, in the proleptic Gregorian calendar which extends the\n * Gregorian calendar backwards to year one.\n *\n * All minutes are 60 seconds long. Leap seconds are \"smeared\" so that no leap\n * second table is needed for interpretation, using a [24-hour linear\n * smear](https://developers.google.com/time/smear).\n *\n * The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. By\n * restricting to that range, we ensure that we can convert to and from [RFC\n * 3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.\n *\n * # Examples\n *\n * Example 1: Compute Timestamp from POSIX `time()`.\n *\n *     Timestamp timestamp;\n *     timestamp.set_seconds(time(NULL));\n *     timestamp.set_nanos(0);\n *\n * Example 2: Compute Timestamp from POSIX `gettimeofday()`.\n *\n *     struct timeval tv;\n *     gettimeofday(&tv, NULL);\n *\n *     Timestamp timestamp;\n *     timestamp.set_seconds(tv.tv_sec);\n *     timestamp.set_nanos(tv.tv_usec * 1000);\n *\n * Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.\n *\n *     FILETIME ft;\n *     GetSystemTimeAsFileTime(&ft);\n *     UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;\n *\n *     // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z\n *     // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.\n *     Timestamp timestamp;\n *     timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));\n *     timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));\n *\n * Example 4: Compute Timestamp from Java `System.currentTimeMillis()`.\n *\n *     long millis = System.currentTimeMillis();\n *\n *     Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)\n *         .setNanos((int) ((millis % 1000) * 1000000)).build();\n *\n *\n * Example 5: Compute Timestamp from Java `Instant.now()`.\n *\n *     Instant now = Instant.now();\n *\n *     Timestamp timestamp =\n *         Timestamp.newBuilder().setSeconds(now.getEpochSecond())\n *             .setNanos(now.getNano()).build();\n *\n *\n * Example 6: Compute Timestamp from current time in Python.\n *\n *     timestamp = Timestamp()\n *     timestamp.GetCurrentTime()\n *\n * # JSON Mapping\n *\n * In JSON format, the Timestamp type is encoded as a string in the\n * [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is, the\n * format is \"{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z\"\n * where {year} is always expressed using four digits while {month}, {day},\n * {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional\n * seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),\n * are optional. The \"Z\" suffix indicates the timezone (\"UTC\"); the timezone\n * is required. A proto3 JSON serializer should always use UTC (as indicated by\n * \"Z\") when printing the Timestamp type and a proto3 JSON parser should be\n * able to accept both UTC and other timezones (as indicated by an offset).\n *\n * For example, \"2017-01-15T01:30:15.01Z\" encodes 15.01 seconds past\n * 01:30 UTC on January 15, 2017.\n *\n * In JavaScript, one can convert a Date object to this format using the\n * standard\n * [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)\n * method. In Python, a standard `datetime.datetime` object can be converted\n * to this format using\n * [`strftime`](https://docs.python.org/2/library/time.html#time.strftime) with\n * the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java, one can use\n * the Joda Time's [`ISODateTimeFormat.dateTime()`](\n * http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime%2D%2D\n * ) to obtain a formatter capable of generating timestamps in this format.\n *\n *\n *\n * @generated from protobuf message google.protobuf.Timestamp\n */\nexport interface Timestamp {\n  /**\n   * Represents seconds of UTC time since Unix epoch\n   * 1970-01-01T00:00:00Z. Must be from 0001-01-01T00:00:00Z to\n   * 9999-12-31T23:59:59Z inclusive.\n   *\n   * @generated from protobuf field: int64 seconds = 1;\n   */\n  seconds: string;\n  /**\n   * Non-negative fractions of a second at nanosecond resolution. Negative\n   * second values with fractions must still have non-negative nanos values\n   * that count forward in time. Must be from 0 to 999,999,999\n   * inclusive.\n   *\n   * @generated from protobuf field: int32 nanos = 2;\n   */\n  nanos: number;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass Timestamp$Type extends MessageType<Timestamp> {\n  constructor() {\n    super('google.protobuf.Timestamp', [\n      { no: 1, name: 'seconds', kind: 'scalar', T: 3 /*ScalarType.INT64*/ },\n      { no: 2, name: 'nanos', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n    ]);\n  }\n  /**\n   * Creates a new `Timestamp` for the current time.\n   */\n  now(): Timestamp {\n    const msg = this.create();\n    const ms = Date.now();\n    msg.seconds = PbLong.from(Math.floor(ms / 1000)).toString();\n    msg.nanos = (ms % 1000) * 1000000;\n    return msg;\n  }\n  /**\n   * Converts a `Timestamp` to a JavaScript Date.\n   */\n  toDate(message: Timestamp): Date {\n    return new Date(\n      PbLong.from(message.seconds).toNumber() * 1000 +\n        Math.ceil(message.nanos / 1000000),\n    );\n  }\n  /**\n   * Converts a JavaScript Date to a `Timestamp`.\n   */\n  fromDate(date: Date): Timestamp {\n    const msg = this.create();\n    const ms = date.getTime();\n    msg.seconds = PbLong.from(Math.floor(ms / 1000)).toString();\n    msg.nanos =\n      ((ms % 1000) + (ms < 0 && ms % 1000 !== 0 ? 1000 : 0)) * 1000000;\n    return msg;\n  }\n  /**\n   * In JSON format, the `Timestamp` type is encoded as a string\n   * in the RFC 3339 format.\n   */\n  internalJsonWrite(message: Timestamp, options: JsonWriteOptions): JsonValue {\n    let ms = PbLong.from(message.seconds).toNumber() * 1000;\n    if (\n      ms < Date.parse('0001-01-01T00:00:00Z') ||\n      ms > Date.parse('9999-12-31T23:59:59Z')\n    )\n      throw new Error(\n        'Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.',\n      );\n    if (message.nanos < 0)\n      throw new Error(\n        'Unable to encode invalid Timestamp to JSON. Nanos must not be negative.',\n      );\n    let z = 'Z';\n    if (message.nanos > 0) {\n      let nanosStr = (message.nanos + 1000000000).toString().substring(1);\n      if (nanosStr.substring(3) === '000000')\n        z = '.' + nanosStr.substring(0, 3) + 'Z';\n      else if (nanosStr.substring(6) === '000')\n        z = '.' + nanosStr.substring(0, 6) + 'Z';\n      else z = '.' + nanosStr + 'Z';\n    }\n    return new Date(ms).toISOString().replace('.000Z', z);\n  }\n  /**\n   * In JSON format, the `Timestamp` type is encoded as a string\n   * in the RFC 3339 format.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Timestamp,\n  ): Timestamp {\n    if (typeof json !== 'string')\n      throw new Error(\n        'Unable to parse Timestamp from JSON ' + typeofJsonValue(json) + '.',\n      );\n    let matches = json.match(\n      /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/,\n    );\n    if (!matches)\n      throw new Error('Unable to parse Timestamp from JSON. Invalid format.');\n    let ms = Date.parse(\n      matches[1] +\n        '-' +\n        matches[2] +\n        '-' +\n        matches[3] +\n        'T' +\n        matches[4] +\n        ':' +\n        matches[5] +\n        ':' +\n        matches[6] +\n        (matches[8] ? matches[8] : 'Z'),\n    );\n    if (Number.isNaN(ms))\n      throw new Error('Unable to parse Timestamp from JSON. Invalid value.');\n    if (\n      ms < Date.parse('0001-01-01T00:00:00Z') ||\n      ms > Date.parse('9999-12-31T23:59:59Z')\n    )\n      throw new globalThis.Error(\n        'Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.',\n      );\n    if (!target) target = this.create();\n    target.seconds = PbLong.from(ms / 1000).toString();\n    target.nanos = 0;\n    if (matches[7])\n      target.nanos =\n        parseInt('1' + matches[7] + '0'.repeat(9 - matches[7].length)) -\n        1000000000;\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Timestamp\n */\nexport const Timestamp = new Timestamp$Type();\n","// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/models/models.proto\" (package \"stream.video.sfu.models\", syntax proto3)\n// tslint:disable\nimport { MessageType } from '@protobuf-ts/runtime';\nimport { Struct } from '../../../google/protobuf/struct';\nimport { Timestamp } from '../../../google/protobuf/timestamp';\n\n/**\n * CallState is the current state of the call\n * as seen by an SFU.\n *\n * @generated from protobuf message stream.video.sfu.models.CallState\n */\nexport interface CallState {\n  /**\n   * participants is the list of participants in the call.\n   * In large calls, the list could be truncated in which\n   * case, the list of participants contains fewer participants\n   * than the counts returned in participant_count. Anonymous\n   * participants are **NOT** included in the list.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Participant participants = 1;\n   */\n  participants: Participant[];\n  /**\n   * started_at is the time the call session actually started.\n   *\n   * @generated from protobuf field: google.protobuf.Timestamp started_at = 2;\n   */\n  startedAt?: Timestamp;\n  /**\n   * participant_count contains the summary of the counts.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantCount participant_count = 3;\n   */\n  participantCount?: ParticipantCount;\n  /**\n   * the list of pins in the call.\n   * Pins are ordered in descending order (most important first).\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Pin pins = 4;\n   */\n  pins: Pin[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ParticipantCount\n */\nexport interface ParticipantCount {\n  /**\n   * Total number of participants in the call including\n   * the anonymous participants.\n   *\n   * @generated from protobuf field: uint32 total = 1;\n   */\n  total: number;\n  /**\n   * Total number of anonymous participants in the call.\n   *\n   * @generated from protobuf field: uint32 anonymous = 2;\n   */\n  anonymous: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Pin\n */\nexport interface Pin {\n  /**\n   * the user to pin\n   *\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * the user sesion_id to pin, if not provided, applies to all sessions\n   *\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n}\n/**\n * those who are online in the call\n *\n * @generated from protobuf message stream.video.sfu.models.Participant\n */\nexport interface Participant {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * map of track id to track type\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackType published_tracks = 3;\n   */\n  publishedTracks: TrackType[];\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp joined_at = 4;\n   */\n  joinedAt?: Timestamp;\n  /**\n   * @generated from protobuf field: string track_lookup_prefix = 5;\n   */\n  trackLookupPrefix: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ConnectionQuality connection_quality = 6;\n   */\n  connectionQuality: ConnectionQuality;\n  /**\n   * @generated from protobuf field: bool is_speaking = 7;\n   */\n  isSpeaking: boolean;\n  /**\n   * @generated from protobuf field: bool is_dominant_speaker = 8;\n   */\n  isDominantSpeaker: boolean;\n  /**\n   * @generated from protobuf field: float audio_level = 9;\n   */\n  audioLevel: number;\n  /**\n   * @generated from protobuf field: string name = 10;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string image = 11;\n   */\n  image: string;\n  /**\n   * @generated from protobuf field: google.protobuf.Struct custom = 12;\n   */\n  custom?: Struct;\n  /**\n   * @generated from protobuf field: repeated string roles = 13;\n   */\n  roles: string[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantSource source = 14;\n   */\n  source: ParticipantSource;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.StreamQuality\n */\nexport interface StreamQuality {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoQuality video_quality = 1;\n   */\n  videoQuality: VideoQuality;\n  /**\n   * @generated from protobuf field: string user_id = 2;\n   */\n  userId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.VideoDimension\n */\nexport interface VideoDimension {\n  /**\n   * @generated from protobuf field: uint32 width = 1;\n   */\n  width: number;\n  /**\n   * @generated from protobuf field: uint32 height = 2;\n   */\n  height: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.VideoLayer\n */\nexport interface VideoLayer {\n  /**\n   * for tracks with a single layer, this should be HIGH\n   *\n   * @generated from protobuf field: string rid = 1;\n   */\n  rid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 2;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * target bitrate, server will measure actual\n   *\n   * @generated from protobuf field: uint32 bitrate = 4;\n   */\n  bitrate: number;\n  /**\n   * @generated from protobuf field: uint32 fps = 5;\n   */\n  fps: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoQuality quality = 6;\n   */\n  quality: VideoQuality;\n}\n/**\n * SubscribeOption represents the configuration options for subscribing to a track.\n *\n * @generated from protobuf message stream.video.sfu.models.SubscribeOption\n */\nexport interface SubscribeOption {\n  /**\n   * The type of the track being subscribed (e.g., video, screenshare).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * The codecs supported by the subscriber for decoding tracks.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Codec codecs = 2;\n   */\n  codecs: Codec[];\n}\n/**\n * PublishOption represents the configuration options for publishing a track.\n *\n * @generated from protobuf message stream.video.sfu.models.PublishOption\n */\nexport interface PublishOption {\n  /**\n   * The type of the track being published (e.g., video, screenshare).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * The codec to be used for encoding the track (e.g., VP8, VP9, H264).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * The target bitrate for the published track, in bits per second.\n   *\n   * @generated from protobuf field: int32 bitrate = 3;\n   */\n  bitrate: number;\n  /**\n   * The target frames per second (FPS) for video encoding.\n   *\n   * @generated from protobuf field: int32 fps = 4;\n   */\n  fps: number;\n  /**\n   * The maximum number of spatial layers to send.\n   * - For SVC (e.g., VP9), spatial layers downscale by a factor of 2:\n   *   - 1 layer: full resolution\n   *   - 2 layers: full resolution + half resolution\n   *   - 3 layers: full resolution + half resolution + quarter resolution\n   * - For non-SVC codecs (e.g., VP8/H264), this determines the number of\n   *   encoded resolutions (e.g., quarter, half, full) sent for simulcast.\n   *\n   * @generated from protobuf field: int32 max_spatial_layers = 5;\n   */\n  maxSpatialLayers: number;\n  /**\n   * The maximum number of temporal layers for scalable video coding (SVC).\n   * Temporal layers allow varying frame rates for different bandwidths.\n   *\n   * @generated from protobuf field: int32 max_temporal_layers = 6;\n   */\n  maxTemporalLayers: number;\n  /**\n   * The dimensions of the video (e.g., width and height in pixels).\n   * Spatial layers are based on this base resolution. For example, if the base\n   * resolution is 1280x720:\n   * - Full resolution (1 layer) = 1280x720\n   * - Half resolution (2 layers) = 640x360\n   * - Quarter resolution (3 layers) = 320x180\n   *\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 7;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * The unique identifier for the publish request.\n   * - This `id` is assigned exclusively by the SFU. Any `id` set by the client\n   *   in the `PublishOption` will be ignored and overwritten by the SFU.\n   * - The primary purpose of this `id` is to uniquely identify each publish\n   *   request, even in scenarios where multiple publish requests for the same\n   *   `track_type` and `codec` are active simultaneously.\n   *   For example:\n   *     - A user may publish two tracks of the same type (e.g., video) and codec\n   *       (e.g., VP9) concurrently.\n   * - This uniqueness ensures that individual requests can be managed\n   *   independently. For instance, an `id` is critical when stopping a specific\n   *   publish request without affecting others.\n   *\n   * @generated from protobuf field: int32 id = 8;\n   */\n  id: number;\n  /**\n   * If true, instructs the publisher to send only the highest available simulcast layer,\n   * disabling all lower layers. This applies to simulcast encodings.\n   * For SVC codecs, prefer using the L1T3 (single spatial, 3 temporal layers) mode instead.\n   *\n   * @generated from protobuf field: bool use_single_layer = 9;\n   */\n  useSingleLayer: boolean;\n  /**\n   * Audio bitrate profiles for different audio quality profiles.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.AudioBitrate audio_bitrate_profiles = 10;\n   */\n  audioBitrateProfiles: AudioBitrate[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Codec\n */\nexport interface Codec {\n  /**\n   * @generated from protobuf field: uint32 payload_type = 16;\n   */\n  payloadType: number;\n  /**\n   * @generated from protobuf field: string name = 10;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: uint32 clock_rate = 14;\n   */\n  clockRate: number;\n  /**\n   * @generated from protobuf field: string encoding_parameters = 15;\n   */\n  encodingParameters: string;\n  /**\n   * @generated from protobuf field: string fmtp = 12;\n   */\n  fmtp: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ICETrickle\n */\nexport interface ICETrickle {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string ice_candidate = 2;\n   */\n  iceCandidate: string;\n  /**\n   * @generated from protobuf field: string session_id = 3;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AudioBitrate\n */\nexport interface AudioBitrate {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AudioBitrateProfile profile = 1;\n   */\n  profile: AudioBitrateProfile;\n  /**\n   * @generated from protobuf field: int32 bitrate = 2;\n   */\n  bitrate: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.TrackInfo\n */\nexport interface TrackInfo {\n  /**\n   * @generated from protobuf field: string track_id = 1;\n   */\n  trackId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 2;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.VideoLayer layers = 5;\n   */\n  layers: VideoLayer[];\n  /**\n   * @generated from protobuf field: string mid = 6;\n   */\n  mid: string;\n  /**\n   * for audio tracks\n   *\n   * @generated from protobuf field: bool dtx = 7;\n   */\n  dtx: boolean;\n  /**\n   * @generated from protobuf field: bool stereo = 8;\n   */\n  stereo: boolean;\n  /**\n   * @generated from protobuf field: bool red = 9;\n   */\n  red: boolean;\n  /**\n   * @generated from protobuf field: bool muted = 10;\n   */\n  muted: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 11;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 12;\n   */\n  publishOptionId: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Error\n */\nexport interface Error {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ErrorCode code = 1;\n   */\n  code: ErrorCode;\n  /**\n   * @generated from protobuf field: string message = 2;\n   */\n  message: string;\n  /**\n   * @generated from protobuf field: bool should_retry = 3;\n   */\n  shouldRetry: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ClientDetails\n */\nexport interface ClientDetails {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Sdk sdk = 1;\n   */\n  sdk?: Sdk;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.OS os = 2;\n   */\n  os?: OS;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Browser browser = 3;\n   */\n  browser?: Browser;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Device device = 4;\n   */\n  device?: Device;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Sdk\n */\nexport interface Sdk {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.SdkType type = 1;\n   */\n  type: SdkType;\n  /**\n   * @generated from protobuf field: string major = 2;\n   */\n  major: string;\n  /**\n   * @generated from protobuf field: string minor = 3;\n   */\n  minor: string;\n  /**\n   * @generated from protobuf field: string patch = 4;\n   */\n  patch: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.OS\n */\nexport interface OS {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n  /**\n   * @generated from protobuf field: string architecture = 3;\n   */\n  architecture: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Browser\n */\nexport interface Browser {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.RTMPIngress\n */\nexport interface RTMPIngress {\n  /**\n   * Video dimensions and frame rate\n   *\n   * @generated from protobuf field: uint32 width = 1;\n   */\n  width: number;\n  /**\n   * @generated from protobuf field: uint32 height = 2;\n   */\n  height: number;\n  /**\n   * @generated from protobuf field: double frame_rate = 3;\n   */\n  frameRate: number;\n  /**\n   * Client info\n   *\n   * @generated from protobuf field: string software = 4;\n   */\n  software: string; // e.g. \"obs-studio\"\n  /**\n   * @generated from protobuf field: string version = 5;\n   */\n  version: string; // e.g. \"29.1.3\"\n  /**\n   * @generated from protobuf field: string encoder = 6;\n   */\n  encoder: string; // e.g. \"x264\" or \"NVIDIA NVENC\"\n  /**\n   * Connection info\n   *\n   * @generated from protobuf field: string remote_addr = 7;\n   */\n  remoteAddr: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Device\n */\nexport interface Device {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Call\n */\nexport interface Call {\n  /**\n   * the call type\n   *\n   * @generated from protobuf field: string type = 1;\n   */\n  type: string;\n  /**\n   * the call id\n   *\n   * @generated from protobuf field: string id = 2;\n   */\n  id: string;\n  /**\n   * the id of the user that created this call\n   *\n   * @generated from protobuf field: string created_by_user_id = 3;\n   */\n  createdByUserId: string;\n  /**\n   * the id of the current host for this call\n   *\n   * @generated from protobuf field: string host_user_id = 4;\n   */\n  hostUserId: string;\n  /**\n   * @generated from protobuf field: google.protobuf.Struct custom = 5;\n   */\n  custom?: Struct;\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp created_at = 6;\n   */\n  createdAt?: Timestamp;\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp updated_at = 7;\n   */\n  updatedAt?: Timestamp;\n}\n/**\n * CallGrants represents the set of permissions given\n * to the user for the current call.\n *\n * @generated from protobuf message stream.video.sfu.models.CallGrants\n */\nexport interface CallGrants {\n  /**\n   * @generated from protobuf field: bool can_publish_audio = 1;\n   */\n  canPublishAudio: boolean;\n  /**\n   * @generated from protobuf field: bool can_publish_video = 2;\n   */\n  canPublishVideo: boolean;\n  /**\n   * @generated from protobuf field: bool can_screenshare = 3;\n   */\n  canScreenshare: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.InputDevices\n */\nexport interface InputDevices {\n  /**\n   * @generated from protobuf field: repeated string available_devices = 1;\n   */\n  availableDevices: string[];\n  /**\n   * @generated from protobuf field: string current_device = 2;\n   */\n  currentDevice: string;\n  /**\n   * @generated from protobuf field: bool is_permitted = 3;\n   */\n  isPermitted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AndroidState\n */\nexport interface AndroidState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AndroidThermalState thermal_state = 1;\n   */\n  thermalState: AndroidThermalState;\n  /**\n   * @generated from protobuf field: bool is_power_saver_mode = 2;\n   */\n  isPowerSaverMode: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AppleState\n */\nexport interface AppleState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AppleThermalState thermal_state = 1;\n   */\n  thermalState: AppleThermalState;\n  /**\n   * https://developer.apple.com/documentation/foundation/processinfo/1617047-islowpowermodeenabled\n   *\n   * @generated from protobuf field: bool is_low_power_mode_enabled = 2;\n   */\n  isLowPowerModeEnabled: boolean;\n}\n/**\n * PerformanceStats represents the encoding/decoding statistics for a track.\n *\n * @generated from protobuf message stream.video.sfu.models.PerformanceStats\n */\nexport interface PerformanceStats {\n  /**\n   * the type of the track (e.g., video, audio, screen share)\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * the codec used for the track\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * the average encode/decode time in ms\n   *\n   * @generated from protobuf field: float avg_frame_time_ms = 3;\n   */\n  avgFrameTimeMs: number;\n  /**\n   * the average fps for the track\n   *\n   * @generated from protobuf field: float avg_fps = 4;\n   */\n  avgFps: number;\n  /**\n   * the track dimensions\n   *\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 5;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * the target bitrate for the track, only for published tracks\n   *\n   * @generated from protobuf field: int32 target_bitrate = 6;\n   */\n  targetBitrate: number;\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.PeerType\n */\nexport enum PeerType {\n  /**\n   * todo fix me (marcelo)\n   *\n   * @generated from protobuf enum value: PEER_TYPE_PUBLISHER_UNSPECIFIED = 0;\n   */\n  PUBLISHER_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: PEER_TYPE_SUBSCRIBER = 1;\n   */\n  SUBSCRIBER = 1,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.ConnectionQuality\n */\nexport enum ConnectionQuality {\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_POOR = 1;\n   */\n  POOR = 1,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_GOOD = 2;\n   */\n  GOOD = 2,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_EXCELLENT = 3;\n   */\n  EXCELLENT = 3,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.VideoQuality\n */\nexport enum VideoQuality {\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_LOW_UNSPECIFIED = 0;\n   */\n  LOW_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_MID = 1;\n   */\n  MID = 1,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_HIGH = 2;\n   */\n  HIGH = 2,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_OFF = 3;\n   */\n  OFF = 3,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackType\n */\nexport enum TrackType {\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_AUDIO = 1;\n   */\n  AUDIO = 1,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_VIDEO = 2;\n   */\n  VIDEO = 2,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE = 3;\n   */\n  SCREEN_SHARE = 3,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE_AUDIO = 4;\n   */\n  SCREEN_SHARE_AUDIO = 4,\n}\n/**\n * must be aligned with kit\n *\n * @generated from protobuf enum stream.video.sfu.models.ParticipantSource\n */\nexport enum ParticipantSource {\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_WEBRTC_UNSPECIFIED = 0;\n   */\n  WEBRTC_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_RTMP = 1;\n   */\n  RTMP = 1,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_WHIP = 2;\n   */\n  WHIP = 2,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_SIP = 3;\n   */\n  SIP = 3,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_RTSP = 4;\n   */\n  RTSP = 4,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_SRT = 5;\n   */\n  SRT = 5,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.AudioBitrateProfile\n */\nexport enum AudioBitrateProfile {\n  /**\n   * @generated from protobuf enum value: AUDIO_BITRATE_PROFILE_VOICE_STANDARD_UNSPECIFIED = 0;\n   */\n  VOICE_STANDARD_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: AUDIO_BITRATE_PROFILE_VOICE_HIGH_QUALITY = 1;\n   */\n  VOICE_HIGH_QUALITY = 1,\n  /**\n   * @generated from protobuf enum value: AUDIO_BITRATE_PROFILE_MUSIC_HIGH_QUALITY = 2;\n   */\n  MUSIC_HIGH_QUALITY = 2,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.ErrorCode\n */\nexport enum ErrorCode {\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_NOT_FOUND = 100;\n   */\n  PUBLISH_TRACK_NOT_FOUND = 100,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACKS_MISMATCH = 101;\n   */\n  PUBLISH_TRACKS_MISMATCH = 101,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_OUT_OF_ORDER = 102;\n   */\n  PUBLISH_TRACK_OUT_OF_ORDER = 102,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103;\n   */\n  PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_LIVE_ENDED = 104;\n   */\n  LIVE_ENDED = 104,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_NOT_FOUND = 200;\n   */\n  PARTICIPANT_NOT_FOUND = 200,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING_OUT = 201;\n   */\n  PARTICIPANT_MIGRATING_OUT = 201,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATION_FAILED = 202;\n   */\n  PARTICIPANT_MIGRATION_FAILED = 202,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING = 203;\n   */\n  PARTICIPANT_MIGRATING = 203,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_RECONNECT_FAILED = 204;\n   */\n  PARTICIPANT_RECONNECT_FAILED = 204,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205;\n   */\n  PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_SIGNAL_LOST = 206;\n   */\n  PARTICIPANT_SIGNAL_LOST = 206,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_CALL_NOT_FOUND = 300;\n   */\n  CALL_NOT_FOUND = 300,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_CALL_PARTICIPANT_LIMIT_REACHED = 301;\n   */\n  CALL_PARTICIPANT_LIMIT_REACHED = 301,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_REQUEST_VALIDATION_FAILED = 400;\n   */\n  REQUEST_VALIDATION_FAILED = 400,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_UNAUTHENTICATED = 401;\n   */\n  UNAUTHENTICATED = 401,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PERMISSION_DENIED = 403;\n   */\n  PERMISSION_DENIED = 403,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_TOO_MANY_REQUESTS = 429;\n   */\n  TOO_MANY_REQUESTS = 429,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_INTERNAL_SERVER_ERROR = 500;\n   */\n  INTERNAL_SERVER_ERROR = 500,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_SFU_SHUTTING_DOWN = 600;\n   */\n  SFU_SHUTTING_DOWN = 600,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_SFU_FULL = 700;\n   */\n  SFU_FULL = 700,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.SdkType\n */\nexport enum SdkType {\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_REACT = 1;\n   */\n  REACT = 1,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_ANGULAR = 2;\n   */\n  ANGULAR = 2,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_ANDROID = 3;\n   */\n  ANDROID = 3,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_IOS = 4;\n   */\n  IOS = 4,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_FLUTTER = 5;\n   */\n  FLUTTER = 5,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_REACT_NATIVE = 6;\n   */\n  REACT_NATIVE = 6,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_UNITY = 7;\n   */\n  UNITY = 7,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_GO = 8;\n   */\n  GO = 8,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_PLAIN_JAVASCRIPT = 9;\n   */\n  PLAIN_JAVASCRIPT = 9,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackUnpublishReason\n */\nexport enum TrackUnpublishReason {\n  /**\n   * Default value which is used when the specific reason\n   * for muting the track is not known.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Represents user muting their tracks.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_USER_MUTED = 1;\n   */\n  USER_MUTED = 1,\n  /**\n   * Represents muting the track because the permission to\n   * publish the track has been revoked.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_PERMISSION_REVOKED = 2;\n   */\n  PERMISSION_REVOKED = 2,\n  /**\n   * Represents muting the track due to moderation actions.\n   * This is different from permission revoked because the\n   * participant can unmute themselves here whereas in case\n   * of \"permission revoke\" it is not possible until the\n   * call permissions are updated.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_MODERATION = 3;\n   */\n  MODERATION = 3,\n}\n/**\n * GoAwayReason represents the reason for the SFU to\n * disconnect the client.\n *\n * @generated from protobuf enum stream.video.sfu.models.GoAwayReason\n */\nexport enum GoAwayReason {\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_SHUTTING_DOWN = 1;\n   */\n  SHUTTING_DOWN = 1,\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_REBALANCE = 2;\n   */\n  REBALANCE = 2,\n}\n/**\n * CallEndedReason represents the reason for the call to end.\n *\n * @generated from protobuf enum stream.video.sfu.models.CallEndedReason\n */\nexport enum CallEndedReason {\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_ENDED = 1;\n   */\n  ENDED = 1,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_LIVE_ENDED = 2;\n   */\n  LIVE_ENDED = 2,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_KICKED = 3;\n   */\n  KICKED = 3,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_SESSION_ENDED = 4;\n   */\n  SESSION_ENDED = 4,\n}\n/**\n * WebsocketReconnectStrategy defines the ws strategies available for handling reconnections.\n *\n * @generated from protobuf enum stream.video.sfu.models.WebsocketReconnectStrategy\n */\nexport enum WebsocketReconnectStrategy {\n  /**\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Sent after reaching the maximum reconnection attempts, or any other unrecoverable error leading to permanent disconnect.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_DISCONNECT = 1;\n   */\n  DISCONNECT = 1,\n  /**\n   * SDK should maintaining existing publisher/subscriber pc instances\n   * and establish a new WebSocket connection.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_FAST = 2;\n   */\n  FAST = 2,\n  /**\n   * SDK should obtain new credentials from the coordinator, drops existing pc instances, set a new session_id and initializes\n   * a completely new WebSocket connection, ensuring a comprehensive reset.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_REJOIN = 3;\n   */\n  REJOIN = 3,\n  /**\n   * SDK should migrate to a new SFU instance\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_MIGRATE = 4;\n   */\n  MIGRATE = 4,\n}\n/**\n * AndroidThermalState is reported by the Android API. The full list of values is documented here\n * https://developer.android.com/reference/android/os/PowerManager.html#getCurrentThermalStatus()\n *\n * @generated from protobuf enum stream.video.sfu.models.AndroidThermalState\n */\nexport enum AndroidThermalState {\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_NONE = 1;\n   */\n  NONE = 1,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_LIGHT = 2;\n   */\n  LIGHT = 2,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_MODERATE = 3;\n   */\n  MODERATE = 3,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_SEVERE = 4;\n   */\n  SEVERE = 4,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_CRITICAL = 5;\n   */\n  CRITICAL = 5,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_EMERGENCY = 6;\n   */\n  EMERGENCY = 6,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_SHUTDOWN = 7;\n   */\n  SHUTDOWN = 7,\n}\n/**\n * AppleThermalState is the thermal state as reported by Apple devices when available or applicable to the platform.\n * The full list of states (enum) is available here: https://developer.apple.com/documentation/foundation/processinfo/thermalstate\n *\n * @generated from protobuf enum stream.video.sfu.models.AppleThermalState\n */\nexport enum AppleThermalState {\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_NOMINAL = 1;\n   */\n  NOMINAL = 1,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_FAIR = 2;\n   */\n  FAIR = 2,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_SERIOUS = 3;\n   */\n  SERIOUS = 3,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_CRITICAL = 4;\n   */\n  CRITICAL = 4,\n}\n/**\n * ClientCapability defines a feature that client supports\n *\n * @generated from protobuf enum stream.video.sfu.models.ClientCapability\n */\nexport enum ClientCapability {\n  /**\n   * @generated from protobuf enum value: CLIENT_CAPABILITY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Enables SFU pausing inbound video\n   *\n   * @generated from protobuf enum value: CLIENT_CAPABILITY_SUBSCRIBER_VIDEO_PAUSE = 1;\n   */\n  SUBSCRIBER_VIDEO_PAUSE = 1,\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallState$Type extends MessageType<CallState> {\n  constructor() {\n    super('stream.video.sfu.models.CallState', [\n      {\n        no: 1,\n        name: 'participants',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Participant,\n      },\n      { no: 2, name: 'started_at', kind: 'message', T: () => Timestamp },\n      {\n        no: 3,\n        name: 'participant_count',\n        kind: 'message',\n        T: () => ParticipantCount,\n      },\n      {\n        no: 4,\n        name: 'pins',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Pin,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallState\n */\nexport const CallState = new CallState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantCount$Type extends MessageType<ParticipantCount> {\n  constructor() {\n    super('stream.video.sfu.models.ParticipantCount', [\n      { no: 1, name: 'total', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'anonymous', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ParticipantCount\n */\nexport const ParticipantCount = new ParticipantCount$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Pin$Type extends MessageType<Pin> {\n  constructor() {\n    super('stream.video.sfu.models.Pin', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Pin\n */\nexport const Pin = new Pin$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Participant$Type extends MessageType<Participant> {\n  constructor() {\n    super('stream.video.sfu.models.Participant', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'published_tracks',\n        kind: 'enum',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'joined_at', kind: 'message', T: () => Timestamp },\n      {\n        no: 5,\n        name: 'track_lookup_prefix',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 6,\n        name: 'connection_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ConnectionQuality',\n          ConnectionQuality,\n          'CONNECTION_QUALITY_',\n        ],\n      },\n      { no: 7, name: 'is_speaking', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      {\n        no: 8,\n        name: 'is_dominant_speaker',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      { no: 9, name: 'audio_level', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      { no: 10, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 11, name: 'image', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 12, name: 'custom', kind: 'message', T: () => Struct },\n      {\n        no: 13,\n        name: 'roles',\n        kind: 'scalar',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 14,\n        name: 'source',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ParticipantSource',\n          ParticipantSource,\n          'PARTICIPANT_SOURCE_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Participant\n */\nexport const Participant = new Participant$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StreamQuality$Type extends MessageType<StreamQuality> {\n  constructor() {\n    super('stream.video.sfu.models.StreamQuality', [\n      {\n        no: 1,\n        name: 'video_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.VideoQuality',\n          VideoQuality,\n          'VIDEO_QUALITY_',\n        ],\n      },\n      { no: 2, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.StreamQuality\n */\nexport const StreamQuality = new StreamQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoDimension$Type extends MessageType<VideoDimension> {\n  constructor() {\n    super('stream.video.sfu.models.VideoDimension', [\n      { no: 1, name: 'width', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'height', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoDimension\n */\nexport const VideoDimension = new VideoDimension$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayer$Type extends MessageType<VideoLayer> {\n  constructor() {\n    super('stream.video.sfu.models.VideoLayer', [\n      { no: 1, name: 'rid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      { no: 4, name: 'bitrate', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 5, name: 'fps', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      {\n        no: 6,\n        name: 'quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.VideoQuality',\n          VideoQuality,\n          'VIDEO_QUALITY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoLayer\n */\nexport const VideoLayer = new VideoLayer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscribeOption$Type extends MessageType<SubscribeOption> {\n  constructor() {\n    super('stream.video.sfu.models.SubscribeOption', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'codecs',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Codec,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.SubscribeOption\n */\nexport const SubscribeOption = new SubscribeOption$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublishOption$Type extends MessageType<PublishOption> {\n  constructor() {\n    super('stream.video.sfu.models.PublishOption', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      { no: 3, name: 'bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      { no: 4, name: 'fps', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 5,\n        name: 'max_spatial_layers',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 6,\n        name: 'max_temporal_layers',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 7,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      { no: 8, name: 'id', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 9,\n        name: 'use_single_layer',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 10,\n        name: 'audio_bitrate_profiles',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => AudioBitrate,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.PublishOption\n */\nexport const PublishOption = new PublishOption$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Codec$Type extends MessageType<Codec> {\n  constructor() {\n    super('stream.video.sfu.models.Codec', [\n      {\n        no: 16,\n        name: 'payload_type',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      { no: 10, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 14,\n        name: 'clock_rate',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 15,\n        name: 'encoding_parameters',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 12, name: 'fmtp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Codec\n */\nexport const Codec = new Codec$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends MessageType<ICETrickle> {\n  constructor() {\n    super('stream.video.sfu.models.ICETrickle', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      {\n        no: 2,\n        name: 'ice_candidate',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 3, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ICETrickle\n */\nexport const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioBitrate$Type extends MessageType<AudioBitrate> {\n  constructor() {\n    super('stream.video.sfu.models.AudioBitrate', [\n      {\n        no: 1,\n        name: 'profile',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AudioBitrateProfile',\n          AudioBitrateProfile,\n          'AUDIO_BITRATE_PROFILE_',\n        ],\n      },\n      { no: 2, name: 'bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AudioBitrate\n */\nexport const AudioBitrate = new AudioBitrate$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackInfo$Type extends MessageType<TrackInfo> {\n  constructor() {\n    super('stream.video.sfu.models.TrackInfo', [\n      { no: 1, name: 'track_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 5,\n        name: 'layers',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => VideoLayer,\n      },\n      { no: 6, name: 'mid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 7, name: 'dtx', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 8, name: 'stereo', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 9, name: 'red', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 10, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 11, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 12,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.TrackInfo\n */\nexport const TrackInfo = new TrackInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends MessageType<Error> {\n  constructor() {\n    super('stream.video.sfu.models.Error', [\n      {\n        no: 1,\n        name: 'code',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ErrorCode',\n          ErrorCode,\n          'ERROR_CODE_',\n        ],\n      },\n      { no: 2, name: 'message', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'should_retry', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Error\n */\nexport const Error = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ClientDetails$Type extends MessageType<ClientDetails> {\n  constructor() {\n    super('stream.video.sfu.models.ClientDetails', [\n      { no: 1, name: 'sdk', kind: 'message', T: () => Sdk },\n      { no: 2, name: 'os', kind: 'message', T: () => OS },\n      { no: 3, name: 'browser', kind: 'message', T: () => Browser },\n      { no: 4, name: 'device', kind: 'message', T: () => Device },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ClientDetails\n */\nexport const ClientDetails = new ClientDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Sdk$Type extends MessageType<Sdk> {\n  constructor() {\n    super('stream.video.sfu.models.Sdk', [\n      {\n        no: 1,\n        name: 'type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.SdkType', SdkType, 'SDK_TYPE_'],\n      },\n      { no: 2, name: 'major', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'minor', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 4, name: 'patch', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Sdk\n */\nexport const Sdk = new Sdk$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass OS$Type extends MessageType<OS> {\n  constructor() {\n    super('stream.video.sfu.models.OS', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'architecture',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.OS\n */\nexport const OS = new OS$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Browser$Type extends MessageType<Browser> {\n  constructor() {\n    super('stream.video.sfu.models.Browser', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Browser\n */\nexport const Browser = new Browser$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass RTMPIngress$Type extends MessageType<RTMPIngress> {\n  constructor() {\n    super('stream.video.sfu.models.RTMPIngress', [\n      { no: 1, name: 'width', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'height', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 3, name: 'frame_rate', kind: 'scalar', T: 1 /*ScalarType.DOUBLE*/ },\n      { no: 4, name: 'software', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 5, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 6, name: 'encoder', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 7,\n        name: 'remote_addr',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.RTMPIngress\n */\nexport const RTMPIngress = new RTMPIngress$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Device$Type extends MessageType<Device> {\n  constructor() {\n    super('stream.video.sfu.models.Device', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Device\n */\nexport const Device = new Device$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Call$Type extends MessageType<Call> {\n  constructor() {\n    super('stream.video.sfu.models.Call', [\n      { no: 1, name: 'type', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'created_by_user_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'host_user_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 5, name: 'custom', kind: 'message', T: () => Struct },\n      { no: 6, name: 'created_at', kind: 'message', T: () => Timestamp },\n      { no: 7, name: 'updated_at', kind: 'message', T: () => Timestamp },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Call\n */\nexport const Call = new Call$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrants$Type extends MessageType<CallGrants> {\n  constructor() {\n    super('stream.video.sfu.models.CallGrants', [\n      {\n        no: 1,\n        name: 'can_publish_audio',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 2,\n        name: 'can_publish_video',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 3,\n        name: 'can_screenshare',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallGrants\n */\nexport const CallGrants = new CallGrants$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InputDevices$Type extends MessageType<InputDevices> {\n  constructor() {\n    super('stream.video.sfu.models.InputDevices', [\n      {\n        no: 1,\n        name: 'available_devices',\n        kind: 'scalar',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 2,\n        name: 'current_device',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 3, name: 'is_permitted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.InputDevices\n */\nexport const InputDevices = new InputDevices$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AndroidState$Type extends MessageType<AndroidState> {\n  constructor() {\n    super('stream.video.sfu.models.AndroidState', [\n      {\n        no: 1,\n        name: 'thermal_state',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AndroidThermalState',\n          AndroidThermalState,\n          'ANDROID_THERMAL_STATE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'is_power_saver_mode',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AndroidState\n */\nexport const AndroidState = new AndroidState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AppleState$Type extends MessageType<AppleState> {\n  constructor() {\n    super('stream.video.sfu.models.AppleState', [\n      {\n        no: 1,\n        name: 'thermal_state',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AppleThermalState',\n          AppleThermalState,\n          'APPLE_THERMAL_STATE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'is_low_power_mode_enabled',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AppleState\n */\nexport const AppleState = new AppleState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PerformanceStats$Type extends MessageType<PerformanceStats> {\n  constructor() {\n    super('stream.video.sfu.models.PerformanceStats', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'avg_frame_time_ms',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      { no: 4, name: 'avg_fps', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      {\n        no: 5,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      {\n        no: 6,\n        name: 'target_bitrate',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.PerformanceStats\n */\nexport const PerformanceStats = new PerformanceStats$Type();\n","// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\nimport {\n  AndroidState,\n  AppleState,\n  Error,\n  ICETrickle,\n  InputDevices,\n  PeerType,\n  PerformanceStats,\n  RTMPIngress,\n  TrackInfo,\n  TrackType,\n  VideoDimension,\n  WebsocketReconnectStrategy,\n} from '../models/models';\nimport { ServiceType } from '@protobuf-ts/runtime-rpc';\nimport { MessageType } from '@protobuf-ts/runtime';\n\n/**\n * @generated from protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */\nexport interface StartNoiseCancellationRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */\nexport interface StartNoiseCancellationResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */\nexport interface StopNoiseCancellationRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */\nexport interface StopNoiseCancellationResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.Reconnection\n */\nexport interface Reconnection {\n  /**\n   * @generated from protobuf field: float time_seconds = 1;\n   */\n  timeSeconds: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy strategy = 2;\n   */\n  strategy: WebsocketReconnectStrategy;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.Telemetry\n */\nexport interface Telemetry {\n  /**\n   * @generated from protobuf oneof: data\n   */\n  data:\n    | {\n        oneofKind: 'connectionTimeSeconds';\n        /**\n         * @generated from protobuf field: float connection_time_seconds = 1;\n         */\n        connectionTimeSeconds: number;\n      }\n    | {\n        oneofKind: 'reconnection';\n        /**\n         * @generated from protobuf field: stream.video.sfu.signal.Reconnection reconnection = 2;\n         */\n        reconnection: Reconnection;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendStatsRequest\n */\nexport interface SendStatsRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: string subscriber_stats = 2;\n   */\n  subscriberStats: string;\n  /**\n   * @generated from protobuf field: string publisher_stats = 3;\n   */\n  publisherStats: string;\n  /**\n   * @generated from protobuf field: string webrtc_version = 4;\n   */\n  webrtcVersion: string;\n  /**\n   * @generated from protobuf field: string sdk = 5;\n   */\n  sdk: string;\n  /**\n   * @generated from protobuf field: string sdk_version = 6;\n   */\n  sdkVersion: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.InputDevices audio_devices = 7;\n   */\n  audioDevices?: InputDevices;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.InputDevices video_devices = 8;\n   */\n  videoDevices?: InputDevices;\n  /**\n   * @generated from protobuf oneof: device_state\n   */\n  deviceState:\n    | {\n        oneofKind: 'android';\n        /**\n         * @generated from protobuf field: stream.video.sfu.models.AndroidState android = 9;\n         */\n        android: AndroidState;\n      }\n    | {\n        oneofKind: 'apple';\n        /**\n         * @generated from protobuf field: stream.video.sfu.models.AppleState apple = 10;\n         */\n        apple: AppleState;\n      }\n    | {\n        oneofKind: undefined;\n      };\n  /**\n   * @generated from protobuf field: stream.video.sfu.signal.Telemetry telemetry = 11;\n   */\n  telemetry?: Telemetry;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.RTMPIngress rtmp = 12;\n   */\n  rtmp?: RTMPIngress;\n  /**\n   * @deprecated\n   * @generated from protobuf field: string subscriber_rtc_stats = 13 [deprecated = true];\n   */\n  subscriberRtcStats: string;\n  /**\n   * @deprecated\n   * @generated from protobuf field: string publisher_rtc_stats = 14 [deprecated = true];\n   */\n  publisherRtcStats: string;\n  /**\n   * @generated from protobuf field: string rtc_stats = 15;\n   */\n  rtcStats: string;\n  /**\n   * Encode stats for the publisher\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.PerformanceStats encode_stats = 16;\n   */\n  encodeStats: PerformanceStats[];\n  /**\n   * Decode stats for the subscriber\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.PerformanceStats decode_stats = 17;\n   */\n  decodeStats: PerformanceStats[];\n  /**\n   * user_session id can change during reconnects, this helps us to\n   * identify the user across reconnects and should remain consistent until the user explicitly\n   * disconnects, is kicked or the call is ended.\n   *\n   * @generated from protobuf field: string unified_session_id = 18;\n   */\n  unifiedSessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendStatsResponse\n */\nexport interface SendStatsResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICERestartRequest\n */\nexport interface ICERestartRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 2;\n   */\n  peerType: PeerType;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICERestartResponse\n */\nexport interface ICERestartResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */\nexport interface UpdateMuteStatesRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackMuteState mute_states = 3;\n   */\n  muteStates: TrackMuteState[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */\nexport interface UpdateMuteStatesResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.TrackMuteState\n */\nexport interface TrackMuteState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: bool muted = 2;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.AudioMuteChanged\n */\nexport interface AudioMuteChanged {\n  /**\n   * @generated from protobuf field: bool muted = 1;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.VideoMuteChanged\n */\nexport interface VideoMuteChanged {\n  /**\n   * @generated from protobuf field: bool muted = 2;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */\nexport interface UpdateSubscriptionsRequest {\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails tracks = 3;\n   */\n  tracks: TrackSubscriptionDetails[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */\nexport interface UpdateSubscriptionsResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */\nexport interface TrackSubscriptionDetails {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension dimension = 4;\n   */\n  dimension?: VideoDimension;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendAnswerRequest\n */\nexport interface SendAnswerRequest {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string sdp = 2;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 3;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendAnswerResponse\n */\nexport interface SendAnswerResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICETrickleResponse\n */\nexport interface ICETrickleResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SetPublisherRequest\n */\nexport interface SetPublisherRequest {\n  /**\n   * sdp offer\n   *\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo tracks = 3;\n   */\n  tracks: TrackInfo[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SetPublisherResponse\n */\nexport interface SetPublisherResponse {\n  /**\n   * sdp answer\n   *\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: bool ice_restart = 3;\n   */\n  iceRestart: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationRequest$Type extends MessageType<StartNoiseCancellationRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.StartNoiseCancellationRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */\nexport const StartNoiseCancellationRequest =\n  new StartNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationResponse$Type extends MessageType<StartNoiseCancellationResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.StartNoiseCancellationResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */\nexport const StartNoiseCancellationResponse =\n  new StartNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationRequest$Type extends MessageType<StopNoiseCancellationRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.StopNoiseCancellationRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */\nexport const StopNoiseCancellationRequest =\n  new StopNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationResponse$Type extends MessageType<StopNoiseCancellationResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.StopNoiseCancellationResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */\nexport const StopNoiseCancellationResponse =\n  new StopNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Reconnection$Type extends MessageType<Reconnection> {\n  constructor() {\n    super('stream.video.sfu.signal.Reconnection', [\n      {\n        no: 1,\n        name: 'time_seconds',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      {\n        no: 2,\n        name: 'strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.Reconnection\n */\nexport const Reconnection = new Reconnection$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Telemetry$Type extends MessageType<Telemetry> {\n  constructor() {\n    super('stream.video.sfu.signal.Telemetry', [\n      {\n        no: 1,\n        name: 'connection_time_seconds',\n        kind: 'scalar',\n        oneof: 'data',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      {\n        no: 2,\n        name: 'reconnection',\n        kind: 'message',\n        oneof: 'data',\n        T: () => Reconnection,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.Telemetry\n */\nexport const Telemetry = new Telemetry$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsRequest$Type extends MessageType<SendStatsRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SendStatsRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'subscriber_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 3,\n        name: 'publisher_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'webrtc_version',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 5, name: 'sdk', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 6,\n        name: 'sdk_version',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 7, name: 'audio_devices', kind: 'message', T: () => InputDevices },\n      { no: 8, name: 'video_devices', kind: 'message', T: () => InputDevices },\n      {\n        no: 9,\n        name: 'android',\n        kind: 'message',\n        oneof: 'deviceState',\n        T: () => AndroidState,\n      },\n      {\n        no: 10,\n        name: 'apple',\n        kind: 'message',\n        oneof: 'deviceState',\n        T: () => AppleState,\n      },\n      { no: 11, name: 'telemetry', kind: 'message', T: () => Telemetry },\n      { no: 12, name: 'rtmp', kind: 'message', T: () => RTMPIngress },\n      {\n        no: 13,\n        name: 'subscriber_rtc_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 14,\n        name: 'publisher_rtc_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 15, name: 'rtc_stats', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 16,\n        name: 'encode_stats',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PerformanceStats,\n      },\n      {\n        no: 17,\n        name: 'decode_stats',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PerformanceStats,\n      },\n      {\n        no: 18,\n        name: 'unified_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsRequest\n */\nexport const SendStatsRequest = new SendStatsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsResponse$Type extends MessageType<SendStatsResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SendStatsResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsResponse\n */\nexport const SendStatsResponse = new SendStatsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartRequest$Type extends MessageType<ICERestartRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.ICERestartRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartRequest\n */\nexport const ICERestartRequest = new ICERestartRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartResponse$Type extends MessageType<ICERestartResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.ICERestartResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartResponse\n */\nexport const ICERestartResponse = new ICERestartResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesRequest$Type extends MessageType<UpdateMuteStatesRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateMuteStatesRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'mute_states',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackMuteState,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */\nexport const UpdateMuteStatesRequest = new UpdateMuteStatesRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesResponse$Type extends MessageType<UpdateMuteStatesResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateMuteStatesResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */\nexport const UpdateMuteStatesResponse = new UpdateMuteStatesResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackMuteState$Type extends MessageType<TrackMuteState> {\n  constructor() {\n    super('stream.video.sfu.signal.TrackMuteState', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackMuteState\n */\nexport const TrackMuteState = new TrackMuteState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMuteChanged$Type extends MessageType<AudioMuteChanged> {\n  constructor() {\n    super('stream.video.sfu.signal.AudioMuteChanged', [\n      { no: 1, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.AudioMuteChanged\n */\nexport const AudioMuteChanged = new AudioMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMuteChanged$Type extends MessageType<VideoMuteChanged> {\n  constructor() {\n    super('stream.video.sfu.signal.VideoMuteChanged', [\n      { no: 2, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.VideoMuteChanged\n */\nexport const VideoMuteChanged = new VideoMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsRequest$Type extends MessageType<UpdateSubscriptionsRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateSubscriptionsRequest', [\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */\nexport const UpdateSubscriptionsRequest = new UpdateSubscriptionsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsResponse$Type extends MessageType<UpdateSubscriptionsResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateSubscriptionsResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */\nexport const UpdateSubscriptionsResponse =\n  new UpdateSubscriptionsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackSubscriptionDetails$Type extends MessageType<TrackSubscriptionDetails> {\n  constructor() {\n    super('stream.video.sfu.signal.TrackSubscriptionDetails', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'dimension', kind: 'message', T: () => VideoDimension },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */\nexport const TrackSubscriptionDetails = new TrackSubscriptionDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerRequest$Type extends MessageType<SendAnswerRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SendAnswerRequest', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      { no: 2, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerRequest\n */\nexport const SendAnswerRequest = new SendAnswerRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerResponse$Type extends MessageType<SendAnswerResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SendAnswerResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerResponse\n */\nexport const SendAnswerResponse = new SendAnswerResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickleResponse$Type extends MessageType<ICETrickleResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.ICETrickleResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICETrickleResponse\n */\nexport const ICETrickleResponse = new ICETrickleResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherRequest$Type extends MessageType<SetPublisherRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SetPublisherRequest', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackInfo,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherRequest\n */\nexport const SetPublisherRequest = new SetPublisherRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherResponse$Type extends MessageType<SetPublisherResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SetPublisherResponse', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'ice_restart', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherResponse\n */\nexport const SetPublisherResponse = new SetPublisherResponse$Type();\n/**\n * @generated ServiceType for protobuf service stream.video.sfu.signal.SignalServer\n */\nexport const SignalServer = new ServiceType(\n  'stream.video.sfu.signal.SignalServer',\n  [\n    {\n      name: 'SetPublisher',\n      options: {},\n      I: SetPublisherRequest,\n      O: SetPublisherResponse,\n    },\n    {\n      name: 'SendAnswer',\n      options: {},\n      I: SendAnswerRequest,\n      O: SendAnswerResponse,\n    },\n    { name: 'IceTrickle', options: {}, I: ICETrickle, O: ICETrickleResponse },\n    {\n      name: 'UpdateSubscriptions',\n      options: {},\n      I: UpdateSubscriptionsRequest,\n      O: UpdateSubscriptionsResponse,\n    },\n    {\n      name: 'UpdateMuteStates',\n      options: {},\n      I: UpdateMuteStatesRequest,\n      O: UpdateMuteStatesResponse,\n    },\n    {\n      name: 'IceRestart',\n      options: {},\n      I: ICERestartRequest,\n      O: ICERestartResponse,\n    },\n    {\n      name: 'SendStats',\n      options: {},\n      I: SendStatsRequest,\n      O: SendStatsResponse,\n    },\n    {\n      name: 'StartNoiseCancellation',\n      options: {},\n      I: StartNoiseCancellationRequest,\n      O: StartNoiseCancellationResponse,\n    },\n    {\n      name: 'StopNoiseCancellation',\n      options: {},\n      I: StopNoiseCancellationRequest,\n      O: StopNoiseCancellationResponse,\n    },\n  ],\n);\n","// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/event/events.proto\" (package \"stream.video.sfu.event\", syntax proto3)\n// tslint:disable\nimport { MessageType } from '@protobuf-ts/runtime';\nimport {\n  CallEndedReason,\n  CallGrants,\n  CallState,\n  ClientCapability,\n  ClientDetails,\n  Codec,\n  ConnectionQuality,\n  Error as Error$,\n  GoAwayReason,\n  ICETrickle as ICETrickle$,\n  Participant,\n  ParticipantCount,\n  ParticipantSource,\n  PeerType,\n  Pin,\n  PublishOption,\n  SubscribeOption,\n  TrackInfo,\n  TrackType,\n  TrackUnpublishReason,\n  WebsocketReconnectStrategy,\n} from '../models/models';\nimport { TrackSubscriptionDetails } from '../signal_rpc/signal';\n\n/**\n * SFUEvent is a message that is sent from the SFU to the client.\n *\n * @generated from protobuf message stream.video.sfu.event.SfuEvent\n */\nexport interface SfuEvent {\n  /**\n   * @generated from protobuf oneof: event_payload\n   */\n  eventPayload:\n    | {\n        oneofKind: 'subscriberOffer';\n        /**\n         * SubscriberOffer sends the SDP offer for establishing the\n         * subscriber PeerConnection.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.SubscriberOffer subscriber_offer = 1;\n         */\n        subscriberOffer: SubscriberOffer;\n      }\n    | {\n        oneofKind: 'publisherAnswer';\n        /**\n         * PublisherAnswer sends the SDP answer to the offer sent by\n         * the client for establishing the Publisher PeerConnection.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.PublisherAnswer publisher_answer = 2;\n         */\n        publisherAnswer: PublisherAnswer;\n      }\n    | {\n        oneofKind: 'connectionQualityChanged';\n        /**\n         * ConnectionQualityChanged is sent to inform the connection\n         * quality of the participants in the call. It does not have\n         * to contain the full list of call participants in it.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ConnectionQualityChanged connection_quality_changed = 3;\n         */\n        connectionQualityChanged: ConnectionQualityChanged;\n      }\n    | {\n        oneofKind: 'audioLevelChanged';\n        /**\n         * AudioLevelChanged is sent for change in audio levels of\n         * the participants.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.AudioLevelChanged audio_level_changed = 4;\n         */\n        audioLevelChanged: AudioLevelChanged;\n      }\n    | {\n        oneofKind: 'iceTrickle';\n        /**\n         * ICETrickle contains the ICE candidate required to establish\n         * the ICE transport: part of establishing the PeerConnection\n         * and also for ICE restarts.\n         *\n         * @generated from protobuf field: stream.video.sfu.models.ICETrickle ice_trickle = 5;\n         */\n        iceTrickle: ICETrickle$;\n      }\n    | {\n        oneofKind: 'changePublishQuality';\n        /**\n         * ChangePublishQuality advises the publisher to switch on/off\n         * various qualities of their video stream based on the subscription.\n         * This is done to save the bandwidth and the CPU of the publisher.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ChangePublishQuality change_publish_quality = 6;\n         */\n        changePublishQuality: ChangePublishQuality;\n      }\n    | {\n        oneofKind: 'participantJoined';\n        /**\n         * ParticipantJoined notifies the client that a new participant\n         * has joined the call. This is not sent for anonymous users.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantJoined participant_joined = 10;\n         */\n        participantJoined: ParticipantJoined;\n      }\n    | {\n        oneofKind: 'participantLeft';\n        /**\n         * ParticipantLeft notifies the client that a call participant\n         * has left the call. This is not sent for anonymous users.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantLeft participant_left = 11;\n         */\n        participantLeft: ParticipantLeft;\n      }\n    | {\n        oneofKind: 'dominantSpeakerChanged';\n        /**\n         * DominantSpeakerChanged notifies the client about the current\n         * dominant speaker. This is required for certain use cases like\n         * the spotlight view.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.DominantSpeakerChanged dominant_speaker_changed = 12;\n         */\n        dominantSpeakerChanged: DominantSpeakerChanged;\n      }\n    | {\n        oneofKind: 'joinResponse';\n        /**\n         * JoinResponse acknowledges a participant successfully joining\n         * the call. This is sent in response to the JoinRequest.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.JoinResponse join_response = 13;\n         */\n        joinResponse: JoinResponse;\n      }\n    | {\n        oneofKind: 'healthCheckResponse';\n        /**\n         * HealthCheckResponse is sent in response to the HealthCheckRequest.\n         * It contains the participant count in the call.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.HealthCheckResponse health_check_response = 14;\n         */\n        healthCheckResponse: HealthCheckResponse;\n      }\n    | {\n        oneofKind: 'trackPublished';\n        /**\n         * TrackPublished is sent when a new track (like audio, video, screenshare)\n         * is published by a participant in the call. It is also sent on mute/unmute.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.TrackPublished track_published = 16;\n         */\n        trackPublished: TrackPublished;\n      }\n    | {\n        oneofKind: 'trackUnpublished';\n        /**\n         * TrackUnpublished is sent when a track (like audio, video, screenshare)\n         * is no longer published. It is sent on muting a track or when the participant\n         * is leaving the call.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.TrackUnpublished track_unpublished = 17;\n         */\n        trackUnpublished: TrackUnpublished;\n      }\n    | {\n        oneofKind: 'error';\n        /**\n         * Error is used to communicate any error related to the participant. The\n         * error code and the message explain what went wrong. Whether the participant\n         * can retry is also indicated.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.Error error = 18;\n         */\n        error: Error;\n      }\n    | {\n        oneofKind: 'callGrantsUpdated';\n        /**\n         * CallGrantsUpdated tells what tracks a participant is allowed to publish.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.CallGrantsUpdated call_grants_updated = 19;\n         */\n        callGrantsUpdated: CallGrantsUpdated;\n      }\n    | {\n        oneofKind: 'goAway';\n        /**\n         * GoAway tells the client to migrate away from the SFU it is connected to.\n         * The reason field indicates why this message was sent.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.GoAway go_away = 20;\n         */\n        goAway: GoAway;\n      }\n    | {\n        oneofKind: 'iceRestart';\n        /**\n         * ICERestart tells the client to perform ICE restart.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ICERestart ice_restart = 21;\n         */\n        iceRestart: ICERestart;\n      }\n    | {\n        oneofKind: 'pinsUpdated';\n        /**\n         * PinsChanged is sent the list of pins in the call changes. This event contains the entire list of pins.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.PinsChanged pins_updated = 22;\n         */\n        pinsUpdated: PinsChanged;\n      }\n    | {\n        oneofKind: 'callEnded';\n        /**\n         * CallEnded is sent by the SFU to the client to signal that the call has ended.\n         * The reason may specify why the call has ended.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.CallEnded call_ended = 23;\n         */\n        callEnded: CallEnded;\n      }\n    | {\n        oneofKind: 'participantUpdated';\n        /**\n         * ParticipantUpdated is sent when user data is updated\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantUpdated participant_updated = 24;\n         */\n        participantUpdated: ParticipantUpdated;\n      }\n    | {\n        oneofKind: 'participantMigrationComplete';\n        /**\n         * ParticipantMigrationComplete is sent when the participant migration is complete\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantMigrationComplete participant_migration_complete = 25;\n         */\n        participantMigrationComplete: ParticipantMigrationComplete;\n      }\n    | {\n        oneofKind: 'changePublishOptions';\n        /**\n         * ChangePublishOptions is sent to signal the change in publish options such as a new codec or simulcast layers\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ChangePublishOptions change_publish_options = 27;\n         */\n        changePublishOptions: ChangePublishOptions;\n      }\n    | {\n        oneofKind: 'inboundStateNotification';\n        /**\n         * InboundStateNotification\n         *\n         * @generated from protobuf field: stream.video.sfu.event.InboundStateNotification inbound_state_notification = 28;\n         */\n        inboundStateNotification: InboundStateNotification;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ChangePublishOptions\n */\nexport interface ChangePublishOptions {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption publish_options = 1;\n   */\n  publishOptions: PublishOption[];\n  /**\n   * @generated from protobuf field: string reason = 2;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ChangePublishOptionsComplete\n */\nexport interface ChangePublishOptionsComplete {}\n/**\n * @generated from protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */\nexport interface ParticipantMigrationComplete {}\n/**\n * @generated from protobuf message stream.video.sfu.event.PinsChanged\n */\nexport interface PinsChanged {\n  /**\n   * the list of pins in the call.\n   * Pins are ordered in descending order (most important first).\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Pin pins = 1;\n   */\n  pins: Pin[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.Error\n */\nexport interface Error {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error$;\n  /**\n   * returns the reconnect strategy to be used by the client\n   *\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy reconnect_strategy = 5;\n   */\n  reconnectStrategy: WebsocketReconnectStrategy;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ICETrickle\n */\nexport interface ICETrickle {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string ice_candidate = 2;\n   */\n  iceCandidate: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ICERestart\n */\nexport interface ICERestart {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n}\n/**\n * SfuRequest is a message that is sent from the client to the SFU.\n *\n * @generated from protobuf message stream.video.sfu.event.SfuRequest\n */\nexport interface SfuRequest {\n  /**\n   * @generated from protobuf oneof: request_payload\n   */\n  requestPayload:\n    | {\n        oneofKind: 'joinRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.JoinRequest join_request = 1;\n         */\n        joinRequest: JoinRequest;\n      }\n    | {\n        oneofKind: 'healthCheckRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.HealthCheckRequest health_check_request = 2;\n         */\n        healthCheckRequest: HealthCheckRequest;\n      }\n    | {\n        oneofKind: 'leaveCallRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.LeaveCallRequest leave_call_request = 3;\n         */\n        leaveCallRequest: LeaveCallRequest;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.LeaveCallRequest\n */\nexport interface LeaveCallRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: string reason = 2;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.HealthCheckRequest\n */\nexport interface HealthCheckRequest {}\n/**\n * @generated from protobuf message stream.video.sfu.event.HealthCheckResponse\n */\nexport interface HealthCheckResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantCount participant_count = 1;\n   */\n  participantCount?: ParticipantCount;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.TrackPublished\n */\nexport interface TrackPublished {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType type = 3;\n   */\n  type: TrackType;\n  /**\n   * Participant information here is included as an optimisation\n   * for large calls where broadcasting on every participant join\n   * is expensive. You should **NOT** assume that this will always\n   * be available though you can use it to update the participant\n   * list when it is there.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 4;\n   */\n  participant?: Participant;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.TrackUnpublished\n */\nexport interface TrackUnpublished {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType type = 3;\n   */\n  type: TrackType;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackUnpublishReason cause = 4;\n   */\n  cause: TrackUnpublishReason;\n  /**\n   * Participant information here is included as an optimisation\n   * for large calls where broadcasting on every participant join\n   * is expensive. You should **NOT** assume that this will always\n   * be available though you can use it to update the participant\n   * list when it is there.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 5;\n   */\n  participant?: Participant;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.JoinRequest\n */\nexport interface JoinRequest {\n  /**\n   * @generated from protobuf field: string token = 1;\n   */\n  token: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * user_session id can change during reconnects, this helps us to\n   * identify the user across reconnects and should remain consistent until the user explicitly\n   * disconnects, is kicked or the call is ended.\n   *\n   * @generated from protobuf field: string unified_session_id = 13;\n   */\n  unifiedSessionId: string;\n  /**\n   * dumb SDP that allow us to extract subscriber's decode codecs\n   *\n   * @generated from protobuf field: string subscriber_sdp = 3;\n   */\n  subscriberSdp: string;\n  /**\n   * @generated from protobuf field: string publisher_sdp = 8;\n   */\n  publisherSdp: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ClientDetails client_details = 4;\n   */\n  clientDetails?: ClientDetails;\n  /**\n   * Deprecated: use ReconnectDetails instead\n   *\n   * @deprecated\n   * @generated from protobuf field: stream.video.sfu.event.Migration migration = 5 [deprecated = true];\n   */\n  migration?: Migration;\n  /**\n   * Fast reconnect flag explicitly indicates that if the participant session\n   * and the associated state is still present in the SFU, the client is ready\n   * to restore the PeerConnection with an ICE restart. If the SFU replies with\n   * \"reconnected: true\" in its JoinResponse, then it is safe to perform an ICE\n   * restart or else the existing PeerConnections must be cleaned up.\n   *\n   * For the SFU, fast_reconnect:false indicates that even if it has the state\n   * cached, the client state is not in sync and hence it must be cleaned up before\n   * proceeding further.\n   *\n   * @deprecated\n   * @generated from protobuf field: bool fast_reconnect = 6 [deprecated = true];\n   */\n  fastReconnect: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.event.ReconnectDetails reconnect_details = 7;\n   */\n  reconnectDetails?: ReconnectDetails;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption preferred_publish_options = 9;\n   */\n  preferredPublishOptions: PublishOption[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.SubscribeOption preferred_subscribe_options = 10;\n   */\n  preferredSubscribeOptions: SubscribeOption[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.ClientCapability capabilities = 11;\n   */\n  capabilities: ClientCapability[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantSource source = 12;\n   */\n  source: ParticipantSource;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ReconnectDetails\n */\nexport interface ReconnectDetails {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy strategy = 1;\n   */\n  strategy: WebsocketReconnectStrategy;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo announced_tracks = 3;\n   */\n  announcedTracks: TrackInfo[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 4;\n   */\n  subscriptions: TrackSubscriptionDetails[];\n  /**\n   * @generated from protobuf field: uint32 reconnect_attempt = 5;\n   */\n  reconnectAttempt: number;\n  /**\n   * @generated from protobuf field: string from_sfu_id = 6;\n   */\n  fromSfuId: string;\n  /**\n   * only set in case of rejoin\n   *\n   * @generated from protobuf field: string previous_session_id = 7;\n   */\n  previousSessionId: string;\n  /**\n   * the reconnect reason\n   *\n   * @generated from protobuf field: string reason = 8;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.Migration\n */\nexport interface Migration {\n  /**\n   * @generated from protobuf field: string from_sfu_id = 1;\n   */\n  fromSfuId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo announced_tracks = 2;\n   */\n  announcedTracks: TrackInfo[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 3;\n   */\n  subscriptions: TrackSubscriptionDetails[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.JoinResponse\n */\nexport interface JoinResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallState call_state = 1;\n   */\n  callState?: CallState;\n  /**\n   * @generated from protobuf field: bool reconnected = 2;\n   */\n  reconnected: boolean;\n  /**\n   * @generated from protobuf field: int32 fast_reconnect_deadline_seconds = 3;\n   */\n  fastReconnectDeadlineSeconds: number;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption publish_options = 4;\n   */\n  publishOptions: PublishOption[];\n}\n/**\n * ParticipantJoined is fired when a user joins a call\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantJoined\n */\nexport interface ParticipantJoined {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * ParticipantJoined is fired when a user leaves a call\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantLeft\n */\nexport interface ParticipantLeft {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * ParticipantUpdated is fired when user data is updated\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantUpdated\n */\nexport interface ParticipantUpdated {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * SubscriberOffer is sent when the SFU adds tracks to a subscription\n *\n * @generated from protobuf message stream.video.sfu.event.SubscriberOffer\n */\nexport interface SubscriberOffer {\n  /**\n   * @generated from protobuf field: bool ice_restart = 1;\n   */\n  iceRestart: boolean;\n  /**\n   * @generated from protobuf field: string sdp = 2;\n   */\n  sdp: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.PublisherAnswer\n */\nexport interface PublisherAnswer {\n  /**\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n}\n/**\n * ConnectionQuality is sent to inform about connection quality changes\n * eg. thierry's connection is not good -> render a red icon Zoom style\n *\n * @generated from protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */\nexport interface ConnectionQualityChanged {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.ConnectionQualityInfo connection_quality_updates = 1;\n   */\n  connectionQualityUpdates: ConnectionQualityInfo[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */\nexport interface ConnectionQualityInfo {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ConnectionQuality connection_quality = 3;\n   */\n  connectionQuality: ConnectionQuality;\n}\n/**\n * DominantSpeakerChanged is sent by the SFU to notify when there is a new dominant speaker in the call\n *\n * @generated from protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */\nexport interface DominantSpeakerChanged {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.AudioLevel\n */\nexport interface AudioLevel {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * 0.0 means complete silence, 1.0 loudest\n   *\n   * @generated from protobuf field: float level = 3;\n   */\n  level: number;\n  /**\n   * @generated from protobuf field: bool is_speaking = 4;\n   */\n  isSpeaking: boolean;\n}\n/**\n * AudioLevelChanged is sent by the SFU to notify about audio levels by user\n *\n * @generated from protobuf message stream.video.sfu.event.AudioLevelChanged\n */\nexport interface AudioLevelChanged {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.AudioLevel audio_levels = 1;\n   */\n  audioLevels: AudioLevel[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.AudioSender\n */\nexport interface AudioSender {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 4;\n   */\n  publishOptionId: number;\n}\n/**\n * VideoLayerSetting is used to specify various parameters of a particular encoding in simulcast.\n * The parameters are specified here - https://developer.mozilla.org/en-US/docs/Web/API/RTCRtpEncodingParameters\n * SDKs use these parameters sent from the server to dynamically adjust these parameters to save CPU, bandwidth\n *\n * @generated from protobuf message stream.video.sfu.event.VideoLayerSetting\n */\nexport interface VideoLayerSetting {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: bool active = 2;\n   */\n  active: boolean;\n  /**\n   * @generated from protobuf field: int32 max_bitrate = 3;\n   */\n  maxBitrate: number;\n  /**\n   * @generated from protobuf field: float scale_resolution_down_by = 4;\n   */\n  scaleResolutionDownBy: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 6;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: uint32 max_framerate = 7;\n   */\n  maxFramerate: number;\n  /**\n   * @generated from protobuf field: string scalability_mode = 8;\n   */\n  scalabilityMode: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.VideoSender\n */\nexport interface VideoSender {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.VideoLayerSetting layers = 3;\n   */\n  layers: VideoLayerSetting[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 4;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 5;\n   */\n  publishOptionId: number;\n}\n/**\n * sent to users when they need to change the quality of their video\n *\n * @generated from protobuf message stream.video.sfu.event.ChangePublishQuality\n */\nexport interface ChangePublishQuality {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.AudioSender audio_senders = 1;\n   */\n  audioSenders: AudioSender[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.VideoSender video_senders = 2;\n   */\n  videoSenders: VideoSender[];\n}\n/**\n * CallGrants is sent to users when there is a change in the call permissions\n * to publish audio, video or share the screen for a user or a role. This is\n * idempotent and can be sent at any time. Only the current_grants in the latest\n * message should be considered. In other words, this is not dependent on any\n * other message (including previous call_grants_updated message)\n *\n * When this message is received, the client (say, React component) should mute\n * the tracks which are not allowed anymore. For example, if the message has\n * grants {audio:true, video:false} while the user is publishing video, then the\n * client component should mute the video track and gray out the video button.\n * This way, the user will not be able to publish video until the permissions\n * are granted again. Also, muting the track on the client side will prevent\n * the SFU from receiving the video track and will save bandwidth.\n *\n * In simple words, this is exactly the same as muting a track on the client.\n * Here, instead of the user instructing the client, SFU would be doing it.\n *\n * @generated from protobuf message stream.video.sfu.event.CallGrantsUpdated\n */\nexport interface CallGrantsUpdated {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallGrants current_grants = 1;\n   */\n  currentGrants?: CallGrants;\n  /**\n   * @generated from protobuf field: string message = 2;\n   */\n  message: string;\n}\n/**\n * Go away is sent by the SFU to the client to signal to migrate away from the SFU.\n * The evict reason may specify why the user is being evicted.\n *\n * @generated from protobuf message stream.video.sfu.event.GoAway\n */\nexport interface GoAway {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.GoAwayReason reason = 1;\n   */\n  reason: GoAwayReason;\n}\n/**\n * CallEnded is sent by the SFU to the client to signal that the call has ended.\n * The reason may specify why the call has ended.\n *\n * @generated from protobuf message stream.video.sfu.event.CallEnded\n */\nexport interface CallEnded {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallEndedReason reason = 1;\n   */\n  reason: CallEndedReason;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.InboundStateNotification\n */\nexport interface InboundStateNotification {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.InboundVideoState inbound_video_states = 1;\n   */\n  inboundVideoStates: InboundVideoState[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.InboundVideoState\n */\nexport interface InboundVideoState {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: bool paused = 4;\n   */\n  paused: boolean;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuEvent$Type extends MessageType<SfuEvent> {\n  constructor() {\n    super('stream.video.sfu.event.SfuEvent', [\n      {\n        no: 1,\n        name: 'subscriber_offer',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => SubscriberOffer,\n      },\n      {\n        no: 2,\n        name: 'publisher_answer',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => PublisherAnswer,\n      },\n      {\n        no: 3,\n        name: 'connection_quality_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ConnectionQualityChanged,\n      },\n      {\n        no: 4,\n        name: 'audio_level_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => AudioLevelChanged,\n      },\n      {\n        no: 5,\n        name: 'ice_trickle',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ICETrickle$,\n      },\n      {\n        no: 6,\n        name: 'change_publish_quality',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ChangePublishQuality,\n      },\n      {\n        no: 10,\n        name: 'participant_joined',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantJoined,\n      },\n      {\n        no: 11,\n        name: 'participant_left',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantLeft,\n      },\n      {\n        no: 12,\n        name: 'dominant_speaker_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => DominantSpeakerChanged,\n      },\n      {\n        no: 13,\n        name: 'join_response',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => JoinResponse,\n      },\n      {\n        no: 14,\n        name: 'health_check_response',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => HealthCheckResponse,\n      },\n      {\n        no: 16,\n        name: 'track_published',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => TrackPublished,\n      },\n      {\n        no: 17,\n        name: 'track_unpublished',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => TrackUnpublished,\n      },\n      {\n        no: 18,\n        name: 'error',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => Error,\n      },\n      {\n        no: 19,\n        name: 'call_grants_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => CallGrantsUpdated,\n      },\n      {\n        no: 20,\n        name: 'go_away',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => GoAway,\n      },\n      {\n        no: 21,\n        name: 'ice_restart',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ICERestart,\n      },\n      {\n        no: 22,\n        name: 'pins_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => PinsChanged,\n      },\n      {\n        no: 23,\n        name: 'call_ended',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => CallEnded,\n      },\n      {\n        no: 24,\n        name: 'participant_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantUpdated,\n      },\n      {\n        no: 25,\n        name: 'participant_migration_complete',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantMigrationComplete,\n      },\n      {\n        no: 27,\n        name: 'change_publish_options',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ChangePublishOptions,\n      },\n      {\n        no: 28,\n        name: 'inbound_state_notification',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => InboundStateNotification,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuEvent\n */\nexport const SfuEvent = new SfuEvent$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishOptions$Type extends MessageType<ChangePublishOptions> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishOptions', [\n      {\n        no: 1,\n        name: 'publish_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PublishOption,\n      },\n      { no: 2, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishOptions\n */\nexport const ChangePublishOptions = new ChangePublishOptions$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishOptionsComplete$Type extends MessageType<ChangePublishOptionsComplete> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishOptionsComplete', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishOptionsComplete\n */\nexport const ChangePublishOptionsComplete =\n  new ChangePublishOptionsComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantMigrationComplete$Type extends MessageType<ParticipantMigrationComplete> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantMigrationComplete', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */\nexport const ParticipantMigrationComplete =\n  new ParticipantMigrationComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PinsChanged$Type extends MessageType<PinsChanged> {\n  constructor() {\n    super('stream.video.sfu.event.PinsChanged', [\n      {\n        no: 1,\n        name: 'pins',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Pin,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PinsChanged\n */\nexport const PinsChanged = new PinsChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends MessageType<Error> {\n  constructor() {\n    super('stream.video.sfu.event.Error', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error$ },\n      {\n        no: 5,\n        name: 'reconnect_strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Error\n */\nexport const Error = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends MessageType<ICETrickle> {\n  constructor() {\n    super('stream.video.sfu.event.ICETrickle', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      {\n        no: 2,\n        name: 'ice_candidate',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICETrickle\n */\nexport const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestart$Type extends MessageType<ICERestart> {\n  constructor() {\n    super('stream.video.sfu.event.ICERestart', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICERestart\n */\nexport const ICERestart = new ICERestart$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuRequest$Type extends MessageType<SfuRequest> {\n  constructor() {\n    super('stream.video.sfu.event.SfuRequest', [\n      {\n        no: 1,\n        name: 'join_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => JoinRequest,\n      },\n      {\n        no: 2,\n        name: 'health_check_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => HealthCheckRequest,\n      },\n      {\n        no: 3,\n        name: 'leave_call_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => LeaveCallRequest,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuRequest\n */\nexport const SfuRequest = new SfuRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass LeaveCallRequest$Type extends MessageType<LeaveCallRequest> {\n  constructor() {\n    super('stream.video.sfu.event.LeaveCallRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.LeaveCallRequest\n */\nexport const LeaveCallRequest = new LeaveCallRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckRequest$Type extends MessageType<HealthCheckRequest> {\n  constructor() {\n    super('stream.video.sfu.event.HealthCheckRequest', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckRequest\n */\nexport const HealthCheckRequest = new HealthCheckRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckResponse$Type extends MessageType<HealthCheckResponse> {\n  constructor() {\n    super('stream.video.sfu.event.HealthCheckResponse', [\n      {\n        no: 1,\n        name: 'participant_count',\n        kind: 'message',\n        T: () => ParticipantCount,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckResponse\n */\nexport const HealthCheckResponse = new HealthCheckResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackPublished$Type extends MessageType<TrackPublished> {\n  constructor() {\n    super('stream.video.sfu.event.TrackPublished', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackPublished\n */\nexport const TrackPublished = new TrackPublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackUnpublished$Type extends MessageType<TrackUnpublished> {\n  constructor() {\n    super('stream.video.sfu.event.TrackUnpublished', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 4,\n        name: 'cause',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackUnpublishReason',\n          TrackUnpublishReason,\n          'TRACK_UNPUBLISH_REASON_',\n        ],\n      },\n      { no: 5, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackUnpublished\n */\nexport const TrackUnpublished = new TrackUnpublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinRequest$Type extends MessageType<JoinRequest> {\n  constructor() {\n    super('stream.video.sfu.event.JoinRequest', [\n      { no: 1, name: 'token', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 13,\n        name: 'unified_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 3,\n        name: 'subscriber_sdp',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 8,\n        name: 'publisher_sdp',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'client_details',\n        kind: 'message',\n        T: () => ClientDetails,\n      },\n      { no: 5, name: 'migration', kind: 'message', T: () => Migration },\n      {\n        no: 6,\n        name: 'fast_reconnect',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 7,\n        name: 'reconnect_details',\n        kind: 'message',\n        T: () => ReconnectDetails,\n      },\n      {\n        no: 9,\n        name: 'preferred_publish_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PublishOption,\n      },\n      {\n        no: 10,\n        name: 'preferred_subscribe_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => SubscribeOption,\n      },\n      {\n        no: 11,\n        name: 'capabilities',\n        kind: 'enum',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => [\n          'stream.video.sfu.models.ClientCapability',\n          ClientCapability,\n          'CLIENT_CAPABILITY_',\n        ],\n      },\n      {\n        no: 12,\n        name: 'source',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ParticipantSource',\n          ParticipantSource,\n          'PARTICIPANT_SOURCE_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinRequest\n */\nexport const JoinRequest = new JoinRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ReconnectDetails$Type extends MessageType<ReconnectDetails> {\n  constructor() {\n    super('stream.video.sfu.event.ReconnectDetails', [\n      {\n        no: 1,\n        name: 'strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n      {\n        no: 3,\n        name: 'announced_tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackInfo,\n      },\n      {\n        no: 4,\n        name: 'subscriptions',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n      {\n        no: 5,\n        name: 'reconnect_attempt',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 6,\n        name: 'from_sfu_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 7,\n        name: 'previous_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 8, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ReconnectDetails\n */\nexport const ReconnectDetails = new ReconnectDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Migration$Type extends MessageType<Migration> {\n  constructor() {\n    super('stream.video.sfu.event.Migration', [\n      {\n        no: 1,\n        name: 'from_sfu_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 2,\n        name: 'announced_tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackInfo,\n      },\n      {\n        no: 3,\n        name: 'subscriptions',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Migration\n */\nexport const Migration = new Migration$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinResponse$Type extends MessageType<JoinResponse> {\n  constructor() {\n    super('stream.video.sfu.event.JoinResponse', [\n      { no: 1, name: 'call_state', kind: 'message', T: () => CallState },\n      { no: 2, name: 'reconnected', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      {\n        no: 3,\n        name: 'fast_reconnect_deadline_seconds',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 4,\n        name: 'publish_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PublishOption,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinResponse\n */\nexport const JoinResponse = new JoinResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantJoined$Type extends MessageType<ParticipantJoined> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantJoined', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantJoined\n */\nexport const ParticipantJoined = new ParticipantJoined$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantLeft$Type extends MessageType<ParticipantLeft> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantLeft', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantLeft\n */\nexport const ParticipantLeft = new ParticipantLeft$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantUpdated$Type extends MessageType<ParticipantUpdated> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantUpdated', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantUpdated\n */\nexport const ParticipantUpdated = new ParticipantUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscriberOffer$Type extends MessageType<SubscriberOffer> {\n  constructor() {\n    super('stream.video.sfu.event.SubscriberOffer', [\n      { no: 1, name: 'ice_restart', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 2, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SubscriberOffer\n */\nexport const SubscriberOffer = new SubscriberOffer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublisherAnswer$Type extends MessageType<PublisherAnswer> {\n  constructor() {\n    super('stream.video.sfu.event.PublisherAnswer', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PublisherAnswer\n */\nexport const PublisherAnswer = new PublisherAnswer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityChanged$Type extends MessageType<ConnectionQualityChanged> {\n  constructor() {\n    super('stream.video.sfu.event.ConnectionQualityChanged', [\n      {\n        no: 1,\n        name: 'connection_quality_updates',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => ConnectionQualityInfo,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */\nexport const ConnectionQualityChanged = new ConnectionQualityChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityInfo$Type extends MessageType<ConnectionQualityInfo> {\n  constructor() {\n    super('stream.video.sfu.event.ConnectionQualityInfo', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'connection_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ConnectionQuality',\n          ConnectionQuality,\n          'CONNECTION_QUALITY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */\nexport const ConnectionQualityInfo = new ConnectionQualityInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass DominantSpeakerChanged$Type extends MessageType<DominantSpeakerChanged> {\n  constructor() {\n    super('stream.video.sfu.event.DominantSpeakerChanged', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */\nexport const DominantSpeakerChanged = new DominantSpeakerChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevel$Type extends MessageType<AudioLevel> {\n  constructor() {\n    super('stream.video.sfu.event.AudioLevel', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'level', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      { no: 4, name: 'is_speaking', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevel\n */\nexport const AudioLevel = new AudioLevel$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevelChanged$Type extends MessageType<AudioLevelChanged> {\n  constructor() {\n    super('stream.video.sfu.event.AudioLevelChanged', [\n      {\n        no: 1,\n        name: 'audio_levels',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => AudioLevel,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevelChanged\n */\nexport const AudioLevelChanged = new AudioLevelChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioSender$Type extends MessageType<AudioSender> {\n  constructor() {\n    super('stream.video.sfu.event.AudioSender', [\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 4,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioSender\n */\nexport const AudioSender = new AudioSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayerSetting$Type extends MessageType<VideoLayerSetting> {\n  constructor() {\n    super('stream.video.sfu.event.VideoLayerSetting', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'active', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 3, name: 'max_bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 4,\n        name: 'scale_resolution_down_by',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      { no: 6, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 7,\n        name: 'max_framerate',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 8,\n        name: 'scalability_mode',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoLayerSetting\n */\nexport const VideoLayerSetting = new VideoLayerSetting$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoSender$Type extends MessageType<VideoSender> {\n  constructor() {\n    super('stream.video.sfu.event.VideoSender', [\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'layers',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => VideoLayerSetting,\n      },\n      {\n        no: 4,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 5,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoSender\n */\nexport const VideoSender = new VideoSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishQuality$Type extends MessageType<ChangePublishQuality> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishQuality', [\n      {\n        no: 1,\n        name: 'audio_senders',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => AudioSender,\n      },\n      {\n        no: 2,\n        name: 'video_senders',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => VideoSender,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishQuality\n */\nexport const ChangePublishQuality = new ChangePublishQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrantsUpdated$Type extends MessageType<CallGrantsUpdated> {\n  constructor() {\n    super('stream.video.sfu.event.CallGrantsUpdated', [\n      { no: 1, name: 'current_grants', kind: 'message', T: () => CallGrants },\n      { no: 2, name: 'message', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallGrantsUpdated\n */\nexport const CallGrantsUpdated = new CallGrantsUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass GoAway$Type extends MessageType<GoAway> {\n  constructor() {\n    super('stream.video.sfu.event.GoAway', [\n      {\n        no: 1,\n        name: 'reason',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.GoAwayReason',\n          GoAwayReason,\n          'GO_AWAY_REASON_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.GoAway\n */\nexport const GoAway = new GoAway$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallEnded$Type extends MessageType<CallEnded> {\n  constructor() {\n    super('stream.video.sfu.event.CallEnded', [\n      {\n        no: 1,\n        name: 'reason',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.CallEndedReason',\n          CallEndedReason,\n          'CALL_ENDED_REASON_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallEnded\n */\nexport const CallEnded = new CallEnded$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InboundStateNotification$Type extends MessageType<InboundStateNotification> {\n  constructor() {\n    super('stream.video.sfu.event.InboundStateNotification', [\n      {\n        no: 1,\n        name: 'inbound_video_states',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => InboundVideoState,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.InboundStateNotification\n */\nexport const InboundStateNotification = new InboundStateNotification$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InboundVideoState$Type extends MessageType<InboundVideoState> {\n  constructor() {\n    super('stream.video.sfu.event.InboundVideoState', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'paused', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.InboundVideoState\n */\nexport const InboundVideoState = new InboundVideoState$Type();\n","import type {\n  Participant,\n  TrackType,\n  VideoDimension,\n} from './gen/video/sfu/models/models';\nimport type {\n  JoinCallRequest,\n  MemberResponse,\n  OwnCapability,\n  ReactionResponse,\n} from './gen/coordinator';\nimport type { StreamClient } from './coordinator/connection/client';\nimport type { Comparator } from './sorting';\nimport type { StreamVideoWriteableStateStore } from './store';\nimport { AxiosError } from 'axios';\nimport { RejectReason } from './coordinator/connection/types';\n\nexport type StreamReaction = Pick<\n  ReactionResponse,\n  'type' | 'emoji_code' | 'custom'\n>;\n\nexport enum VisibilityState {\n  UNKNOWN = 'UNKNOWN',\n  VISIBLE = 'VISIBLE',\n  INVISIBLE = 'INVISIBLE',\n}\n\nexport enum DebounceType {\n  IMMEDIATE = 20,\n  FAST = 100,\n  MEDIUM = 600,\n  SLOW = 1200,\n}\n\nexport interface StreamVideoParticipant extends Participant {\n  /**\n   * The participant's audio stream, if they are publishing audio and\n   * we have subscribed to it.\n   */\n  audioStream?: MediaStream;\n\n  /**\n   * The participant's video stream, if they are sharing their video,\n   * and we are subscribed to it.\n   */\n  videoStream?: MediaStream;\n\n  /**\n   * The participant's screen share stream, if they are sharing their screen,\n   * and we are subscribed to it.\n   */\n  screenShareStream?: MediaStream;\n\n  /**\n   * The participant's screen audio stream, if they are sharing their audio,\n   * and we are subscribed to it.\n   */\n  screenShareAudioStream?: MediaStream;\n\n  /**\n   * The preferred video dimensions for this participant.\n   * Set it to `undefined` to unsubscribe from this participant's video.\n   */\n  videoDimension?: VideoDimension;\n\n  /**\n   * The preferred screen share dimensions for this participant.\n   * Set it to `undefined` to unsubscribe from this participant's screen share.\n   */\n  screenShareDimension?: VideoDimension;\n\n  /**\n   * A list of tracks that are currently paused by our servers.\n   * Typically, a server-side pause happens when the local participant doesn't\n   * have enough bandwidth to receive all tracks. In this case, the server\n   * will pause some tracks to optimize the bandwidth usage.\n   * Once the bandwidth is restored, the server will resume the paused tracks.\n   * This is useful to avoid any unwanted video and audio artifacts.\n   */\n  pausedTracks?: TrackType[];\n\n  /**\n   * True if the participant is the local participant.\n   */\n  isLocalParticipant?: boolean;\n\n  /**\n   * The pin state of the participant.\n   */\n  pin?: ParticipantPin;\n\n  /**\n   * The last reaction this user has sent to this call.\n   * Integrators can batch/collect past reactions and show them to the UI.\n   */\n  reaction?: StreamReaction;\n\n  /**\n   * The visibility state of the participant's tracks within a defined viewport.\n   */\n  viewportVisibilityState?: Record<VideoTrackType, VisibilityState>;\n\n  /**\n   * The volume of the participant's audio stream (from 0 to 1).\n   * Set it to `undefined` to use the default volume.\n   *\n   * Note: this value is not applicable in React Native.\n   */\n  audioVolume?: number;\n}\n\nexport type VideoTrackType = 'videoTrack' | 'screenShareTrack';\nexport type AudioTrackType = 'audioTrack' | 'screenShareAudioTrack';\nexport type TrackMuteType =\n  | 'audio'\n  | 'video'\n  | 'screenshare'\n  | 'screenshare_audio';\n\n/**\n * Represents a participant's pin state.\n */\nexport type ParticipantPin = {\n  /**\n   * Set to true if the participant is pinned by the local user.\n   * False if the participant is pinned server-side, by the call moderator.\n   */\n  isLocalPin: boolean;\n\n  /**\n   * Timestamp when the participant is pinned.\n   */\n  pinnedAt: number;\n};\n\nexport type ClosedCaptionsSettings = {\n  /**\n   * The time in milliseconds to keep a closed caption in the state (visible).\n   * Default is 2700 ms.\n   */\n  visibilityDurationMs?: number;\n  /**\n   * The maximum number of closed captions to keep in the state (visible).\n   * When the maximum number is reached, the oldest closed caption is removed.\n   *\n   * Default is 2.\n   */\n  maxVisibleCaptions?: number;\n};\n\n/**\n * A partial representation of the StreamVideoParticipant.\n */\nexport type StreamVideoParticipantPatch = Partial<StreamVideoParticipant>;\n\n/**\n * A collection of {@link StreamVideoParticipantPatch} organized by sessionId.\n */\nexport type StreamVideoParticipantPatches = {\n  [sessionId: string]: StreamVideoParticipantPatch;\n};\n\nexport type SubscriptionChange = {\n  /**\n   * The video dimension to request.\n   * Set it to `undefined` in case you want to unsubscribe.\n   */\n  dimension: VideoDimension | undefined;\n};\n\nexport type SubscriptionChanges = {\n  [sessionId: string]: SubscriptionChange;\n};\n\n/**\n * A preferred codec to use when publishing a video or audio track.\n * @internal\n */\nexport type PreferredCodec = 'vp8' | 'h264' | 'vp9' | 'av1';\n\n/**\n * A collection of track publication options.\n * @internal\n */\nexport type ClientPublishOptions = {\n  /**\n   * The preferred codec to use when publishing the video stream.\n   */\n  preferredCodec?: PreferredCodec;\n  /**\n   * The fmtp line for the video codec.\n   */\n  fmtpLine?: string;\n  /**\n   * The preferred bitrate to use when publishing the video stream.\n   */\n  preferredBitrate?: number;\n  /**\n   * The maximum number of simulcast layers to use when publishing the video stream.\n   */\n  maxSimulcastLayers?: number;\n  /**\n   * The preferred subscription (incoming video stream) codec.\n   */\n  subscriberCodec?: PreferredCodec;\n  /**\n   * The fmtp line for the subscriber codec.\n   */\n  subscriberFmtpLine?: string;\n  /**\n   * Screen share settings.\n   */\n  screenShareSettings?: ScreenShareSettings;\n};\n\nexport type ScreenShareSettings = {\n  /**\n   * Limits the maximum framerate (in frames per second) of the screen share.\n   * Defaults to 30.\n   */\n  maxFramerate?: number;\n\n  /**\n   * Limits the maximum bitrate (in bits per second) of the screen share.\n   * Defaults to 3000000 (3Mbps).\n   */\n  maxBitrate?: number;\n\n  /**\n   * The content hint to use when publishing the screen share.\n   * This can be used to optimize the video quality for different types of content.\n   *\n   * Defaults to '' (no hint, browser's default behavior).\n   * Use 'motion' for video content, 'detail' for presentations or documents, and 'text' for text-heavy content.\n   *\n   * Please read the documentation for more information on content hints:\n   * - https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack/contentHint\n   */\n  contentHint?: '' | 'motion' | 'detail' | 'text';\n};\n\nexport type CallLeaveOptions = {\n  /**\n   * If true, the caller will get a `call.rejected` event.\n   * Has an effect only if the call is in the `ringing` state.\n   */\n  reject?: boolean;\n\n  /**\n   * The reason for leaving the call.\n   * This will be sent as the `reason` field in the `call.rejected` event.\n   */\n  reason?: RejectReason;\n\n  /**\n   * You can provide extra information about why the call is being left and/or rejected, used for logging purposes.\n   */\n  message?: string;\n};\n\n/**\n * The options to pass to {@link Call} constructor.\n */\nexport type CallConstructor = {\n  /**\n   * The streamClient instance to use.\n   */\n  streamClient: StreamClient;\n\n  /**\n   * The Call type.\n   */\n  type: string;\n\n  /**\n   * The Call ID.\n   */\n  id: string;\n\n  /**\n   * An optional list of {@link MemberResponse} from the backend.\n   * If provided, the call will be initialized with the data from this object.\n   * This is useful when initializing a new \"pending call\" from an event.\n   */\n  members?: MemberResponse[];\n\n  /**\n   * An optional list of {@link OwnCapability} coming from the backed.\n   * If provided, the call will be initialized with the data from this object.\n   * This is useful when initializing a new \"pending call\" from an event.\n   */\n  ownCapabilities?: OwnCapability[];\n\n  /**\n   * Flags the call as a ringing call.\n   * @default false\n   */\n  ringing?: boolean;\n\n  /**\n   * Set to true if this call instance should receive updates from the backend.\n   *\n   * @default false.\n   */\n  watching?: boolean;\n\n  /**\n   * The default comparator to use when sorting participants.\n   */\n  sortParticipantsBy?: Comparator<StreamVideoParticipant>;\n\n  /**\n   * The state store of the client\n   */\n  clientStore: StreamVideoWriteableStateStore;\n};\n\n/**\n * The options to pass to {@link Call.join} method.\n */\nexport type JoinCallData = Omit<JoinCallRequest, 'location'>;\nexport { AxiosError };\n","// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\nimport type {\n  RpcOptions,\n  RpcTransport,\n  ServiceInfo,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport { stackIntercept } from '@protobuf-ts/runtime-rpc';\nimport type {\n  ICERestartRequest,\n  ICERestartResponse,\n  ICETrickleResponse,\n  SendAnswerRequest,\n  SendAnswerResponse,\n  SendStatsRequest,\n  SendStatsResponse,\n  SetPublisherRequest,\n  SetPublisherResponse,\n  StartNoiseCancellationRequest,\n  StartNoiseCancellationResponse,\n  StopNoiseCancellationRequest,\n  StopNoiseCancellationResponse,\n  UpdateMuteStatesRequest,\n  UpdateMuteStatesResponse,\n  UpdateSubscriptionsRequest,\n  UpdateSubscriptionsResponse,\n} from './signal';\nimport { SignalServer } from './signal';\nimport type { ICETrickle } from '../models/models';\n\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */\nexport interface ISignalServerClient {\n  /**\n   * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n   *\n   * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n   */\n  setPublisher(\n    input: SetPublisherRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SetPublisherRequest, SetPublisherResponse>;\n  /**\n   * answer is sent by the client to the SFU after receiving a subscriber_offer.\n   *\n   * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n   */\n  sendAnswer(\n    input: SendAnswerRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendAnswerRequest, SendAnswerResponse>;\n  /**\n   * SendICECandidate sends an ICE candidate to the client\n   *\n   * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n   */\n  iceTrickle(\n    input: ICETrickle,\n    options?: RpcOptions,\n  ): UnaryCall<ICETrickle, ICETrickleResponse>;\n  /**\n   * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n   * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n   *\n   * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n   */\n  updateSubscriptions(\n    input: UpdateSubscriptionsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateSubscriptionsRequest, UpdateSubscriptionsResponse>;\n  /**\n   * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n   */\n  updateMuteStates(\n    input: UpdateMuteStatesRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateMuteStatesRequest, UpdateMuteStatesResponse>;\n  /**\n   * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n   */\n  iceRestart(\n    input: ICERestartRequest,\n    options?: RpcOptions,\n  ): UnaryCall<ICERestartRequest, ICERestartResponse>;\n  /**\n   * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n   */\n  sendStats(\n    input: SendStatsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendStatsRequest, SendStatsResponse>;\n  /**\n   * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n   */\n  startNoiseCancellation(\n    input: StartNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StartNoiseCancellationRequest, StartNoiseCancellationResponse>;\n  /**\n   * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n   */\n  stopNoiseCancellation(\n    input: StopNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StopNoiseCancellationRequest, StopNoiseCancellationResponse>;\n}\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */\nexport class SignalServerClient implements ISignalServerClient, ServiceInfo {\n  typeName = SignalServer.typeName;\n  methods = SignalServer.methods;\n  options = SignalServer.options;\n  constructor(private readonly _transport: RpcTransport) {}\n  /**\n   * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n   *\n   * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n   */\n  setPublisher(\n    input: SetPublisherRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SetPublisherRequest, SetPublisherResponse> {\n    const method = this.methods[0],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SetPublisherRequest, SetPublisherResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * answer is sent by the client to the SFU after receiving a subscriber_offer.\n   *\n   * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n   */\n  sendAnswer(\n    input: SendAnswerRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendAnswerRequest, SendAnswerResponse> {\n    const method = this.methods[1],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SendAnswerRequest, SendAnswerResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * SendICECandidate sends an ICE candidate to the client\n   *\n   * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n   */\n  iceTrickle(\n    input: ICETrickle,\n    options?: RpcOptions,\n  ): UnaryCall<ICETrickle, ICETrickleResponse> {\n    const method = this.methods[2],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<ICETrickle, ICETrickleResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n   * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n   *\n   * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n   */\n  updateSubscriptions(\n    input: UpdateSubscriptionsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateSubscriptionsRequest, UpdateSubscriptionsResponse> {\n    const method = this.methods[3],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      UpdateSubscriptionsRequest,\n      UpdateSubscriptionsResponse\n    >('unary', this._transport, method, opt, input);\n  }\n  /**\n   * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n   */\n  updateMuteStates(\n    input: UpdateMuteStatesRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateMuteStatesRequest, UpdateMuteStatesResponse> {\n    const method = this.methods[4],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<UpdateMuteStatesRequest, UpdateMuteStatesResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n   */\n  iceRestart(\n    input: ICERestartRequest,\n    options?: RpcOptions,\n  ): UnaryCall<ICERestartRequest, ICERestartResponse> {\n    const method = this.methods[5],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<ICERestartRequest, ICERestartResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n   */\n  sendStats(\n    input: SendStatsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendStatsRequest, SendStatsResponse> {\n    const method = this.methods[6],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SendStatsRequest, SendStatsResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n   */\n  startNoiseCancellation(\n    input: StartNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StartNoiseCancellationRequest, StartNoiseCancellationResponse> {\n    const method = this.methods[7],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      StartNoiseCancellationRequest,\n      StartNoiseCancellationResponse\n    >('unary', this._transport, method, opt, input);\n  }\n  /**\n   * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n   */\n  stopNoiseCancellation(\n    input: StopNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StopNoiseCancellationRequest, StopNoiseCancellationResponse> {\n    const method = this.methods[8],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      StopNoiseCancellationRequest,\n      StopNoiseCancellationResponse\n    >('unary', this._transport, method, opt, input);\n  }\n}\n","import {\n  MethodInfo,\n  NextUnaryFn,\n  RpcInterceptor,\n  RpcOptions,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport {\n  TwirpFetchTransport,\n  TwirpOptions,\n} from '@protobuf-ts/twirp-transport';\nimport { SignalServerClient } from '../gen/video/sfu/signal_rpc/signal.client';\nimport type { Trace } from '../stats';\nimport type { SfuResponseWithError } from './retryable';\nimport type { ScopedLogger } from '../logger';\nimport type { LogLevel } from '@stream-io/logger';\n\nconst defaultOptions: TwirpOptions = {\n  baseUrl: '',\n  sendJson: true,\n  timeout: 5 * 1000, // ms.\n  jsonOptions: {\n    ignoreUnknownFields: true,\n  },\n};\n\nexport const withHeaders = (\n  headers: Record<string, string>,\n): RpcInterceptor => {\n  return {\n    interceptUnary(\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall {\n      options.meta = { ...options.meta, ...headers };\n      return next(method, input, options);\n    },\n  };\n};\n\nexport const withRequestLogger = (\n  logger: ScopedLogger,\n  level: LogLevel,\n): RpcInterceptor => {\n  return {\n    interceptUnary: (\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall => {\n      const invocation = next(method, input, options);\n      logger[level](`Invoked SFU RPC method ${method.name}`, {\n        request: invocation.request,\n        headers: invocation.requestHeaders,\n        response: invocation.response,\n      });\n\n      return invocation;\n    },\n  };\n};\n\nexport const withRequestTracer = (trace: Trace): RpcInterceptor => {\n  type RpcMethodNames = {\n    [K in keyof SignalServerClient as Capitalize<K>]: boolean;\n  };\n\n  const traceError = (name: string, input: object, err: unknown) =>\n    trace(`${name}OnFailure`, [err, input]);\n\n  const exclusions: Record<string, boolean | undefined> = {\n    SendStats: true,\n  } satisfies Partial<RpcMethodNames>;\n  return {\n    interceptUnary(\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall {\n      if (exclusions[method.name as keyof RpcMethodNames]) {\n        return next(method, input, options);\n      }\n\n      trace(method.name, input);\n      const unaryCall = next(method, input, options);\n      unaryCall.then(\n        (invocation) => {\n          const err = (invocation.response as SfuResponseWithError)?.error;\n          if (err) traceError(method.name, input, err);\n        },\n        (err) => traceError(method.name, input, err),\n      );\n      return unaryCall;\n    },\n  };\n};\n\n/**\n * Creates new SignalServerClient instance.\n *\n * @param options the twirp options.\n */\nexport const createSignalClient = (options?: TwirpOptions) => {\n  const transport = new TwirpFetchTransport({\n    ...defaultOptions,\n    ...options,\n  });\n\n  return new SignalServerClient(transport);\n};\n","import type { AxiosResponse } from 'axios';\nimport type { APIErrorResponse } from './types';\nimport type { ConnectionErrorEvent } from '../../gen/coordinator';\n\nexport const sleep = (m: number) => new Promise((r) => setTimeout(r, m));\n\nexport function isFunction<T>(value: Function | T): value is Function {\n  return (\n    value &&\n    (Object.prototype.toString.call(value) === '[object Function]' ||\n      'function' === typeof value ||\n      value instanceof Function)\n  );\n}\n\n/**\n * A map of known error codes.\n */\nexport const KnownCodes = {\n  TOKEN_EXPIRED: 40,\n  WS_CLOSED_SUCCESS: 1000,\n};\n\n/**\n * retryInterval - A retry interval which increases acc to number of failures\n *\n * @return {number} Duration to wait in milliseconds\n */\nexport function retryInterval(numberOfFailures: number): number {\n  // try to reconnect in 0.25-5 seconds (random to spread out the load from failures)\n  const max = Math.min(500 + numberOfFailures * 2000, 5000);\n  const min = Math.min(Math.max(250, (numberOfFailures - 1) * 2000), 5000);\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction hex(bytes: Uint8Array): string {\n  let s = '';\n  for (let i = 0; i < bytes.length; i++) {\n    s += bytes[i].toString(16).padStart(2, '0');\n  }\n  return s;\n}\n\n// https://tools.ietf.org/html/rfc4122\nexport function generateUUIDv4() {\n  const bytes = getRandomBytes(16);\n  bytes[6] = (bytes[6] & 0x0f) | 0x40; // version\n  bytes[8] = (bytes[8] & 0xbf) | 0x80; // variant\n\n  return [\n    hex(bytes.subarray(0, 4)),\n    hex(bytes.subarray(4, 6)),\n    hex(bytes.subarray(6, 8)),\n    hex(bytes.subarray(8, 10)),\n    hex(bytes.subarray(10, 16)),\n  ].join('-');\n}\n\nconst getRandomValues = (() => {\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    return crypto.getRandomValues.bind(crypto);\n  }\n  return function getRandomValuesWithMathRandom(bytes: Uint8Array): void {\n    const max = Math.pow(2, (8 * bytes.byteLength) / bytes.length);\n    for (let i = 0; i < bytes.length; i++) {\n      bytes[i] = Math.random() * max;\n    }\n  };\n})();\n\nfunction getRandomBytes(length: number): Uint8Array {\n  const bytes = new Uint8Array(length);\n  getRandomValues(bytes);\n  return bytes;\n}\n\n/**\n * listenForConnectionChanges - Adds an event listener fired on browser going online or offline\n */\nexport function addConnectionEventListeners(cb: (e: Event) => void) {\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    window.addEventListener('offline', cb);\n    window.addEventListener('online', cb);\n  }\n}\n\nexport function removeConnectionEventListeners(cb: (e: Event) => void) {\n  if (typeof window !== 'undefined' && window.removeEventListener) {\n    window.removeEventListener('offline', cb);\n    window.removeEventListener('online', cb);\n  }\n}\n\nexport function isErrorResponse(\n  res: AxiosResponse<unknown>,\n): res is AxiosResponse<APIErrorResponse> {\n  return !res.status || res.status < 200 || 300 <= res.status;\n}\n\n// Type guards to check WebSocket error type\nexport function isCloseEvent(\n  res: CloseEvent | ConnectionErrorEvent,\n): res is CloseEvent {\n  return (res as CloseEvent).code !== undefined;\n}\n","/**\n * Checks whether we are using React Native\n */\nexport const isReactNative = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.product?.toLowerCase() === 'reactnative';\n};\n","import * as scopedLogger from '@stream-io/logger';\nimport { isReactNative } from './helpers/platforms';\nimport type { Logger } from './coordinator/connection/types';\n\nexport const logToConsole: Logger = (logLevel, message, ...args) => {\n  let logMethod;\n  switch (logLevel) {\n    case 'error':\n      if (isReactNative()) {\n        message = `ERROR: ${message}`;\n        logMethod = console.info;\n        break;\n      }\n      logMethod = console.error;\n      break;\n    case 'warn':\n      if (isReactNative()) {\n        message = `WARN: ${message}`;\n        logMethod = console.info;\n        break;\n      }\n      logMethod = console.warn;\n      break;\n    case 'info':\n      logMethod = console.info;\n      break;\n    case 'trace':\n      logMethod = console.trace;\n      break;\n    default:\n      logMethod = console.log;\n      break;\n  }\n\n  logMethod(message, ...args);\n};\n\n/**\n * @internal\n */\nexport type ScopedLogger = scopedLogger.Logger;\n\nexport { LogLevelEnum } from '@stream-io/logger';\nexport type { LogLevel, Sink } from '@stream-io/logger';\n\nexport const videoLoggerSystem = scopedLogger.createLoggerSystem();\n","import {\n  FinishedUnaryCall,\n  RpcError,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport { TwirpErrorCode } from '@protobuf-ts/twirp-transport';\nimport { retryInterval, sleep } from '../coordinator/connection/utils';\nimport { Error as SfuError } from '../gen/video/sfu/models/models';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * An internal interface which asserts that \"retryable\" SFU responses\n * contain a field called \"error\".\n * Ideally, this should be coming from the Protobuf definitions.\n */\nexport interface SfuResponseWithError {\n  /**\n   * An optional error field which should be present in all SFU responses.\n   */\n  error?: SfuError;\n}\n\n/**\n * Creates a closure which wraps the given RPC call and retries invoking\n * the RPC until it succeeds or the maximum number of retries is reached.\n *\n * For each retry, there would be a delay to avoid request bursts toward the SFU.\n *\n * @param rpc the closure around the RPC call to execute.\n * @param signal the signal to abort the RPC call and retries loop.\n */\nexport const retryable = async <\n  I extends object,\n  O extends SfuResponseWithError,\n>(\n  rpc: () => UnaryCall<I, O>,\n  signal?: AbortSignal,\n): Promise<FinishedUnaryCall<I, O>> => {\n  let attempt = 0;\n  let result: FinishedUnaryCall<I, O> | undefined = undefined;\n  do {\n    if (attempt > 0) await sleep(retryInterval(attempt));\n    try {\n      result = await rpc();\n    } catch (err) {\n      const isRequestCancelled =\n        err instanceof RpcError &&\n        err.code === TwirpErrorCode[TwirpErrorCode.cancelled];\n      const isAborted = signal?.aborted ?? false;\n      if (isRequestCancelled || isAborted) throw err;\n      videoLoggerSystem\n        .getLogger('sfu-client', { tags: ['rpc'] })\n        .debug(`rpc failed (${attempt})`, err);\n      attempt++;\n    }\n  } while (!result || result.response.error?.shouldRetry);\n\n  return result;\n};\n","/**\n * Returns a generic SDP for the given direction.\n * We use this SDP to send it as part of our JoinRequest so that the SFU\n * can use it to determine the client's codec capabilities.\n *\n * @param direction the direction of the transceiver.\n */\nexport const getGenericSdp = async (direction: RTCRtpTransceiverDirection) => {\n  const tempPc = new RTCPeerConnection();\n  tempPc.addTransceiver('video', { direction });\n  tempPc.addTransceiver('audio', { direction });\n\n  const offer = await tempPc.createOffer();\n  const sdp = offer.sdp ?? '';\n\n  tempPc.getTransceivers().forEach((t) => {\n    t.stop?.();\n  });\n  tempPc.close();\n  return sdp;\n};\n\n/**\n * Returns whether the codec is an SVC codec.\n *\n * @param codecOrMimeType the codec to check.\n */\nexport const isSvcCodec = (codecOrMimeType: string | undefined) => {\n  if (!codecOrMimeType) return false;\n  codecOrMimeType = codecOrMimeType.toLowerCase();\n  return (\n    codecOrMimeType === 'vp9' ||\n    codecOrMimeType === 'av1' ||\n    codecOrMimeType === 'video/vp9' ||\n    codecOrMimeType === 'video/av1'\n  );\n};\n","import { CallEventListener, EventTypes } from '../coordinator/connection/types';\nimport type { SfuEvent } from '../gen/video/sfu/event/events';\nimport { videoLoggerSystem } from '../logger';\n\nexport type SfuEventKinds = NonNullable<SfuEvent['eventPayload']['oneofKind']>;\nexport type AllSfuEvents = {\n  [K in SfuEventKinds]: K extends keyof Extract<\n    SfuEvent['eventPayload'],\n    { oneofKind: K }\n  >\n    ? Extract<SfuEvent['eventPayload'], { oneofKind: K }>[K]\n    : never;\n};\n\nexport type DispatchableMessage<K extends SfuEventKinds> = {\n  eventPayload: {\n    oneofKind: K;\n  } & {\n    [Key in K]: AllSfuEvents[Key];\n  };\n};\n\nconst sfuEventKinds: Record<SfuEventKinds, undefined> = {\n  subscriberOffer: undefined,\n  publisherAnswer: undefined,\n  connectionQualityChanged: undefined,\n  audioLevelChanged: undefined,\n  iceTrickle: undefined,\n  changePublishQuality: undefined,\n  participantJoined: undefined,\n  participantLeft: undefined,\n  dominantSpeakerChanged: undefined,\n  joinResponse: undefined,\n  healthCheckResponse: undefined,\n  trackPublished: undefined,\n  trackUnpublished: undefined,\n  error: undefined,\n  callGrantsUpdated: undefined,\n  goAway: undefined,\n  iceRestart: undefined,\n  pinsUpdated: undefined,\n  callEnded: undefined,\n  participantUpdated: undefined,\n  participantMigrationComplete: undefined,\n  changePublishOptions: undefined,\n  inboundStateNotification: undefined,\n};\n\nexport const isSfuEvent = (\n  eventName: SfuEventKinds | EventTypes,\n): eventName is SfuEventKinds => {\n  return Object.prototype.hasOwnProperty.call(sfuEventKinds, eventName);\n};\n\nexport class Dispatcher {\n  private readonly logger = videoLoggerSystem.getLogger('Dispatcher');\n  private subscribers: Partial<\n    Record<SfuEventKinds, CallEventListener<any>[] | undefined>\n  > = {};\n\n  dispatch = <K extends SfuEventKinds>(\n    message: DispatchableMessage<K>,\n    tag: string = '0',\n  ) => {\n    const eventKind = message.eventPayload.oneofKind;\n    if (!eventKind) return;\n    const payload = message.eventPayload[eventKind];\n    this.logger.debug(`Dispatching ${eventKind}, tag=${tag}`, payload);\n    const listeners = this.subscribers[eventKind];\n    if (!listeners) return;\n    for (const fn of listeners) {\n      try {\n        fn(payload);\n      } catch (e) {\n        this.logger.warn('Listener failed with error', e);\n      }\n    }\n  };\n\n  on = <E extends keyof AllSfuEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    (this.subscribers[eventName] ??= []).push(fn as never);\n    return () => {\n      this.off(eventName, fn);\n    };\n  };\n\n  off = <E extends keyof AllSfuEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    this.subscribers[eventName] = (this.subscribers[eventName] || []).filter(\n      (f) => f !== fn,\n    );\n  };\n}\n","import { ReplaySubject } from 'rxjs';\nimport { ICETrickle } from '../gen/video/sfu/event/events';\nimport { PeerType } from '../gen/video/sfu/models/models';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * A buffer for ICE Candidates. Used for ICE Trickle:\n * - https://bloggeek.me/webrtcglossary/trickle-ice/\n */\nexport class IceTrickleBuffer {\n  readonly subscriberCandidates = new ReplaySubject<RTCIceCandidateInit>();\n  readonly publisherCandidates = new ReplaySubject<RTCIceCandidateInit>();\n\n  push = (iceTrickle: ICETrickle) => {\n    const iceCandidate = toIceCandidate(iceTrickle);\n    if (!iceCandidate) return;\n\n    if (iceTrickle.peerType === PeerType.SUBSCRIBER) {\n      this.subscriberCandidates.next(iceCandidate);\n    } else if (iceTrickle.peerType === PeerType.PUBLISHER_UNSPECIFIED) {\n      this.publisherCandidates.next(iceCandidate);\n    } else {\n      const logger = videoLoggerSystem.getLogger('sfu-client');\n      logger.warn(`ICETrickle, Unknown peer type`, iceTrickle);\n    }\n  };\n\n  dispose = () => {\n    this.subscriberCandidates.complete();\n    this.publisherCandidates.complete();\n  };\n}\n\nconst toIceCandidate = (\n  iceTrickle: ICETrickle,\n): RTCIceCandidateInit | undefined => {\n  try {\n    return JSON.parse(iceTrickle.iceCandidate);\n  } catch (e) {\n    const logger = videoLoggerSystem.getLogger('sfu-client');\n    logger.error(`Failed to parse ICE Trickle`, e, iceTrickle);\n    return undefined;\n  }\n};\n","interface PendingPromise {\n  promise: Promise<unknown>;\n  onContinued: () => void;\n}\n\ntype AsyncWrapper<P extends unknown[], T> = (\n  tag: string | symbol,\n  cb: (...args: P) => Promise<T>,\n) => {\n  cb: () => Promise<T>;\n  onContinued: () => void;\n};\n\n/**\n * Runs async functions serially. Useful for wrapping async actions that\n * should never run simultaneously: if marked with the same tag, functions\n * will run one after another.\n *\n * @param tag Async functions with the same tag will run serially. Async functions\n * with different tags can run in parallel.\n * @param cb Async function to run.\n * @returns Promise that resolves when async functions returns.\n */\nexport const withoutConcurrency = createRunner(wrapWithContinuationTracking);\n\n/**\n * Runs async functions serially, and cancels all other actions with the same tag\n * when a new action is scheduled. Useful for wrapping async actions that override\n * each other (e.g. enabling and disabling camera).\n *\n * If an async function hasn't started yet and was canceled, it will never run.\n * If an async function is already running and was canceled, it will be notified\n * via an abort signal passed as an argument.\n *\n * @param tag Async functions with the same tag will run serially and are canceled\n * when a new action with the same tag is scheduled.\n * @param cb Async function to run. Receives AbortSignal as the only argument.\n * @returns Promise that resolves when async functions returns. If the function didn't\n * start and was canceled, will resolve with 'canceled'. If the function started to run,\n * it's up to the function to decide how to react to cancelation.\n */\nexport const withCancellation = createRunner(wrapWithCancellation);\n\nconst pendingPromises = new Map<string | symbol, PendingPromise>();\n\nexport function hasPending(tag: string | symbol) {\n  return pendingPromises.has(tag);\n}\n\nexport async function settled(tag: string | symbol) {\n  let pending: PendingPromise | undefined;\n  while ((pending = pendingPromises.get(tag))) {\n    await pending.promise;\n  }\n}\n\n/**\n * Implements common functionality of running async functions serially, by chaining\n * their promises one after another.\n *\n * Before running, async function is \"wrapped\" using the provided wrapper. This wrapper\n * can add additional steps to run before or after the function.\n *\n * When async function is scheduled to run, the previous function is notified\n * by calling the associated onContinued callback. This behavior of this callback\n * is defined by the wrapper.\n */\nfunction createRunner<P extends unknown[], T>(wrapper: AsyncWrapper<P, T>) {\n  return function run(tag: string | symbol, cb: (...args: P) => Promise<T>) {\n    const { cb: wrapped, onContinued } = wrapper(tag, cb);\n    const pending = pendingPromises.get(tag);\n    pending?.onContinued();\n    const promise = pending\n      ? pending.promise.then(wrapped, wrapped)\n      : wrapped();\n    pendingPromises.set(tag, { promise, onContinued });\n    return promise;\n  };\n}\n\n/**\n * Wraps an async function with an additional step run after the function:\n * if the function is the last in the queue, it cleans up the whole chain\n * of promises after finishing.\n */\nfunction wrapWithContinuationTracking<T>(\n  tag: string | symbol,\n  cb: () => Promise<T>,\n) {\n  let hasContinuation = false;\n  const wrapped = () =>\n    cb().finally(() => {\n      if (!hasContinuation) {\n        pendingPromises.delete(tag);\n      }\n    });\n  const onContinued = () => (hasContinuation = true);\n  return { cb: wrapped, onContinued };\n}\n\n/**\n * Wraps an async function with additional functionalilty:\n * 1. Associates an abort signal with every function, that is passed to it\n *    as an argument. When a new function is scheduled to run after the current\n *    one, current signal is aborted.\n * 2. If current function didn't start and was aborted, in will never start.\n * 3. If the function is the last in the queue, it cleans up the whole chain\n *    of promises after finishing.\n */\nfunction wrapWithCancellation<T>(\n  tag: string | symbol,\n  cb: (signal: AbortSignal) => Promise<T | 'canceled'>,\n) {\n  const ac = new AbortController();\n  const wrapped = () => {\n    if (ac.signal.aborted) {\n      return Promise.resolve('canceled' as const);\n    }\n\n    return cb(ac.signal).finally(() => {\n      if (!ac.signal.aborted) {\n        pendingPromises.delete(tag);\n      }\n    });\n  };\n  const onContinued = () => ac.abort();\n  return { cb: wrapped, onContinued };\n}\n","import { BehaviorSubject, combineLatest, Observable, Subject } from 'rxjs';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { videoLoggerSystem } from '../logger';\n\ntype FunctionPatch<T> = (currentValue: T) => T;\n\n/**\n * A value or a function which takes the current value and returns a new value.\n */\nexport type Patch<T> = T | FunctionPatch<T>;\n\n/**\n * Checks if the provided update is a function patch.\n *\n * @param update the value to check.\n */\nconst isFunctionPatch = <T>(update: Patch<T>): update is FunctionPatch<T> =>\n  typeof update === 'function';\n\n/**\n * Gets the current value of an observable, or undefined if the observable has\n * not emitted a value yet.\n *\n * @param observable$ the observable to get the value from.\n */\nexport const getCurrentValue = <T>(observable$: Observable<T>) => {\n  let value!: T;\n  let err: Error | undefined = undefined;\n  combineLatest([observable$])\n    .subscribe({\n      next: ([v]) => {\n        value = v;\n      },\n      error: (e) => {\n        err = e;\n      },\n    })\n    .unsubscribe();\n\n  if (err) throw err;\n  return value;\n};\n\n/**\n * Updates the value of the provided Subject.\n * An `update` can either be a new value or a function which takes\n * the current value and returns a new value.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n * @return the updated value.\n */\nexport const setCurrentValue = <T>(subject: Subject<T>, update: Patch<T>) => {\n  const next = isFunctionPatch(update)\n    ? update(getCurrentValue(subject))\n    : update;\n\n  subject.next(next);\n  return next;\n};\n\n/**\n * Updates the value of the provided Subject and returns the previous value\n * and a function to roll back the update.\n * This is useful when you want to optimistically update a value\n * and roll back the update if an error occurs.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n */\nexport const updateValue = <T>(\n  subject: BehaviorSubject<T>,\n  update: Patch<T>,\n) => {\n  const lastValue = subject.getValue();\n  const value = setCurrentValue(subject, update);\n  return {\n    lastValue,\n    value,\n    rollback: () => setCurrentValue(subject, lastValue),\n  };\n};\n\n/**\n * Creates a subscription and returns a function to unsubscribe.\n *\n * @param observable the observable to subscribe to.\n * @param handler the handler to call when the observable emits a value.\n * @param onError an optional error handler.\n */\nexport const createSubscription = <T>(\n  observable: Observable<T>,\n  handler: (value: T) => void,\n  onError: (error: any) => void = (error) =>\n    videoLoggerSystem\n      .getLogger('RxUtils')\n      .warn('An observable emitted an error', error),\n) => {\n  const subscription = observable.subscribe({ next: handler, error: onError });\n  return () => {\n    subscription.unsubscribe();\n  };\n};\n\n/**\n * Creates a subscription and returns a function to unsubscribe. Makes sure that\n * only one async handler runs at the same time. If updates come in quicker than\n * it takes for the current handler to finish, other handlers will wait.\n *\n * @param observable the observable to subscribe to.\n * @param handler the async handler to call when the observable emits a value.\n */\nexport const createSafeAsyncSubscription = <T>(\n  observable: Observable<T>,\n  handler: (value: T) => Promise<void>,\n) => {\n  const tag = Symbol();\n  return createSubscription(observable, (value) => {\n    withoutConcurrency(tag, () => handler(value));\n  });\n};\n","/**\n * Represents the state of the current call.\n */\nexport enum CallingState {\n  /**\n   * The call is in an unknown state.\n   */\n  UNKNOWN = 'unknown',\n\n  /**\n   * The call is in an idle state.\n   */\n  IDLE = 'idle',\n\n  /**\n   * The call is in the process of ringing.\n   * (User hasn't accepted nor rejected the call yet.)\n   */\n  RINGING = 'ringing',\n\n  /**\n   * The call is in the process of joining.\n   */\n  JOINING = 'joining',\n\n  /**\n   * The call is currently active.\n   */\n  JOINED = 'joined',\n\n  /**\n   * The call has been left.\n   */\n  LEFT = 'left',\n\n  /**\n   * The call is in the process of reconnecting.\n   */\n  RECONNECTING = 'reconnecting',\n\n  /**\n   * The call is in the process of migrating from one node to another.\n   */\n  MIGRATING = 'migrating',\n\n  /**\n   * The call has failed to reconnect.\n   */\n  RECONNECTING_FAILED = 'reconnecting-failed',\n\n  /**\n   * The call is in offline mode.\n   */\n  OFFLINE = 'offline',\n}\n","import { BehaviorSubject, Observable } from 'rxjs';\nimport type { Patch } from './rxUtils';\nimport * as RxUtils from './rxUtils';\nimport { Call } from '../Call';\nimport { CallingState } from './CallingState';\nimport type { OwnUserResponse } from '../gen/coordinator';\nimport { videoLoggerSystem } from '../logger';\n\nexport class StreamVideoWriteableStateStore {\n  /**\n   * A store keeping data of a successfully connected user over WS to the coordinator server.\n   */\n  connectedUserSubject = new BehaviorSubject<OwnUserResponse | undefined>(\n    undefined,\n  );\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  callsSubject = new BehaviorSubject<Call[]>([]);\n\n  constructor() {\n    this.connectedUserSubject.subscribe(async (user) => {\n      // leave all calls when the user disconnects.\n      if (!user) {\n        const logger = videoLoggerSystem.getLogger('client-state');\n        for (const call of this.calls) {\n          if (call.state.callingState === CallingState.LEFT) continue;\n\n          logger.info(`User disconnected, leaving call: ${call.cid}`);\n          await call\n            .leave({ message: 'client.disconnectUser() called' })\n            .catch((err) => {\n              logger.error(`Error leaving call: ${call.cid}`, err);\n            });\n        }\n      }\n    });\n  }\n\n  /**\n   * The currently connected user.\n   */\n  get connectedUser(): OwnUserResponse | undefined {\n    return RxUtils.getCurrentValue(this.connectedUserSubject);\n  }\n\n  /**\n   * Sets the currently connected user.\n   *\n   * @internal\n   * @param user the user to set as connected.\n   */\n  setConnectedUser = (user: Patch<OwnUserResponse | undefined>) => {\n    return RxUtils.setCurrentValue(this.connectedUserSubject, user);\n  };\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  get calls(): Call[] {\n    return RxUtils.getCurrentValue(this.callsSubject);\n  }\n\n  /**\n   * Sets the list of {@link Call} objects created/tracked by this client.\n   * @param calls\n   */\n  setCalls = (calls: Patch<Call[]>) => {\n    return RxUtils.setCurrentValue(this.callsSubject, calls);\n  };\n\n  /**\n   * Adds a {@link Call} object to the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param call the call to add.\n   */\n  registerCall = (call: Call) => {\n    if (!this.calls.find((c) => c.cid === call.cid)) {\n      this.setCalls((calls) => [...calls, call]);\n    }\n  };\n\n  /**\n   * Removes a {@link Call} object from the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param call the call to remove\n   */\n  unregisterCall = (call: Call) => {\n    const logger = videoLoggerSystem.getLogger('client-state');\n    logger.trace(`Unregistering call: ${call.cid}`);\n    return this.setCalls((calls) => calls.filter((c) => c !== call));\n  };\n\n  /**\n   * Finds a {@link Call} object in the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param type the type of call to find.\n   * @param id the id of the call to find.\n   */\n  findCall = (type: string, id: string) => {\n    return this.calls.find((c) => c.type === type && c.id === id);\n  };\n}\n\n/**\n * A reactive store that exposes state variables in a reactive manner.\n * You can subscribe to changes of the different state variables.\n * This central store contains all the state variables related to [`StreamVideoClient`](./StreamVideClient.md) and [`Call`](./Call.md).\n */\nexport class StreamVideoReadOnlyStateStore {\n  /**\n   * Data describing a user successfully connected over WS to coordinator server.\n   */\n  connectedUser$: Observable<OwnUserResponse | undefined>;\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  calls$: Observable<Call[]>;\n\n  constructor(store: StreamVideoWriteableStateStore) {\n    // convert and expose subjects as observables\n    this.connectedUser$ = store.connectedUserSubject.asObservable();\n    this.calls$ = store.callsSubject.asObservable();\n  }\n\n  /**\n   * The current user connected over WS to the backend.\n   */\n  get connectedUser(): OwnUserResponse | undefined {\n    return RxUtils.getCurrentValue(this.connectedUser$);\n  }\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  get calls(): Call[] {\n    return RxUtils.getCurrentValue(this.calls$);\n  }\n}\n","/**\n * Defines a comparator function which can be used for sorting items.\n */\nexport type Comparator<T> = (a: T, b: T) => -1 | 0 | 1;\n\n/**\n * Creates a new combined {@link Comparator<T>} which sorts items by the given comparators.\n * The comparators are applied in the order they are given (left -> right).\n *\n * @param comparators the comparators to use for sorting.\n * @returns a combined {@link Comparator<T>}.\n */\nexport const combineComparators = <T>(\n  ...comparators: Comparator<T>[]\n): Comparator<T> => {\n  return (a, b) => {\n    for (const comparator of comparators) {\n      const result = comparator(a, b);\n      if (result !== 0) return result;\n    }\n    return 0;\n  };\n};\n\n/**\n * Creates a new comparator which sorts items in descending order.\n *\n * @example\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const byValueDesc = descending(byValue);\n *\n * @param comparator the comparator to wrap.\n */\nexport const descending = <T>(comparator: Comparator<T>): Comparator<T> => {\n  return (a, b) => comparator(b, a);\n};\n\n/**\n * Creates a new comparator which conditionally applies the given comparator.\n *\n * @example\n * const shouldSortByValue = (a, b) => a % 2 === 0; // return false to turn it off\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const comparator = conditional(shouldSortByValue)(byValue);\n *\n * @param predicate the predicate to use for determining whether to apply the comparator.\n */\nexport const conditional = <T>(predicate: (a: T, b: T) => boolean) => {\n  return (comparator: Comparator<T>): Comparator<T> => {\n    return (a, b) => {\n      if (!predicate(a, b)) return 0;\n      return comparator(a, b);\n    };\n  };\n};\n\n/**\n * A no-op comparator which always returns 0.\n */\nexport const noopComparator = <T>(): Comparator<T> => {\n  return () => 0;\n};\n","import { StreamVideoParticipant, VideoTrackType } from '../types';\nimport { TrackType } from '../gen/video/sfu/models/models';\n\n/**\n * Check if a participant has a video.\n *\n * @param p the participant to check.\n */\nexport const hasVideo = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.VIDEO);\n\n/**\n * Check if a participant has audio.\n *\n * @param p the participant to check.\n */\nexport const hasAudio = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.AUDIO);\n\n/**\n * Check if a participant is screen sharing.\n *\n * @param p the participant to check.\n */\nexport const hasScreenShare = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.SCREEN_SHARE);\n\n/**\n * Check if a participant is screen sharing audio.\n *\n * @param p the participant to check.\n */\nexport const hasScreenShareAudio = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.SCREEN_SHARE_AUDIO);\n\n/**\n * Check if the participant is pinned.\n *\n * @param p the participant.\n */\nexport const isPinned = (p: StreamVideoParticipant): boolean =>\n  !!p.pin && (p.pin.isLocalPin || p.pin.pinnedAt > 0);\n\n/**\n * Check if a participant has a paused track of the specified type.\n *\n * @param p the participant to check.\n * @param videoTrackType the type of video track to check for ('videoTrack' or 'screenShareTrack').\n */\nexport const hasPausedTrack = (\n  p: StreamVideoParticipant,\n  videoTrackType: VideoTrackType,\n): boolean => {\n  if (!p.pausedTracks) return false;\n  const trackType =\n    videoTrackType === 'videoTrack'\n      ? TrackType.VIDEO\n      : videoTrackType === 'screenShareTrack'\n        ? TrackType.SCREEN_SHARE\n        : undefined;\n\n  if (!trackType) return false;\n  return p.pausedTracks.includes(trackType);\n};\n","import { Comparator } from './';\nimport { StreamVideoParticipant } from '../types';\nimport { ParticipantSource } from '../gen/video/sfu/models/models';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasVideo,\n} from '../helpers/participantUtils';\n\n/**\n * A comparator which sorts participants by the fact that they are the dominant speaker or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const dominantSpeaker: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isDominantSpeaker && !b.isDominantSpeaker) return -1;\n  if (!a.isDominantSpeaker && b.isDominantSpeaker) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by the fact that they are speaking or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const speaking: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isSpeaking && !b.isSpeaking) return -1;\n  if (!a.isSpeaking && b.isSpeaking) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by screen sharing status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const screenSharing: Comparator<StreamVideoParticipant> = (a, b) => {\n  const hasA = hasScreenShare(a);\n  const hasB = hasScreenShare(b);\n  if (hasA && !hasB) return -1;\n  if (!hasA && hasB) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by video status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const publishingVideo: Comparator<StreamVideoParticipant> = (a, b) => {\n  const hasA = hasVideo(a);\n  const hasB = hasVideo(b);\n  if (hasA && !hasB) return -1;\n  if (!hasA && hasB) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by audio status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const publishingAudio: Comparator<StreamVideoParticipant> = (a, b) => {\n  const hasA = hasAudio(a);\n  const hasB = hasAudio(b);\n  if (hasA && !hasB) return -1;\n  if (!hasA && hasB) return 1;\n  return 0;\n};\n\n/**\n * A comparator which prioritizes participants who are pinned.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const pinned: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.pin && b.pin) {\n    if (!a.pin.isLocalPin && b.pin.isLocalPin) return -1;\n    if (a.pin.isLocalPin && !b.pin.isLocalPin) return 1;\n    if (a.pin.pinnedAt > b.pin.pinnedAt) return -1;\n    if (a.pin.pinnedAt < b.pin.pinnedAt) return 1;\n  }\n\n  if (a.pin && !b.pin) return -1;\n  if (!a.pin && b.pin) return 1;\n\n  return 0;\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who are from a specific source (e.g., WebRTC, RTMP, WHIP...).\n *\n * The priority of a source is determined by the order of the sources passed in.\n * e.g. [SRT, RTMP, WHIP] will prioritize SRT sources first, then RTMP, then WHIP.\n *\n * @param sources the sources to prioritize.\n */\nexport const withParticipantSource = (\n  ...sources: ParticipantSource[]\n): Comparator<StreamVideoParticipant> => {\n  const priority = (i: number) => (i === -1 ? Number.MAX_SAFE_INTEGER : i);\n  return (a, b) => {\n    const priorityA = priority(sources.indexOf(a.source));\n    const priorityB = priority(sources.indexOf(b.source));\n    if (priorityA < priorityB) return -1;\n    if (priorityA > priorityB) return 1;\n    return 0;\n  };\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific reaction.\n *\n * @param type the reaction type.\n */\nexport const reactionType = (\n  type: string,\n): Comparator<StreamVideoParticipant> => {\n  return (a, b) => {\n    if (a.reaction?.type === type && b.reaction?.type !== type) return -1;\n    if (a.reaction?.type !== type && b.reaction?.type === type) return 1;\n    return 0;\n  };\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific role.\n *\n * @param roles the roles to prioritize.\n */\nexport const role =\n  (...roles: string[]): Comparator<StreamVideoParticipant> =>\n  (a, b) => {\n    const hasA = hasAnyRole(a, roles);\n    const hasB = hasAnyRole(b, roles);\n    if (hasA && !hasB) return -1;\n    if (!hasA && hasB) return 1;\n    return 0;\n  };\n\n/**\n * A comparator which sorts participants by name.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const name: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.name < b.name) return -1;\n  if (a.name > b.name) return 1;\n  return 0;\n};\n\nconst hasAnyRole = (p: StreamVideoParticipant, roles: string[]) =>\n  (p.roles || []).some((r) => roles.includes(r));\n","import { StreamVideoParticipant, VisibilityState } from '../types';\nimport { combineComparators, conditional } from './comparator';\nimport { ParticipantSource } from '../gen/video/sfu/models/models';\nimport {\n  dominantSpeaker,\n  pinned,\n  publishingAudio,\n  publishingVideo,\n  reactionType,\n  role,\n  screenSharing,\n  speaking,\n  withParticipantSource,\n} from './participants';\n\n// a comparator decorator which applies the decorated comparator only if the\n// participant is invisible.\n// This ensures stable sorting when all participants are visible.\nconst ifInvisibleBy = conditional(\n  (a: StreamVideoParticipant, b: StreamVideoParticipant) =>\n    a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE,\n);\n\n/**\n * A comparator that applies the decorated comparator when a participant is\n * either invisible or its visibility state isn't known.\n * For visible participants, it ensures stable sorting.\n */\nconst ifInvisibleOrUnknownBy = conditional(\n  (a: StreamVideoParticipant, b: StreamVideoParticipant) =>\n    a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    a.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN,\n);\n\n/**\n * A comparator that prioritizes participants with video ingress sources.\n */\nconst withVideoIngressSource = withParticipantSource(\n  ParticipantSource.RTMP,\n  ParticipantSource.SRT,\n  ParticipantSource.WHIP,\n  ParticipantSource.RTSP,\n);\n\n/**\n * The default sorting preset.\n */\nexport const defaultSortPreset = combineComparators(\n  screenSharing,\n  pinned,\n  ifInvisibleBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n);\n\n/**\n * The sorting preset for speaker layout.\n */\nexport const speakerLayoutSortPreset = combineComparators(\n  screenSharing,\n  pinned,\n  dominantSpeaker,\n  ifInvisibleBy(\n    combineComparators(\n      speaking,\n      reactionType('raised-hand'),\n      withVideoIngressSource,\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n);\n\n/**\n * The sorting preset for layouts that don't render all participants but\n * instead, render them in pages.\n */\nexport const paginatedLayoutSortPreset = combineComparators(\n  pinned,\n  ifInvisibleOrUnknownBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      withVideoIngressSource,\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n);\n\n/**\n * The sorting preset for livestreams and audio rooms.\n */\nexport const livestreamOrAudioRoomSortPreset = combineComparators(\n  ifInvisibleBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      withVideoIngressSource,\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n  role('admin', 'host', 'speaker'),\n);\n","import {\n  BehaviorSubject,\n  combineLatest,\n  distinctUntilChanged,\n  map,\n  Observable,\n  ReplaySubject,\n  shareReplay,\n  startWith,\n} from 'rxjs';\nimport type { Patch } from './rxUtils';\nimport * as RxUtils from './rxUtils';\nimport { CallingState } from './CallingState';\nimport {\n  type ClosedCaptionsSettings,\n  type StreamVideoParticipant,\n  type StreamVideoParticipantPatch,\n  type StreamVideoParticipantPatches,\n  type SubscriptionChanges,\n  VideoTrackType,\n  VisibilityState,\n} from '../types';\nimport { CallStatsReport } from '../stats';\nimport {\n  BlockedUserEvent,\n  CallClosedCaption,\n  CallIngressResponse,\n  CallMemberAddedEvent,\n  CallMemberRemovedEvent,\n  CallMemberUpdatedEvent,\n  CallMemberUpdatedPermissionEvent,\n  CallReactionEvent,\n  CallResponse,\n  CallSessionParticipantCountsUpdatedEvent,\n  CallSessionParticipantJoinedEvent,\n  CallSessionParticipantLeftEvent,\n  CallSessionResponse,\n  CallSettingsResponse,\n  ClosedCaptionEvent,\n  EgressResponse,\n  MemberResponse,\n  OwnCapability,\n  ThumbnailResponse,\n  UnblockedUserEvent,\n  UpdatedCallPermissionsEvent,\n  UserResponse,\n  VideoEvent,\n} from '../gen/coordinator';\nimport { Timestamp } from '../gen/google/protobuf/timestamp';\nimport { ReconnectDetails } from '../gen/video/sfu/event/events';\nimport {\n  CallState as SfuCallState,\n  Pin,\n  TrackType,\n  CallGrants,\n} from '../gen/video/sfu/models/models';\nimport { Comparator, defaultSortPreset } from '../sorting';\nimport { hasScreenShare } from '../helpers/participantUtils';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * Returns the default egress object - when no egress data is available.\n */\nconst defaultEgress: EgressResponse = {\n  broadcasting: false,\n  hls: { playlist_url: '', status: '' },\n  rtmps: [],\n};\n\ntype OrphanedTrack = {\n  id: string;\n  trackLookupPrefix: string;\n  trackType: TrackType;\n  track: MediaStream;\n};\n\n/**\n * Holds the state of the current call.\n * @react You don't have to use this class directly, as we are exposing the state through Hooks.\n */\nexport class CallState {\n  private backstageSubject = new BehaviorSubject<boolean>(true);\n  private blockedUserIdsSubject = new BehaviorSubject<string[]>([]);\n  private createdAtSubject = new BehaviorSubject<Date>(new Date());\n  private endedAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private startsAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private updatedAtSubject = new BehaviorSubject<Date>(new Date());\n  private createdBySubject = new BehaviorSubject<UserResponse | undefined>(\n    undefined,\n  );\n  private customSubject = new BehaviorSubject<Record<string, any>>({});\n  private egressSubject = new BehaviorSubject<EgressResponse | undefined>(\n    undefined,\n  );\n  private ingressSubject = new BehaviorSubject<CallIngressResponse | undefined>(\n    undefined,\n  );\n  private recordingSubject = new BehaviorSubject<boolean>(false);\n  private sessionSubject = new BehaviorSubject<CallSessionResponse | undefined>(\n    undefined,\n  );\n  private settingsSubject = new BehaviorSubject<\n    CallSettingsResponse | undefined\n  >(undefined);\n  private transcribingSubject = new BehaviorSubject<boolean>(false);\n  private captioningSubject = new BehaviorSubject<boolean>(false);\n  private endedBySubject = new BehaviorSubject<UserResponse | undefined>(\n    undefined,\n  );\n  private thumbnailsSubject = new BehaviorSubject<\n    ThumbnailResponse | undefined\n  >(undefined);\n  private membersSubject = new BehaviorSubject<MemberResponse[]>([]);\n  private ownCapabilitiesSubject = new BehaviorSubject<OwnCapability[]>([]);\n  private callingStateSubject = new BehaviorSubject<CallingState>(\n    CallingState.UNKNOWN,\n  );\n  private startedAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private participantCountSubject = new BehaviorSubject<number>(0);\n  private anonymousParticipantCountSubject = new BehaviorSubject<number>(0);\n  private participantsSubject = new BehaviorSubject<StreamVideoParticipant[]>(\n    [],\n  );\n  private callStatsReportSubject = new BehaviorSubject<\n    CallStatsReport | undefined\n  >(undefined);\n  private closedCaptionsSubject = new BehaviorSubject<CallClosedCaption[]>([]);\n\n  // These are tracks that were delivered to the Subscriber's onTrack event\n  // that we couldn't associate with a participant yet.\n  // This happens when the participantJoined event hasn't been received yet.\n  // We keep these tracks around until we can associate them with a participant.\n  private orphanedTracks: OrphanedTrack[] = [];\n\n  private callGrantsSubject = new ReplaySubject<CallGrants>(1);\n\n  // Derived state\n\n  /**\n   * The time the call session actually started.\n   * Useful for displaying the call duration.\n   */\n  startedAt$: Observable<Date | undefined>;\n\n  /**\n   * The server-side counted number of participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  participantCount$: Observable<number>;\n\n  /**\n   * The server-side counted number of anonymous participants connected to the current call.\n   * This number excludes the regular participants.\n   */\n  anonymousParticipantCount$: Observable<number>;\n\n  /**\n   * All participants of the current call (this includes the current user and other participants as well),\n   * unsorted. This observable only updates when participants join or leave the call.\n   */\n  rawParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * All participants of the current call (this includes the current user and other participants as well),\n   * sorted according to the current `sortByParticipantsBy` setting\n   */\n  participants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * Remote participants of the current call (this includes every participant except the logged-in user).\n   */\n  remoteParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * The local participant of the current call (the logged-in user).\n   */\n  localParticipant$: Observable<StreamVideoParticipant | undefined>;\n\n  /**\n   * Pinned participants of the current call.\n   */\n  pinnedParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * The currently elected dominant speaker in the current call.\n   */\n  dominantSpeaker$: Observable<StreamVideoParticipant | undefined>;\n\n  /**\n   * Emits true whenever there is an active screen sharing session within\n   * the current call. Useful for displaying a \"screen sharing\" indicator and\n   * switching the layout to a screen sharing layout.\n   *\n   * The actual screen sharing track isn't exposed here, but can be retrieved\n   * from the list of call participants. We also don't want to be limiting\n   * to the number of share screen tracks are displayed in a call.\n   */\n  hasOngoingScreenShare$: Observable<boolean>;\n\n  /**\n   * The latest stats report of the current call.\n   * When stats gathering is enabled, this observable will emit a new value\n   * at a regular (configurable) interval.\n   *\n   * Consumers of this observable can implement their own batching logic\n   * in case they want to show historical stats data.\n   */\n  callStatsReport$: Observable<CallStatsReport | undefined>;\n\n  /**\n   * The list of members in the current call.\n   */\n  members$: Observable<MemberResponse[]>;\n\n  /**\n   * The list of capabilities of the current user.\n   */\n  ownCapabilities$: Observable<OwnCapability[]>;\n\n  /**\n   * The calling state.\n   */\n  callingState$: Observable<CallingState>;\n\n  /**\n   * The backstage state.\n   */\n  backstage$: Observable<boolean>;\n\n  /**\n   * Will provide the list of blocked user IDs.\n   */\n  blockedUserIds$: Observable<string[]>;\n\n  /**\n   * Will provide the time when this call has been created.\n   */\n  createdAt$: Observable<Date>;\n\n  /**\n   * Will provide the time when this call has been ended.\n   */\n  endedAt$: Observable<Date | undefined>;\n\n  /**\n   * Will provide the time when this call has been scheduled to start.\n   */\n  startsAt$: Observable<Date | undefined>;\n\n  /**\n   * Will provide the time when this call has been updated.\n   */\n  updatedAt$: Observable<Date>;\n\n  /**\n   * Will provide the user who created this call.\n   */\n  createdBy$: Observable<UserResponse | undefined>;\n\n  /**\n   * Will provide the custom data of this call.\n   */\n  custom$: Observable<Record<string, any>>;\n\n  /**\n   * Will provide the egress data of this call.\n   */\n  egress$: Observable<EgressResponse | undefined>;\n\n  /**\n   * Will provide the ingress data of this call.\n   */\n  ingress$: Observable<CallIngressResponse | undefined>;\n\n  /**\n   * Will provide the recording state of this call.\n   */\n  recording$: Observable<boolean>;\n\n  /**\n   * Will provide the session data of this call.\n   */\n  session$: Observable<CallSessionResponse | undefined>;\n\n  /**\n   * Will provide the settings of this call.\n   */\n  settings$: Observable<CallSettingsResponse | undefined>;\n\n  /**\n   * Will provide the transcribing state of this call.\n   */\n  transcribing$: Observable<boolean>;\n\n  /**\n   * Will provide the closed captioning state of this call.\n   */\n  captioning$: Observable<boolean>;\n\n  /**\n   * Will provide the user who ended this call.\n   */\n  endedBy$: Observable<UserResponse | undefined>;\n\n  /**\n   * Will provide the thumbnails of this call.\n   */\n  thumbnails$: Observable<ThumbnailResponse | undefined>;\n\n  /**\n   * The queue of closed captions.\n   */\n  closedCaptions$: Observable<CallClosedCaption[]>;\n\n  readonly logger = videoLoggerSystem.getLogger('CallState');\n\n  /**\n   * A list of comparators that are used to sort the participants.\n   */\n  private sortParticipantsBy = defaultSortPreset;\n\n  /**\n   * The closed captions configuration.\n   */\n  private closedCaptionsSettings: ClosedCaptionsSettings | undefined;\n  private closedCaptionsTasks = new Map<string, NodeJS.Timeout>();\n\n  private readonly eventHandlers: {\n    [EventType in VideoEvent['type']]:\n      | ((event: Extract<VideoEvent, { type: EventType }>) => void)\n      | undefined;\n  };\n\n  /**\n   * Creates a new instance of the CallState class.\n   *\n   */\n  constructor() {\n    this.rawParticipants$ = this.participantsSubject\n      .asObservable()\n      .pipe(shareReplay({ bufferSize: 1, refCount: true }));\n\n    this.participants$ = this.participantsSubject.asObservable().pipe(\n      // maintain stable-sort by mutating the participants stored\n      // in the original subject\n      map((ps) => ps.sort(this.sortParticipantsBy)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.localParticipant$ = this.participants$.pipe(\n      map((participants) => participants.find((p) => p.isLocalParticipant)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.remoteParticipants$ = this.participants$.pipe(\n      map((participants) => participants.filter((p) => !p.isLocalParticipant)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.pinnedParticipants$ = this.participants$.pipe(\n      map((participants) => participants.filter((p) => !!p.pin)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.dominantSpeaker$ = this.participants$.pipe(\n      map((participants) => participants.find((p) => p.isDominantSpeaker)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.hasOngoingScreenShare$ = this.participants$.pipe(\n      map((participants) => participants.some((p) => hasScreenShare(p))),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    // dates\n    this.createdAt$ = this.createdAtSubject.asObservable();\n    this.endedAt$ = this.endedAtSubject.asObservable();\n    this.startsAt$ = this.startsAtSubject.asObservable();\n    this.startedAt$ = this.startedAtSubject.asObservable();\n    this.updatedAt$ = this.updatedAtSubject.asObservable();\n\n    this.callStatsReport$ = this.callStatsReportSubject.asObservable();\n    this.members$ = this.membersSubject.asObservable();\n\n    // complex objects should work as streams of data\n    this.createdBy$ = this.createdBySubject.asObservable();\n    this.custom$ = this.customSubject.asObservable();\n    this.egress$ = this.egressSubject.asObservable();\n    this.ingress$ = this.ingressSubject.asObservable();\n    this.session$ = this.sessionSubject.asObservable();\n    this.settings$ = this.settingsSubject.asObservable();\n    this.endedBy$ = this.endedBySubject.asObservable();\n    this.thumbnails$ = this.thumbnailsSubject.asObservable();\n    this.closedCaptions$ = this.closedCaptionsSubject.asObservable();\n\n    /**\n     * Performs shallow comparison of two arrays.\n     * Expects primitive values: [1, 2, 3] is equal to [2, 1, 3].\n     */\n    const isShallowEqual = <T>(a: Array<T>, b: Array<T>): boolean => {\n      if (a.length !== b.length) return false;\n      for (const item of a) {\n        if (!b.includes(item)) return false;\n      }\n      for (const item of b) {\n        if (!a.includes(item)) return false;\n      }\n      return true;\n    };\n\n    /**\n     * Creates an Observable from the given subject by piping to the\n     * `distinctUntilChanged()` operator.\n     */\n    const duc = <T>(\n      subject: BehaviorSubject<T>,\n      comparator?: (a: T, b: T) => boolean,\n    ): Observable<T> => subject.pipe(distinctUntilChanged(comparator));\n\n    // primitive values should only emit once the value they hold changes\n    this.anonymousParticipantCount$ = duc(\n      this.anonymousParticipantCountSubject,\n    );\n    this.blockedUserIds$ = duc(this.blockedUserIdsSubject, isShallowEqual);\n    this.backstage$ = duc(this.backstageSubject);\n    this.callingState$ = duc(this.callingStateSubject);\n    this.ownCapabilities$ = combineLatest([\n      this.ownCapabilitiesSubject,\n      this.callGrantsSubject.pipe(startWith(undefined)),\n    ]).pipe(\n      map(([capabilities, grants]) => {\n        if (!grants) return capabilities;\n\n        const { canPublishAudio, canPublishVideo, canScreenshare } = grants;\n\n        const update = {\n          [OwnCapability.SEND_AUDIO]: canPublishAudio,\n          [OwnCapability.SEND_VIDEO]: canPublishVideo,\n          [OwnCapability.SCREENSHARE]: canScreenshare,\n        } as const;\n\n        const nextCapabilities = [...capabilities];\n\n        for (const _capability in update) {\n          const capability = _capability as keyof typeof update;\n          const allowed = update[capability];\n\n          // grants take precedence over capabilities, reconstruct the capabilities\n          if (allowed && !nextCapabilities.includes(capability)) {\n            nextCapabilities.push(capability);\n          } else if (!allowed && nextCapabilities.includes(capability)) {\n            const index = nextCapabilities.indexOf(capability);\n            nextCapabilities.splice(index, 1);\n          }\n        }\n\n        return nextCapabilities;\n      }),\n      distinctUntilChanged(isShallowEqual),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n    this.participantCount$ = duc(this.participantCountSubject);\n    this.recording$ = duc(this.recordingSubject);\n    this.transcribing$ = duc(this.transcribingSubject);\n    this.captioning$ = duc(this.captioningSubject);\n\n    this.eventHandlers = {\n      // these events are not updating the call state:\n      'call.frame_recording_ready': undefined,\n      'call.kicked_user': undefined,\n      'call.moderation_blur': undefined,\n      'call.moderation_warning': undefined,\n      'call.permission_request': undefined,\n      'call.recording_ready': undefined,\n      'call.rtmp_broadcast_failed': undefined,\n      'call.rtmp_broadcast_started': undefined,\n      'call.rtmp_broadcast_stopped': undefined,\n      'call.stats_report_ready': undefined,\n      'call.transcription_ready': undefined,\n      'call.user_feedback_submitted': undefined,\n      'call.user_muted': undefined,\n      'connection.error': undefined,\n      'connection.ok': undefined,\n      'health.check': undefined,\n      'user.updated': undefined,\n      custom: undefined,\n\n      // events that update call state:\n      'call.accepted': (e) => this.updateFromCallResponse(e.call),\n      'call.blocked_user': this.blockUser,\n      'call.closed_caption': this.updateFromClosedCaptions,\n      'call.closed_captions_failed': () => {\n        this.setCurrentValue(this.captioningSubject, false);\n      },\n      'call.closed_captions_started': () => {\n        this.setCurrentValue(this.captioningSubject, true);\n      },\n      'call.closed_captions_stopped': () => {\n        this.setCurrentValue(this.captioningSubject, false);\n      },\n      'call.created': (e) => this.updateFromCallResponse(e.call),\n      'call.deleted': (e) => this.updateFromCallResponse(e.call),\n      'call.ended': (e) => {\n        this.updateFromCallResponse(e.call);\n        this.setCurrentValue(this.endedBySubject, e.user);\n      },\n      'call.frame_recording_failed': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.frame_recording_started': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.frame_recording_stopped': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.hls_broadcasting_failed': this.updateFromHLSBroadcastingFailed,\n      'call.hls_broadcasting_started': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.hls_broadcasting_stopped': this.updateFromHLSBroadcastStopped,\n      'call.live_started': (e) => this.updateFromCallResponse(e.call),\n      'call.member_added': this.updateFromMemberAdded,\n      'call.member_removed': this.updateFromMemberRemoved,\n      'call.member_updated_permission': this.updateMembers,\n      'call.member_updated': this.updateMembers,\n      'call.notification': (e) => {\n        this.updateFromCallResponse(e.call);\n        this.setMembers(e.members);\n      },\n      'call.permissions_updated': this.updateOwnCapabilities,\n      'call.reaction_new': this.updateParticipantReaction,\n      'call.recording_started': () =>\n        this.setCurrentValue(this.recordingSubject, true),\n      'call.recording_stopped': () =>\n        this.setCurrentValue(this.recordingSubject, false),\n      'call.recording_failed': () =>\n        this.setCurrentValue(this.recordingSubject, false),\n      'call.rejected': (e) => this.updateFromCallResponse(e.call),\n      'call.ring': (e) => this.updateFromCallResponse(e.call),\n      'call.missed': (e) => this.updateFromCallResponse(e.call),\n      'call.session_ended': (e) => this.updateFromCallResponse(e.call),\n      'call.session_participant_count_updated':\n        this.updateFromSessionParticipantCountUpdate,\n      'call.session_participant_joined':\n        this.updateFromSessionParticipantJoined,\n      'call.session_participant_left': this.updateFromSessionParticipantLeft,\n      'call.session_started': (e) => this.updateFromCallResponse(e.call),\n      'call.transcription_started': () => {\n        this.setCurrentValue(this.transcribingSubject, true);\n      },\n      'call.transcription_stopped': () => {\n        this.setCurrentValue(this.transcribingSubject, false);\n      },\n      'call.transcription_failed': () => {\n        this.setCurrentValue(this.transcribingSubject, false);\n      },\n      'call.unblocked_user': this.unblockUser,\n      'call.updated': (e) => this.updateFromCallResponse(e.call),\n    };\n  }\n\n  /**\n   * Runs the cleanup tasks.\n   */\n  dispose = () => {\n    for (const [ccKey, taskId] of this.closedCaptionsTasks.entries()) {\n      clearTimeout(taskId);\n      this.closedCaptionsTasks.delete(ccKey);\n    }\n  };\n\n  /**\n   * Sets the list of criteria that are used to sort the participants.\n   * To disable sorting, you can pass `noopComparator()`.\n   *\n   * @param comparator the comparator to use to sort the participants.\n   */\n  setSortParticipantsBy = (comparator: Comparator<StreamVideoParticipant>) => {\n    this.sortParticipantsBy = comparator;\n    // trigger re-sorting of participants\n    this.setCurrentValue(this.participantsSubject, (ps) => ps);\n  };\n\n  /**\n   * Gets the current value of an observable, or undefined if the observable has\n   * not emitted a value yet.\n   *\n   * @param observable$ the observable to get the value from.\n   */\n  getCurrentValue = RxUtils.getCurrentValue;\n\n  /**\n   * Updates the value of the provided Subject.\n   * An `update` can either be a new value or a function which takes\n   * the current value and returns a new value.\n   *\n   * @internal\n   *\n   * @param subject the subject to update.\n   * @param update the update to apply to the subject.\n   * @return the updated value.\n   */\n  setCurrentValue = RxUtils.setCurrentValue;\n\n  /**\n   * The server-side counted number of participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  get participantCount() {\n    return this.getCurrentValue(this.participantCount$);\n  }\n\n  /**\n   * Sets the number of participants in the current call.\n   *\n   * @internal\n   * @param count the number of participants.\n   */\n  setParticipantCount = (count: Patch<number>) => {\n    return this.setCurrentValue(this.participantCountSubject, count);\n  };\n\n  /**\n   * The time the call session actually started.\n   * Useful for displaying the call duration.\n   */\n  get startedAt() {\n    return this.getCurrentValue(this.startedAt$);\n  }\n\n  /**\n   * Sets the time the call session actually started.\n   *\n   * @internal\n   * @param startedAt the time the call session actually started.\n   */\n  setStartedAt = (startedAt: Patch<Date | undefined>) => {\n    return this.setCurrentValue(this.startedAtSubject, startedAt);\n  };\n\n  /**\n   * Returns whether closed captions are enabled in the current call.\n   */\n  get captioning() {\n    return this.getCurrentValue(this.captioning$);\n  }\n\n  /**\n   * Sets the closed captioning state of the current call.\n   *\n   * @internal\n   * @param captioning the closed captioning state.\n   */\n  setCaptioning = (captioning: boolean) => {\n    return RxUtils.updateValue(this.captioningSubject, captioning);\n  };\n\n  /**\n   * The server-side counted number of anonymous participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  get anonymousParticipantCount() {\n    return this.getCurrentValue(this.anonymousParticipantCount$);\n  }\n\n  /**\n   * Sets the number of anonymous participants in the current call.\n   *\n   * @internal\n   * @param count the number of anonymous participants.\n   */\n  setAnonymousParticipantCount = (count: Patch<number>) => {\n    return this.setCurrentValue(this.anonymousParticipantCountSubject, count);\n  };\n\n  /**\n   * The list of participants in the current call.\n   */\n  get participants() {\n    return this.getCurrentValue(this.participants$);\n  }\n\n  /**\n   * The stable list of participants in the current call, unsorted.\n   */\n  get rawParticipants() {\n    return this.getCurrentValue(this.rawParticipants$);\n  }\n\n  /**\n   * Sets the list of participants in the current call.\n   *\n   * @internal\n   *\n   * @param participants the list of participants.\n   */\n  setParticipants = (participants: Patch<StreamVideoParticipant[]>) => {\n    return this.setCurrentValue(this.participantsSubject, participants);\n  };\n\n  /**\n   * The local participant in the current call.\n   */\n  get localParticipant() {\n    return this.getCurrentValue(this.localParticipant$);\n  }\n\n  /**\n   * The list of remote participants in the current call.\n   */\n  get remoteParticipants() {\n    return this.getCurrentValue(this.remoteParticipants$);\n  }\n\n  /**\n   * The dominant speaker in the current call.\n   */\n  get dominantSpeaker() {\n    return this.getCurrentValue(this.dominantSpeaker$);\n  }\n\n  /**\n   * The list of pinned participants in the current call.\n   */\n  get pinnedParticipants() {\n    return this.getCurrentValue(this.pinnedParticipants$);\n  }\n\n  /**\n   * Tell if there is an ongoing screen share in this call.\n   */\n  get hasOngoingScreenShare() {\n    return this.getCurrentValue(this.hasOngoingScreenShare$);\n  }\n\n  /**\n   * The calling state.\n   */\n  get callingState() {\n    return this.getCurrentValue(this.callingState$);\n  }\n\n  /**\n   * Sets the calling state.\n   *\n   * @internal\n   * @param state the new calling state.\n   */\n  setCallingState = (state: Patch<CallingState>) => {\n    return this.setCurrentValue(this.callingStateSubject, state);\n  };\n\n  /**\n   * The call stats report.\n   */\n  get callStatsReport() {\n    return this.getCurrentValue(this.callStatsReport$);\n  }\n\n  /**\n   * Returns whether the call stats report is being observed or not.\n   * @internal\n   */\n  get isCallStatsReportObserved() {\n    return this.callStatsReportSubject.observed;\n  }\n\n  /**\n   * Sets the call stats report.\n   *\n   * @internal\n   * @param report the report to set.\n   */\n  setCallStatsReport = (report: Patch<CallStatsReport | undefined>) => {\n    return this.setCurrentValue(this.callStatsReportSubject, report);\n  };\n\n  /**\n   * The members of the current call.\n   */\n  get members() {\n    return this.getCurrentValue(this.members$);\n  }\n\n  /**\n   * Sets the members of the current call.\n   *\n   * @internal\n   * @param members the members to set.\n   */\n  setMembers = (members: Patch<MemberResponse[]>) => {\n    this.setCurrentValue(this.membersSubject, members);\n  };\n\n  /**\n   * The capabilities of the current user for the current call.\n   */\n  get ownCapabilities() {\n    return this.getCurrentValue(this.ownCapabilities$);\n  }\n\n  /**\n   * Sets the own capabilities.\n   *\n   * @internal\n   * @param capabilities the capabilities to set.\n   */\n  setOwnCapabilities = (capabilities: Patch<OwnCapability[]>) => {\n    return this.setCurrentValue(this.ownCapabilitiesSubject, capabilities);\n  };\n\n  /**\n   * Sets the call grants (used for own capabilities).\n   *\n   * @internal\n   * @param grants the grants to set.\n   */\n  setCallGrants = (grants: Patch<CallGrants>) => {\n    return this.setCurrentValue(this.callGrantsSubject, grants);\n  };\n\n  /**\n   * The backstage state.\n   */\n  get backstage() {\n    return this.getCurrentValue(this.backstage$);\n  }\n\n  /**\n   * Sets the backstage state.\n   * @param backstage the backstage state.\n   */\n  setBackstage = (backstage: Patch<boolean>) => {\n    return this.setCurrentValue(this.backstageSubject, backstage);\n  };\n\n  /**\n   * Will provide the list of blocked user IDs.\n   */\n  get blockedUserIds() {\n    return this.getCurrentValue(this.blockedUserIds$);\n  }\n\n  /**\n   * Will provide the time when this call has been created.\n   */\n  get createdAt() {\n    return this.getCurrentValue(this.createdAt$);\n  }\n\n  /**\n   * Will provide the time when this call has been ended.\n   */\n  get endedAt() {\n    return this.getCurrentValue(this.endedAt$);\n  }\n\n  /**\n   * Sets the time when this call has been ended.\n   * @param endedAt the time when this call has been ended.\n   */\n  setEndedAt = (endedAt: Patch<Date | undefined>) => {\n    return this.setCurrentValue(this.endedAtSubject, endedAt);\n  };\n\n  /**\n   * Will provide the time when this call has been scheduled to start.\n   */\n  get startsAt() {\n    return this.getCurrentValue(this.startsAt$);\n  }\n\n  /**\n   * Will provide the time when this call has been updated.\n   */\n  get updatedAt() {\n    return this.getCurrentValue(this.updatedAt$);\n  }\n\n  /**\n   * Will provide the user who created this call.\n   */\n  get createdBy() {\n    return this.getCurrentValue(this.createdBy$);\n  }\n\n  /**\n   * Will provide the custom data of this call.\n   */\n  get custom() {\n    return this.getCurrentValue(this.custom$);\n  }\n\n  /**\n   * Will provide the egress data of this call.\n   */\n  get egress() {\n    return this.getCurrentValue(this.egress$);\n  }\n\n  /**\n   * Will provide the ingress data of this call.\n   */\n  get ingress() {\n    return this.getCurrentValue(this.ingress$);\n  }\n\n  /**\n   * Will provide the recording state of this call.\n   */\n  get recording() {\n    return this.getCurrentValue(this.recording$);\n  }\n\n  /**\n   * Will provide the session data of this call.\n   */\n  get session() {\n    return this.getCurrentValue(this.session$);\n  }\n\n  /**\n   * Will provide the settings of this call.\n   */\n  get settings() {\n    return this.getCurrentValue(this.settings$);\n  }\n\n  /**\n   * Will provide the transcribing state of this call.\n   */\n  get transcribing() {\n    return this.getCurrentValue(this.transcribing$);\n  }\n\n  /**\n   * Will provide the user who ended this call.\n   */\n  get endedBy() {\n    return this.getCurrentValue(this.endedBy$);\n  }\n\n  /**\n   * Will provide the thumbnails of this call, if enabled in the call settings.\n   */\n  get thumbnails() {\n    return this.getCurrentValue(this.thumbnails$);\n  }\n\n  /**\n   * Returns the current queue of closed captions.\n   */\n  get closedCaptions() {\n    return this.getCurrentValue(this.closedCaptions$);\n  }\n\n  /**\n   * Will try to find the participant with the given sessionId in the current call.\n   *\n   * @param sessionId the sessionId of the participant to find.\n   * @returns the participant with the given sessionId or undefined if not found.\n   */\n  findParticipantBySessionId = (\n    sessionId: string,\n  ): StreamVideoParticipant | undefined => {\n    return this.participants.find((p) => p.sessionId === sessionId);\n  };\n\n  /**\n   * Returns a new lookup table of participants indexed by their session ID.\n   */\n  getParticipantLookupBySessionId = () => {\n    return this.participants.reduce<{\n      [sessionId: string]: StreamVideoParticipant | undefined;\n    }>((lookupTable, participant) => {\n      lookupTable[participant.sessionId] = participant;\n      return lookupTable;\n    }, {});\n  };\n\n  /**\n   * Updates a participant in the current call identified by the given `sessionId`.\n   * If the participant can't be found, this operation is no-op.\n   *\n   * @internal\n   *\n   * @param sessionId the session ID of the participant to update.\n   * @param patch the patch to apply to the participant.\n   * @returns the updated participant or `undefined` if the participant couldn't be found.\n   */\n  updateParticipant = (\n    sessionId: string,\n    patch:\n      | StreamVideoParticipantPatch\n      | ((p: StreamVideoParticipant) => StreamVideoParticipantPatch),\n  ) => {\n    const participant = this.findParticipantBySessionId(sessionId);\n    if (!participant) {\n      this.logger.warn(`Participant with sessionId ${sessionId} not found`);\n      return;\n    }\n\n    const thePatch = typeof patch === 'function' ? patch(participant) : patch;\n    const updatedParticipant: StreamVideoParticipant = {\n      ...participant,\n      ...thePatch,\n    };\n    return this.setParticipants((participants) =>\n      participants.map((p) =>\n        p.sessionId === sessionId ? updatedParticipant : p,\n      ),\n    );\n  };\n\n  /**\n   * Updates a participant in the current call identified by the given `sessionId`.\n   * If a participant with matching `sessionId` can't be found, the provided\n   * `participant` is added to the list of participants.\n   *\n   * @param sessionId the session ID of the participant to update.\n   * @param participant the participant to update or add.\n   * @param patch an optional patch to apply to the participant.\n   */\n  updateOrAddParticipant = (\n    sessionId: string,\n    participant: StreamVideoParticipant,\n    patch?:\n      | StreamVideoParticipantPatch\n      | ((p: StreamVideoParticipant) => StreamVideoParticipantPatch),\n  ) => {\n    return this.setParticipants((participants) => {\n      let add = true;\n      const nextParticipants = participants.map((p) => {\n        if (p.sessionId === sessionId) {\n          add = false;\n          const updated: StreamVideoParticipant = { ...p, ...participant };\n          const thePatch = typeof patch === 'function' ? patch(updated) : patch;\n          return Object.assign(updated, thePatch);\n        }\n        return p;\n      });\n      if (add) nextParticipants.push(participant);\n      return nextParticipants;\n    });\n  };\n\n  /**\n   * Updates all participants in the current call whose session ID is in the given `sessionIds`.\n   * If no patches are provided, this operation is no-op.\n   *\n   * @internal\n   *\n   * @param patch the patch to apply to the participants.\n   * @returns all participants, with all patch applied.\n   */\n  updateParticipants = (patch: StreamVideoParticipantPatches) => {\n    if (Object.keys(patch).length === 0) return this.participants;\n    return this.setParticipants((participants) =>\n      participants.map((p) => {\n        const thePatch = patch[p.sessionId];\n        if (thePatch) {\n          return {\n            ...p,\n            ...thePatch,\n          };\n        }\n        return p;\n      }),\n    );\n  };\n\n  /**\n   * Update track subscription configuration for one or more participants.\n   * You have to create a subscription for each participant for all the different kinds of tracks you want to receive.\n   * You can only subscribe for tracks after the participant started publishing the given kind of track.\n   *\n   * @param trackType the kind of subscription to update.\n   * @param changes the list of subscription changes to do.\n   */\n  updateParticipantTracks = (\n    trackType: VideoTrackType,\n    changes: SubscriptionChanges,\n  ) => {\n    return this.updateParticipants(\n      Object.entries(changes).reduce<StreamVideoParticipantPatches>(\n        (acc, [sessionId, change]) => {\n          if (change.dimension) {\n            change.dimension.height = Math.ceil(change.dimension.height);\n            change.dimension.width = Math.ceil(change.dimension.width);\n          }\n          const prop: keyof StreamVideoParticipant | undefined =\n            trackType === 'videoTrack'\n              ? 'videoDimension'\n              : trackType === 'screenShareTrack'\n                ? 'screenShareDimension'\n                : undefined;\n          if (prop) {\n            acc[sessionId] = {\n              [prop]: change.dimension,\n            };\n          }\n          return acc;\n        },\n        {},\n      ),\n    );\n  };\n\n  /**\n   * Updates the call state with the data received from the server.\n   *\n   * @internal\n   *\n   * @param event the video event that our backend sent us.\n   */\n  updateFromEvent = (event: VideoEvent) => {\n    const update = this.eventHandlers[event.type];\n    if (update) {\n      update(event as any);\n    }\n  };\n\n  /**\n   * Updates the participant pinned state with server side pinning data.\n   *\n   * @param pins the latest pins from the server.\n   */\n  setServerSidePins = (pins: Pin[]) => {\n    const now = Date.now();\n    const unknownSymbol = Symbol('unknown');\n\n    // generate a lookup table of pinnedAt timestamps by userId and sessionId\n    // if there are multiple pins for the same userId, then we set the pinnedAt\n    // to `unknown` (for that userId lookup) so that we don't apply any pin for that participant\n    // this is to avoid conflicts during reconstruction of the pin state after reconnections\n    // as sessionIds can change\n    const pinnedAtByIdentifier = pins.reduce<\n      Record<string, number | undefined | typeof unknownSymbol>\n    >((lookup, pin, index) => {\n      const pinnedAt = now + (pins.length - index);\n\n      if (lookup[pin.userId]) {\n        lookup[pin.userId] = unknownSymbol;\n      } else {\n        lookup[pin.userId] = pinnedAt;\n      }\n\n      lookup[pin.sessionId] ??= pinnedAt;\n\n      return lookup;\n    }, {});\n\n    return this.setParticipants((participants) =>\n      participants.map((participant) => {\n        // first check by sessionId as that is 100% correct, then by attempt reconstruction by userId\n        const serverSidePinnedAt =\n          pinnedAtByIdentifier[participant.sessionId] ??\n          pinnedAtByIdentifier[participant.userId];\n\n        // the participant is newly pinned\n        if (\n          typeof serverSidePinnedAt === 'number' &&\n          typeof participant.pin?.pinnedAt !== 'number'\n        ) {\n          return {\n            ...participant,\n            pin: {\n              isLocalPin: false,\n              pinnedAt: serverSidePinnedAt,\n            },\n          };\n        }\n        // the participant is no longer pinned server side\n        // we need to reset the pin\n        if (\n          typeof serverSidePinnedAt !== 'number' &&\n          participant.pin?.isLocalPin === false\n        ) {\n          return {\n            ...participant,\n            pin: undefined,\n          };\n        }\n        // no changes to be applied\n        return participant;\n      }),\n    );\n  };\n\n  /**\n   * Adds an orphaned track to the call state.\n   *\n   * @internal\n   *\n   * @param orphanedTrack the orphaned track to add.\n   */\n  registerOrphanedTrack = (orphanedTrack: OrphanedTrack) => {\n    this.orphanedTracks.push(orphanedTrack);\n  };\n\n  /**\n   * Removes an orphaned track from the call state.\n   *\n   * @internal\n   *\n   * @param id the ID of the orphaned track to remove.\n   */\n  removeOrphanedTrack = (id: string) => {\n    this.orphanedTracks = this.orphanedTracks.filter((o) => o.id !== id);\n  };\n\n  /**\n   * Takes all orphaned tracks with the given track lookup prefix.\n   * All orphaned tracks with the given track lookup prefix are removed from the call state.\n   *\n   * @internal\n   *\n   * @param trackLookupPrefix the track lookup prefix to match the orphaned tracks by.\n   */\n  takeOrphanedTracks = (trackLookupPrefix: string): OrphanedTrack[] => {\n    const orphans = this.orphanedTracks.filter(\n      (orphan) => orphan.trackLookupPrefix === trackLookupPrefix,\n    );\n    if (orphans.length > 0) {\n      this.orphanedTracks = this.orphanedTracks.filter(\n        (orphan) => orphan.trackLookupPrefix !== trackLookupPrefix,\n      );\n    }\n    return orphans;\n  };\n\n  /**\n   * Updates the closed captions settings.\n   *\n   * @param config the new closed captions settings.\n   */\n  updateClosedCaptionSettings = (config: Partial<ClosedCaptionsSettings>) => {\n    this.closedCaptionsSettings = { ...this.closedCaptionsSettings, ...config };\n  };\n\n  /**\n   * Updates the call state with the data received from the server.\n   *\n   * @internal\n   *\n   * @param call the call response from the server.\n   */\n  updateFromCallResponse = (call: CallResponse) => {\n    this.setBackstage(call.backstage);\n    this.setCurrentValue(this.blockedUserIdsSubject, call.blocked_user_ids);\n    this.setCurrentValue(this.createdAtSubject, new Date(call.created_at));\n    this.setCurrentValue(this.updatedAtSubject, new Date(call.updated_at));\n    this.setCurrentValue(\n      this.startsAtSubject,\n      call.starts_at ? new Date(call.starts_at) : undefined,\n    );\n    this.setEndedAt(call.ended_at ? new Date(call.ended_at) : undefined);\n    this.setCurrentValue(this.createdBySubject, call.created_by);\n    this.setCurrentValue(this.customSubject, call.custom);\n    this.setCurrentValue(this.egressSubject, call.egress);\n    this.setCurrentValue(this.ingressSubject, call.ingress);\n    this.setCurrentValue(this.recordingSubject, call.recording);\n    const s = this.setCurrentValue(this.sessionSubject, call.session);\n    this.updateParticipantCountFromSession(s);\n    this.setCurrentValue(this.settingsSubject, call.settings);\n    this.setCurrentValue(this.transcribingSubject, call.transcribing);\n    this.setCurrentValue(this.captioningSubject, call.captioning);\n    this.setCurrentValue(this.thumbnailsSubject, call.thumbnails);\n  };\n\n  /**\n   * Updates the call state with the data received from the SFU server.\n   *\n   * @internal\n   *\n   * @param callState the call state from the SFU server.\n   * @param currentSessionId the session ID of the current user.\n   * @param reconnectDetails optional reconnect details.\n   */\n  updateFromSfuCallState = (\n    callState: SfuCallState,\n    currentSessionId: string,\n    reconnectDetails?: ReconnectDetails,\n  ) => {\n    const { participants, participantCount, startedAt, pins } = callState;\n    const localPublishedTracks =\n      reconnectDetails?.announcedTracks.map((t) => t.trackType) ?? [];\n    this.setParticipants(() => {\n      const participantLookup = this.getParticipantLookupBySessionId();\n      return participants.map<StreamVideoParticipant>((p) => {\n        // We need to preserve the local state of the participant\n        // (e.g. videoDimension, visibilityState, pinnedAt, etc.)\n        // as it doesn't exist on the server.\n        const existingParticipant = participantLookup[p.sessionId];\n        const isLocalParticipant = p.sessionId === currentSessionId;\n        return Object.assign({}, existingParticipant, p, {\n          isLocalParticipant,\n          publishedTracks: isLocalParticipant\n            ? localPublishedTracks\n            : p.publishedTracks,\n          viewportVisibilityState:\n            existingParticipant?.viewportVisibilityState ?? {\n              videoTrack: VisibilityState.UNKNOWN,\n              screenShareTrack: VisibilityState.UNKNOWN,\n            },\n        } satisfies Partial<StreamVideoParticipant>);\n      });\n    });\n\n    this.setParticipantCount(participantCount?.total || 0);\n    this.setAnonymousParticipantCount(participantCount?.anonymous || 0);\n    this.setStartedAt(startedAt ? Timestamp.toDate(startedAt) : new Date());\n    this.setServerSidePins(pins);\n  };\n\n  private updateFromMemberRemoved = (event: CallMemberRemovedEvent) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) =>\n      members.filter((m) => event.members.indexOf(m.user_id) === -1),\n    );\n  };\n\n  private updateFromMemberAdded = (event: CallMemberAddedEvent) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) => [\n      ...members,\n      ...event.members,\n    ]);\n  };\n\n  private updateFromHLSBroadcastStopped = () => {\n    this.setCurrentValue(this.egressSubject, (egress = defaultEgress) => ({\n      ...egress,\n      broadcasting: false,\n      hls: {\n        ...egress.hls!,\n        status: '',\n      },\n    }));\n  };\n\n  private updateFromHLSBroadcastingFailed = () => {\n    this.setCurrentValue(this.egressSubject, (egress = defaultEgress) => ({\n      ...egress,\n      broadcasting: false,\n      hls: {\n        ...egress.hls!,\n        status: '',\n      },\n    }));\n  };\n\n  private updateParticipantCountFromSession = (\n    session: CallSessionResponse | undefined,\n  ) => {\n    // when in JOINED state, we should use the participant count coming through\n    // the SFU healthcheck event, as it's more accurate.\n    if (!session || this.callingState === CallingState.JOINED) return;\n    const byRoleCount = Object.values(\n      session.participants_count_by_role,\n    ).reduce((total, countByRole) => total + countByRole, 0);\n    const participantCount = Math.max(byRoleCount, session.participants.length);\n    this.setParticipantCount(participantCount);\n    this.setAnonymousParticipantCount(session.anonymous_participant_count || 0);\n  };\n\n  private updateFromSessionParticipantCountUpdate = (\n    event: CallSessionParticipantCountsUpdatedEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      return {\n        ...session,\n        anonymous_participant_count: event.anonymous_participant_count,\n        participants_count_by_role: event.participants_count_by_role,\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateFromSessionParticipantLeft = (\n    event: CallSessionParticipantLeftEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      const { participants, participants_count_by_role } = session;\n      const { user, user_session_id } = event.participant;\n      return {\n        ...session,\n        participants: participants.filter(\n          (p) => p.user_session_id !== user_session_id,\n        ),\n        participants_count_by_role: {\n          ...participants_count_by_role,\n          [user.role]: Math.max(\n            0,\n            (participants_count_by_role[user.role] || 0) - 1,\n          ),\n        },\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateFromSessionParticipantJoined = (\n    event: CallSessionParticipantJoinedEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      const { participants, participants_count_by_role } = session;\n      const { user, user_session_id } = event.participant;\n      // It could happen that the backend delivers the same participant more than once.\n      // Once with the call.session_started event and once again with the\n      // call.session_participant_joined event. In this case,\n      // we should update the existing participant and prevent duplicating it.\n      let shouldInsertParticipant = true;\n      const updatedParticipants = participants.map((p) => {\n        if (p.user_session_id === user_session_id) {\n          shouldInsertParticipant = false;\n          return event.participant;\n        }\n        return p;\n      });\n      if (shouldInsertParticipant) {\n        // this is a new array, we can safely push the new participant\n        updatedParticipants.push(event.participant);\n      }\n\n      // If we are updating an existing participant, we don't want to increment\n      // the participant_by_role count.\n      const increment = shouldInsertParticipant ? 1 : 0;\n      return {\n        ...session,\n        participants: updatedParticipants,\n        participants_count_by_role: {\n          ...participants_count_by_role,\n          [user.role]: (participants_count_by_role[user.role] || 0) + increment,\n        },\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateMembers = (\n    event: CallMemberUpdatedEvent | CallMemberUpdatedPermissionEvent,\n  ) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) =>\n      members.map((member) => {\n        const memberUpdate = event.members.find(\n          (m) => m.user_id === member.user_id,\n        );\n        return memberUpdate ? memberUpdate : member;\n      }),\n    );\n  };\n\n  private updateParticipantReaction = (event: CallReactionEvent) => {\n    const { user, custom, type, emoji_code } = event.reaction;\n    this.setParticipants((participants) => {\n      return participants.map((p) => {\n        // skip if the reaction is not for this participant\n        if (p.userId !== user.id) return p;\n        // update the participant with the new reaction\n        return {\n          ...p,\n          reaction: {\n            type,\n            emoji_code,\n            custom,\n          },\n        };\n      });\n    });\n  };\n\n  private unblockUser = (event: UnblockedUserEvent) => {\n    this.setCurrentValue(this.blockedUserIdsSubject, (current) => {\n      if (!current) return current;\n      return current.filter((id) => id !== event.user.id);\n    });\n  };\n\n  private blockUser = (event: BlockedUserEvent) => {\n    this.setCurrentValue(this.blockedUserIdsSubject, (current) => [\n      ...(current || []),\n      event.user.id,\n    ]);\n  };\n\n  private updateOwnCapabilities = (event: UpdatedCallPermissionsEvent) => {\n    if (event.user.id === this.localParticipant?.userId) {\n      this.setOwnCapabilities(event.own_capabilities);\n    }\n  };\n\n  private updateFromClosedCaptions = (event: ClosedCaptionEvent) => {\n    this.setCurrentValue(this.closedCaptionsSubject, (queue) => {\n      const { closed_caption } = event;\n\n      const keyOf = (c: CallClosedCaption) => `${c.speaker_id}/${c.start_time}`;\n      const currentKey = keyOf(closed_caption);\n\n      const duplicate = queue.some((caption) => keyOf(caption) === currentKey);\n      if (duplicate) return queue;\n\n      const nextQueue = [...queue, closed_caption];\n\n      const { visibilityDurationMs = 2700, maxVisibleCaptions = 2 } =\n        this.closedCaptionsSettings || {};\n      // schedule the removal of the closed caption after the retention time\n      if (visibilityDurationMs > 0) {\n        const taskId = setTimeout(() => {\n          this.setCurrentValue(this.closedCaptionsSubject, (captions) =>\n            captions.filter((caption) => caption !== closed_caption),\n          );\n          this.closedCaptionsTasks.delete(currentKey);\n        }, visibilityDurationMs);\n        this.closedCaptionsTasks.set(currentKey, taskId);\n\n        // cancel the cleanup tasks for the closed captions that are no longer in the queue\n        for (let i = 0; i < nextQueue.length - maxVisibleCaptions; i++) {\n          const key = keyOf(nextQueue[i]);\n          const task = this.closedCaptionsTasks.get(key);\n          clearTimeout(task);\n          this.closedCaptionsTasks.delete(key);\n        }\n      }\n\n      // trim the queue\n      return nextQueue.slice(-maxVisibleCaptions);\n    });\n  };\n}\n","import { Error as SfuError } from '../gen/video/sfu/models/models';\n\n/**\n * NegotiationError is thrown when there is an error during the negotiation process.\n * It extends the built-in Error class and includes an SfuError object for more details.\n */\nexport class NegotiationError extends Error {\n  /**\n   * The SfuError object that contains details about the error.\n   */\n  error: SfuError;\n\n  /**\n   * Creates an instance of NegotiationError.\n   */\n  constructor(error: SfuError) {\n    super(error.message);\n    this.name = 'NegotiationError';\n    this.error = error;\n  }\n}\n","import { ClientDetails, Sdk, SdkType } from '../gen/video/sfu/models/models';\n\n/**\n * Flatten the stats report into an array of stats objects.\n *\n * @param report the report to flatten.\n */\nexport const flatten = (report: RTCStatsReport) => {\n  const stats: RTCStats[] = [];\n  report.forEach((s) => {\n    stats.push(s);\n  });\n  return stats;\n};\n\n/**\n * Dump the provided MediaStream into a JSON object.\n */\nexport const dumpStream = (stream: MediaStream) => ({\n  id: stream.id,\n  tracks: stream.getTracks().map((track) => ({\n    id: track.id,\n    kind: track.kind,\n    label: track.label,\n    enabled: track.enabled,\n    muted: track.muted,\n    readyState: track.readyState,\n  })),\n});\n\nexport const getSdkSignature = (clientDetails: ClientDetails) => {\n  const { sdk, ...platform } = clientDetails;\n  const sdkName = getSdkName(sdk);\n  const sdkVersion = getSdkVersion(sdk);\n\n  return {\n    sdkName,\n    sdkVersion,\n    ...platform,\n  };\n};\n\nexport const getSdkName = (sdk: Sdk | undefined) => {\n  return sdk && sdk.type === SdkType.REACT\n    ? 'stream-react'\n    : sdk && sdk.type === SdkType.REACT_NATIVE\n      ? 'stream-react-native'\n      : 'stream-js';\n};\n\nexport const getSdkVersion = (sdk: Sdk | undefined) => {\n  return sdk ? `${sdk.major}.${sdk.minor}.${sdk.patch}` : '0.0.0-development';\n};\n","import {\n  AndroidThermalState,\n  AppleThermalState,\n  ClientDetails,\n  Device,\n  OS,\n  Sdk,\n  SdkType,\n} from '../gen/video/sfu/models/models';\nimport { SendStatsRequest } from '../gen/video/sfu/signal_rpc/signal';\nimport { isReactNative } from './platforms';\nimport { UAParser } from 'ua-parser-js';\n\ntype WebRTCInfoType = {\n  version: string;\n};\n\nconst version = process.env.PKG_VERSION || '0.0.0';\nconst [major, minor, patch] = version.split('.');\n\nlet sdkInfo: Sdk | undefined = {\n  type: SdkType.PLAIN_JAVASCRIPT,\n  major,\n  minor,\n  patch,\n};\n\nlet osInfo: OS | undefined;\nlet deviceInfo: Device | undefined;\nlet webRtcInfo: WebRTCInfoType | undefined;\nlet deviceState: SendStatsRequest['deviceState'] = { oneofKind: undefined };\n\nexport const setSdkInfo = (info: Sdk) => {\n  sdkInfo = info;\n};\n\nexport const getSdkInfo = () => {\n  return sdkInfo;\n};\n\nexport const setOSInfo = (info: OS) => {\n  osInfo = info;\n};\n\nexport const setDeviceInfo = (info: Device) => {\n  deviceInfo = info;\n};\n\nexport const getWebRTCInfo = () => {\n  return webRtcInfo;\n};\n\nexport const setWebRTCInfo = (info: WebRTCInfoType) => {\n  webRtcInfo = info;\n};\n\nexport const setThermalState = (state: string) => {\n  if (!osInfo) {\n    deviceState = { oneofKind: undefined };\n    return;\n  }\n\n  if (osInfo.name === 'android') {\n    const thermalState =\n      AndroidThermalState[state as keyof typeof AndroidThermalState] ||\n      AndroidThermalState.UNSPECIFIED;\n\n    deviceState = {\n      oneofKind: 'android',\n      android: {\n        thermalState,\n        isPowerSaverMode:\n          deviceState?.oneofKind === 'android' &&\n          deviceState.android.isPowerSaverMode,\n      },\n    };\n  }\n\n  if (osInfo.name.toLowerCase() === 'ios') {\n    const thermalState =\n      AppleThermalState[state as keyof typeof AppleThermalState] ||\n      AppleThermalState.UNSPECIFIED;\n\n    deviceState = {\n      oneofKind: 'apple',\n      apple: {\n        thermalState,\n        isLowPowerModeEnabled:\n          deviceState?.oneofKind === 'apple' &&\n          deviceState.apple.isLowPowerModeEnabled,\n      },\n    };\n  }\n};\n\nexport const setPowerState = (powerMode: boolean) => {\n  if (!osInfo) {\n    deviceState = { oneofKind: undefined };\n    return;\n  }\n\n  if (osInfo.name === 'android') {\n    deviceState = {\n      oneofKind: 'android',\n      android: {\n        thermalState:\n          deviceState?.oneofKind === 'android'\n            ? deviceState.android.thermalState\n            : AndroidThermalState.UNSPECIFIED,\n        isPowerSaverMode: powerMode,\n      },\n    };\n  }\n\n  if (osInfo.name.toLowerCase() === 'ios') {\n    deviceState = {\n      oneofKind: 'apple',\n      apple: {\n        thermalState:\n          deviceState?.oneofKind === 'apple'\n            ? deviceState.apple.thermalState\n            : AppleThermalState.UNSPECIFIED,\n        isLowPowerModeEnabled: powerMode,\n      },\n    };\n  }\n};\n\nexport const getDeviceState = () => {\n  return deviceState;\n};\n\nexport const getClientDetails = async (): Promise<ClientDetails> => {\n  if (isReactNative()) {\n    // Since RN doesn't support web, sharing browser info is not required\n    return {\n      sdk: sdkInfo,\n      os: osInfo,\n      device: deviceInfo,\n    };\n  }\n\n  // @ts-expect-error - userAgentData is not yet in the TS types\n  const userAgentDataApi = navigator.userAgentData;\n  let userAgentData:\n    | {\n        platform?: string;\n        platformVersion?: string;\n        fullVersionList?: Array<{ brand: string; version: string }>;\n      }\n    | undefined;\n  if (userAgentDataApi && userAgentDataApi.getHighEntropyValues) {\n    try {\n      userAgentData = await userAgentDataApi.getHighEntropyValues([\n        'platform',\n        'platformVersion',\n        'fullVersionList',\n      ]);\n    } catch {\n      // Ignore the error\n    }\n  }\n\n  const userAgent = new UAParser(navigator.userAgent);\n  const { browser, os, device, cpu } = userAgent.getResult();\n  // If userAgentData is available, it means we are in a modern Chromium browser,\n  // and we can use it to get more accurate browser information.\n  // We hook into the fullVersionList to find the browser name and version and\n  // eventually detect exotic browsers like Samsung Internet, AVG Secure Browser, etc.\n  // who by default they identify themselves as \"Chromium\" in the user agent string.\n  // Eliminates the generic \"Chromium\" name and \"Not)A_Brand\" name from the list.\n  // https://wicg.github.io/ua-client-hints/#create-arbitrary-brands-section\n  const uaBrowser = userAgentData?.fullVersionList?.find(\n    (v) => !v.brand.includes('Chromium') && !v.brand.match(/[()\\-./:;=?_]/g),\n  );\n  return {\n    sdk: sdkInfo,\n    browser: {\n      name: uaBrowser?.brand || browser.name || navigator.userAgent,\n      version: uaBrowser?.version || browser.version || '',\n    },\n    os: {\n      name: userAgentData?.platform || os.name || '',\n      version: userAgentData?.platformVersion || os.version || '',\n      architecture: cpu.architecture || '',\n    },\n    device: {\n      name: [device.vendor, device.model, device.type]\n        .filter(Boolean)\n        .join(' '),\n      version: '',\n    },\n  };\n};\n","import { getClientDetails } from './client-details';\n\n/**\n * Checks whether the current browser is Safari.\n */\nexport const isSafari = () => {\n  if (typeof navigator === 'undefined') return false;\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent || '');\n};\n\n/**\n * Checks whether the current browser is Firefox.\n */\nexport const isFirefox = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent?.includes('Firefox');\n};\n\n/**\n * Checks whether the current browser is Google Chrome.\n */\nexport const isChrome = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent?.includes('Chrome');\n};\n\n/**\n * Checks whether the current browser is among the list of first-class supported browsers.\n * This includes Chrome, Edge, Firefox, and Safari.\n *\n * Although the Stream Video SDK may work in other browsers, these are the ones we officially support.\n */\nexport const isSupportedBrowser = async (): Promise<boolean> => {\n  const { browser } = await getClientDetails();\n  if (!browser) return false; // we aren't running in a browser\n\n  const name = browser.name.toLowerCase();\n  const [major] = browser.version.split('.');\n  const version = parseInt(major, 10);\n  return (\n    (name.includes('chrome') && version >= 124) ||\n    (name.includes('edge') && version >= 124) ||\n    (name.includes('firefox') && version >= 124) ||\n    (name.includes('safari') && version >= 17) ||\n    (name.includes('webkit') && version >= 605) || // WebView on iOS\n    (name.includes('webview') && version >= 124) // WebView on Android\n  );\n};\n","import type {\n  AggregatedStatsReport,\n  BaseStats,\n  ParticipantsStatsReport,\n  RTCCodecStats,\n  RTCMediaSourceStats,\n  StatsReport,\n} from './types';\nimport { CallState } from '../store';\nimport { Publisher, Subscriber } from '../rtc';\nimport { flatten } from './utils';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { isFirefox } from '../helpers/browsers';\nimport { videoLoggerSystem } from '../logger';\n\nexport type StatsReporterOpts = {\n  subscriber: Subscriber;\n  publisher?: Publisher;\n  state: CallState;\n  datacenter: string;\n  pollingIntervalInMs?: number;\n};\n\ntype PeerConnectionKind = 'subscriber' | 'publisher';\n\nexport type StatsReporter = {\n  /**\n   * Will turn on stats reporting for a given sessionId.\n   *\n   * @param sessionId the session id.\n   */\n  startReportingStatsFor: (sessionId: string) => void;\n\n  /**\n   * Will turn off stats reporting for a given sessionId.\n   *\n   * @param sessionId the session id.\n   */\n  stopReportingStatsFor: (sessionId: string) => void;\n\n  /**\n   * Helper method for retrieving stats for a given peer connection kind\n   * and media stream flowing through it.\n   *\n   * @param kind the peer connection kind (subscriber or publisher).\n   * @param mediaStream the media stream.\n   */\n  getStatsForStream: (\n    kind: PeerConnectionKind,\n    tracks: MediaStreamTrack[],\n  ) => Promise<StatsReport[]>;\n\n  /**\n   * Helper method for retrieving raw stats for a given peer connection kind.\n   *\n   * @param kind the peer connection kind (subscriber or publisher).\n   * @param selector the track selector. If not provided, stats for all tracks will be returned.\n   */\n  getRawStatsForTrack: (\n    kind: PeerConnectionKind,\n    selector?: MediaStreamTrack,\n  ) => Promise<RTCStatsReport | undefined>;\n\n  /**\n   * Stops the stats reporter and releases all resources.\n   */\n  stop: () => void;\n};\n\n/**\n * Creates a new StatsReporter instance that collects metrics about the ongoing call and reports them to the state store\n */\nexport const createStatsReporter = ({\n  subscriber,\n  publisher,\n  state,\n  datacenter,\n  pollingIntervalInMs = 2000,\n}: StatsReporterOpts): StatsReporter => {\n  const logger = videoLoggerSystem.getLogger('stats');\n  const getRawStatsForTrack = async (\n    kind: PeerConnectionKind,\n    selector?: MediaStreamTrack,\n  ) => {\n    if (kind === 'subscriber' && subscriber) {\n      return subscriber.getStats(selector);\n    } else if (kind === 'publisher' && publisher) {\n      return publisher.getStats(selector);\n    } else {\n      return undefined;\n    }\n  };\n\n  const getStatsForStream = async (\n    kind: PeerConnectionKind,\n    tracks: MediaStreamTrack[],\n  ) => {\n    const pc = kind === 'subscriber' ? subscriber : publisher;\n    if (!pc) return [];\n    const statsForStream: StatsReport[] = [];\n    for (const track of tracks) {\n      const report = await pc.getStats(track);\n      const stats = transform(report, {\n        trackKind: track.kind as 'audio' | 'video',\n        kind,\n        publisher: undefined,\n      });\n      statsForStream.push(stats);\n    }\n    return statsForStream;\n  };\n\n  const startReportingStatsFor = (sessionId: string) => {\n    sessionIdsToTrack.add(sessionId);\n    void run();\n  };\n\n  const stopReportingStatsFor = (sessionId: string) => {\n    sessionIdsToTrack.delete(sessionId);\n    void run();\n  };\n\n  const sessionIdsToTrack = new Set<string>();\n\n  /**\n   * The main stats reporting loop.\n   */\n  const run = async () => {\n    const participantStats: ParticipantsStatsReport = {};\n    if (sessionIdsToTrack.size > 0) {\n      const sessionIds = new Set(sessionIdsToTrack);\n      for (const participant of state.participants) {\n        if (!sessionIds.has(participant.sessionId)) continue;\n        const {\n          audioStream,\n          isLocalParticipant,\n          sessionId,\n          userId,\n          videoStream,\n        } = participant;\n        const kind = isLocalParticipant ? 'publisher' : 'subscriber';\n        try {\n          const tracks = isLocalParticipant\n            ? publisher?.getPublishedTracks() || []\n            : [\n                ...(videoStream?.getVideoTracks() || []),\n                ...(audioStream?.getAudioTracks() || []),\n              ];\n          participantStats[sessionId] = await getStatsForStream(kind, tracks);\n        } catch (e) {\n          logger.warn(`Failed to collect ${kind} stats for ${userId}`, e);\n        }\n      }\n    }\n\n    const [subscriberRawStats, publisherRawStats] = await Promise.all([\n      getRawStatsForTrack('subscriber'),\n      publisher ? getRawStatsForTrack('publisher') : undefined,\n    ]);\n\n    const process = (report: RTCStatsReport, kind: PeerConnectionKind) =>\n      aggregate(transform(report, { kind, trackKind: 'video', publisher }));\n\n    const subscriberStats = subscriberRawStats\n      ? process(subscriberRawStats, 'subscriber')\n      : getEmptyStats();\n    const publisherStats = publisherRawStats\n      ? process(publisherRawStats, 'publisher')\n      : getEmptyStats();\n\n    state.setCallStatsReport({\n      datacenter,\n      publisherStats,\n      subscriberStats,\n      subscriberRawStats,\n      publisherRawStats,\n      participants: participantStats,\n      timestamp: Date.now(),\n    });\n  };\n\n  let timeoutId: NodeJS.Timeout | undefined;\n  if (pollingIntervalInMs > 0) {\n    const loop = async () => {\n      // bail out of the loop as we don't want to collect stats\n      // (they are expensive) if no one is listening to them\n      if (state.isCallStatsReportObserved) {\n        await run().catch((e) => {\n          logger.debug('Failed to collect stats', e);\n        });\n      }\n      timeoutId = setTimeout(loop, pollingIntervalInMs);\n    };\n    void loop();\n  }\n\n  const stop = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  };\n\n  return {\n    getRawStatsForTrack,\n    getStatsForStream,\n    startReportingStatsFor,\n    stopReportingStatsFor,\n    stop,\n  };\n};\n\nexport type StatsTransformOpts = {\n  /**\n   * The kind of track we are transforming stats for.\n   */\n  trackKind: 'audio' | 'video';\n  /**\n   * The kind of peer connection we are transforming stats for.\n   */\n  kind: PeerConnectionKind;\n  /**\n   * The publisher instance.\n   */\n  publisher: Publisher | undefined;\n};\n\n/**\n * Transforms raw RTC stats into a slimmer and uniform across browsers format.\n *\n * @param report the report to transform.\n * @param opts the transform options.\n */\nconst transform = (\n  report: RTCStatsReport,\n  opts: StatsTransformOpts,\n): StatsReport => {\n  const { trackKind, kind, publisher } = opts;\n  const direction = kind === 'subscriber' ? 'inbound-rtp' : 'outbound-rtp';\n  const stats = flatten(report);\n  const streams = stats\n    .filter(\n      (stat) =>\n        stat.type === direction &&\n        (stat as RTCRtpStreamStats).kind === trackKind,\n    )\n    .map((stat): BaseStats => {\n      const rtcStreamStats = stat as RTCInboundRtpStreamStats &\n        RTCOutboundRtpStreamStats;\n\n      const codec = stats.find(\n        (s) => s.type === 'codec' && s.id === rtcStreamStats.codecId,\n      ) as RTCCodecStats | undefined;\n\n      const transport = stats.find(\n        (s) => s.type === 'transport' && s.id === rtcStreamStats.transportId,\n      ) as RTCTransportStats | undefined;\n\n      let roundTripTime: number | undefined;\n      if (transport && transport.dtlsState === 'connected') {\n        const candidatePair = stats.find(\n          (s) =>\n            s.type === 'candidate-pair' &&\n            s.id === transport.selectedCandidatePairId,\n        ) as RTCIceCandidatePairStats | undefined;\n        roundTripTime = candidatePair?.currentRoundTripTime;\n      }\n\n      let trackType: TrackType | undefined;\n      if (kind === 'publisher' && publisher) {\n        const firefox = isFirefox();\n        const mediaSource = stats.find(\n          (s) =>\n            s.type === 'media-source' &&\n            // Firefox doesn't have mediaSourceId, so we need to guess the media source\n            (firefox ? true : s.id === rtcStreamStats.mediaSourceId),\n        ) as RTCMediaSourceStats | undefined;\n        if (mediaSource) {\n          trackType = publisher.getTrackType(mediaSource.trackIdentifier);\n        }\n      }\n\n      return {\n        bytesSent: rtcStreamStats.bytesSent,\n        bytesReceived: rtcStreamStats.bytesReceived,\n        codec: codec?.mimeType,\n        currentRoundTripTime: roundTripTime,\n        frameHeight: rtcStreamStats.frameHeight,\n        frameWidth: rtcStreamStats.frameWidth,\n        framesPerSecond: rtcStreamStats.framesPerSecond,\n        jitter: rtcStreamStats.jitter,\n        kind: rtcStreamStats.kind,\n        mediaSourceId: rtcStreamStats.mediaSourceId,\n        qualityLimitationReason: rtcStreamStats.qualityLimitationReason,\n        rid: rtcStreamStats.rid,\n        ssrc: rtcStreamStats.ssrc,\n        trackType,\n      };\n    });\n\n  return {\n    rawStats: report,\n    streams,\n    timestamp: Date.now(),\n  };\n};\n\nconst getEmptyStats = (stats?: StatsReport): AggregatedStatsReport => {\n  return {\n    rawReport: stats ?? { streams: [], timestamp: Date.now() },\n    totalBytesSent: 0,\n    totalBytesReceived: 0,\n    averageJitterInMs: 0,\n    averageRoundTripTimeInMs: 0,\n    qualityLimitationReasons: 'none',\n    highestFrameWidth: 0,\n    highestFrameHeight: 0,\n    highestFramesPerSecond: 0,\n    codec: '',\n    codecPerTrackType: {},\n    timestamp: Date.now(),\n  };\n};\n\n/**\n * Aggregates generic stats.\n *\n * @param stats the stats to aggregate.\n */\nconst aggregate = (stats: StatsReport): AggregatedStatsReport => {\n  const aggregatedStats = getEmptyStats(stats);\n\n  let maxArea = -1;\n  const area = (w: number, h: number) => w * h;\n\n  const qualityLimitationReasons = new Set<string>();\n  const streams = stats.streams;\n  const report = streams.reduce((acc, stream) => {\n    acc.totalBytesSent += stream.bytesSent || 0;\n    acc.totalBytesReceived += stream.bytesReceived || 0;\n    acc.averageJitterInMs += stream.jitter || 0;\n    acc.averageRoundTripTimeInMs += stream.currentRoundTripTime || 0;\n\n    // naive calculation of the highest resolution\n    const streamArea = area(stream.frameWidth || 0, stream.frameHeight || 0);\n    if (streamArea > maxArea) {\n      acc.highestFrameWidth = stream.frameWidth || 0;\n      acc.highestFrameHeight = stream.frameHeight || 0;\n      acc.highestFramesPerSecond = stream.framesPerSecond || 0;\n      maxArea = streamArea;\n    }\n\n    qualityLimitationReasons.add(stream.qualityLimitationReason || '');\n    return acc;\n  }, aggregatedStats);\n\n  if (streams.length > 0) {\n    report.averageJitterInMs = Math.round(\n      (report.averageJitterInMs / streams.length) * 1000,\n    );\n    report.averageRoundTripTimeInMs = Math.round(\n      (report.averageRoundTripTimeInMs / streams.length) * 1000,\n    );\n    // we take the first codec we find, as it should be the same for all streams\n    report.codec = streams[0].codec || '';\n    report.codecPerTrackType = streams.reduce(\n      (acc, stream) => {\n        if (stream.trackType) {\n          acc[stream.trackType] = stream.codec || '';\n        }\n        return acc;\n      },\n      {} as Record<TrackType, string>,\n    );\n  }\n\n  const qualityLimitationReason = [\n    qualityLimitationReasons.has('cpu') && 'cpu',\n    qualityLimitationReasons.has('bandwidth') && 'bandwidth',\n    qualityLimitationReasons.has('other') && 'other',\n  ]\n    .filter(Boolean)\n    .join(', ');\n  if (qualityLimitationReason) {\n    report.qualityLimitationReasons = qualityLimitationReason;\n  }\n\n  return report;\n};\n","import { combineLatest } from 'rxjs';\nimport { StreamSfuClient } from '../StreamSfuClient';\nimport { OwnCapability, StatsOptions } from '../gen/coordinator';\nimport { Publisher, Subscriber } from '../rtc';\nimport { Tracer, TraceRecord } from './rtc';\nimport { flatten, getSdkName, getSdkVersion } from './utils';\nimport { getDeviceState, getWebRTCInfo } from '../helpers/client-details';\nimport {\n  ClientDetails,\n  InputDevices,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { CameraManager, MicrophoneManager } from '../devices';\nimport { createSubscription } from '../store/rxUtils';\nimport { CallState } from '../store';\nimport { Telemetry } from '../gen/video/sfu/signal_rpc/signal';\nimport { videoLoggerSystem } from '../logger';\n\nexport type SfuStatsReporterOptions = {\n  options: StatsOptions;\n  clientDetails: ClientDetails;\n  subscriber: Subscriber;\n  publisher?: Publisher;\n  microphone: MicrophoneManager;\n  camera: CameraManager;\n  state: CallState;\n  tracer: Tracer;\n  unifiedSessionId: string;\n};\n\nexport class SfuStatsReporter {\n  private readonly logger = videoLoggerSystem.getLogger('SfuStatsReporter');\n\n  readonly options: StatsOptions;\n\n  private readonly sfuClient: StreamSfuClient;\n  private readonly subscriber: Subscriber;\n  private readonly publisher?: Publisher;\n  private readonly microphone: MicrophoneManager;\n  private readonly camera: CameraManager;\n  private readonly state: CallState;\n  private readonly tracer: Tracer;\n  private readonly unifiedSessionId: string;\n\n  private intervalId: NodeJS.Timeout | undefined;\n  private timeoutId: NodeJS.Timeout | undefined;\n  private unsubscribeDevicePermissionsSubscription?: () => void;\n  private unsubscribeListDevicesSubscription?: () => void;\n  private readonly sdkName: string;\n  private readonly sdkVersion: string;\n  private readonly webRTCVersion: string;\n  private readonly inputDevices = new Map<'mic' | 'camera', InputDevices>();\n\n  constructor(\n    sfuClient: StreamSfuClient,\n    {\n      options,\n      clientDetails,\n      subscriber,\n      publisher,\n      microphone,\n      camera,\n      state,\n      tracer,\n      unifiedSessionId,\n    }: SfuStatsReporterOptions,\n  ) {\n    this.sfuClient = sfuClient;\n    this.options = options;\n    this.subscriber = subscriber;\n    this.publisher = publisher;\n    this.microphone = microphone;\n    this.camera = camera;\n    this.state = state;\n    this.tracer = tracer;\n    this.unifiedSessionId = unifiedSessionId;\n\n    const { sdk, browser } = clientDetails;\n    this.sdkName = getSdkName(sdk);\n    this.sdkVersion = getSdkVersion(sdk);\n\n    // use the WebRTC version if set by the SDK (React Native) otherwise,\n    // use the browser version as a fallback\n    const webRTCInfo = getWebRTCInfo();\n    this.webRTCVersion =\n      webRTCInfo?.version ||\n      `${browser?.name || ''}-${browser?.version || ''}` ||\n      'N/A';\n  }\n\n  private observeDevice = (\n    device: CameraManager | MicrophoneManager,\n    kind: 'mic' | 'camera',\n  ) => {\n    const { browserPermissionState$ } = device.state;\n    this.unsubscribeDevicePermissionsSubscription?.();\n    this.unsubscribeDevicePermissionsSubscription = createSubscription(\n      combineLatest([browserPermissionState$, this.state.ownCapabilities$]),\n      ([browserPermissionState, ownCapabilities]) => {\n        // cleanup the previous listDevices() subscription in case\n        // permissions or capabilities have changed.\n        // we will subscribe again if everything is in order.\n        this.unsubscribeListDevicesSubscription?.();\n        const hasCapability =\n          kind === 'mic'\n            ? ownCapabilities.includes(OwnCapability.SEND_AUDIO)\n            : ownCapabilities.includes(OwnCapability.SEND_VIDEO);\n        if (browserPermissionState !== 'granted' || !hasCapability) {\n          this.inputDevices.set(kind, {\n            currentDevice: '',\n            availableDevices: [],\n            isPermitted: false,\n          });\n          return;\n        }\n        this.unsubscribeListDevicesSubscription = createSubscription(\n          combineLatest([device.listDevices(), device.state.selectedDevice$]),\n          ([devices, deviceId]) => {\n            const selected = devices.find((d) => d.deviceId === deviceId);\n            this.inputDevices.set(kind, {\n              currentDevice: selected?.label || deviceId || '',\n              availableDevices: devices.map((d) => d.label),\n              isPermitted: true,\n            });\n          },\n        );\n      },\n    );\n  };\n\n  sendConnectionTime = (connectionTimeSeconds: number) => {\n    this.sendTelemetryData({\n      data: {\n        oneofKind: 'connectionTimeSeconds',\n        connectionTimeSeconds,\n      },\n    });\n  };\n\n  sendReconnectionTime = (\n    strategy: WebsocketReconnectStrategy,\n    timeSeconds: number,\n  ) => {\n    this.sendTelemetryData({\n      data: {\n        oneofKind: 'reconnection',\n        reconnection: { strategy, timeSeconds },\n      },\n    });\n  };\n\n  private sendTelemetryData = (telemetryData: Telemetry) => {\n    // intentionally not awaiting the promise here\n    // to avoid impeding with the ongoing actions.\n    this.run(telemetryData).catch((err) => {\n      this.logger.warn('Failed to send telemetry data', err);\n    });\n  };\n\n  private run = async (telemetry?: Telemetry) => {\n    const [subscriberStats, publisherStats] = await Promise.all([\n      this.subscriber.stats.get(),\n      this.publisher?.stats.get(),\n    ]);\n\n    this.subscriber.tracer?.trace('getstats', subscriberStats.delta);\n    if (publisherStats) {\n      this.publisher?.tracer?.trace('getstats', publisherStats.delta);\n    }\n\n    const subscriberTrace = this.subscriber.tracer?.take();\n    const publisherTrace = this.publisher?.tracer?.take();\n    const tracer = this.tracer.take();\n    const sfuTrace = this.sfuClient.getTrace();\n    const traces: TraceRecord[] = [\n      ...tracer.snapshot,\n      ...(sfuTrace?.snapshot ?? []),\n      ...(publisherTrace?.snapshot ?? []),\n      ...(subscriberTrace?.snapshot ?? []),\n    ];\n\n    try {\n      await this.sfuClient.sendStats({\n        sdk: this.sdkName,\n        sdkVersion: this.sdkVersion,\n        webrtcVersion: this.webRTCVersion,\n        subscriberStats: JSON.stringify(flatten(subscriberStats.stats)),\n        publisherStats: publisherStats\n          ? JSON.stringify(flatten(publisherStats.stats))\n          : '[]',\n        subscriberRtcStats: '',\n        publisherRtcStats: '',\n        rtcStats: JSON.stringify(traces),\n        encodeStats: publisherStats?.performanceStats ?? [],\n        decodeStats: subscriberStats.performanceStats,\n        audioDevices: this.inputDevices.get('mic'),\n        videoDevices: this.inputDevices.get('camera'),\n        unifiedSessionId: this.unifiedSessionId,\n        deviceState: getDeviceState(),\n        telemetry,\n      });\n    } catch (err) {\n      publisherTrace?.rollback();\n      subscriberTrace?.rollback();\n      tracer.rollback();\n      sfuTrace?.rollback();\n      throw err;\n    }\n  };\n\n  start = () => {\n    if (this.options.reporting_interval_ms <= 0) return;\n\n    this.observeDevice(this.microphone, 'mic');\n    this.observeDevice(this.camera, 'camera');\n\n    clearInterval(this.intervalId);\n    this.intervalId = setInterval(() => {\n      this.run().catch((err) => {\n        this.logger.warn('Failed to report stats', err);\n      });\n    }, this.options.reporting_interval_ms);\n  };\n\n  stop = () => {\n    this.unsubscribeDevicePermissionsSubscription?.();\n    this.unsubscribeDevicePermissionsSubscription = undefined;\n    this.unsubscribeListDevicesSubscription?.();\n    this.unsubscribeListDevicesSubscription = undefined;\n\n    this.inputDevices.clear();\n    clearInterval(this.intervalId);\n    this.intervalId = undefined;\n    clearTimeout(this.timeoutId);\n    this.timeoutId = undefined;\n  };\n\n  flush = () => {\n    this.run().catch((err) => {\n      this.logger.warn('Failed to flush report stats', err);\n    });\n  };\n\n  scheduleOne = (timeout: number) => {\n    clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(() => {\n      this.run().catch((err) => {\n        this.logger.warn('Failed to report stats', err);\n      });\n    }, timeout);\n  };\n}\n","import type { RTCStatsDataType, Trace } from './types';\n\nexport const traceRTCPeerConnection = (pc: RTCPeerConnection, trace: Trace) => {\n  pc.addEventListener('icecandidate', (e) => {\n    trace('onicecandidate', e.candidate);\n  });\n  pc.addEventListener('track', (e) => {\n    const streams = e.streams.map((stream) => `stream:${stream.id}`);\n    trace('ontrack', `${e.track.kind}:${e.track.id} ${streams}`);\n  });\n  pc.addEventListener('signalingstatechange', () => {\n    trace('signalingstatechange', pc.signalingState);\n  });\n  pc.addEventListener('iceconnectionstatechange', () => {\n    trace('iceconnectionstatechange', pc.iceConnectionState);\n  });\n  pc.addEventListener('icegatheringstatechange', () => {\n    trace('icegatheringstatechange', pc.iceGatheringState);\n  });\n  pc.addEventListener('connectionstatechange', () => {\n    trace('connectionstatechange', pc.connectionState);\n  });\n  pc.addEventListener('negotiationneeded', () => {\n    trace('negotiationneeded', undefined);\n  });\n  pc.addEventListener('datachannel', ({ channel }) => {\n    trace('datachannel', [channel.id, channel.label]);\n  });\n\n  const origClose = pc.close;\n  pc.close = function tracedClose() {\n    trace('close', undefined);\n    return origClose.call(this);\n  };\n\n  for (const method of [\n    'createOffer',\n    'createAnswer',\n    'setLocalDescription',\n    'setRemoteDescription',\n    'addIceCandidate',\n  ] as const) {\n    const original = pc[method];\n    if (!original) continue;\n\n    // @ts-expect-error we don't use deprecated APIs\n    pc[method] = async function tracedMethod(...args: any[]) {\n      try {\n        trace(method, args);\n        // @ts-expect-error improper types\n        const result = await original.apply(this, args);\n        trace(`${method}OnSuccess`, result as RTCStatsDataType);\n        return result;\n      } catch (err) {\n        trace(`${method}OnFailure`, (err as Error).toString());\n        throw err;\n      }\n    };\n  }\n};\n","import {\n  Codec,\n  PeerType,\n  PerformanceStats,\n  TrackType,\n} from '../../gen/video/sfu/models/models';\nimport type { RTCCodecStats, RTCMediaSourceStats } from '../types';\nimport type { ComputedStats } from './types';\n\n/**\n * StatsTracer is a class that collects and processes WebRTC stats.\n * It is used to track the performance of the WebRTC connection\n * and to provide information about the media streams.\n * It is used by both the Publisher and Subscriber classes.\n *\n * @internal\n */\nexport class StatsTracer {\n  private readonly pc: RTCPeerConnection;\n  private readonly peerType: PeerType;\n  private readonly trackIdToTrackType: Map<string, TrackType>;\n\n  private costOverrides?: Map<TrackType, number>;\n\n  private previousStats: Record<string, RTCStats> = {};\n  private frameTimeHistory: number[] = [];\n  private fpsHistory: number[] = [];\n\n  /**\n   * Creates a new StatsTracer instance.\n   */\n  constructor(\n    pc: RTCPeerConnection,\n    peerType: PeerType,\n    trackIdToTrackType: Map<string, TrackType>,\n  ) {\n    this.pc = pc;\n    this.peerType = peerType;\n    this.trackIdToTrackType = trackIdToTrackType;\n  }\n\n  /**\n   * Get the stats from the RTCPeerConnection.\n   * When called, it will return the stats for the current connection.\n   * It will also return the delta between the current stats and the previous stats.\n   * This is used to track the performance of the connection.\n   *\n   * @internal\n   */\n  get = async (): Promise<ComputedStats> => {\n    const stats = await this.pc.getStats();\n    const currentStats = toObject(stats);\n\n    const performanceStats = this.withOverrides(\n      this.peerType === PeerType.SUBSCRIBER\n        ? this.getDecodeStats(currentStats)\n        : this.getEncodeStats(currentStats),\n    );\n\n    const delta = deltaCompression(this.previousStats, currentStats);\n\n    // store the current data for the next iteration\n    this.previousStats = currentStats;\n    this.frameTimeHistory = this.frameTimeHistory.slice(-2);\n    this.fpsHistory = this.fpsHistory.slice(-2);\n\n    return { performanceStats, delta, stats };\n  };\n\n  /**\n   * Collects encode stats from the RTCPeerConnection.\n   */\n  private getEncodeStats = (\n    currentStats: Record<string, RTCStats>,\n  ): PerformanceStats[] => {\n    const encodeStats: PerformanceStats[] = [];\n    for (const rtp of Object.values(currentStats)) {\n      if (rtp.type !== 'outbound-rtp') continue;\n\n      const {\n        codecId,\n        framesSent = 0,\n        kind,\n        id,\n        totalEncodeTime = 0,\n        framesPerSecond = 0,\n        frameHeight = 0,\n        frameWidth = 0,\n        targetBitrate = 0,\n        mediaSourceId,\n      } = rtp as RTCOutboundRtpStreamStats;\n\n      if (kind === 'audio' || !this.previousStats[id]) continue;\n      const prevRtp = this.previousStats[id] as RTCOutboundRtpStreamStats;\n\n      const deltaTotalEncodeTime =\n        totalEncodeTime - (prevRtp.totalEncodeTime || 0);\n      const deltaFramesSent = framesSent - (prevRtp.framesSent || 0);\n      const framesEncodeTime =\n        deltaFramesSent > 0\n          ? (deltaTotalEncodeTime / deltaFramesSent) * 1000\n          : 0;\n\n      this.frameTimeHistory.push(framesEncodeTime);\n      this.fpsHistory.push(framesPerSecond);\n\n      let trackType = TrackType.VIDEO;\n      if (mediaSourceId && currentStats[mediaSourceId]) {\n        const mediaSource = currentStats[mediaSourceId] as RTCMediaSourceStats;\n        trackType =\n          this.trackIdToTrackType.get(mediaSource.trackIdentifier) || trackType;\n      }\n\n      encodeStats.push({\n        trackType,\n        codec: getCodecFromStats(currentStats, codecId),\n        avgFrameTimeMs: average(this.frameTimeHistory),\n        avgFps: average(this.fpsHistory),\n        targetBitrate: Math.round(targetBitrate),\n        videoDimension: { width: frameWidth, height: frameHeight },\n      });\n    }\n\n    return encodeStats;\n  };\n\n  /**\n   * Collects decode stats from the RTCPeerConnection.\n   */\n  private getDecodeStats = (\n    currentStats: Record<string, RTCStats>,\n  ): PerformanceStats[] => {\n    let rtp: RTCInboundRtpStreamStats | undefined = undefined;\n    let max = 0;\n    for (const item of Object.values(currentStats)) {\n      if (item.type !== 'inbound-rtp') continue;\n      const rtpItem = item as RTCInboundRtpStreamStats;\n      const { kind, frameWidth = 0, frameHeight = 0 } = rtpItem;\n      const area = frameWidth * frameHeight;\n      if (kind === 'video' && area > max) {\n        rtp = rtpItem;\n        max = area;\n      }\n    }\n\n    if (!rtp || !this.previousStats[rtp.id]) return [];\n    const prevRtp = this.previousStats[rtp.id] as RTCInboundRtpStreamStats;\n\n    const {\n      framesDecoded = 0,\n      framesPerSecond = 0,\n      totalDecodeTime = 0,\n      trackIdentifier,\n    } = rtp;\n    const deltaTotalDecodeTime =\n      totalDecodeTime - (prevRtp.totalDecodeTime || 0);\n    const deltaFramesDecoded = framesDecoded - (prevRtp.framesDecoded || 0);\n\n    const framesDecodeTime =\n      deltaFramesDecoded > 0\n        ? (deltaTotalDecodeTime / deltaFramesDecoded) * 1000\n        : 0;\n\n    this.frameTimeHistory.push(framesDecodeTime);\n    this.fpsHistory.push(framesPerSecond);\n\n    const trackType =\n      this.trackIdToTrackType.get(trackIdentifier) || TrackType.VIDEO;\n\n    return [\n      PerformanceStats.create({\n        trackType,\n        codec: getCodecFromStats(currentStats, rtp.codecId),\n        avgFrameTimeMs: average(this.frameTimeHistory),\n        avgFps: average(this.fpsHistory),\n        videoDimension: { width: rtp.frameWidth, height: rtp.frameHeight },\n      }),\n    ];\n  };\n\n  /**\n   * Applies cost overrides to the performance stats.\n   * This is used to override the default encode/decode times with custom values.\n   * This is useful for testing and debugging purposes, and it shouldn't be used in production.\n   */\n  private withOverrides = (\n    performanceStats: PerformanceStats[],\n  ): PerformanceStats[] => {\n    if (this.costOverrides) {\n      for (const s of performanceStats) {\n        const override = this.costOverrides.get(s.trackType);\n        if (override !== undefined) {\n          // override the average encode/decode time with the provided cost.\n          // format: [override].[original-frame-time]\n          s.avgFrameTimeMs = override + (s.avgFrameTimeMs || 0) / 1000;\n        }\n      }\n    }\n    return performanceStats;\n  };\n\n  /**\n   * Set the encode/decode cost for a specific track type.\n   * This is used to override the default encode/decode times with custom values.\n   * This is useful for testing and debugging purposes, and it shouldn't be used in production.\n   *\n   * @internal\n   */\n  setCost = (cost: number, trackType = TrackType.VIDEO) => {\n    if (!this.costOverrides) this.costOverrides = new Map();\n    this.costOverrides.set(trackType, cost);\n  };\n}\n\n/**\n * Convert the stat report to an object.\n *\n * @param report the stat report to convert.\n */\nconst toObject = (report: RTCStatsReport): Record<string, RTCStats> => {\n  const obj: Record<string, RTCStats> = {};\n  report.forEach((v, k) => {\n    obj[k] = v;\n  });\n  return obj;\n};\n\n/**\n * Apply delta compression to the stats report.\n * Reduces size by ~90%.\n * To reduce further, report keys could be compressed.\n */\nconst deltaCompression = (\n  oldStats: Record<any, any>,\n  newStats: Record<any, any>,\n): Record<any, any> => {\n  newStats = JSON.parse(JSON.stringify(newStats));\n\n  for (const [id, report] of Object.entries(newStats)) {\n    delete report.id;\n    if (!oldStats[id]) continue;\n\n    for (const [name, value] of Object.entries(report)) {\n      if (value === oldStats[id][name]) {\n        delete report[name];\n      }\n    }\n  }\n\n  let timestamp = -Infinity;\n  const values = Object.values(newStats);\n  for (const report of values) {\n    if (report.timestamp > timestamp) {\n      timestamp = report.timestamp;\n    }\n  }\n  for (const report of values) {\n    if (report.timestamp === timestamp) {\n      report.timestamp = 0;\n    }\n  }\n  newStats.timestamp = timestamp;\n  return newStats;\n};\n\n/**\n * Calculates an average value.\n */\nconst average = (arr: number[]) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\n/**\n * Create a Codec object from the codec stats.\n *\n * @param stats the stats report.\n * @param codecId the codec ID to look for.\n */\nconst getCodecFromStats = (\n  stats: Record<string, RTCStats>,\n  codecId: string | undefined,\n): Codec | undefined => {\n  if (!codecId || !stats[codecId]) return;\n  const codecStats = stats[codecId] as RTCCodecStats;\n  return Codec.create({\n    name: codecStats.mimeType.split('/').pop(), // video/av1 -> av1\n    clockRate: codecStats.clockRate,\n    payloadType: codecStats.payloadType,\n    fmtp: codecStats.sdpFmtpLine,\n  });\n};\n","import type {\n  RTCStatsDataType,\n  Trace,\n  TraceKey,\n  TraceRecord,\n  TraceSlice,\n} from './types';\n\nexport class Tracer {\n  private buffer: TraceRecord[] = [];\n  private enabled = true;\n  private readonly id: string | null;\n  private keys?: Map<TraceKey, boolean>;\n\n  constructor(id: string | null) {\n    this.id = id;\n  }\n\n  setEnabled = (enabled: boolean) => {\n    if (this.enabled === enabled) return;\n    this.enabled = enabled;\n    this.buffer = [];\n  };\n\n  trace: Trace = (tag, data) => {\n    if (!this.enabled) return;\n    this.buffer.push([tag, this.id, data, Date.now()]);\n  };\n\n  traceOnce = (key: TraceKey, tag: string, data: RTCStatsDataType) => {\n    if (this.keys?.has(key)) return;\n    this.trace(tag, data);\n    (this.keys ??= new Map()).set(key, true);\n  };\n\n  resetTrace = (key: TraceKey) => {\n    this.keys?.delete(key);\n  };\n\n  take = (): TraceSlice => {\n    const snapshot = this.buffer;\n    this.buffer = [];\n    return {\n      snapshot,\n      rollback: () => {\n        this.buffer.unshift(...snapshot);\n      },\n    };\n  };\n\n  dispose = () => {\n    this.buffer = [];\n    this.keys?.clear();\n  };\n}\n","import { ScopedLogger, videoLoggerSystem } from '../logger';\nimport type { CallEventListener } from '../coordinator/connection/types';\nimport { CallingState, CallState } from '../store';\nimport { createSafeAsyncSubscription } from '../store/rxUtils';\nimport {\n  ErrorCode,\n  PeerType,\n  TrackType,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { NegotiationError } from './NegotiationError';\nimport { StreamSfuClient } from '../StreamSfuClient';\nimport { AllSfuEvents, Dispatcher } from './Dispatcher';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { StatsTracer, Tracer, traceRTCPeerConnection } from '../stats';\nimport { BasePeerConnectionOpts, OnReconnectionNeeded } from './types';\n\n/**\n * A base class for the `Publisher` and `Subscriber` classes.\n * @internal\n */\nexport abstract class BasePeerConnection {\n  protected readonly logger: ScopedLogger;\n  protected readonly peerType: PeerType;\n  protected readonly pc: RTCPeerConnection;\n  protected readonly state: CallState;\n  protected readonly dispatcher: Dispatcher;\n  protected sfuClient: StreamSfuClient;\n\n  private onReconnectionNeeded?: OnReconnectionNeeded;\n  private readonly iceRestartDelay: number;\n  private iceRestartTimeout?: NodeJS.Timeout;\n  protected isIceRestarting = false;\n  private isDisposed = false;\n\n  protected trackIdToTrackType = new Map<string, TrackType>();\n\n  readonly tracer?: Tracer;\n  readonly stats: StatsTracer;\n\n  private readonly subscriptions: (() => void)[] = [];\n  private unsubscribeIceTrickle?: () => void;\n  protected readonly lock = Math.random().toString(36).slice(2);\n\n  /**\n   * Constructs a new `BasePeerConnection` instance.\n   */\n  protected constructor(\n    peerType: PeerType,\n    {\n      sfuClient,\n      connectionConfig,\n      state,\n      dispatcher,\n      onReconnectionNeeded,\n      tag,\n      enableTracing,\n      iceRestartDelay = 2500,\n    }: BasePeerConnectionOpts,\n  ) {\n    this.peerType = peerType;\n    this.sfuClient = sfuClient;\n    this.state = state;\n    this.dispatcher = dispatcher;\n    this.iceRestartDelay = iceRestartDelay;\n    this.onReconnectionNeeded = onReconnectionNeeded;\n    this.logger = videoLoggerSystem.getLogger(\n      peerType === PeerType.SUBSCRIBER ? 'Subscriber' : 'Publisher',\n      { tags: [tag] },\n    );\n    this.pc = this.createPeerConnection(connectionConfig);\n    this.stats = new StatsTracer(this.pc, peerType, this.trackIdToTrackType);\n    if (enableTracing) {\n      this.tracer = new Tracer(\n        `${tag}-${peerType === PeerType.SUBSCRIBER ? 'sub' : 'pub'}`,\n      );\n      this.tracer.trace('create', {\n        url: sfuClient.edgeName,\n        ...connectionConfig,\n      });\n      traceRTCPeerConnection(this.pc, this.tracer.trace);\n    }\n  }\n\n  private createPeerConnection = (connectionConfig?: RTCConfiguration) => {\n    const pc = new RTCPeerConnection(connectionConfig);\n    pc.addEventListener('icecandidate', this.onIceCandidate);\n    pc.addEventListener('icecandidateerror', this.onIceCandidateError);\n    pc.addEventListener(\n      'iceconnectionstatechange',\n      this.onIceConnectionStateChange,\n    );\n    pc.addEventListener('icegatheringstatechange', this.onIceGatherChange);\n    pc.addEventListener('signalingstatechange', this.onSignalingChange);\n    pc.addEventListener('connectionstatechange', this.onConnectionStateChange);\n    return pc;\n  };\n\n  /**\n   * Disposes the `RTCPeerConnection` instance.\n   */\n  dispose() {\n    clearTimeout(this.iceRestartTimeout);\n    this.iceRestartTimeout = undefined;\n    this.onReconnectionNeeded = undefined;\n    this.isDisposed = true;\n    this.detachEventHandlers();\n    this.pc.close();\n    this.tracer?.dispose();\n  }\n\n  /**\n   * Detaches the event handlers from the `RTCPeerConnection`.\n   */\n  detachEventHandlers() {\n    const pc = this.pc;\n    pc.removeEventListener('icecandidate', this.onIceCandidate);\n    pc.removeEventListener('icecandidateerror', this.onIceCandidateError);\n    pc.removeEventListener('signalingstatechange', this.onSignalingChange);\n    pc.removeEventListener(\n      'iceconnectionstatechange',\n      this.onIceConnectionStateChange,\n    );\n    pc.removeEventListener('icegatheringstatechange', this.onIceGatherChange);\n    this.unsubscribeIceTrickle?.();\n    this.subscriptions.forEach((unsubscribe) => unsubscribe());\n  }\n\n  /**\n   * Performs an ICE restart on the `RTCPeerConnection`.\n   */\n  protected abstract restartIce(): Promise<void>;\n\n  /**\n   * Attempts to restart ICE on the `RTCPeerConnection`.\n   * This method intentionally doesn't await the `restartIce()` method,\n   * allowing it to run in the background and handle any errors that may occur.\n   */\n  protected tryRestartIce = () => {\n    this.restartIce().catch((e) => {\n      const reason = 'restartICE() failed, initiating reconnect';\n      this.logger.error(reason, e);\n      const strategy =\n        e instanceof NegotiationError &&\n        e.error.code === ErrorCode.PARTICIPANT_SIGNAL_LOST\n          ? WebsocketReconnectStrategy.FAST\n          : WebsocketReconnectStrategy.REJOIN;\n      this.onReconnectionNeeded?.(strategy, reason);\n    });\n  };\n\n  /**\n   * Handles events synchronously.\n   * Consecutive events are queued and executed one after the other.\n   */\n  protected on = <E extends keyof AllSfuEvents>(\n    event: E,\n    fn: CallEventListener<E>,\n  ): void => {\n    this.subscriptions.push(\n      this.dispatcher.on(event, (e) => {\n        const lockKey = `pc.${this.lock}.${event}`;\n        withoutConcurrency(lockKey, async () => fn(e)).catch((err) => {\n          if (this.isDisposed) return;\n          this.logger.warn(`Error handling ${event}`, err);\n        });\n      }),\n    );\n  };\n\n  /**\n   * Appends the trickled ICE candidates to the `RTCPeerConnection`.\n   */\n  protected addTrickledIceCandidates = () => {\n    const { iceTrickleBuffer } = this.sfuClient;\n    const observable =\n      this.peerType === PeerType.SUBSCRIBER\n        ? iceTrickleBuffer.subscriberCandidates\n        : iceTrickleBuffer.publisherCandidates;\n\n    this.unsubscribeIceTrickle?.();\n    this.unsubscribeIceTrickle = createSafeAsyncSubscription(\n      observable,\n      async (candidate) => {\n        return this.pc.addIceCandidate(candidate).catch((e) => {\n          if (this.isDisposed) return;\n          this.logger.warn(`ICE candidate error`, e, candidate);\n        });\n      },\n    );\n  };\n\n  /**\n   * Sets the SFU client to use.\n   *\n   * @param sfuClient the SFU client to use.\n   */\n  setSfuClient = (sfuClient: StreamSfuClient) => {\n    this.sfuClient = sfuClient;\n  };\n\n  /**\n   * Returns the result of the `RTCPeerConnection.getStats()` method\n   * @param selector an optional `MediaStreamTrack` to get the stats for.\n   */\n  getStats = (selector?: MediaStreamTrack | null) => {\n    return this.pc.getStats(selector);\n  };\n\n  /**\n   * Maps the given track ID to the corresponding track type.\n   */\n  getTrackType = (trackId: string): TrackType | undefined => {\n    return this.trackIdToTrackType.get(trackId);\n  };\n\n  /**\n   * Checks if the `RTCPeerConnection` is healthy.\n   * It checks the ICE connection state and the peer connection state.\n   * If either state is `failed`, `disconnected`, or `closed`,\n   * it returns `false`, otherwise it returns `true`.\n   */\n  isHealthy = () => {\n    const failedStates = new Set<\n      RTCIceConnectionState | RTCPeerConnectionState\n    >(['failed', 'closed']);\n\n    const iceState = this.pc.iceConnectionState;\n    const connectionState = this.pc.connectionState;\n    return !failedStates.has(iceState) && !failedStates.has(connectionState);\n  };\n\n  /**\n   * Handles the ICECandidate event and\n   * Initiates an ICE Trickle process with the SFU.\n   */\n  private onIceCandidate = (e: RTCPeerConnectionIceEvent) => {\n    const { candidate } = e;\n    if (!candidate) {\n      this.logger.debug('null ice candidate');\n      return;\n    }\n\n    const iceCandidate = this.asJSON(candidate);\n    this.sfuClient\n      .iceTrickle({ peerType: this.peerType, iceCandidate })\n      .catch((err) => {\n        if (this.isDisposed) return;\n        this.logger.warn(`ICETrickle failed`, err);\n      });\n  };\n\n  /**\n   * Converts the ICE candidate to a JSON string.\n   */\n  private asJSON = (candidate: RTCIceCandidate): string => {\n    if (!candidate.usernameFragment) {\n      // react-native-webrtc doesn't include usernameFragment in the candidate\n      const segments = candidate.candidate.split(' ');\n      const ufragIndex = segments.findIndex((s) => s === 'ufrag') + 1;\n      const usernameFragment = segments[ufragIndex];\n      return JSON.stringify({ ...candidate, usernameFragment });\n    }\n    return JSON.stringify(candidate.toJSON());\n  };\n\n  /**\n   * Handles the ConnectionStateChange event.\n   */\n  private onConnectionStateChange = async () => {\n    const state = this.pc.connectionState;\n    this.logger.debug(`Connection state changed`, state);\n    if (this.tracer && (state === 'connected' || state === 'failed')) {\n      try {\n        const stats = await this.stats.get();\n        this.tracer.trace('getstats', stats.delta);\n      } catch (err) {\n        this.tracer.trace('getstatsOnFailure', (err as Error).toString());\n      }\n    }\n\n    // we can't recover from a failed connection state (contrary to ICE)\n    if (state === 'failed') {\n      this.onReconnectionNeeded?.(\n        WebsocketReconnectStrategy.REJOIN,\n        'Connection failed',\n      );\n      return;\n    }\n\n    this.handleConnectionStateUpdate(state);\n  };\n\n  /**\n   * Handles the ICE connection state change event.\n   */\n  private onIceConnectionStateChange = () => {\n    const state = this.pc.iceConnectionState;\n    this.logger.debug(`ICE connection state changed`, state);\n    this.handleConnectionStateUpdate(state);\n  };\n\n  private handleConnectionStateUpdate = (\n    state: RTCIceConnectionState | RTCPeerConnectionState,\n  ) => {\n    const { callingState } = this.state;\n    if (callingState === CallingState.OFFLINE) return;\n    if (callingState === CallingState.RECONNECTING) return;\n\n    // do nothing when ICE is restarting\n    if (this.isIceRestarting) return;\n\n    switch (state) {\n      case 'failed':\n        // in the `failed` state, we try to restart ICE immediately\n        this.logger.info('restartICE due to failed connection');\n        this.tryRestartIce();\n        break;\n\n      case 'disconnected':\n        // in the `disconnected` state, we schedule a restartICE() after a delay\n        // as the browser might recover the connection in the meantime\n        this.logger.info('disconnected connection, scheduling restartICE');\n        clearTimeout(this.iceRestartTimeout);\n        this.iceRestartTimeout = setTimeout(() => {\n          const currentState = this.pc.iceConnectionState;\n          if (currentState === 'disconnected' || currentState === 'failed') {\n            this.tryRestartIce();\n          }\n        }, this.iceRestartDelay);\n        break;\n\n      case 'connected':\n        // in the `connected` state, we clear the ice restart timeout if it exists\n        if (this.iceRestartTimeout) {\n          this.logger.info('connected connection, canceling restartICE');\n          clearTimeout(this.iceRestartTimeout);\n          this.iceRestartTimeout = undefined;\n        }\n        break;\n    }\n  };\n\n  /**\n   * Handles the ICE candidate error event.\n   */\n  private onIceCandidateError = (e: Event) => {\n    const errorMessage =\n      e instanceof RTCPeerConnectionIceErrorEvent\n        ? `${e.errorCode}: ${e.errorText}`\n        : e;\n    this.logger.debug('ICE Candidate error', errorMessage);\n  };\n\n  /**\n   * Handles the ICE gathering state change event.\n   */\n  private onIceGatherChange = () => {\n    this.logger.debug(`ICE Gathering State`, this.pc.iceGatheringState);\n  };\n\n  /**\n   * Handles the signaling state change event.\n   */\n  private onSignalingChange = () => {\n    this.logger.debug(`Signaling state changed`, this.pc.signalingState);\n  };\n}\n","import { PublishOption } from '../gen/video/sfu/models/models';\nimport type { OptimalVideoLayer } from './layers';\nimport type { PublishBundle, TrackLayersCache } from './types';\n\nexport class TransceiverCache {\n  private readonly cache: PublishBundle[] = [];\n  private readonly layers: TrackLayersCache[] = [];\n\n  /**\n   * An array maintaining the order how transceivers were added to the peer connection.\n   * This is needed because some browsers (Firefox) don't reliably report\n   * trackId and `mid` parameters.\n   */\n  private readonly transceiverOrder: RTCRtpTransceiver[] = [];\n\n  /**\n   * Adds a transceiver to the cache.\n   */\n  add = (bundle: PublishBundle) => {\n    this.cache.push(bundle);\n    this.transceiverOrder.push(bundle.transceiver);\n  };\n\n  /**\n   * Gets the transceiver for the given publish option.\n   */\n  get = (publishOption: PublishOption): PublishBundle | undefined => {\n    return this.cache.find(\n      (bundle) =>\n        bundle.publishOption.id === publishOption.id &&\n        bundle.publishOption.trackType === publishOption.trackType,\n    );\n  };\n\n  /**\n   * Updates the cached bundle with the given patch.\n   */\n  update = (publishOption: PublishOption, patch: Partial<PublishBundle>) => {\n    const bundle = this.get(publishOption);\n    if (bundle) Object.assign(bundle, patch);\n  };\n\n  /**\n   * Checks if the cache has the given publish option.\n   */\n  has = (publishOption: PublishOption): boolean => {\n    return !!this.get(publishOption);\n  };\n\n  /**\n   * Finds the first transceiver that satisfies the given predicate.\n   */\n  find = (\n    predicate: (bundle: PublishBundle) => boolean,\n  ): PublishBundle | undefined => {\n    return this.cache.find(predicate);\n  };\n\n  /**\n   * Provides all the items in the cache.\n   */\n  items = (): PublishBundle[] => {\n    return this.cache;\n  };\n\n  /**\n   * Init index of the transceiver in the cache.\n   */\n  indexOf = (transceiver: RTCRtpTransceiver): number => {\n    return this.transceiverOrder.indexOf(transceiver);\n  };\n\n  /**\n   * Gets cached video layers for the given track.\n   */\n  getLayers = (\n    publishOption: PublishOption,\n  ): OptimalVideoLayer[] | undefined => {\n    const entry = this.layers.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n    return entry?.layers;\n  };\n\n  /**\n   * Sets the video layers for the given track.\n   */\n  setLayers = (\n    publishOption: PublishOption,\n    layers: OptimalVideoLayer[] = [],\n  ) => {\n    const entry = this.findLayer(publishOption);\n    if (entry) {\n      entry.layers = layers;\n    } else {\n      this.layers.push({ publishOption, layers });\n    }\n  };\n\n  private findLayer = (publishOption: PublishOption) => {\n    return this.layers.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n  };\n}\n","import { videoLoggerSystem } from '../logger';\n\nexport const ensureExhausted = (x: never, message: string) => {\n  videoLoggerSystem.getLogger('helpers').warn(message, x);\n};\n","import { TrackType } from '../../gen/video/sfu/models/models';\nimport { TrackMuteType } from '../../types';\nimport { ensureExhausted } from '../../helpers/ensureExhausted';\n\nexport const trackTypeToParticipantStreamKey = (\n  trackType: TrackType,\n):\n  | 'audioStream'\n  | 'videoStream'\n  | 'screenShareStream'\n  | 'screenShareAudioStream'\n  | undefined => {\n  switch (trackType) {\n    case TrackType.SCREEN_SHARE:\n      return 'screenShareStream';\n    case TrackType.SCREEN_SHARE_AUDIO:\n      return 'screenShareAudioStream';\n    case TrackType.VIDEO:\n      return 'videoStream';\n    case TrackType.AUDIO:\n      return 'audioStream';\n    case TrackType.UNSPECIFIED:\n      throw new Error('Track type is unspecified');\n    default:\n      ensureExhausted(trackType, 'Unknown track type');\n  }\n};\n\nexport const muteTypeToTrackType = (\n  muteType: TrackMuteType,\n): TrackType | undefined => {\n  switch (muteType) {\n    case 'audio':\n      return TrackType.AUDIO;\n    case 'video':\n      return TrackType.VIDEO;\n    case 'screenshare':\n      return TrackType.SCREEN_SHARE;\n    case 'screenshare_audio':\n      return TrackType.SCREEN_SHARE_AUDIO;\n    default:\n      ensureExhausted(muteType, 'Unknown mute type');\n  }\n};\n\nexport const toTrackType = (trackType: string): TrackType | undefined => {\n  switch (trackType) {\n    case 'TRACK_TYPE_AUDIO':\n      return TrackType.AUDIO;\n    case 'TRACK_TYPE_VIDEO':\n      return TrackType.VIDEO;\n    case 'TRACK_TYPE_SCREEN_SHARE':\n      return TrackType.SCREEN_SHARE;\n    case 'TRACK_TYPE_SCREEN_SHARE_AUDIO':\n      return TrackType.SCREEN_SHARE_AUDIO;\n    default:\n      return undefined;\n  }\n};\n\nexport const isAudioTrackType = (trackType: TrackType): boolean =>\n  trackType === TrackType.AUDIO || trackType === TrackType.SCREEN_SHARE_AUDIO;\n","import { isSvcCodec } from './codecs';\nimport {\n  AudioBitrateProfile,\n  PublishOption,\n  VideoDimension,\n  VideoLayer,\n  VideoQuality,\n} from '../gen/video/sfu/models/models';\nimport { isAudioTrackType } from './helpers/tracks';\nimport { TrackPublishOptions } from './types';\n\nexport type OptimalVideoLayer = RTCRtpEncodingParameters & {\n  width: number;\n  height: number;\n  // NOTE OL: should be part of RTCRtpEncodingParameters\n  scalabilityMode?: string;\n};\n\n/**\n * Prepares the audio layer for the given track.\n * Based on the provided audio bitrate profile, we apply the appropriate bitrate.\n */\nexport const computeAudioLayers = (\n  publishOption: PublishOption,\n  options: TrackPublishOptions,\n): RTCRtpEncodingParameters[] | undefined => {\n  const { audioBitrateProfile } = options;\n  const profileConfig = publishOption.audioBitrateProfiles?.find(\n    (config) => config.profile === audioBitrateProfile,\n  );\n  const maxBitrate =\n    profileConfig?.bitrate ||\n    {\n      [AudioBitrateProfile.VOICE_STANDARD_UNSPECIFIED]: 64_000,\n      [AudioBitrateProfile.VOICE_HIGH_QUALITY]: 128_000,\n      [AudioBitrateProfile.MUSIC_HIGH_QUALITY]: 128_000,\n    }[audioBitrateProfile || AudioBitrateProfile.VOICE_STANDARD_UNSPECIFIED];\n\n  return [{ maxBitrate }];\n};\n\n/**\n * In SVC, we need to send only one video encoding (layer).\n * this layer will have the additional spatial and temporal layers\n * defined via the scalabilityMode property.\n *\n * @param layers the layers to process.\n */\nexport const toSvcEncodings = (\n  layers: RTCRtpEncodingParameters[] | undefined,\n): RTCRtpEncodingParameters[] | undefined => {\n  if (!layers) return;\n  // we take the highest quality layer, and we assign it to `q` encoder.\n  const withRid = (rid: string) => (layer: RTCRtpEncodingParameters) =>\n    layer.rid === rid;\n  const highestLayer =\n    layers.find(withRid('f')) ||\n    layers.find(withRid('h')) ||\n    layers.find(withRid('q'));\n  return [{ ...highestLayer, rid: 'q' }];\n};\n\n/**\n * Converts the rid to a video quality.\n */\nexport const ridToVideoQuality = (rid: string): VideoQuality => {\n  return rid === 'q'\n    ? VideoQuality.LOW_UNSPECIFIED\n    : rid === 'h'\n      ? VideoQuality.MID\n      : VideoQuality.HIGH; // default to HIGH\n};\n\n/**\n * Converts the given video layers to SFU video layers.\n */\nexport const toVideoLayers = (\n  layers: OptimalVideoLayer[] | undefined = [],\n): VideoLayer[] => {\n  return layers.map<VideoLayer>((layer) => ({\n    rid: layer.rid || '',\n    bitrate: layer.maxBitrate || 0,\n    fps: layer.maxFramerate || 0,\n    quality: ridToVideoQuality(layer.rid || ''),\n    videoDimension: { width: layer.width, height: layer.height },\n  }));\n};\n\n/**\n * Converts the spatial and temporal layers to a scalability mode.\n */\nconst toScalabilityMode = (spatialLayers: number, temporalLayers: number) =>\n  `L${spatialLayers}T${temporalLayers}${spatialLayers > 1 ? '_KEY' : ''}`;\n\n/**\n * Determines the most optimal video layers for the given track.\n *\n * @param videoTrack the video track to find optimal layers for.\n * @param publishOption the publish options for the track.\n */\nexport const computeVideoLayers = (\n  videoTrack: MediaStreamTrack,\n  publishOption: PublishOption,\n): OptimalVideoLayer[] | undefined => {\n  if (isAudioTrackType(publishOption.trackType)) return;\n  const optimalVideoLayers: OptimalVideoLayer[] = [];\n  const {\n    bitrate,\n    codec,\n    fps = 30,\n    maxSpatialLayers = 3,\n    maxTemporalLayers = 3,\n    videoDimension = { width: 1280, height: 720 },\n    useSingleLayer,\n  } = publishOption;\n  const { width = videoDimension.width, height = videoDimension.height } =\n    videoTrack.getSettings();\n  const maxBitrate = getComputedMaxBitrate(\n    videoDimension,\n    width,\n    height,\n    bitrate,\n  );\n  let downscaleFactor = 1;\n  let bitrateFactor = 1;\n  const svcCodec = isSvcCodec(codec?.name);\n  for (const rid of ['f', 'h', 'q'].slice(0, maxSpatialLayers)) {\n    const layer: OptimalVideoLayer = {\n      active: true,\n      rid,\n      width: Math.round(width / downscaleFactor),\n      height: Math.round(height / downscaleFactor),\n      maxBitrate:\n        Math.round(maxBitrate / bitrateFactor) ||\n        { q: 300_000, h: 750_000, f: 1_250_000 }[rid],\n      maxFramerate: fps,\n    };\n    if (svcCodec) {\n      // for SVC codecs, we need to set the scalability mode, and the\n      // codec will handle the rest (layers, temporal layers, etc.)\n      layer.scalabilityMode = toScalabilityMode(\n        useSingleLayer ? 1 : maxSpatialLayers,\n        maxTemporalLayers,\n      );\n    } else {\n      // for non-SVC codecs, we need to downscale proportionally (simulcast)\n      layer.scaleResolutionDownBy = downscaleFactor;\n    }\n\n    downscaleFactor *= 2;\n    bitrateFactor *= 2;\n\n    // Reversing the order [f, h, q] to [q, h, f] as Chrome uses encoding index\n    // when deciding which layer to disable when CPU or bandwidth is constrained.\n    // Encodings should be ordered in increasing spatial resolution order.\n    optimalVideoLayers.unshift(layer);\n  }\n\n  // for simplicity, we start with all layers enabled, then this function\n  // will clear/reassign the layers that are not needed\n  return withSimulcastConstraints(\n    width,\n    height,\n    optimalVideoLayers,\n    useSingleLayer,\n  );\n};\n\n/**\n * Computes the maximum bitrate for a given resolution.\n * If the current resolution is lower than the target resolution,\n * we want to proportionally reduce the target bitrate.\n * If the current resolution is higher than the target resolution,\n * we want to use the target bitrate.\n *\n * @param targetResolution the target resolution.\n * @param currentWidth the current width of the track.\n * @param currentHeight the current height of the track.\n * @param bitrate the target bitrate.\n */\nexport const getComputedMaxBitrate = (\n  targetResolution: VideoDimension,\n  currentWidth: number,\n  currentHeight: number,\n  bitrate: number,\n): number => {\n  // if the current resolution is lower than the target resolution,\n  // we want to proportionally reduce the target bitrate\n  const { width: targetWidth, height: targetHeight } = targetResolution;\n  if (currentWidth < targetWidth || currentHeight < targetHeight) {\n    const currentPixels = currentWidth * currentHeight;\n    const targetPixels = targetWidth * targetHeight;\n    const reductionFactor = currentPixels / targetPixels;\n    return Math.round(bitrate * reductionFactor);\n  }\n  return bitrate;\n};\n\n/**\n * Browsers have different simulcast constraints for different video resolutions.\n *\n * This function modifies the provided list of video layers according to the\n * current implementation of simulcast constraints in the Chromium based browsers.\n *\n * https://chromium.googlesource.com/external/webrtc/+/refs/heads/main/media/engine/simulcast.cc#90\n */\nconst withSimulcastConstraints = (\n  width: number,\n  height: number,\n  optimalVideoLayers: OptimalVideoLayer[],\n  useSingleLayer: boolean,\n) => {\n  let layers: OptimalVideoLayer[];\n\n  const size = Math.max(width, height);\n  if (size <= 320) {\n    // provide only one layer 320x240 (f), the one with the highest quality\n    layers = optimalVideoLayers.filter((layer) => layer.rid === 'f');\n  } else if (size <= 640) {\n    // provide two layers, 320x240 (h) and 640x480 (f)\n    layers = optimalVideoLayers.filter((layer) => layer.rid !== 'q');\n  } else {\n    // provide three layers for sizes > 640x480\n    layers = optimalVideoLayers;\n  }\n\n  // we might have removed some layers, so we need to reassign the rid\n  // to match the expected order of [q, h, f] for simulcast\n  const ridMapping = ['q', 'h', 'f'];\n  return layers.map<OptimalVideoLayer>((layer, index, arr) => ({\n    ...layer,\n    rid: ridMapping[index], // reassign rid\n    active: useSingleLayer && index < arr.length - 1 ? false : layer.active,\n  }));\n};\n","import { parse, write } from 'sdp-transform';\n\n/**\n * Extracts the mid from the transceiver or the SDP.\n *\n * @param transceiver the transceiver.\n * @param transceiverInitIndex the index of the transceiver in the transceiver's init array.\n * @param sdp the SDP.\n */\nexport const extractMid = (\n  transceiver: RTCRtpTransceiver,\n  transceiverInitIndex: number,\n  sdp: string | undefined,\n): string => {\n  if (transceiver.mid) return transceiver.mid;\n  if (!sdp) return String(transceiverInitIndex);\n\n  const track = transceiver.sender.track!;\n  const parsedSdp = parse(sdp);\n  const media = parsedSdp.media.find((m) => {\n    return (\n      m.type === track.kind &&\n      // if `msid` is not present, we assume that the track is the first one\n      (m.msid?.includes(track.id) ?? true)\n    );\n  });\n  if (typeof media?.mid !== 'undefined') return String(media.mid);\n  if (transceiverInitIndex < 0) return '';\n  return String(transceiverInitIndex);\n};\n\n/**\n * Enables stereo in the answer SDP based on the offered stereo in the offer SDP.\n *\n * @param offerSdp the offer SDP containing the stereo configuration.\n * @param answerSdp the answer SDP to be modified.\n */\nexport const enableStereo = (offerSdp: string, answerSdp: string): string => {\n  const offeredStereoMids = new Set<string>();\n  const parsedOfferSdp = parse(offerSdp);\n  for (const media of parsedOfferSdp.media) {\n    if (media.type !== 'audio') continue;\n\n    const opus = media.rtp.find((r) => r.codec === 'opus');\n    if (!opus) continue;\n\n    for (const fmtp of media.fmtp) {\n      if (fmtp.payload === opus.payload && fmtp.config.includes('stereo=1')) {\n        offeredStereoMids.add(media.mid!);\n      }\n    }\n  }\n\n  // No stereo offered, return the original answerSdp\n  if (offeredStereoMids.size === 0) return answerSdp;\n\n  const parsedAnswerSdp = parse(answerSdp);\n  for (const media of parsedAnswerSdp.media) {\n    if (media.type !== 'audio' || !offeredStereoMids.has(media.mid!)) continue;\n\n    const opus = media.rtp.find((r) => r.codec === 'opus');\n    if (!opus) continue;\n\n    for (const fmtp of media.fmtp) {\n      if (fmtp.payload === opus.payload && !fmtp.config.includes('stereo=1')) {\n        fmtp.config += ';stereo=1';\n      }\n    }\n  }\n\n  return write(parsedAnswerSdp);\n};\n","import { BasePeerConnection } from './BasePeerConnection';\nimport {\n  PublishBundle,\n  PublisherConstructorOpts,\n  TrackPublishOptions,\n} from './types';\nimport { NegotiationError } from './NegotiationError';\nimport { TransceiverCache } from './TransceiverCache';\nimport {\n  PeerType,\n  PublishOption,\n  TrackInfo,\n  TrackType,\n} from '../gen/video/sfu/models/models';\nimport { VideoSender } from '../gen/video/sfu/event/events';\nimport {\n  computeAudioLayers,\n  computeVideoLayers,\n  toSvcEncodings,\n  toVideoLayers,\n} from './layers';\nimport { isSvcCodec } from './codecs';\nimport { isAudioTrackType } from './helpers/tracks';\nimport { extractMid } from './helpers/sdp';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { isReactNative } from '../helpers/platforms';\n\n/**\n * The `Publisher` is responsible for publishing/unpublishing media streams to/from the SFU\n *\n * @internal\n */\nexport class Publisher extends BasePeerConnection {\n  private readonly transceiverCache = new TransceiverCache();\n  private readonly clonedTracks = new Set<MediaStreamTrack>();\n  private publishOptions: PublishOption[];\n\n  /**\n   * Constructs a new `Publisher` instance.\n   */\n  constructor({ publishOptions, ...baseOptions }: PublisherConstructorOpts) {\n    super(PeerType.PUBLISHER_UNSPECIFIED, baseOptions);\n    this.publishOptions = publishOptions;\n\n    this.on('iceRestart', (iceRestart) => {\n      if (iceRestart.peerType !== PeerType.PUBLISHER_UNSPECIFIED) return;\n      this.tryRestartIce();\n    });\n\n    this.on('changePublishQuality', async (event) => {\n      for (const videoSender of event.videoSenders) {\n        await this.changePublishQuality(videoSender);\n      }\n    });\n\n    this.on('changePublishOptions', (event) => {\n      this.publishOptions = event.publishOptions;\n      return this.syncPublishOptions();\n    });\n  }\n\n  /**\n   * Disposes this Publisher instance.\n   */\n  dispose() {\n    super.dispose();\n    this.stopAllTracks();\n    this.clonedTracks.clear();\n  }\n\n  /**\n   * Starts publishing the given track of the given media stream.\n   *\n   * Consecutive calls to this method will replace the stream.\n   * The previous stream will be stopped.\n   *\n   * @param track the track to publish.\n   * @param trackType the track type to publish.\n   * @param options the publish options to use.\n   */\n  publish = async (\n    track: MediaStreamTrack,\n    trackType: TrackType,\n    options: TrackPublishOptions = {},\n  ) => {\n    if (!this.publishOptions.some((o) => o.trackType === trackType)) {\n      throw new Error(`No publish options found for ${TrackType[trackType]}`);\n    }\n\n    for (const publishOption of this.publishOptions) {\n      if (publishOption.trackType !== trackType) continue;\n\n      // create a clone of the track as otherwise the same trackId will\n      // appear in the SDP in multiple transceivers\n      const trackToPublish = this.cloneTrack(track);\n\n      const { transceiver } = this.transceiverCache.get(publishOption) || {};\n      if (!transceiver) {\n        await this.addTransceiver(trackToPublish, publishOption, options);\n      } else {\n        const previousTrack = transceiver.sender.track;\n        await this.updateTransceiver(\n          transceiver,\n          trackToPublish,\n          trackType,\n          options,\n        );\n        if (!isReactNative()) {\n          this.stopTrack(previousTrack);\n        }\n      }\n    }\n  };\n\n  /**\n   * Adds a new transceiver carrying the given track to the peer connection.\n   */\n  private addTransceiver = async (\n    track: MediaStreamTrack,\n    publishOption: PublishOption,\n    options: TrackPublishOptions,\n  ) => {\n    const encodings = isAudioTrackType(publishOption.trackType)\n      ? computeAudioLayers(publishOption, options)\n      : computeVideoLayers(track, publishOption);\n    const sendEncodings = isSvcCodec(publishOption.codec?.name)\n      ? toSvcEncodings(encodings)\n      : encodings;\n    const transceiver = this.pc.addTransceiver(track, {\n      direction: 'sendonly',\n      sendEncodings,\n    });\n\n    const params = transceiver.sender.getParameters();\n    params.degradationPreference = 'maintain-framerate';\n    await transceiver.sender.setParameters(params);\n\n    const trackType = publishOption.trackType;\n    this.logger.debug(`Added ${TrackType[trackType]} transceiver`);\n    this.transceiverCache.add({ publishOption, transceiver, options });\n    this.trackIdToTrackType.set(track.id, trackType);\n\n    await this.negotiate();\n  };\n\n  /**\n   * Updates the transceiver with the given track and track type.\n   */\n  private updateTransceiver = async (\n    transceiver: RTCRtpTransceiver,\n    track: MediaStreamTrack | null,\n    trackType: TrackType,\n    options: TrackPublishOptions = {},\n  ) => {\n    const sender = transceiver.sender;\n    if (sender.track) this.trackIdToTrackType.delete(sender.track.id);\n    await sender.replaceTrack(track);\n    if (track) this.trackIdToTrackType.set(track.id, trackType);\n    if (isAudioTrackType(trackType)) {\n      await this.updateAudioPublishOptions(trackType, options);\n    }\n  };\n\n  /**\n   * Updates the publish options for the given track type.\n   */\n  private updateAudioPublishOptions = async (\n    trackType: TrackType,\n    options: TrackPublishOptions,\n  ) => {\n    for (const publishOption of this.publishOptions) {\n      if (publishOption.trackType !== trackType) continue;\n      const bundle = this.transceiverCache.get(publishOption);\n      if (!bundle) continue;\n\n      const { transceiver, options: current } = bundle;\n      if (current.audioBitrateProfile !== options.audioBitrateProfile) {\n        const encodings = computeAudioLayers(publishOption, options);\n        if (encodings && encodings.length > 0) {\n          const params = transceiver.sender.getParameters();\n          const [currentEncoding] = params.encodings;\n          const [targetEncoding] = encodings;\n          if (currentEncoding.maxBitrate !== targetEncoding.maxBitrate) {\n            currentEncoding.maxBitrate = targetEncoding.maxBitrate;\n          }\n          await transceiver.sender.setParameters(params);\n        }\n      }\n      this.transceiverCache.update(publishOption, { options });\n    }\n  };\n\n  /**\n   * Synchronizes the current Publisher state with the provided publish options.\n   */\n  private syncPublishOptions = async () => {\n    // enable publishing with new options -> [av1, vp9]\n    for (const publishOption of this.publishOptions) {\n      const { trackType } = publishOption;\n      if (!this.isPublishing(trackType)) continue;\n      if (this.transceiverCache.has(publishOption)) continue;\n\n      const item = this.transceiverCache.find(\n        (i) =>\n          !!i.transceiver.sender.track &&\n          i.publishOption.trackType === trackType,\n      );\n      if (!item) continue;\n\n      // take the track from the existing transceiver for the same track type,\n      // clone it and publish it with the new publish options\n      const track = this.cloneTrack(item.transceiver.sender.track!);\n      await this.addTransceiver(track, publishOption, item.options);\n    }\n\n    // stop publishing with options not required anymore -> [vp9]\n    for (const item of this.transceiverCache.items()) {\n      const { publishOption, transceiver } = item;\n      const hasPublishOption = this.publishOptions.some(\n        (option) =>\n          option.id === publishOption.id &&\n          option.trackType === publishOption.trackType,\n      );\n      if (hasPublishOption) continue;\n      // it is safe to stop the track here, it is a clone\n      this.stopTrack(transceiver.sender.track);\n      await this.updateTransceiver(transceiver, null, publishOption.trackType);\n    }\n  };\n\n  /**\n   * Returns true if the given track type is currently being published to the SFU.\n   *\n   * @param trackType the track type to check. If omitted, checks if any track is being published.\n   */\n  isPublishing = (trackType?: TrackType): boolean => {\n    for (const item of this.transceiverCache.items()) {\n      if (trackType && item.publishOption.trackType !== trackType) continue;\n\n      const track = item.transceiver.sender.track;\n      if (!track) continue;\n\n      if (track.readyState === 'live' && track.enabled) return true;\n    }\n    return false;\n  };\n\n  /**\n   * Stops the cloned track that is being published to the SFU.\n   */\n  stopTracks = (...trackTypes: TrackType[]) => {\n    for (const item of this.transceiverCache.items()) {\n      const { publishOption, transceiver } = item;\n      if (!trackTypes.includes(publishOption.trackType)) continue;\n      this.stopTrack(transceiver.sender.track);\n    }\n  };\n\n  /**\n   * Stops all the cloned tracks that are being published to the SFU.\n   */\n  stopAllTracks = () => {\n    for (const { transceiver } of this.transceiverCache.items()) {\n      this.stopTrack(transceiver.sender.track);\n    }\n    for (const track of this.clonedTracks) {\n      this.stopTrack(track);\n    }\n  };\n\n  private changePublishQuality = async (videoSender: VideoSender) => {\n    const { trackType, layers, publishOptionId } = videoSender;\n    const enabledLayers = layers.filter((l) => l.active);\n\n    const tag = 'Update publish quality:';\n    this.logger.info(`${tag} requested layers by SFU:`, enabledLayers);\n\n    const transceiverId = this.transceiverCache.find(\n      (t) =>\n        t.publishOption.id === publishOptionId &&\n        t.publishOption.trackType === trackType,\n    );\n    const sender = transceiverId?.transceiver.sender;\n    if (!sender) {\n      return this.logger.warn(`${tag} no video sender found.`);\n    }\n\n    const params = sender.getParameters();\n    if (params.encodings.length === 0) {\n      return this.logger.warn(`${tag} there are no encodings set.`);\n    }\n\n    const codecInUse = transceiverId?.publishOption.codec?.name;\n    const usesSvcCodec = codecInUse && isSvcCodec(codecInUse);\n\n    let changed = false;\n    for (const encoder of params.encodings) {\n      const layer = usesSvcCodec\n        ? // for SVC, we only have one layer (q) and often rid is omitted\n          enabledLayers[0]\n        : // for non-SVC, we need to find the layer by rid (simulcast)\n          (enabledLayers.find((l) => l.name === encoder.rid) ??\n          (params.encodings.length === 1 ? enabledLayers[0] : undefined));\n\n      // flip 'active' flag only when necessary\n      const shouldActivate = !!layer?.active;\n      if (shouldActivate !== encoder.active) {\n        encoder.active = shouldActivate;\n        changed = true;\n      }\n\n      // skip the rest of the settings if the layer is disabled or not found\n      if (!layer) continue;\n\n      const {\n        maxFramerate,\n        scaleResolutionDownBy,\n        maxBitrate,\n        scalabilityMode,\n      } = layer;\n      if (\n        scaleResolutionDownBy >= 1 &&\n        scaleResolutionDownBy !== encoder.scaleResolutionDownBy\n      ) {\n        encoder.scaleResolutionDownBy = scaleResolutionDownBy;\n        changed = true;\n      }\n      if (maxBitrate > 0 && maxBitrate !== encoder.maxBitrate) {\n        encoder.maxBitrate = maxBitrate;\n        changed = true;\n      }\n      if (maxFramerate > 0 && maxFramerate !== encoder.maxFramerate) {\n        encoder.maxFramerate = maxFramerate;\n        changed = true;\n      }\n      // @ts-expect-error scalabilityMode is not in the typedefs yet\n      if (scalabilityMode && scalabilityMode !== encoder.scalabilityMode) {\n        // @ts-expect-error scalabilityMode is not in the typedefs yet\n        encoder.scalabilityMode = scalabilityMode;\n        changed = true;\n      }\n    }\n\n    const activeEncoders = params.encodings.filter((e) => e.active);\n    if (!changed) {\n      return this.logger.info(`${tag} no change:`, activeEncoders);\n    }\n\n    await sender.setParameters(params);\n    this.logger.info(`${tag} enabled rids:`, activeEncoders);\n  };\n\n  /**\n   * Restarts the ICE connection and renegotiates with the SFU.\n   */\n  restartIce = async (): Promise<void> => {\n    this.logger.debug('Restarting ICE connection');\n    const signalingState = this.pc.signalingState;\n    if (this.isIceRestarting || signalingState === 'have-local-offer') {\n      this.logger.debug('ICE restart is already in progress');\n      return;\n    }\n    await this.negotiate({ iceRestart: true });\n  };\n\n  /**\n   * Initiates a new offer/answer exchange with the currently connected SFU.\n   *\n   * @param options the optional offer options to use.\n   */\n  private negotiate = async (options?: RTCOfferOptions): Promise<void> => {\n    return withoutConcurrency(`publisher.negotiate.${this.lock}`, async () => {\n      const offer = await this.pc.createOffer(options);\n      const tracks = this.getAnnouncedTracks(offer.sdp);\n      if (!tracks.length) throw new Error(`Can't negotiate without any tracks`);\n\n      try {\n        this.isIceRestarting = options?.iceRestart ?? false;\n        await this.pc.setLocalDescription(offer);\n\n        const { sdp = '' } = offer;\n        const { response } = await this.sfuClient.setPublisher({ sdp, tracks });\n        if (response.error) throw new NegotiationError(response.error);\n\n        const { sdp: answerSdp } = response;\n        await this.pc.setRemoteDescription({ type: 'answer', sdp: answerSdp });\n      } catch (err) {\n        // negotiation failed, rollback to the previous state\n        if (this.pc.signalingState === 'have-local-offer') {\n          await this.pc.setLocalDescription({ type: 'rollback' });\n        }\n        throw err;\n      } finally {\n        this.isIceRestarting = false;\n      }\n\n      this.addTrickledIceCandidates();\n    });\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   */\n  getPublishedTracks = (): MediaStreamTrack[] => {\n    const tracks: MediaStreamTrack[] = [];\n    for (const { transceiver } of this.transceiverCache.items()) {\n      const track = transceiver.sender.track;\n      if (track && track.readyState === 'live') tracks.push(track);\n    }\n    return tracks;\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   * @param sdp an optional SDP to extract the `mid` from.\n   */\n  getAnnouncedTracks = (sdp: string | undefined): TrackInfo[] => {\n    const trackInfos: TrackInfo[] = [];\n    for (const bundle of this.transceiverCache.items()) {\n      if (!bundle.transceiver.sender.track) continue;\n      trackInfos.push(this.toTrackInfo(bundle, sdp));\n    }\n    return trackInfos;\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   * This method shall be used for the reconnection flow.\n   * There we shouldn't announce the tracks that have been stopped due to a codec switch.\n   */\n  getAnnouncedTracksForReconnect = (): TrackInfo[] => {\n    const sdp = this.pc.localDescription?.sdp;\n    const trackInfos: TrackInfo[] = [];\n    for (const publishOption of this.publishOptions) {\n      const bundle = this.transceiverCache.get(publishOption);\n      if (!bundle || !bundle.transceiver.sender.track) continue;\n      trackInfos.push(this.toTrackInfo(bundle, sdp));\n    }\n    return trackInfos;\n  };\n\n  /**\n   * Converts the given transceiver to a `TrackInfo` object.\n   */\n  private toTrackInfo = (\n    bundle: PublishBundle,\n    sdp: string | undefined,\n  ): TrackInfo => {\n    const { transceiver, publishOption } = bundle;\n    const track = transceiver.sender.track!;\n    const isTrackLive = track.readyState === 'live';\n    const layers = isTrackLive\n      ? computeVideoLayers(track, publishOption)\n      : this.transceiverCache.getLayers(publishOption);\n    this.transceiverCache.setLayers(publishOption, layers);\n\n    const isAudioTrack = isAudioTrackType(publishOption.trackType);\n    const transceiverIndex = this.transceiverCache.indexOf(transceiver);\n    const audioSettings = this.state.settings?.audio;\n    const stereo =\n      publishOption.trackType === TrackType.SCREEN_SHARE_AUDIO ||\n      (isAudioTrack && !!audioSettings?.hifi_audio_enabled);\n\n    return {\n      trackId: track.id,\n      layers: toVideoLayers(layers),\n      trackType: publishOption.trackType,\n      mid: extractMid(transceiver, transceiverIndex, sdp),\n      stereo,\n      dtx: isAudioTrack && !!audioSettings?.opus_dtx_enabled,\n      red: isAudioTrack && !!audioSettings?.redundant_coding_enabled,\n      muted: !isTrackLive,\n      codec: publishOption.codec,\n      publishOptionId: publishOption.id,\n    };\n  };\n\n  private cloneTrack = (track: MediaStreamTrack): MediaStreamTrack => {\n    const clone = track.clone();\n    this.clonedTracks.add(clone);\n    return clone;\n  };\n\n  private stopTrack = (track: MediaStreamTrack | null | undefined) => {\n    if (!track) return;\n    track.stop();\n    this.clonedTracks.delete(track);\n  };\n}\n","import { BasePeerConnection } from './BasePeerConnection';\nimport { BasePeerConnectionOpts } from './types';\nimport { NegotiationError } from './NegotiationError';\nimport { PeerType } from '../gen/video/sfu/models/models';\nimport { SubscriberOffer } from '../gen/video/sfu/event/events';\nimport { toTrackType, trackTypeToParticipantStreamKey } from './helpers/tracks';\nimport { enableStereo } from './helpers/sdp';\n\n/**\n * A wrapper around the `RTCPeerConnection` that handles the incoming\n * media streams from the SFU.\n *\n * @internal\n */\nexport class Subscriber extends BasePeerConnection {\n  /**\n   * Constructs a new `Subscriber` instance.\n   */\n  constructor(opts: BasePeerConnectionOpts) {\n    super(PeerType.SUBSCRIBER, opts);\n    this.pc.addEventListener('track', this.handleOnTrack);\n\n    this.on('subscriberOffer', async (subscriberOffer) => {\n      return this.negotiate(subscriberOffer).catch((err) => {\n        this.logger.error(`Negotiation failed.`, err);\n      });\n    });\n  }\n\n  /**\n   * Detaches the event handlers from the `RTCPeerConnection`.\n   * This is useful when we want to replace the `RTCPeerConnection`\n   * instance with a new one (in case of migration).\n   */\n  detachEventHandlers() {\n    super.detachEventHandlers();\n    this.pc.removeEventListener('track', this.handleOnTrack);\n  }\n\n  /**\n   * Restarts the ICE connection and renegotiates with the SFU.\n   */\n  restartIce = async () => {\n    this.logger.debug('Restarting ICE connection');\n    if (this.pc.signalingState === 'have-remote-offer') {\n      this.logger.debug('ICE restart is already in progress');\n      return;\n    }\n    if (this.pc.connectionState === 'new') {\n      this.logger.debug(\n        `ICE connection is not yet established, skipping restart.`,\n      );\n      return;\n    }\n    const previousIsIceRestarting = this.isIceRestarting;\n    this.isIceRestarting = true;\n    try {\n      const { response } = await this.sfuClient.iceRestart({\n        peerType: PeerType.SUBSCRIBER,\n      });\n      if (response.error) throw new NegotiationError(response.error);\n    } catch (e) {\n      // restore the previous state, as our intent for restarting ICE failed\n      this.isIceRestarting = previousIsIceRestarting;\n      throw e;\n    }\n  };\n\n  private handleOnTrack = (e: RTCTrackEvent) => {\n    const [primaryStream] = e.streams;\n    // example: `e3f6aaf8-b03d-4911-be36-83f47d37a76a:TRACK_TYPE_VIDEO`\n    const [trackId, rawTrackType] = primaryStream.id.split(':');\n    const participantToUpdate = this.state.participants.find(\n      (p) => p.trackLookupPrefix === trackId,\n    );\n    this.logger.debug(\n      `[onTrack]: Got remote ${rawTrackType} track for userId: ${participantToUpdate?.userId}`,\n      e.track.id,\n      e.track,\n    );\n\n    const trackDebugInfo = `${participantToUpdate?.userId} ${rawTrackType}:${trackId}`;\n    e.track.addEventListener('mute', () => {\n      this.logger.info(`[onTrack]: Track muted: ${trackDebugInfo}`);\n    });\n\n    e.track.addEventListener('unmute', () => {\n      this.logger.info(`[onTrack]: Track unmuted: ${trackDebugInfo}`);\n    });\n\n    e.track.addEventListener('ended', () => {\n      this.logger.info(`[onTrack]: Track ended: ${trackDebugInfo}`);\n      this.state.removeOrphanedTrack(primaryStream.id);\n    });\n\n    const trackType = toTrackType(rawTrackType);\n    if (!trackType) {\n      return this.logger.error(`Unknown track type: ${rawTrackType}`);\n    }\n\n    this.trackIdToTrackType.set(e.track.id, trackType);\n\n    if (!participantToUpdate) {\n      this.logger.warn(\n        `[onTrack]: Received track for unknown participant: ${trackId}`,\n        e,\n      );\n      this.state.registerOrphanedTrack({\n        id: primaryStream.id,\n        trackLookupPrefix: trackId,\n        track: primaryStream,\n        trackType,\n      });\n      return;\n    }\n\n    const streamKindProp = trackTypeToParticipantStreamKey(trackType);\n    if (!streamKindProp) {\n      this.logger.error(`Unknown track type: ${rawTrackType}`);\n      return;\n    }\n\n    // get the previous stream to dispose it later\n    // usually this happens during migration, when the stream is replaced\n    // with a new one but the old one is still in the state\n    const previousStream = participantToUpdate[streamKindProp];\n\n    // replace the previous stream with the new one, prevents flickering\n    this.state.updateParticipant(participantToUpdate.sessionId, {\n      [streamKindProp]: primaryStream,\n    });\n\n    // now, dispose the previous stream if it exists\n    if (previousStream) {\n      this.logger.info(\n        `[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${participantToUpdate.userId}`,\n      );\n      previousStream.getTracks().forEach((t) => {\n        t.stop();\n        previousStream.removeTrack(t);\n      });\n    }\n  };\n\n  private negotiate = async (subscriberOffer: SubscriberOffer) => {\n    await this.pc.setRemoteDescription({\n      type: 'offer',\n      sdp: subscriberOffer.sdp,\n    });\n\n    this.addTrickledIceCandidates();\n\n    const answer = await this.pc.createAnswer();\n    if (answer.sdp) {\n      answer.sdp = enableStereo(subscriberOffer.sdp, answer.sdp);\n    }\n    await this.pc.setLocalDescription(answer);\n\n    await this.sfuClient.sendAnswer({\n      peerType: PeerType.SUBSCRIBER,\n      sdp: answer.sdp || '',\n    });\n\n    this.isIceRestarting = false;\n  };\n}\n","import { SfuEvent } from '../gen/video/sfu/event/events';\nimport { DispatchableMessage, SfuEventKinds } from './Dispatcher';\nimport { Tracer } from '../stats';\nimport { videoLoggerSystem } from '../logger';\n\nexport const createWebSocketSignalChannel = (opts: {\n  endpoint: string;\n  onMessage: <K extends SfuEventKinds>(message: DispatchableMessage<K>) => void;\n  tag: string;\n  tracer: Tracer | undefined;\n}) => {\n  const { endpoint, onMessage, tag, tracer } = opts;\n  const logger = videoLoggerSystem.getLogger('SfuClientWS', { tags: [tag] });\n  logger.debug('Creating signaling WS channel:', endpoint);\n  const ws = new WebSocket(endpoint);\n  ws.binaryType = 'arraybuffer'; // do we need this?\n\n  ws.addEventListener('error', (e) => {\n    logger.error('Signaling WS channel error', e);\n    tracer?.trace('signal.ws.error', e);\n  });\n\n  ws.addEventListener('close', (e) => {\n    logger.info('Signaling WS channel is closed', e);\n    tracer?.trace('signal.ws.close', e);\n  });\n\n  ws.addEventListener('open', (e) => {\n    logger.info('Signaling WS channel is open', e);\n    tracer?.trace('signal.ws.open', e);\n  });\n\n  ws.addEventListener('message', (e) => {\n    try {\n      const message =\n        e.data instanceof ArrayBuffer\n          ? SfuEvent.fromBinary(new Uint8Array(e.data))\n          : SfuEvent.fromJsonString(e.data.toString());\n\n      onMessage(message as DispatchableMessage<SfuEventKinds>);\n    } catch (err) {\n      const message =\n        'Failed to decode a message. Check whether the Proto models match.';\n      logger.error(message, { event: e, error: err });\n      tracer?.trace('signal.ws.message.error', message);\n    }\n  });\n  return ws;\n};\n","import { ICEServer } from '../../gen/coordinator';\n\nexport const toRtcConfiguration = (config: ICEServer[]): RTCConfiguration => {\n  return {\n    bundlePolicy: 'max-bundle',\n    iceServers: config.map((ice) => ({\n      urls: ice.urls,\n      username: ice.username,\n      credential: ice.password,\n    })),\n  };\n};\n","export interface SafePromise<T> {\n  (): Promise<T>;\n  checkPending(): boolean;\n}\n\ntype Fulfillment<T> =\n  | {\n      status: 'resolved';\n      result: T;\n    }\n  | {\n      status: 'rejected';\n      error: unknown;\n    };\n\n/**\n * Saving a long-lived reference to a promise that can reject can be unsafe,\n * since rejecting the promise causes an unhandled rejection error (even if the\n * rejection is handled everywhere promise result is expected).\n *\n * To avoid that, we add both resolution and rejection handlers to the promise.\n * That way, the saved promise never rejects. A callback is provided as return\n * value to build a *new* promise, that resolves and rejects along with\n * the original promise.\n * @param promise Promise to wrap, which possibly rejects\n * @returns Callback to build a new promise, which resolves and rejects along\n * with the original promise\n */\nexport function makeSafePromise<T>(promise: Promise<T>): SafePromise<T> {\n  let isPending = true;\n\n  const safePromise: Promise<Fulfillment<T>> = promise\n    .then(\n      (result) => ({ status: 'resolved' as const, result }),\n      (error) => ({ status: 'rejected' as const, error }),\n    )\n    .finally(() => (isPending = false));\n\n  const unwrapPromise = () =>\n    safePromise.then((fulfillment) => {\n      if (fulfillment.status === 'rejected') throw fulfillment.error;\n      return fulfillment.result;\n    });\n\n  unwrapPromise.checkPending = () => isPending;\n  return unwrapPromise;\n}\n\nexport type PromiseWithResolvers<T> = {\n  promise: Promise<T>;\n  resolve: (value: T | PromiseLike<T>) => void;\n  reject: (reason: any) => void;\n  isResolved: () => boolean;\n  isRejected: () => boolean;\n};\n\n/**\n * Creates a new promise with resolvers.\n *\n * Based on:\n * - https://github.com/tc39/proposal-promise-with-resolvers/blob/main/polyfills.js\n */\nexport const promiseWithResolvers = <T = void>(): PromiseWithResolvers<T> => {\n  let resolve: (value: T | PromiseLike<T>) => void;\n  let reject: (reason: any) => void;\n  const promise = new Promise<T>((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n\n  let isResolved = false;\n  let isRejected = false;\n\n  const resolver = (value: T | PromiseLike<T>) => {\n    isResolved = true;\n    resolve(value);\n  };\n\n  const rejecter = (reason: any) => {\n    isRejected = true;\n    reject(reason);\n  };\n\n  return {\n    promise,\n    resolve: resolver,\n    reject: rejecter,\n    isResolved: () => isResolved,\n    isRejected: () => isRejected,\n  };\n};\n","const uninitialized = Symbol('uninitialized');\n\n/**\n * Lazily creates a value using a provided factory\n */\nexport function lazy<T, A>(factory: (...args: A[]) => T): (...args: A[]) => T {\n  let value: T | typeof uninitialized = uninitialized;\n  return (...args: A[]) => {\n    if (value === uninitialized) {\n      value = factory(...args);\n    }\n\n    return value;\n  };\n}\n","import { WorkerTimer } from '@stream-io/worker-timer';\nimport { lazy } from '../helpers/lazy';\n\nlet timerWorkerEnabled = false;\n\nexport const enableTimerWorker = () => {\n  timerWorkerEnabled = true;\n};\n\nexport const getTimers = lazy(() => {\n  return new WorkerTimer({ useWorker: timerWorkerEnabled });\n});\n","import { SignalServerClient } from './gen/video/sfu/signal_rpc/signal.client';\nimport {\n  createSignalClient,\n  retryable,\n  withHeaders,\n  withRequestLogger,\n  withRequestTracer,\n} from './rpc';\nimport {\n  createWebSocketSignalChannel,\n  Dispatcher,\n  IceTrickleBuffer,\n  SfuEventKinds,\n} from './rtc';\nimport {\n  JoinRequest,\n  JoinResponse,\n  SfuRequest,\n} from './gen/video/sfu/event/events';\nimport {\n  ICERestartRequest,\n  SendAnswerRequest,\n  SendStatsRequest,\n  SetPublisherRequest,\n  TrackMuteState,\n  TrackSubscriptionDetails,\n} from './gen/video/sfu/signal_rpc/signal';\nimport { ICETrickle } from './gen/video/sfu/models/models';\nimport { StreamClient } from './coordinator/connection/client';\nimport { generateUUIDv4 } from './coordinator/connection/utils';\nimport { Credentials } from './gen/coordinator';\nimport { ScopedLogger, videoLoggerSystem } from './logger';\nimport {\n  makeSafePromise,\n  PromiseWithResolvers,\n  promiseWithResolvers,\n  SafePromise,\n} from './helpers/promise';\nimport { getTimers } from './timers';\nimport { Tracer, TraceSlice } from './stats';\n\nexport type StreamSfuClientConstructor = {\n  /**\n   * The event dispatcher instance to use.\n   */\n  dispatcher: Dispatcher;\n\n  /**\n   * The credentials to use for the connection.\n   */\n  credentials: Credentials;\n\n  /**\n   * The `cid` (call ID) to use for the connection.\n   */\n  cid: string;\n\n  /**\n   * `sessionId` to use for the connection.\n   */\n  sessionId?: string;\n\n  /**\n   * A log tag to use for logging. Useful for debugging multiple instances.\n   */\n  tag: string;\n\n  /**\n   * The timeout in milliseconds for waiting for the `joinResponse`.\n   * Defaults to 5000ms.\n   */\n  joinResponseTimeout?: number;\n\n  /**\n   * Callback for when the WebSocket connection is closed.\n   */\n  onSignalClose?: (reason: string) => void;\n\n  /**\n   * The StreamClient instance to use for the connection.\n   */\n  streamClient: StreamClient;\n\n  /**\n   * Flag to enable tracing.\n   */\n  enableTracing: boolean;\n};\n\ntype SfuWebSocketParams = {\n  attempt: string; // the reconnect attempt, start with 0\n  user_id: string;\n  api_key: string;\n  user_session_id: string;\n  cid: string;\n};\n\n/**\n * The client used for exchanging information with the SFU.\n */\nexport class StreamSfuClient {\n  /**\n   * A buffer for ICE Candidates that are received before\n   * the Publisher and Subscriber Peer Connections are ready to handle them.\n   */\n  readonly iceTrickleBuffer = new IceTrickleBuffer();\n\n  /**\n   * The `sessionId` of the currently connected participant.\n   */\n  readonly sessionId: string;\n\n  /**\n   * The `edgeName` representing the edge the client is connected to.\n   */\n  readonly edgeName: string;\n\n  /**\n   * Holds the current WebSocket connection to the SFU.\n   */\n  private signalWs!: WebSocket;\n\n  /**\n   * Promise that resolves when the WebSocket connection is ready (open).\n   */\n  private signalReady!: SafePromise<WebSocket>;\n\n  /**\n   * Flag to indicate if the client is in the process of leaving the call.\n   * This is set to `true` when the user initiates the leave process.\n   */\n  isLeaving = false;\n\n  /**\n   * Flag to indicate if the client is in the process of clean closing the connection.\n   * When set to `true`, the client will not attempt to reconnect\n   * and will close the WebSocket connection gracefully.\n   * Otherwise, it will close the connection with an error code and\n   * trigger a reconnection attempt.\n   */\n  isClosingClean = false;\n\n  private readonly rpc: SignalServerClient;\n  private keepAliveInterval?: number;\n  private connectionCheckTimeout?: NodeJS.Timeout;\n  private migrateAwayTimeout?: NodeJS.Timeout;\n  private readonly pingIntervalInMs = 5 * 1000;\n  private readonly unhealthyTimeoutInMs = 15 * 1000;\n  private lastMessageTimestamp?: Date;\n  private readonly tracer?: Tracer;\n  private readonly unsubscribeIceTrickle: () => void;\n  private readonly unsubscribeNetworkChanged: () => void;\n  private readonly onSignalClose: ((reason: string) => void) | undefined;\n  private readonly logger: ScopedLogger;\n  readonly tag: string;\n  private readonly credentials: Credentials;\n  private readonly dispatcher: Dispatcher;\n  private readonly joinResponseTimeout: number;\n  private networkAvailableTask: PromiseWithResolvers<void> | undefined;\n  /**\n   * Promise that resolves when the JoinResponse is received.\n   * Rejects after a certain threshold if the response is not received.\n   */\n  private joinResponseTask = promiseWithResolvers<JoinResponse>();\n\n  /**\n   * Promise that resolves when the migration is complete.\n   * Rejects after a certain threshold if the migration is not complete.\n   */\n  private migrationTask?: PromiseWithResolvers<void>;\n\n  /**\n   * A controller to abort the current requests.\n   */\n  private readonly abortController = new AbortController();\n\n  /**\n   * The normal closure code. Used for controlled shutdowns.\n   */\n  static NORMAL_CLOSURE = 1000;\n  /**\n   * The error code used when the SFU connection is unhealthy.\n   * Usually, this means that no message has been received from the SFU for\n   * a certain amount of time (`connectionCheckTimeout`).\n   */\n  static ERROR_CONNECTION_UNHEALTHY = 4001;\n  /**\n   * The error code used when the SFU connection is disposed because a new\n   * connection is established or is about to be established.\n   * Here, we don't use 1000 (normal closure) because we don't want the\n   * SFU to clean up the resources associated with the current participant.\n   */\n  static DISPOSE_OLD_SOCKET = 4100;\n  /**\n   * The close code used when the client fails to join the call (on the SFU).\n   */\n  static JOIN_FAILED = 4101;\n\n  /**\n   * Constructs a new SFU client.\n   */\n  constructor({\n    dispatcher,\n    credentials,\n    sessionId,\n    cid,\n    tag,\n    joinResponseTimeout = 5000,\n    onSignalClose,\n    streamClient,\n    enableTracing,\n  }: StreamSfuClientConstructor) {\n    this.dispatcher = dispatcher;\n    this.sessionId = sessionId || generateUUIDv4();\n    this.onSignalClose = onSignalClose;\n    this.credentials = credentials;\n    const { server, token } = credentials;\n    this.edgeName = server.edge_name;\n    this.joinResponseTimeout = joinResponseTimeout;\n    this.tag = tag;\n    this.logger = videoLoggerSystem.getLogger('SfuClient', { tags: [tag] });\n    this.tracer = enableTracing\n      ? new Tracer(`${tag}-${this.edgeName}`)\n      : undefined;\n    this.rpc = createSignalClient({\n      baseUrl: server.url,\n      interceptors: [\n        withHeaders({ Authorization: `Bearer ${token}` }),\n        this.tracer && withRequestTracer(this.tracer.trace),\n        this.logger.getLogLevel() === 'trace' &&\n          withRequestLogger(this.logger, 'trace'),\n      ].filter((v) => !!v),\n    });\n\n    // Special handling for the ICETrickle kind of events.\n    // The SFU might trigger these events before the initial RTC\n    // connection is established or \"JoinResponse\" received.\n    // In that case, those events (ICE candidates) need to be buffered\n    // and later added to the appropriate PeerConnection\n    // once the remoteDescription is known and set.\n    this.unsubscribeIceTrickle = dispatcher.on('iceTrickle', (iceTrickle) => {\n      this.iceTrickleBuffer.push(iceTrickle);\n    });\n\n    // listen to network changes to handle offline state\n    // we shouldn't attempt to recover websocket connection when offline\n    this.unsubscribeNetworkChanged = streamClient.on('network.changed', (e) => {\n      if (!e.online) {\n        this.networkAvailableTask = promiseWithResolvers();\n      } else {\n        this.networkAvailableTask?.resolve();\n      }\n    });\n\n    this.createWebSocket({\n      attempt: tag,\n      user_id: streamClient.user?.id || '',\n      api_key: streamClient.key,\n      user_session_id: this.sessionId,\n      cid,\n    });\n  }\n\n  private createWebSocket = (params: SfuWebSocketParams) => {\n    const eventsToTrace: Partial<Record<SfuEventKinds, boolean>> = {\n      callEnded: true,\n      changePublishQuality: true,\n      changePublishOptions: true,\n      connectionQualityChanged: true,\n      error: true,\n      goAway: true,\n      inboundStateNotification: true,\n    };\n    this.signalWs = createWebSocketSignalChannel({\n      tag: this.tag,\n      endpoint: `${this.credentials.server.ws_endpoint}?${new URLSearchParams(params).toString()}`,\n      tracer: this.tracer,\n      onMessage: (message) => {\n        this.lastMessageTimestamp = new Date();\n        this.scheduleConnectionCheck();\n        const eventKind = message.eventPayload.oneofKind;\n        if (eventsToTrace[eventKind]) {\n          this.tracer?.trace(eventKind, message);\n        }\n        this.dispatcher.dispatch(message, this.tag);\n      },\n    });\n\n    let timeoutId: NodeJS.Timeout;\n    this.signalReady = makeSafePromise(\n      Promise.race<WebSocket>([\n        new Promise((resolve, reject) => {\n          let didOpen = false;\n          const onOpen = () => {\n            didOpen = true;\n            clearTimeout(timeoutId);\n            this.signalWs.removeEventListener('open', onOpen);\n            resolve(this.signalWs);\n          };\n\n          this.signalWs.addEventListener('open', onOpen);\n\n          this.signalWs.addEventListener('close', (e) => {\n            this.handleWebSocketClose(e);\n            // Normally, this shouldn't have any effect, because WS should never emit 'close'\n            // before emitting 'open'. However, stranger things have happened, and we don't\n            // want to leave signalReady in a pending state.\n            const message = didOpen\n              ? `SFU WS closed: ${e.code} ${e.reason}`\n              : `SFU WS connection can't be established: ${e.code} ${e.reason}`;\n            this.tracer?.trace('signal.close', message);\n            clearTimeout(timeoutId);\n            reject(new Error(message));\n          });\n        }),\n\n        new Promise((resolve, reject) => {\n          timeoutId = setTimeout(() => {\n            const message = `SFU WS connection failed to open after ${this.joinResponseTimeout}ms`;\n            this.tracer?.trace('signal.timeout', message);\n            reject(new Error(message));\n          }, this.joinResponseTimeout);\n        }),\n      ]),\n    );\n  };\n\n  get isHealthy() {\n    return (\n      this.signalWs.readyState === WebSocket.OPEN &&\n      this.joinResponseTask.isResolved()\n    );\n  }\n\n  get joinTask() {\n    return this.joinResponseTask.promise;\n  }\n\n  private handleWebSocketClose = (e: CloseEvent) => {\n    this.signalWs.removeEventListener('close', this.handleWebSocketClose);\n    getTimers().clearInterval(this.keepAliveInterval);\n    clearTimeout(this.connectionCheckTimeout);\n    this.onSignalClose?.(`${e.code} ${e.reason}`);\n  };\n\n  close = (code: number = StreamSfuClient.NORMAL_CLOSURE, reason?: string) => {\n    this.isClosingClean = code !== StreamSfuClient.ERROR_CONNECTION_UNHEALTHY;\n    if (this.signalWs.readyState === WebSocket.OPEN) {\n      this.logger.debug(`Closing SFU WS connection: ${code} - ${reason}`);\n      this.signalWs.close(code, `js-client: ${reason}`);\n      this.signalWs.removeEventListener('close', this.handleWebSocketClose);\n    }\n    this.dispose();\n  };\n\n  private dispose = () => {\n    this.logger.debug('Disposing SFU client');\n    this.unsubscribeIceTrickle();\n    this.unsubscribeNetworkChanged();\n    clearInterval(this.keepAliveInterval);\n    clearTimeout(this.connectionCheckTimeout);\n    clearTimeout(this.migrateAwayTimeout);\n    this.abortController.abort();\n    this.migrationTask?.resolve();\n    this.iceTrickleBuffer.dispose();\n  };\n\n  getTrace = (): TraceSlice | undefined => {\n    return this.tracer?.take();\n  };\n\n  leaveAndClose = async (reason: string) => {\n    try {\n      this.isLeaving = true;\n      await this.joinTask;\n      await this.notifyLeave(reason);\n    } catch (err) {\n      this.logger.debug('Error notifying SFU about leaving call', err);\n    }\n\n    this.close(StreamSfuClient.NORMAL_CLOSURE, reason.substring(0, 115));\n  };\n\n  updateSubscriptions = async (tracks: TrackSubscriptionDetails[]) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.updateSubscriptions({ sessionId: this.sessionId, tracks }),\n      this.abortController.signal,\n    );\n  };\n\n  setPublisher = async (data: Omit<SetPublisherRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.setPublisher({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  sendAnswer = async (data: Omit<SendAnswerRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.sendAnswer({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  iceTrickle = async (data: Omit<ICETrickle, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.iceTrickle({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  iceRestart = async (data: Omit<ICERestartRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.iceRestart({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  updateMuteStates = async (muteStates: TrackMuteState[]) => {\n    await this.joinTask;\n    return retryable(\n      () =>\n        this.rpc.updateMuteStates({ muteStates, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  sendStats = async (stats: Omit<SendStatsRequest, 'sessionId'>) => {\n    await this.joinTask;\n    // NOTE: we don't retry sending stats\n    return this.rpc.sendStats({ ...stats, sessionId: this.sessionId });\n  };\n\n  startNoiseCancellation = async () => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.startNoiseCancellation({ sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  stopNoiseCancellation = async () => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.stopNoiseCancellation({ sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  enterMigration = async (opts: { timeout?: number } = {}) => {\n    this.isLeaving = true;\n    const { timeout = 7 * 1000 } = opts;\n\n    this.migrationTask?.reject(new Error('Cancelled previous migration'));\n    const task = (this.migrationTask = promiseWithResolvers());\n    const unsubscribe = this.dispatcher.on(\n      'participantMigrationComplete',\n      () => {\n        unsubscribe();\n        clearTimeout(this.migrateAwayTimeout);\n        task.resolve();\n      },\n    );\n    this.migrateAwayTimeout = setTimeout(() => {\n      unsubscribe();\n      task.reject(\n        new Error(`Migration (${this.tag}) failed to complete in ${timeout}ms`),\n      );\n    }, timeout);\n\n    return task.promise;\n  };\n\n  join = async (\n    data: Omit<JoinRequest, 'sessionId' | 'token'>,\n  ): Promise<JoinResponse> => {\n    // wait for the signal web socket to be ready before sending \"joinRequest\"\n    await this.signalReady();\n    if (\n      this.joinResponseTask.isResolved() ||\n      this.joinResponseTask.isRejected()\n    ) {\n      // we need to lock the RPC requests until we receive a JoinResponse.\n      // that's why we have this primitive lock mechanism.\n      // the client starts with already initialized joinResponseTask,\n      // and this code creates a new one for the next join request.\n      this.joinResponseTask = promiseWithResolvers<JoinResponse>();\n    }\n\n    // capture a reference to the current joinResponseTask as it might\n    // be replaced with a new one in case a second join request is made\n    const current = this.joinResponseTask;\n\n    let timeoutId: NodeJS.Timeout | undefined = undefined;\n    const unsubscribe = this.dispatcher.on('joinResponse', (joinResponse) => {\n      clearTimeout(timeoutId);\n      unsubscribe();\n      this.keepAlive();\n      current.resolve(joinResponse);\n    });\n\n    timeoutId = setTimeout(() => {\n      unsubscribe();\n      const message = `Waiting for \"joinResponse\" has timed out after ${this.joinResponseTimeout}ms`;\n      this.tracer?.trace('joinRequestTimeout', message);\n      current.reject(new Error(message));\n    }, this.joinResponseTimeout);\n\n    const joinRequest = SfuRequest.create({\n      requestPayload: {\n        oneofKind: 'joinRequest',\n        joinRequest: JoinRequest.create({\n          ...data,\n          sessionId: this.sessionId,\n          token: this.credentials.token,\n        }),\n      },\n    });\n\n    this.tracer?.trace('joinRequest', joinRequest);\n    await this.send(joinRequest);\n\n    return current.promise;\n  };\n\n  private ping = async () => {\n    return this.send(\n      SfuRequest.create({\n        requestPayload: {\n          oneofKind: 'healthCheckRequest',\n          healthCheckRequest: {},\n        },\n      }),\n    );\n  };\n\n  private notifyLeave = async (reason: string) => {\n    return this.send(\n      SfuRequest.create({\n        requestPayload: {\n          oneofKind: 'leaveCallRequest',\n          leaveCallRequest: {\n            sessionId: this.sessionId,\n            reason,\n          },\n        },\n      }),\n    );\n  };\n\n  private send = async (message: SfuRequest) => {\n    await this.signalReady(); // wait for the signal ws to be open\n    const msgJson = SfuRequest.toJson(message);\n    if (this.signalWs.readyState !== WebSocket.OPEN) {\n      this.logger.debug('Signal WS is not open. Skipping message', msgJson);\n      return;\n    }\n    this.logger.debug(`Sending message to: ${this.edgeName}`, msgJson);\n    this.signalWs.send(SfuRequest.toBinary(message));\n  };\n\n  private keepAlive = () => {\n    const timers = getTimers();\n    timers.clearInterval(this.keepAliveInterval);\n    this.keepAliveInterval = timers.setInterval(() => {\n      this.ping().catch((e) => {\n        this.logger.error('Error sending healthCheckRequest to SFU', e);\n      });\n    }, this.pingIntervalInMs);\n  };\n\n  private scheduleConnectionCheck = () => {\n    clearTimeout(this.connectionCheckTimeout);\n    this.connectionCheckTimeout = setTimeout(() => {\n      if (this.lastMessageTimestamp) {\n        const timeSinceLastMessage =\n          new Date().getTime() - this.lastMessageTimestamp.getTime();\n\n        if (timeSinceLastMessage > this.unhealthyTimeoutInMs) {\n          this.close(\n            StreamSfuClient.ERROR_CONNECTION_UNHEALTHY,\n            `SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`,\n          );\n        }\n      }\n    }, this.unhealthyTimeoutInMs);\n  };\n}\n","import { CallingState } from '../store';\nimport { Call } from '../Call';\nimport {\n  CallAcceptedEvent,\n  CallRejectedEvent,\n  OwnCapability,\n} from '../gen/coordinator';\nimport { CallEnded } from '../gen/video/sfu/event/events';\nimport { CallEndedReason } from '../gen/video/sfu/models/models';\n\n/**\n * Event handler that watched the delivery of `call.accepted`.\n * Once the event is received, the call is joined.\n */\nexport const watchCallAccepted = (call: Call) => {\n  return async function onCallAccepted(event: CallAcceptedEvent) {\n    // We want to discard the event if it's from the current user\n    if (event.user.id === call.currentUserId) return;\n    const { state } = call;\n    if (\n      event.call.created_by.id === call.currentUserId &&\n      state.callingState === CallingState.RINGING\n    ) {\n      await call.join();\n    }\n  };\n};\n\n/**\n * Event handler that watches delivery of `call.rejected` Websocket event.\n * Once the event is received, the call is left.\n */\nexport const watchCallRejected = (call: Call) => {\n  return async function onCallRejected(event: CallRejectedEvent) {\n    // We want to discard the event if it's from the current user\n    if (event.user.id === call.currentUserId) return;\n    const { call: eventCall } = event;\n    const { session: callSession } = eventCall;\n\n    if (!callSession) {\n      call.logger.warn(\n        'No call session provided. Ignoring call.rejected event.',\n        event,\n      );\n      return;\n    }\n\n    const rejectedBy = callSession.rejected_by;\n    const { members, callingState } = call.state;\n    if (callingState !== CallingState.RINGING) {\n      call.logger.info(\n        'Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.',\n        event,\n      );\n      return;\n    }\n    if (call.isCreatedByMe) {\n      const everyoneElseRejected = members\n        .filter((m) => m.user_id !== call.currentUserId)\n        .every((m) => rejectedBy[m.user_id]);\n      if (everyoneElseRejected) {\n        call.logger.info('everyone rejected, leaving the call');\n        await call.leave({\n          reject: true,\n          reason: 'cancel',\n          message: 'ring: everyone rejected',\n        });\n      }\n    } else {\n      if (rejectedBy[eventCall.created_by.id]) {\n        call.logger.info('call creator rejected, leaving call');\n        await call.leave({ message: 'ring: creator rejected' });\n      }\n    }\n  };\n};\n\n/**\n * Event handler that watches the delivery of `call.ended` Websocket event.\n */\nexport const watchCallEnded = (call: Call) => {\n  return function onCallEnded() {\n    const { callingState } = call.state;\n    if (\n      callingState !== CallingState.IDLE &&\n      callingState !== CallingState.LEFT\n    ) {\n      call\n        .leave({ message: 'call.ended event received', reject: false })\n        .catch((err) => {\n          call.logger.error('Failed to leave call after call.ended ', err);\n        });\n    }\n  };\n};\n\n/**\n * Watches for `callEnded` events.\n */\nexport const watchSfuCallEnded = (call: Call) => {\n  return call.on('callEnded', async (e: CallEnded) => {\n    if (call.state.callingState === CallingState.LEFT) return;\n    try {\n      if (e.reason === CallEndedReason.LIVE_ENDED) {\n        call.state.setBackstage(true);\n\n        // don't leave the call if the user has permission to join backstage\n        const { hasPermission } = call.permissionsContext;\n        if (hasPermission(OwnCapability.JOIN_BACKSTAGE)) return;\n      }\n      // `call.ended` event arrived after the call is already left\n      // and all event handlers are detached. We need to manually\n      // update the call state to reflect the call has ended.\n      call.state.setEndedAt(new Date());\n      const reason = CallEndedReason[e.reason];\n      await call.leave({ message: `callEnded received: ${reason}` });\n    } catch (err) {\n      call.logger.error(\n        'Failed to leave call after being ended by the SFU',\n        err,\n      );\n    }\n  });\n};\n","import { CallState } from '../store';\nimport type { CallGrantsUpdated } from '../gen/video/sfu/event/events';\n\n/**\n * Event handler that watches for `callGrantsUpdated` events.\n *\n * @param state the call state to update.\n */\nexport const watchCallGrantsUpdated = (state: CallState) => {\n  return function onCallGrantsUpdated(event: CallGrantsUpdated) {\n    const { currentGrants } = event;\n\n    if (!currentGrants) return;\n\n    state.setCallGrants(currentGrants);\n  };\n};\n","/**\n * Adds unique values to an array.\n *\n * @param arr the array to add to.\n * @param values the values to add.\n */\nexport const pushToIfMissing = <T>(arr: T[], ...values: T[]): T[] => {\n  for (const v of values) {\n    if (!arr.includes(v)) {\n      arr.push(v);\n    }\n  }\n  return arr;\n};\n\n/**\n * Removes values from an array if they are present.\n *\n * @param arr the array to remove from.\n * @param values the values to remove.\n */\nexport const removeFromIfPresent = <T>(arr: T[], ...values: T[]): T[] => {\n  for (const v of values) {\n    const index = arr.indexOf(v);\n    if (index !== -1) {\n      arr.splice(index, 1);\n    }\n  }\n  return arr;\n};\n","import { Dispatcher } from '../rtc';\nimport { Call } from '../Call';\nimport { CallState } from '../store';\nimport { StreamVideoParticipantPatches } from '../types';\nimport { pushToIfMissing, removeFromIfPresent } from '../helpers/array';\nimport type {\n  InboundStateNotification,\n  PinsChanged,\n} from '../gen/video/sfu/event/events';\nimport {\n  ErrorCode,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { OwnCapability } from '../gen/coordinator';\nimport { videoLoggerSystem } from '../logger';\n\nexport const watchConnectionQualityChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('connectionQualityChanged', (e) => {\n    const { connectionQualityUpdates } = e;\n    if (!connectionQualityUpdates) return;\n    state.updateParticipants(\n      connectionQualityUpdates.reduce<StreamVideoParticipantPatches>(\n        (patches, update) => {\n          const { sessionId, connectionQuality } = update;\n          patches[sessionId] = {\n            connectionQuality,\n          };\n          return patches;\n        },\n        {},\n      ),\n    );\n  });\n};\n\n/**\n * Updates the approximate number of participants in the call by peeking at the\n * health check events that our SFU sends.\n */\nexport const watchParticipantCountChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('healthCheckResponse', (e) => {\n    const { participantCount } = e;\n    if (participantCount) {\n      state.setParticipantCount(participantCount.total);\n      state.setAnonymousParticipantCount(participantCount.anonymous);\n    }\n  });\n};\n\nexport const watchLiveEnded = (dispatcher: Dispatcher, call: Call) => {\n  return dispatcher.on('error', (e) => {\n    if (e.error && e.error.code !== ErrorCode.LIVE_ENDED) return;\n\n    call.state.setBackstage(true);\n    if (!call.permissionsContext.hasPermission(OwnCapability.JOIN_BACKSTAGE)) {\n      call.leave({ message: 'live ended' }).catch((err) => {\n        call.logger.error('Failed to leave call after live ended', err);\n      });\n    }\n  });\n};\n\n/**\n * Watches and logs the errors reported by the currently connected SFU.\n */\nexport const watchSfuErrorReports = (dispatcher: Dispatcher) => {\n  return dispatcher.on('error', (e) => {\n    if (!e.error) return;\n    const logger = videoLoggerSystem.getLogger('SfuClient');\n    const { error, reconnectStrategy } = e;\n    logger.error('SFU reported error', {\n      code: ErrorCode[error.code],\n      reconnectStrategy: WebsocketReconnectStrategy[reconnectStrategy],\n      message: error.message,\n      shouldRetry: error.shouldRetry,\n    });\n  });\n};\n\n/**\n * Watches for `pinsUpdated` events and updates the pinned state of participants\n * in the call.\n */\nexport const watchPinsUpdated = (state: CallState) => {\n  return function onPinsUpdated(e: PinsChanged) {\n    const { pins } = e;\n    state.setServerSidePins(pins);\n  };\n};\n\n/**\n * Watches for inbound state notifications and updates the paused tracks\n *\n * @param state the call state to update.\n */\nexport const watchInboundStateNotification = (state: CallState) => {\n  return function onInboundStateNotification(e: InboundStateNotification) {\n    const { inboundVideoStates } = e;\n    const current = state.getParticipantLookupBySessionId();\n    const patches: StreamVideoParticipantPatches = {};\n    for (const { sessionId, trackType, paused } of inboundVideoStates) {\n      const pausedTracks = [...(current[sessionId]?.pausedTracks ?? [])];\n      if (paused) {\n        pushToIfMissing(pausedTracks, trackType);\n      } else {\n        removeFromIfPresent(pausedTracks, trackType);\n      }\n      patches[sessionId] = { pausedTracks };\n    }\n    state.updateParticipants(patches);\n  };\n};\n","import { Call } from '../Call';\nimport {\n  TrackType,\n  TrackUnpublishReason,\n} from '../gen/video/sfu/models/models';\n\n/**\n * An event handler that handles soft mutes.\n *\n * @param call the call.\n */\nexport const handleRemoteSoftMute = (call: Call) => {\n  return call.on('trackUnpublished', async (event) => {\n    const { cause, type, sessionId } = event;\n    const { localParticipant } = call.state;\n    if (\n      cause === TrackUnpublishReason.MODERATION &&\n      sessionId === localParticipant?.sessionId\n    ) {\n      const logger = call.logger;\n      logger.info(\n        `Local participant's ${TrackType[type]} track is muted remotely`,\n      );\n      try {\n        if (type === TrackType.VIDEO) {\n          await call.camera.disable();\n        } else if (type === TrackType.AUDIO) {\n          await call.microphone.disable();\n        } else if (\n          type === TrackType.SCREEN_SHARE ||\n          type === TrackType.SCREEN_SHARE_AUDIO\n        ) {\n          await call.screenShare.disable();\n        } else {\n          logger.warn('Unsupported track type to soft mute', TrackType[type]);\n        }\n      } catch (error) {\n        logger.error('Failed to stop publishing', error);\n      }\n    }\n  });\n};\n","import type {\n  ParticipantJoined,\n  ParticipantLeft,\n  ParticipantUpdated,\n  TrackPublished,\n  TrackUnpublished,\n} from '../gen/video/sfu/event/events';\nimport type { Participant } from '../gen/video/sfu/models/models';\nimport {\n  StreamVideoParticipant,\n  StreamVideoParticipantPatch,\n  VisibilityState,\n} from '../types';\nimport { CallState } from '../store';\nimport { trackTypeToParticipantStreamKey } from '../rtc';\nimport { pushToIfMissing } from '../helpers/array';\n\n/**\n * An event responder which handles the `participantJoined` event.\n */\nexport const watchParticipantJoined = (state: CallState) => {\n  return function onParticipantJoined(e: ParticipantJoined) {\n    const { participant } = e;\n    if (!participant) return;\n    // `state.updateOrAddParticipant` acts as a safeguard against\n    // potential duplicate events from the SFU.\n    //\n    // Although the SFU should not send duplicate events, we have seen\n    // some race conditions in the past during the `join-flow`.\n    // The SFU would send participant info as part of the `join`\n    // response and then follow up with a `participantJoined` event for\n    // already announced participants.\n    const orphanedTracks = reconcileOrphanedTracks(state, participant);\n    state.updateOrAddParticipant(\n      participant.sessionId,\n      Object.assign<\n        StreamVideoParticipant,\n        StreamVideoParticipantPatch | undefined,\n        Partial<StreamVideoParticipant>\n      >(participant, orphanedTracks, {\n        viewportVisibilityState: {\n          videoTrack: VisibilityState.UNKNOWN,\n          screenShareTrack: VisibilityState.UNKNOWN,\n        },\n      }),\n    );\n  };\n};\n\n/**\n * An event responder which handles the `participantLeft` event.\n */\nexport const watchParticipantLeft = (state: CallState) => {\n  return function onParticipantLeft(e: ParticipantLeft) {\n    const { participant } = e;\n    if (!participant) return;\n\n    state.setParticipants((participants) =>\n      participants.filter((p) => p.sessionId !== participant.sessionId),\n    );\n  };\n};\n\n/**\n * An event responder which handles the `participantUpdated` event.\n */\nexport const watchParticipantUpdated = (state: CallState) => {\n  return function onParticipantUpdated(e: ParticipantUpdated) {\n    const { participant } = e;\n    if (!participant) return;\n    state.updateParticipant(participant.sessionId, participant);\n  };\n};\n\n/**\n * An event responder which handles the `trackPublished` event.\n * The SFU will send this event when a participant publishes a track.\n */\nexport const watchTrackPublished = (state: CallState) => {\n  return function onTrackPublished(e: TrackPublished) {\n    const { type, sessionId } = e;\n    // An optimization for large calls.\n    // After a certain threshold, the SFU would stop emitting `participantJoined`\n    // events, and instead, it would only provide the participant's information\n    // once they start publishing a track.\n    if (e.participant) {\n      const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n      const participant = Object.assign(e.participant, orphanedTracks);\n      state.updateOrAddParticipant(sessionId, participant);\n    } else {\n      state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: pushToIfMissing([...p.publishedTracks], type),\n      }));\n    }\n  };\n};\n\n/**\n * An event responder which handles the `trackUnpublished` event.\n * The SFU will send this event when a participant unpublishes a track.\n */\nexport const watchTrackUnpublished = (state: CallState) => {\n  return function onTrackUnpublished(e: TrackUnpublished) {\n    const { type, sessionId } = e;\n    // An optimization for large calls. See `watchTrackPublished`.\n    if (e.participant) {\n      const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n      const participant = Object.assign(e.participant, orphanedTracks);\n      state.updateOrAddParticipant(sessionId, participant, (p) => ({\n        pausedTracks: p.pausedTracks?.filter((t) => t !== type),\n      }));\n    } else {\n      state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: p.publishedTracks.filter((t) => t !== type),\n        pausedTracks: p.pausedTracks?.filter((t) => t !== type),\n      }));\n    }\n  };\n};\n\n/**\n * Reconciles orphaned tracks (if any) for the given participant.\n *\n * @param state the call state.\n * @param participant the participant.\n */\nconst reconcileOrphanedTracks = (\n  state: CallState,\n  participant: Participant,\n): StreamVideoParticipantPatch | undefined => {\n  const orphanTracks = state.takeOrphanedTracks(participant.trackLookupPrefix);\n  if (!orphanTracks.length) return;\n  const reconciledTracks: StreamVideoParticipantPatch = {};\n  for (const orphan of orphanTracks) {\n    const key = trackTypeToParticipantStreamKey(orphan.trackType);\n    if (!key) continue;\n    reconciledTracks[key] = orphan.track;\n  }\n  return reconciledTracks;\n};\n","import { Dispatcher } from '../rtc';\nimport { CallState } from '../store';\nimport { StreamVideoParticipantPatches } from '../types';\n\n/**\n * Watches for `dominantSpeakerChanged` events.\n */\nexport const watchDominantSpeakerChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('dominantSpeakerChanged', (e) => {\n    const { sessionId } = e;\n    if (sessionId === state.dominantSpeaker?.sessionId) return;\n    state.setParticipants((participants) =>\n      participants.map((participant) => {\n        // mark the new dominant speaker\n        if (participant.sessionId === sessionId) {\n          return {\n            ...participant,\n            isDominantSpeaker: true,\n          };\n        }\n        // unmark the old dominant speaker\n        if (participant.isDominantSpeaker) {\n          return {\n            ...participant,\n            isDominantSpeaker: false,\n          };\n        }\n        return participant; // no change\n      }),\n    );\n  });\n};\n\n/**\n * Watches for `audioLevelChanged` events.\n */\nexport const watchAudioLevelChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('audioLevelChanged', (e) => {\n    const { audioLevels } = e;\n    state.updateParticipants(\n      audioLevels.reduce<StreamVideoParticipantPatches>((patches, current) => {\n        patches[current.sessionId] = {\n          audioLevel: current.level,\n          isSpeaking: current.isSpeaking,\n        };\n        return patches;\n      }, {}),\n    );\n  });\n};\n","import { Call } from '../Call';\nimport { Dispatcher } from '../rtc';\nimport {\n  handleRemoteSoftMute,\n  watchAudioLevelChanged,\n  watchCallAccepted,\n  watchCallEnded,\n  watchCallGrantsUpdated,\n  watchCallRejected,\n  watchConnectionQualityChanged,\n  watchDominantSpeakerChanged,\n  watchInboundStateNotification,\n  watchLiveEnded,\n  watchParticipantCountChanged,\n  watchParticipantJoined,\n  watchParticipantLeft,\n  watchParticipantUpdated,\n  watchPinsUpdated,\n  watchSfuCallEnded,\n  watchSfuErrorReports,\n  watchTrackPublished,\n  watchTrackUnpublished,\n} from '../events';\nimport {\n  AllCallEvents,\n  AllClientCallEvents,\n  CallEventListener,\n} from '../coordinator/connection/types';\n\ntype RingCallEvents = Extract<\n  AllClientCallEvents,\n  'call.accepted' | 'call.rejected' | 'call.missed'\n>;\n\n/**\n * Registers the default event handlers for a call during its lifecycle.\n *\n * @param call the call to register event handlers for.\n * @param dispatcher the dispatcher.\n */\nexport const registerEventHandlers = (call: Call, dispatcher: Dispatcher) => {\n  const state = call.state;\n  const eventHandlers = [\n    call.on('call.ended', watchCallEnded(call)),\n    watchSfuCallEnded(call),\n\n    watchLiveEnded(dispatcher, call),\n    watchSfuErrorReports(dispatcher),\n    watchConnectionQualityChanged(dispatcher, state),\n    watchParticipantCountChanged(dispatcher, state),\n\n    call.on('participantJoined', watchParticipantJoined(state)),\n    call.on('participantLeft', watchParticipantLeft(state)),\n    call.on('participantUpdated', watchParticipantUpdated(state)),\n\n    call.on('trackPublished', watchTrackPublished(state)),\n    call.on('trackUnpublished', watchTrackUnpublished(state)),\n\n    watchAudioLevelChanged(dispatcher, state),\n    watchDominantSpeakerChanged(dispatcher, state),\n\n    call.on('callGrantsUpdated', watchCallGrantsUpdated(state)),\n    call.on('pinsUpdated', watchPinsUpdated(state)),\n    call.on('inboundStateNotification', watchInboundStateNotification(state)),\n\n    handleRemoteSoftMute(call),\n  ];\n\n  return () => {\n    eventHandlers.forEach((unsubscribe) => unsubscribe());\n  };\n};\n\n/**\n * Registers event handlers for a call that is of ringing type.\n *\n * @param call the call to register event handlers for.\n */\nexport const registerRingingCallEventHandlers = (call: Call) => {\n  const coordinatorRingEvents: {\n    [key in RingCallEvents]: (\n      call: Call,\n    ) => CallEventListener<AllCallEvents[key]>;\n  } = {\n    'call.accepted': watchCallAccepted(call),\n    'call.rejected': watchCallRejected(call),\n  };\n\n  const eventHandlers = Object.keys(coordinatorRingEvents).map((event) => {\n    const eventName = event as RingCallEvents;\n    return call.on(eventName, coordinatorRingEvents[eventName]);\n  });\n\n  return () => {\n    eventHandlers.forEach((unsubscribe) => unsubscribe());\n  };\n};\n","const DEFAULT_THRESHOLD = 0.35;\n\nexport type EntryHandler = (entry: IntersectionObserverEntry) => void;\n\nexport type Unobserve = () => void;\n\nexport type Observe = (\n  element: HTMLElement,\n  entryHandler: EntryHandler,\n) => Unobserve;\n\nexport class ViewportTracker {\n  /**\n   * @private\n   */\n  private elementHandlerMap: Map<\n    HTMLElement,\n    (entry: IntersectionObserverEntry) => void\n  > = new Map();\n  /**\n   * @private\n   */\n  private observer: IntersectionObserver | null = null;\n  // in React children render before viewport is set, add\n  // them to the queue and observe them once the observer is ready\n  /**\n   * @private\n   */\n  private queueSet: Set<readonly [HTMLElement, EntryHandler]> = new Set();\n\n  /**\n   * Method to set scrollable viewport as root for the IntersectionObserver, returns\n   * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n   *\n   * @param viewportElement\n   * @param options\n   * @returns Unobserve\n   */\n  public setViewport = (\n    viewportElement: HTMLElement,\n    options?: Pick<IntersectionObserverInit, 'threshold' | 'rootMargin'>,\n  ) => {\n    const cleanup = () => {\n      this.observer?.disconnect();\n      this.observer = null;\n      this.elementHandlerMap.clear();\n    };\n\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          const handler = this.elementHandlerMap.get(\n            entry.target as HTMLElement,\n          );\n          handler?.(entry);\n        });\n      },\n      {\n        root: viewportElement,\n        ...options,\n        threshold: options?.threshold ?? DEFAULT_THRESHOLD,\n      },\n    );\n\n    if (this.queueSet.size) {\n      this.queueSet.forEach(([queueElement, queueHandler]) => {\n        // check if element which requested observation is\n        // a child of a viewport element, skip if isn't\n        if (!viewportElement.contains(queueElement)) return;\n\n        this.observer!.observe(queueElement);\n        this.elementHandlerMap.set(queueElement, queueHandler);\n      });\n      this.queueSet.clear();\n    }\n\n    return cleanup;\n  };\n\n  /**\n   * Method to set element to observe and handler to be triggered whenever IntersectionObserver\n   * detects a possible change in element's visibility within specified viewport, returns\n   * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n   *\n   * @param element\n   * @param handler\n   * @returns Unobserve\n   */\n  public observe: Observe = (element, handler) => {\n    const queueItem = [element, handler] as const;\n\n    const cleanup = () => {\n      this.elementHandlerMap.delete(element);\n      this.observer?.unobserve(element);\n      this.queueSet.delete(queueItem);\n    };\n\n    if (this.elementHandlerMap.has(element)) return cleanup;\n\n    if (!this.observer) {\n      this.queueSet.add(queueItem);\n      return cleanup;\n    }\n\n    if (this.observer.root!.contains(element)) {\n      this.elementHandlerMap.set(element, handler);\n      this.observer.observe(element);\n    }\n\n    return cleanup;\n  };\n}\n","import {\n  AudioTrackType,\n  DebounceType,\n  VideoTrackType,\n  VisibilityState,\n} from '../types';\nimport { TrackType, VideoDimension } from '../gen/video/sfu/models/models';\nimport {\n  BehaviorSubject,\n  combineLatest,\n  distinctUntilChanged,\n  distinctUntilKeyChanged,\n  map,\n  shareReplay,\n  takeWhile,\n} from 'rxjs';\nimport { ViewportTracker } from './ViewportTracker';\nimport { isFirefox, isSafari } from './browsers';\nimport {\n  hasScreenShare,\n  hasScreenShareAudio,\n  hasVideo,\n} from './participantUtils';\nimport type { TrackSubscriptionDetails } from '../gen/video/sfu/signal_rpc/signal';\nimport type { CallState } from '../store';\nimport type { StreamSfuClient } from '../StreamSfuClient';\nimport { SpeakerManager } from '../devices';\nimport { getCurrentValue, setCurrentValue } from '../store/rxUtils';\nimport { videoLoggerSystem } from '../logger';\n\nconst DEFAULT_VIEWPORT_VISIBILITY_STATE: Record<\n  VideoTrackType,\n  VisibilityState\n> = {\n  videoTrack: VisibilityState.UNKNOWN,\n  screenShareTrack: VisibilityState.UNKNOWN,\n} as const;\n\ntype VideoTrackSubscriptionOverride =\n  | {\n      enabled: true;\n      dimension: VideoDimension;\n    }\n  | { enabled: false };\n\nconst globalOverrideKey = Symbol('globalOverrideKey');\n\ninterface VideoTrackSubscriptionOverrides {\n  [sessionId: string]: VideoTrackSubscriptionOverride | undefined;\n  [globalOverrideKey]?: VideoTrackSubscriptionOverride;\n}\n\n/**\n * A manager class that handles dynascale related tasks like:\n *\n * - binding video elements to session ids\n * - binding audio elements to session ids\n * - tracking element visibility\n * - updating subscriptions based on viewport visibility\n * - updating subscriptions based on video element dimensions\n * - updating subscriptions based on published tracks\n */\nexport class DynascaleManager {\n  /**\n   * The viewport tracker instance.\n   */\n  readonly viewportTracker = new ViewportTracker();\n\n  private logger = videoLoggerSystem.getLogger('DynascaleManager');\n  private callState: CallState;\n  private speaker: SpeakerManager;\n  private audioContext: AudioContext | undefined;\n  private sfuClient: StreamSfuClient | undefined;\n  private pendingSubscriptionsUpdate: NodeJS.Timeout | null = null;\n\n  private videoTrackSubscriptionOverridesSubject =\n    new BehaviorSubject<VideoTrackSubscriptionOverrides>({});\n\n  videoTrackSubscriptionOverrides$ =\n    this.videoTrackSubscriptionOverridesSubject.asObservable();\n\n  incomingVideoSettings$ = this.videoTrackSubscriptionOverrides$.pipe(\n    map((overrides) => {\n      const { [globalOverrideKey]: globalSettings, ...participants } =\n        overrides;\n      return {\n        enabled: globalSettings?.enabled !== false,\n        preferredResolution: globalSettings?.enabled\n          ? globalSettings.dimension\n          : undefined,\n        participants: Object.fromEntries(\n          Object.entries(participants).map(\n            ([sessionId, participantOverride]) => [\n              sessionId,\n              {\n                enabled: participantOverride?.enabled !== false,\n                preferredResolution: participantOverride?.enabled\n                  ? participantOverride.dimension\n                  : undefined,\n              },\n            ],\n          ),\n        ),\n        isParticipantVideoEnabled: (sessionId: string) =>\n          overrides[sessionId]?.enabled ??\n          overrides[globalOverrideKey]?.enabled ??\n          true,\n      };\n    }),\n    shareReplay(1),\n  );\n\n  /**\n   * Creates a new DynascaleManager instance.\n   */\n  constructor(callState: CallState, speaker: SpeakerManager) {\n    this.callState = callState;\n    this.speaker = speaker;\n  }\n\n  /**\n   * Disposes the allocated resources and closes the audio context if it was created.\n   */\n  dispose = async () => {\n    if (this.pendingSubscriptionsUpdate) {\n      clearTimeout(this.pendingSubscriptionsUpdate);\n    }\n    const context = this.getOrCreateAudioContext();\n    if (context && context.state !== 'closed') {\n      document.removeEventListener('click', this.resumeAudioContext);\n      await context.close();\n      this.audioContext = undefined;\n    }\n  };\n\n  setSfuClient(sfuClient: StreamSfuClient | undefined) {\n    this.sfuClient = sfuClient;\n  }\n\n  get trackSubscriptions() {\n    const subscriptions: TrackSubscriptionDetails[] = [];\n    for (const p of this.callState.remoteParticipants) {\n      // NOTE: audio tracks don't have to be requested explicitly\n      // as the SFU will implicitly subscribe us to all of them,\n      // once they become available.\n      if (p.videoDimension && hasVideo(p)) {\n        const override =\n          this.videoTrackSubscriptionOverrides[p.sessionId] ??\n          this.videoTrackSubscriptionOverrides[globalOverrideKey];\n\n        if (override?.enabled !== false) {\n          subscriptions.push({\n            userId: p.userId,\n            sessionId: p.sessionId,\n            trackType: TrackType.VIDEO,\n            dimension: override?.dimension ?? p.videoDimension,\n          });\n        }\n      }\n      if (p.screenShareDimension && hasScreenShare(p)) {\n        subscriptions.push({\n          userId: p.userId,\n          sessionId: p.sessionId,\n          trackType: TrackType.SCREEN_SHARE,\n          dimension: p.screenShareDimension,\n        });\n      }\n      if (hasScreenShareAudio(p)) {\n        subscriptions.push({\n          userId: p.userId,\n          sessionId: p.sessionId,\n          trackType: TrackType.SCREEN_SHARE_AUDIO,\n        });\n      }\n    }\n    return subscriptions;\n  }\n\n  get videoTrackSubscriptionOverrides() {\n    return getCurrentValue(this.videoTrackSubscriptionOverrides$);\n  }\n\n  setVideoTrackSubscriptionOverrides = (\n    override: VideoTrackSubscriptionOverride | undefined,\n    sessionIds?: string[],\n  ) => {\n    if (!sessionIds) {\n      return setCurrentValue(\n        this.videoTrackSubscriptionOverridesSubject,\n        override ? { [globalOverrideKey]: override } : {},\n      );\n    }\n\n    return setCurrentValue(\n      this.videoTrackSubscriptionOverridesSubject,\n      (overrides) => ({\n        ...overrides,\n        ...Object.fromEntries(sessionIds.map((id) => [id, override])),\n      }),\n    );\n  };\n\n  applyTrackSubscriptions = (\n    debounceType: DebounceType = DebounceType.SLOW,\n  ) => {\n    if (this.pendingSubscriptionsUpdate) {\n      clearTimeout(this.pendingSubscriptionsUpdate);\n    }\n\n    const updateSubscriptions = () => {\n      this.pendingSubscriptionsUpdate = null;\n      this.sfuClient\n        ?.updateSubscriptions(this.trackSubscriptions)\n        .catch((err: unknown) => {\n          this.logger.debug(`Failed to update track subscriptions`, err);\n        });\n    };\n\n    if (debounceType) {\n      this.pendingSubscriptionsUpdate = setTimeout(\n        updateSubscriptions,\n        debounceType,\n      );\n    } else {\n      updateSubscriptions();\n    }\n  };\n\n  /**\n   * Will begin tracking the given element for visibility changes within the\n   * configured viewport element (`call.setViewport`).\n   *\n   * @param element the element to track.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   * @returns Untrack.\n   */\n  trackElementVisibility = <T extends HTMLElement>(\n    element: T,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const cleanup = this.viewportTracker.observe(element, (entry) => {\n      this.callState.updateParticipant(sessionId, (participant) => {\n        const previousVisibilityState =\n          participant.viewportVisibilityState ??\n          DEFAULT_VIEWPORT_VISIBILITY_STATE;\n\n        // observer triggers when the element is \"moved\" to be a fullscreen element\n        // keep it VISIBLE if that happens to prevent fullscreen with placeholder\n        const isVisible =\n          entry.isIntersecting || document.fullscreenElement === element\n            ? VisibilityState.VISIBLE\n            : VisibilityState.INVISIBLE;\n        return {\n          ...participant,\n          viewportVisibilityState: {\n            ...previousVisibilityState,\n            [trackType]: isVisible,\n          },\n        };\n      });\n    });\n\n    return () => {\n      cleanup();\n      // reset visibility state to UNKNOWN upon cleanup\n      // so that the layouts that are not actively observed\n      // can still function normally (runtime layout switching)\n      this.callState.updateParticipant(sessionId, (participant) => {\n        const previousVisibilityState =\n          participant.viewportVisibilityState ??\n          DEFAULT_VIEWPORT_VISIBILITY_STATE;\n        return {\n          ...participant,\n          viewportVisibilityState: {\n            ...previousVisibilityState,\n            [trackType]: VisibilityState.UNKNOWN,\n          },\n        };\n      });\n    };\n  };\n\n  /**\n   * Sets the viewport element to track bound video elements for visibility.\n   *\n   * @param element the viewport element.\n   */\n  setViewport = <T extends HTMLElement>(element: T) => {\n    return this.viewportTracker.setViewport(element);\n  };\n\n  /**\n   * Binds a DOM <video> element to the given session id.\n   * This method will make sure that the video element will play\n   * the correct video stream for the given session id.\n   *\n   * Under the hood, it would also keep track of the video element dimensions\n   * and update the subscription accordingly in order to optimize the bandwidth.\n   *\n   * If a \"viewport\" is configured, the video element will be automatically\n   * tracked for visibility and the subscription will be updated accordingly.\n   *\n   * @param videoElement the video element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   */\n  bindVideoElement = (\n    videoElement: HTMLVideoElement,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const boundParticipant =\n      this.callState.findParticipantBySessionId(sessionId);\n    if (!boundParticipant) return;\n\n    const requestTrackWithDimensions = (\n      debounceType: DebounceType,\n      dimension: VideoDimension | undefined,\n    ) => {\n      if (dimension && (dimension.width === 0 || dimension.height === 0)) {\n        // ignore 0x0 dimensions. this can happen when the video element\n        // is not visible (e.g., has display: none).\n        // we treat this as \"unsubscription\" as we don't want to keep\n        // consuming bandwidth for a video that is not visible on the screen.\n        this.logger.debug(`Ignoring 0x0 dimension`, boundParticipant);\n        dimension = undefined;\n      }\n      this.callState.updateParticipantTracks(trackType, {\n        [sessionId]: { dimension },\n      });\n      this.applyTrackSubscriptions(debounceType);\n    };\n\n    const participant$ = this.callState.participants$.pipe(\n      map((ps) => ps.find((p) => p.sessionId === sessionId)),\n      takeWhile((participant) => !!participant),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    /**\n     * Since the video elements are now being removed from the DOM (React SDK) upon\n     * visibility change, this subscription is not in use an stays here only for the\n     * plain JS integrations where integrators might choose not to remove the video\n     * elements from the DOM.\n     */\n    // keep copy for resize observer handler\n    let viewportVisibilityState: VisibilityState | undefined;\n    const viewportVisibilityStateSubscription =\n      boundParticipant.isLocalParticipant\n        ? null\n        : participant$\n            .pipe(\n              map((p) => p.viewportVisibilityState?.[trackType]),\n              distinctUntilChanged(),\n            )\n            .subscribe((nextViewportVisibilityState) => {\n              // skip initial trigger\n              if (!viewportVisibilityState) {\n                viewportVisibilityState =\n                  nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                return;\n              }\n              viewportVisibilityState =\n                nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n\n              if (nextViewportVisibilityState === VisibilityState.INVISIBLE) {\n                return requestTrackWithDimensions(\n                  DebounceType.MEDIUM,\n                  undefined,\n                );\n              }\n\n              requestTrackWithDimensions(DebounceType.MEDIUM, {\n                width: videoElement.clientWidth,\n                height: videoElement.clientHeight,\n              });\n            });\n\n    let lastDimensions: VideoDimension | undefined;\n    const resizeObserver = boundParticipant.isLocalParticipant\n      ? null\n      : new ResizeObserver(() => {\n          const currentDimensions = {\n            width: videoElement.clientWidth,\n            height: videoElement.clientHeight,\n          };\n\n          // skip initial trigger\n          if (!lastDimensions) {\n            lastDimensions = currentDimensions;\n            return;\n          }\n\n          if (\n            (lastDimensions.width === currentDimensions.width &&\n              lastDimensions.height === currentDimensions.height) ||\n            viewportVisibilityState === VisibilityState.INVISIBLE\n          ) {\n            return;\n          }\n\n          const relativeDelta = Math.max(\n            currentDimensions.width / lastDimensions.width,\n            currentDimensions.height / lastDimensions.height,\n          );\n          // Low quality video in an upscaled video element is very noticable.\n          // We try to upscale faster, and downscale slower. We also update debounce\n          // more if the size change is not significant, gurading against fast-firing\n          // resize events.\n          const debounceType =\n            relativeDelta > 1.2 ? DebounceType.IMMEDIATE : DebounceType.MEDIUM;\n          requestTrackWithDimensions(debounceType, {\n            width: videoElement.clientWidth,\n            height: videoElement.clientHeight,\n          });\n          lastDimensions = currentDimensions;\n        });\n    resizeObserver?.observe(videoElement);\n\n    // element renders and gets bound - track subscription gets\n    // triggered first other ones get skipped on initial subscriptions\n    const publishedTracksSubscription = boundParticipant.isLocalParticipant\n      ? null\n      : participant$\n          .pipe(\n            distinctUntilKeyChanged('publishedTracks'),\n            map((p) =>\n              trackType === 'videoTrack' ? hasVideo(p) : hasScreenShare(p),\n            ),\n            distinctUntilChanged(),\n          )\n          .subscribe((isPublishing) => {\n            if (isPublishing) {\n              // the participant just started to publish a track\n              requestTrackWithDimensions(DebounceType.IMMEDIATE, {\n                width: videoElement.clientWidth,\n                height: videoElement.clientHeight,\n              });\n            } else {\n              // the participant just stopped publishing a track\n              requestTrackWithDimensions(DebounceType.FAST, undefined);\n            }\n          });\n\n    videoElement.autoplay = true;\n    videoElement.playsInline = true;\n\n    // explicitly marking the element as muted will allow autoplay to work\n    // without prior user interaction:\n    // https://developer.mozilla.org/en-US/docs/Web/Media/Autoplay_guide\n    videoElement.muted = true;\n\n    const streamSubscription = participant$\n      .pipe(\n        distinctUntilKeyChanged(\n          trackType === 'videoTrack' ? 'videoStream' : 'screenShareStream',\n        ),\n      )\n      .subscribe((p) => {\n        const source =\n          trackType === 'videoTrack' ? p.videoStream : p.screenShareStream;\n        if (videoElement.srcObject === source) return;\n        videoElement.srcObject = source ?? null;\n        if (isSafari() || isFirefox()) {\n          setTimeout(() => {\n            videoElement.srcObject = source ?? null;\n            videoElement.play().catch((e) => {\n              this.logger.warn(`Failed to play stream`, e);\n            });\n            // we add extra delay until we attempt to force-play\n            // the participant's media stream in Firefox and Safari,\n            // as they seem to have some timing issues\n          }, 25);\n        }\n      });\n\n    return () => {\n      requestTrackWithDimensions(DebounceType.FAST, undefined);\n      viewportVisibilityStateSubscription?.unsubscribe();\n      publishedTracksSubscription?.unsubscribe();\n      streamSubscription.unsubscribe();\n      resizeObserver?.disconnect();\n    };\n  };\n\n  /**\n   * Binds a DOM <audio> element to the given session id.\n   *\n   * This method will make sure that the audio element will\n   * play the correct audio stream for the given session id.\n   *\n   * @param audioElement the audio element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of audio.\n   * @returns a cleanup function that will unbind the audio element.\n   */\n  bindAudioElement = (\n    audioElement: HTMLAudioElement,\n    sessionId: string,\n    trackType: AudioTrackType,\n  ) => {\n    const participant = this.callState.findParticipantBySessionId(sessionId);\n    if (!participant || participant.isLocalParticipant) return;\n\n    const participant$ = this.callState.participants$.pipe(\n      map((ps) => ps.find((p) => p.sessionId === sessionId)),\n      takeWhile((p) => !!p),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    const updateSinkId = (\n      deviceId: string,\n      audioContext: AudioContext | undefined,\n    ) => {\n      if (!deviceId) return;\n      if ('setSinkId' in audioElement) {\n        audioElement.setSinkId(deviceId).catch((e) => {\n          this.logger.warn(`Can't to set AudioElement sinkId`, e);\n        });\n      }\n\n      if (audioContext && 'setSinkId' in audioContext) {\n        // @ts-expect-error setSinkId is not available in all browsers\n        audioContext.setSinkId(deviceId).catch((e) => {\n          this.logger.warn(`Can't to set AudioContext sinkId`, e);\n        });\n      }\n    };\n\n    let sourceNode: MediaStreamAudioSourceNode | undefined = undefined;\n    let gainNode: GainNode | undefined = undefined;\n\n    const updateMediaStreamSubscription = participant$\n      .pipe(\n        distinctUntilKeyChanged(\n          trackType === 'screenShareAudioTrack'\n            ? 'screenShareAudioStream'\n            : 'audioStream',\n        ),\n      )\n      .subscribe((p) => {\n        const source =\n          trackType === 'screenShareAudioTrack'\n            ? p.screenShareAudioStream\n            : p.audioStream;\n        if (audioElement.srcObject === source) return;\n\n        setTimeout(() => {\n          audioElement.srcObject = source ?? null;\n          if (!source) return;\n\n          // Safari has a special quirk that prevents playing audio until the user\n          // interacts with the page or focuses on the tab where the call happens.\n          // This is a workaround for the issue where:\n          // - A and B are in a call\n          // - A switches to another tab\n          // - B mutes their microphone and unmutes it\n          // - A does not hear B's unmuted audio until they focus the tab\n          const audioContext = this.getOrCreateAudioContext();\n          if (audioContext) {\n            // we will play audio through the audio context in Safari\n            audioElement.muted = true;\n            sourceNode?.disconnect();\n            sourceNode = audioContext.createMediaStreamSource(source);\n            gainNode ??= audioContext.createGain();\n            gainNode.gain.value = p.audioVolume ?? this.speaker.state.volume;\n            sourceNode.connect(gainNode).connect(audioContext.destination);\n            this.resumeAudioContext();\n          } else {\n            // we will play audio directly through the audio element in other browsers\n            audioElement.muted = false;\n            audioElement.play().catch((e) => {\n              this.logger.warn(`Failed to play audio stream`, e);\n            });\n          }\n\n          const { selectedDevice } = this.speaker.state;\n          if (selectedDevice) updateSinkId(selectedDevice, audioContext);\n        });\n      });\n\n    const sinkIdSubscription = !('setSinkId' in audioElement)\n      ? null\n      : this.speaker.state.selectedDevice$.subscribe((deviceId) => {\n          const audioContext = this.getOrCreateAudioContext();\n          updateSinkId(deviceId, audioContext);\n        });\n\n    const volumeSubscription = combineLatest([\n      this.speaker.state.volume$,\n      participant$.pipe(distinctUntilKeyChanged('audioVolume')),\n    ]).subscribe(([volume, p]) => {\n      const participantVolume = p.audioVolume ?? volume;\n      audioElement.volume = participantVolume;\n      if (gainNode) gainNode.gain.value = participantVolume;\n    });\n\n    audioElement.autoplay = true;\n\n    return () => {\n      sinkIdSubscription?.unsubscribe();\n      volumeSubscription.unsubscribe();\n      updateMediaStreamSubscription.unsubscribe();\n      audioElement.srcObject = null;\n      sourceNode?.disconnect();\n      gainNode?.disconnect();\n    };\n  };\n\n  private getOrCreateAudioContext = (): AudioContext | undefined => {\n    if (this.audioContext || !isSafari()) return this.audioContext;\n    const context = new AudioContext();\n    if (context.state === 'suspended') {\n      document.addEventListener('click', this.resumeAudioContext);\n    }\n    // @ts-expect-error audioSession is available in Safari only\n    const audioSession = navigator.audioSession;\n    if (audioSession) {\n      // https://github.com/w3c/audio-session/blob/main/explainer.md\n      audioSession.type = 'play-and-record';\n    }\n    return (this.audioContext = context);\n  };\n\n  private resumeAudioContext = () => {\n    if (this.audioContext?.state === 'suspended') {\n      this.audioContext\n        .resume()\n        .catch((err) => this.logger.warn(`Can't resume audio context`, err))\n        .then(() => {\n          document.removeEventListener('click', this.resumeAudioContext);\n        });\n    }\n  };\n}\n","import { CallSettingsResponse, OwnCapability } from '../gen/coordinator';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { ensureExhausted } from '../helpers/ensureExhausted';\n\n/**\n * Stores the permissions for the current user and exposes\n * a few helper methods which make it easier to work with permissions.\n *\n * This is an internal class meant to be used in combination with\n * a {@link Call} instance.\n *\n * @internal\n */\nexport class PermissionsContext {\n  private permissions: OwnCapability[] = [];\n  private settings?: CallSettingsResponse;\n\n  /**\n   * Sets the permissions for the current user.\n   *\n   * @param permissions the permissions to set.\n   */\n  setPermissions = (permissions: OwnCapability[]) => {\n    this.permissions = permissions || [];\n  };\n\n  /**\n   * Sets the settings for the bound call.\n   * @param settings\n   */\n  setCallSettings = (settings: CallSettingsResponse) => {\n    this.settings = settings;\n  };\n\n  /**\n   * Checks if the current user has a specific permission.\n   *\n   * @param permission the permission to check for.\n   */\n  hasPermission = (permission: OwnCapability) => {\n    return this.permissions.includes(permission);\n  };\n\n  /**\n   * Helper method that checks whether the current user has the permission\n   * to publish the given track type.\n   */\n  canPublish = (trackType: TrackType) => {\n    switch (trackType) {\n      case TrackType.AUDIO:\n        return this.hasPermission(OwnCapability.SEND_AUDIO);\n      case TrackType.VIDEO:\n        return this.hasPermission(OwnCapability.SEND_VIDEO);\n      case TrackType.SCREEN_SHARE:\n      case TrackType.SCREEN_SHARE_AUDIO:\n        return this.hasPermission(OwnCapability.SCREENSHARE);\n      case TrackType.UNSPECIFIED:\n        return false;\n      default:\n        ensureExhausted(trackType, 'Unknown track type');\n    }\n  };\n\n  /**\n   * Checks if the current user can request a specific permission\n   * within the call.\n   *\n   * @param permission the permission to check for.\n   * @param settings the call settings to check against (optional).\n   */\n  canRequest = (\n    permission: OwnCapability,\n    settings: CallSettingsResponse | undefined = this.settings,\n  ) => {\n    if (!settings) return false;\n\n    const { audio, video, screensharing } = settings;\n    switch (permission) {\n      case OwnCapability.SEND_AUDIO:\n        return audio.access_request_enabled;\n      case OwnCapability.SEND_VIDEO:\n        return video.access_request_enabled;\n      case OwnCapability.SCREENSHARE:\n        return screensharing.access_request_enabled;\n      default:\n        return false;\n    }\n  };\n}\n","import { StreamVideoParticipant } from './types';\nimport {\n  Comparator,\n  defaultSortPreset,\n  livestreamOrAudioRoomSortPreset,\n} from './sorting';\n\n/**\n * The options for a {@link CallType}.\n */\nexport type CallTypeOptions = {\n  /**\n   * The {@link Comparator} to use to sorting the participants in the call.\n   */\n  sortParticipantsBy?: Comparator<StreamVideoParticipant>;\n};\n\n/**\n * Represents a call type.\n */\nexport class CallType {\n  /**\n   * The name of the call type.\n   */\n  name: string;\n\n  /**\n   * The options for the call type.\n   */\n  options: CallTypeOptions;\n\n  /**\n   * Constructs a new CallType.\n   *\n   * @param name the name of the call type.\n   * @param options the options for the call type.\n   */\n  constructor(\n    name: string,\n    options: CallTypeOptions = {\n      sortParticipantsBy: defaultSortPreset,\n    },\n  ) {\n    this.name = name;\n    this.options = options;\n  }\n}\n\n/**\n * A registry of {@link CallType}s.\n * You can register and unregister call types.\n */\nclass CallTypesRegistry {\n  /**\n   * The call types registered in this registry.\n   * @private\n   */\n  private readonly callTypes: { [key: string]: CallType };\n\n  /**\n   * Constructs a new CallTypesRegistry.\n   *\n   * @param callTypes the initial call types to register.\n   */\n  constructor(callTypes: CallType[]) {\n    this.callTypes = callTypes.reduce<{ [key: string]: CallType }>(\n      (acc, callType) => {\n        acc[callType.name] = callType;\n        return acc;\n      },\n      {},\n    );\n  }\n\n  /**\n   * Registers a new call type.\n   *\n   * @param callType the call type to register.\n   */\n  register = (callType: CallType) => {\n    this.callTypes[callType.name] = callType;\n  };\n\n  /**\n   * Unregisters a call type.\n   *\n   * @param name the name of the call type to unregister.\n   */\n  unregister = (name: string) => {\n    delete this.callTypes[name];\n  };\n\n  /**\n   * Gets a call type by name.\n   *\n   * @param name the name of the call type to get.\n   */\n  get = (name: string): CallType => {\n    if (!this.callTypes[name]) {\n      this.register(new CallType(name));\n    }\n    return this.callTypes[name];\n  };\n}\n\n/**\n * The default call types registry.\n * You can use this instance to dynamically register and unregister call types.\n */\nexport const CallTypes = new CallTypesRegistry([\n  new CallType('default', {\n    sortParticipantsBy: defaultSortPreset,\n  }),\n  new CallType('development', {\n    sortParticipantsBy: defaultSortPreset,\n  }),\n  new CallType('livestream', {\n    sortParticipantsBy: livestreamOrAudioRoomSortPreset,\n  }),\n  new CallType('audio_room', {\n    sortParticipantsBy: livestreamOrAudioRoomSortPreset,\n  }),\n]);\n","/**\n * Deactivates MediaStream (stops and removes tracks) to be later garbage collected\n *\n * @param stream MediaStream\n * @returns void\n */\nexport const disposeOfMediaStream = (stream: MediaStream) => {\n  if (!stream.active) return;\n  stream.getTracks().forEach((track) => {\n    track.stop();\n  });\n  // @ts-expect-error release() is present in react-native-webrtc and must be called to dispose the stream\n  if (typeof stream.release === 'function') {\n    // @ts-expect-error - release() is present in react-native-webrtc\n    stream.release();\n  }\n};\n","import { fromEventPattern, map } from 'rxjs';\nimport { isReactNative } from '../helpers/platforms';\nimport { disposeOfMediaStream } from './utils';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { videoLoggerSystem } from '../logger';\n\ninterface BrowserPermissionConfig {\n  constraints: DisplayMediaStreamOptions;\n  queryName: PermissionName;\n}\n\nexport type BrowserPermissionState = PermissionState | 'prompting';\n\nexport class BrowserPermission {\n  private ready: Promise<void>;\n  private disposeController = new AbortController();\n  private state: BrowserPermissionState | undefined;\n  private wasPrompted: boolean = false;\n  private listeners = new Set<(state: BrowserPermissionState) => void>();\n  private logger = videoLoggerSystem.getLogger('permissions');\n\n  constructor(private readonly permission: BrowserPermissionConfig) {\n    const signal = this.disposeController.signal;\n\n    this.ready = (async () => {\n      const assumeGranted = () => {\n        if (isReactNative()) {\n          this.setState('granted');\n        } else {\n          this.setState('prompt');\n        }\n      };\n\n      if (!canQueryPermissions()) {\n        return assumeGranted();\n      }\n\n      try {\n        const status = await navigator.permissions.query({\n          name: permission.queryName,\n        });\n\n        if (!signal.aborted) {\n          this.setState(status.state);\n          status.addEventListener('change', () => this.setState(status.state), {\n            signal,\n          });\n        }\n      } catch (err) {\n        this.logger.debug('Failed to query permission status', err);\n        assumeGranted();\n      }\n    })();\n  }\n\n  dispose() {\n    this.state = undefined;\n    this.disposeController.abort();\n  }\n\n  async getState() {\n    await this.ready;\n    if (!this.state) {\n      throw new Error('BrowserPermission instance possibly disposed');\n    }\n    return this.state;\n  }\n\n  async prompt({\n    forcePrompt = false,\n    throwOnNotAllowed = false,\n  }: { forcePrompt?: boolean; throwOnNotAllowed?: boolean } = {}) {\n    return await withoutConcurrency(\n      `permission-prompt-${this.permission.queryName}`,\n      async () => {\n        if (\n          (await this.getState()) !== 'prompt' ||\n          (this.wasPrompted && !forcePrompt)\n        ) {\n          const isGranted = this.state === 'granted';\n\n          if (!isGranted && throwOnNotAllowed) {\n            throw new Error(\n              'Permission was not granted previously, and prompting again is not allowed',\n            );\n          }\n\n          return isGranted;\n        }\n\n        try {\n          this.wasPrompted = true;\n          this.setState('prompting');\n          const stream = await navigator.mediaDevices.getUserMedia(\n            this.permission.constraints,\n          );\n          disposeOfMediaStream(stream);\n          this.setState('granted');\n          return true;\n        } catch (e) {\n          if (\n            e &&\n            typeof e === 'object' &&\n            'name' in e &&\n            (e.name === 'NotAllowedError' || e.name === 'SecurityError')\n          ) {\n            this.logger.info('Browser permission was not granted', {\n              permission: this.permission,\n            });\n            this.setState('denied');\n\n            if (throwOnNotAllowed) {\n              throw e;\n            }\n\n            return false;\n          }\n\n          this.logger.error(`Failed to getUserMedia`, {\n            error: e,\n            permission: this.permission,\n          });\n          this.setState('prompt');\n          throw e;\n        }\n      },\n    );\n  }\n\n  listen(cb: (state: BrowserPermissionState) => void) {\n    this.listeners.add(cb);\n    if (this.state) cb(this.state);\n    return () => this.listeners.delete(cb);\n  }\n\n  asObservable() {\n    return this.getStateObservable().pipe(\n      // In some browsers, the 'change' event doesn't reliably emit and hence,\n      // permissionState stays in 'prompt' state forever.\n      // Typically, this happens when a user grants one-time permission.\n      // Instead of checking if a permission is granted, we check if it isn't denied\n      map((state) => state !== 'denied'),\n    );\n  }\n\n  asStateObservable() {\n    return this.getStateObservable();\n  }\n\n  getIsPromptingObservable() {\n    return this.getStateObservable().pipe(\n      map((state) => state === 'prompting'),\n    );\n  }\n\n  private getStateObservable() {\n    return fromEventPattern<BrowserPermissionState>(\n      (handler) => this.listen(handler),\n      (handler, unlisten) => unlisten(),\n    );\n  }\n\n  private setState(state: BrowserPermissionState) {\n    if (this.state !== state) {\n      this.state = state;\n      this.listeners.forEach((listener) => listener(state));\n    }\n  }\n}\n\nfunction canQueryPermissions() {\n  return (\n    !isReactNative() &&\n    typeof navigator !== 'undefined' &&\n    !!navigator.permissions?.query\n  );\n}\n","import {\n  concatMap,\n  debounceTime,\n  from,\n  fromEvent,\n  map,\n  merge,\n  shareReplay,\n  startWith,\n  tap,\n} from 'rxjs';\nimport { BrowserPermission } from './BrowserPermission';\nimport { lazy } from '../helpers/lazy';\nimport { isFirefox } from '../helpers/browsers';\nimport { dumpStream, Tracer } from '../stats';\nimport { getCurrentValue } from '../store/rxUtils';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * Returns an Observable that emits the list of available devices\n * that meet the given constraints.\n *\n * @param permission a BrowserPermission instance.\n * @param kind the kind of devices to enumerate.\n * @param tracer the tracer to use for tracing the device enumeration.\n */\nconst getDevices = (\n  permission: BrowserPermission,\n  kind: MediaDeviceKind,\n  tracer: Tracer | undefined,\n) => {\n  return from(\n    (async () => {\n      let devices = await navigator.mediaDevices.enumerateDevices();\n      // for privacy reasons, most browsers don't give you device labels\n      // unless you have a corresponding camera or microphone permission\n      const shouldPromptForBrowserPermission = devices.some(\n        (device) => device.kind === kind && device.label === '',\n      );\n      if (shouldPromptForBrowserPermission && (await permission.prompt())) {\n        devices = await navigator.mediaDevices.enumerateDevices();\n      }\n      tracer?.traceOnce(\n        'device-enumeration',\n        'navigator.mediaDevices.enumerateDevices',\n        devices,\n      );\n      return devices.filter(\n        (device) =>\n          device.kind === kind &&\n          device.label !== '' &&\n          device.deviceId !== 'default',\n      );\n    })(),\n  );\n};\n\n/**\n * Tells if the browser supports audio output change on 'audio' elements,\n * see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId.\n */\nexport const checkIfAudioOutputChangeSupported = () => {\n  if (typeof document === 'undefined') return false;\n  const element = document.createElement('audio');\n  return 'setSinkId' in element;\n};\n\n/**\n * The default constraints used to request audio devices.\n */\nconst audioDeviceConstraints = {\n  audio: {\n    autoGainControl: true,\n    noiseSuppression: true,\n    echoCancellation: true,\n  },\n} satisfies MediaStreamConstraints;\n\n/**\n * The default constraints used to request video devices.\n */\nconst videoDeviceConstraints = {\n  video: {\n    width: 1280,\n    height: 720,\n  },\n} satisfies MediaStreamConstraints;\n\n/**\n * Keeps track of the browser permission to use microphone. This permission also\n * affects an ability to enumerate audio devices.\n */\nexport const getAudioBrowserPermission = lazy(\n  () =>\n    new BrowserPermission({\n      constraints: audioDeviceConstraints,\n      queryName: 'microphone' as PermissionName,\n    }),\n);\n\n/**\n * Keeps track of the browser permission to use camera. This permission also\n * affects an ability to enumerate video devices.\n */\nexport const getVideoBrowserPermission = lazy(\n  () =>\n    new BrowserPermission({\n      constraints: videoDeviceConstraints,\n      queryName: 'camera' as PermissionName,\n    }),\n);\n\nconst getDeviceChangeObserver = lazy((tracer: Tracer | undefined) => {\n  // 'addEventListener' is not available in React Native, returning\n  // an observable that will never fire\n  if (!navigator.mediaDevices.addEventListener) return from([]);\n  return fromEvent(navigator.mediaDevices, 'devicechange').pipe(\n    tap(() => tracer?.resetTrace('device-enumeration')),\n    map(() => undefined),\n    debounceTime(500),\n  );\n});\n\n/**\n * Prompts the user for a permission to use audio devices (if not already granted\n * and was not prompted before) and lists the available 'audioinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getAudioDevices = lazy((tracer?: Tracer) => {\n  return merge(\n    getDeviceChangeObserver(tracer),\n    getAudioBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() =>\n      getDevices(getAudioBrowserPermission(), 'audioinput', tracer),\n    ),\n    shareReplay(1),\n  );\n});\n\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'videoinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getVideoDevices = lazy((tracer?: Tracer) => {\n  return merge(\n    getDeviceChangeObserver(tracer),\n    getVideoBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() =>\n      getDevices(getVideoBrowserPermission(), 'videoinput', tracer),\n    ),\n    shareReplay(1),\n  );\n});\n\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'audiooutput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getAudioOutputDevices = lazy((tracer?: Tracer) => {\n  return merge(\n    getDeviceChangeObserver(tracer),\n    getAudioBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() =>\n      getDevices(getAudioBrowserPermission(), 'audiooutput', tracer),\n    ),\n    shareReplay(1),\n  );\n});\n\nlet getUserMediaExecId = 0;\nconst getStream = async (\n  constraints: MediaStreamConstraints,\n  tracer: Tracer | undefined,\n) => {\n  const tag = `navigator.mediaDevices.getUserMedia.${getUserMediaExecId++}.`;\n  try {\n    tracer?.trace(tag, constraints);\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    tracer?.trace(`${tag}OnSuccess`, dumpStream(stream));\n    if (isFirefox()) {\n      // When enumerating devices, Firefox will hide device labels unless there's been\n      // an active user media stream on the page. So we force device list updates after\n      // every successful getUserMedia call.\n      navigator.mediaDevices.dispatchEvent(new Event('devicechange'));\n    }\n    if (constraints.video) {\n      const [videoTrack] = stream.getVideoTracks();\n      if (videoTrack) {\n        const { width, height } = videoTrack.getSettings();\n        const target = constraints.video as MediaTrackConstraints;\n        if (width !== target.width || height !== target.height) {\n          tracer?.trace(\n            `${tag}Warn`,\n            `Requested resolution ${target.width}x${target.height} but got ${width}x${height}`,\n          );\n        }\n      }\n    }\n\n    return stream;\n  } catch (error) {\n    tracer?.trace(`${tag}OnFailure`, (error as Error).name);\n    throw error;\n  }\n};\n\nfunction isNotFoundOrOverconstrainedError(error: unknown) {\n  if (!error || typeof error !== 'object') {\n    return false;\n  }\n\n  if ('name' in error && typeof error.name === 'string') {\n    const name = error.name;\n    if (['OverconstrainedError', 'NotFoundError'].includes(name)) {\n      return true;\n    }\n  }\n\n  if ('message' in error && typeof error.message === 'string') {\n    const message = error.message;\n    if (message.startsWith('OverconstrainedError')) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Returns an audio media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @param trackConstraints the constraints to use when requesting the stream.\n * @param tracer the tracer to use for tracing the stream creation.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */\nexport const getAudioStream = async (\n  trackConstraints?: MediaTrackConstraints,\n  tracer?: Tracer,\n): Promise<MediaStream> => {\n  const constraints: MediaStreamConstraints = {\n    audio: {\n      ...audioDeviceConstraints.audio,\n      ...trackConstraints,\n    },\n  };\n\n  try {\n    await getAudioBrowserPermission().prompt({\n      throwOnNotAllowed: true,\n      forcePrompt: true,\n    });\n    return await getStream(constraints, tracer);\n  } catch (error) {\n    if (isNotFoundOrOverconstrainedError(error) && trackConstraints?.deviceId) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { deviceId, ...relaxedConstraints } = trackConstraints;\n      videoLoggerSystem\n        .getLogger('devices')\n        .warn(\n          'Failed to get audio stream, will try again with relaxed constraints',\n          { error, constraints, relaxedConstraints },\n        );\n      return getAudioStream(relaxedConstraints);\n    }\n\n    videoLoggerSystem.getLogger('devices').error('Failed to get audio stream', {\n      error,\n      constraints,\n    });\n    throw error;\n  }\n};\n\n/**\n * Returns a video media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @param trackConstraints the constraints to use when requesting the stream.\n * @param tracer the tracer to use for tracing the stream creation.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */\nexport const getVideoStream = async (\n  trackConstraints?: MediaTrackConstraints,\n  tracer?: Tracer,\n): Promise<MediaStream> => {\n  const constraints: MediaStreamConstraints = {\n    video: {\n      ...videoDeviceConstraints.video,\n      ...trackConstraints,\n    },\n  };\n  try {\n    await getVideoBrowserPermission().prompt({\n      throwOnNotAllowed: true,\n      forcePrompt: true,\n    });\n    return await getStream(constraints, tracer);\n  } catch (error) {\n    if (isNotFoundOrOverconstrainedError(error) && trackConstraints?.deviceId) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { deviceId, ...relaxedConstraints } = trackConstraints;\n      videoLoggerSystem\n        .getLogger('devices')\n        .warn(\n          'Failed to get video stream, will try again with relaxed constraints',\n          { error, constraints, relaxedConstraints },\n        );\n      return getVideoStream(relaxedConstraints);\n    }\n\n    videoLoggerSystem.getLogger('devices').error('Failed to get video stream', {\n      error,\n      constraints,\n    });\n    throw error;\n  }\n};\n\nlet getDisplayMediaExecId = 0;\n\n/**\n * Prompts the user for a permission to share a screen.\n * If the user grants the permission, a screen sharing stream is returned. Throws otherwise.\n *\n * The callers of this API are responsible to handle the possible errors.\n *\n * @param options any additional options to pass to the [`getDisplayMedia`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) API.\n * @param tracer the tracer to use for tracing the stream creation.\n */\nexport const getScreenShareStream = async (\n  options?: DisplayMediaStreamOptions,\n  tracer?: Tracer | undefined,\n) => {\n  const tag = `navigator.mediaDevices.getDisplayMedia.${getDisplayMediaExecId++}.`;\n  try {\n    const constraints: DisplayMediaStreamOptions = {\n      // @ts-expect-error - not present in types yet\n      systemAudio: 'include',\n      ...options,\n      video:\n        typeof options?.video === 'boolean'\n          ? options.video // must be 'true'\n          : {\n              width: { max: 2560 },\n              height: { max: 1440 },\n              frameRate: { ideal: 30 },\n              ...options?.video,\n            },\n      audio:\n        typeof options?.audio === 'boolean'\n          ? options.audio\n          : {\n              channelCount: { ideal: 2 },\n              echoCancellation: false,\n              autoGainControl: false,\n              noiseSuppression: false,\n              ...options?.audio,\n            },\n    };\n    tracer?.trace(tag, constraints);\n    const stream = await navigator.mediaDevices.getDisplayMedia(constraints);\n    tracer?.trace(`${tag}OnSuccess`, dumpStream(stream));\n    return stream;\n  } catch (e) {\n    tracer?.trace(`${tag}OnFailure`, (e as Error).name);\n    videoLoggerSystem\n      .getLogger('devices')\n      .error('Failed to get screen share stream', e);\n    throw e;\n  }\n};\n\nexport const deviceIds$ =\n  typeof navigator !== 'undefined' &&\n  typeof navigator.mediaDevices !== 'undefined'\n    ? getDeviceChangeObserver().pipe(\n        startWith(undefined),\n        concatMap(() => navigator.mediaDevices.enumerateDevices()),\n        shareReplay(1),\n      )\n    : undefined;\n\n/**\n * Resolves `default` device id into the real device id. Some browsers (notably,\n * Chromium-based) report device with id `default` among audio input and output\n * devices. Since not every browser does that, we never want `default` id to be\n * used within our SDK. This function tries to find the real id for the `default`\n * device.\n */\nexport function resolveDeviceId(\n  deviceId: string | undefined,\n  kind: MediaDeviceKind,\n): string | undefined {\n  if (deviceId !== 'default') return deviceId;\n  const devices = deviceIds$ && getCurrentValue(deviceIds$);\n  if (!devices) return deviceId;\n  const defaultDeviceInfo = devices.find((d) => d.deviceId === deviceId);\n  if (!defaultDeviceInfo) return deviceId;\n  const groupId = defaultDeviceInfo.groupId;\n  const candidates = devices.filter(\n    (d) => d.kind === kind && d.deviceId !== 'default' && d.groupId === groupId,\n  );\n  return candidates.length === 1 ? candidates[0].deviceId : deviceId;\n}\n","/**\n * Checks if the current platform is a mobile device.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\n */\nexport const isMobile = () => /Mobi/i.test(navigator.userAgent);\n","import { combineLatest, Observable, pairwise } from 'rxjs';\nimport { Call } from '../Call';\nimport { TrackPublishOptions } from '../rtc';\nimport { CallingState } from '../store';\nimport { createSubscription } from '../store/rxUtils';\nimport { DeviceManagerState } from './DeviceManagerState';\nimport { isMobile } from '../helpers/compatibility';\nimport { isReactNative } from '../helpers/platforms';\nimport { ScopedLogger, videoLoggerSystem } from '../logger';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { deviceIds$ } from './devices';\nimport {\n  settled,\n  withCancellation,\n  withoutConcurrency,\n} from '../helpers/concurrency';\nimport {\n  MediaStreamFilter,\n  MediaStreamFilterEntry,\n  MediaStreamFilterRegistrationResult,\n} from './filters';\n\nexport abstract class DeviceManager<\n  S extends DeviceManagerState<C>,\n  C = MediaTrackConstraints,\n> {\n  /**\n   * if true, stops the media stream when call is left\n   */\n  stopOnLeave = true;\n  logger: ScopedLogger;\n\n  state: S;\n\n  protected readonly call: Call;\n  protected readonly trackType: TrackType;\n  protected subscriptions: Function[] = [];\n  private areSubscriptionsSetUp = false;\n  private isTrackStoppedDueToTrackEnd = false;\n  private filters: MediaStreamFilterEntry[] = [];\n  private statusChangeConcurrencyTag = Symbol('statusChangeConcurrencyTag');\n  private filterRegistrationConcurrencyTag = Symbol(\n    'filterRegistrationConcurrencyTag',\n  );\n\n  protected constructor(call: Call, state: S, trackType: TrackType) {\n    this.call = call;\n    this.state = state;\n    this.trackType = trackType;\n    this.logger = videoLoggerSystem.getLogger(\n      `${TrackType[trackType].toLowerCase()} manager`,\n    );\n    this.setup();\n  }\n\n  setup() {\n    if (this.areSubscriptionsSetUp) {\n      return;\n    }\n\n    this.areSubscriptionsSetUp = true;\n\n    if (\n      deviceIds$ &&\n      !isReactNative() &&\n      (this.trackType === TrackType.AUDIO || this.trackType === TrackType.VIDEO)\n    ) {\n      this.handleDisconnectedOrReplacedDevices();\n    }\n  }\n\n  /**\n   * Lists the available audio/video devices\n   *\n   * Note: It prompts the user for a permission to use devices (if not already granted)\n   *\n   * @returns an Observable that will be updated if a device is connected or disconnected\n   */\n  listDevices() {\n    return this.getDevices();\n  }\n\n  /**\n   * Returns `true` when this device is in enabled state.\n   */\n  get enabled() {\n    return this.state.status === 'enabled';\n  }\n\n  /**\n   * Starts stream.\n   */\n  async enable() {\n    this.state.prevStatus = this.state.optimisticStatus;\n    if (this.state.optimisticStatus === 'enabled') {\n      return;\n    }\n    this.state.setPendingStatus('enabled');\n\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      try {\n        await this.unmuteStream();\n        this.state.setStatus('enabled');\n      } finally {\n        if (!signal.aborted) {\n          this.state.setPendingStatus(this.state.status);\n        }\n      }\n    });\n  }\n\n  /**\n   * Stops or pauses the stream based on state.disableMode\n   */\n  async disable(options: { forceStop?: boolean }): Promise<void>;\n  async disable(forceStop?: boolean): Promise<void>;\n  async disable(forceStopOrOptions?: boolean | { forceStop?: boolean }) {\n    const forceStop =\n      typeof forceStopOrOptions === 'boolean'\n        ? forceStopOrOptions\n        : (forceStopOrOptions?.forceStop ?? false);\n\n    this.state.prevStatus = this.state.optimisticStatus;\n    if (!forceStop && this.state.optimisticStatus === 'disabled') {\n      return;\n    }\n\n    this.state.setPendingStatus('disabled');\n\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      try {\n        const stopTracks =\n          forceStop || this.state.disableMode === 'stop-tracks';\n        await this.muteStream(stopTracks);\n        this.state.setStatus('disabled');\n      } finally {\n        if (!signal.aborted) {\n          this.state.setPendingStatus(this.state.status);\n        }\n      }\n    });\n  }\n\n  /**\n   * Returns a promise that resolves when all pe\n   */\n  async statusChangeSettled() {\n    await settled(this.statusChangeConcurrencyTag);\n  }\n\n  /**\n   * If status was previously enabled, it will re-enable the device.\n   */\n  async resume() {\n    if (\n      this.state.prevStatus === 'enabled' &&\n      this.state.status !== 'enabled'\n    ) {\n      await this.enable();\n    }\n  }\n\n  /**\n   * If the current device status is disabled, it will enable the device,\n   * else it will disable it.\n   */\n  async toggle() {\n    if (this.state.optimisticStatus === 'enabled') {\n      return await this.disable();\n    } else {\n      return await this.enable();\n    }\n  }\n\n  /**\n   * Registers a filter that will be applied to the stream.\n   *\n   * The registered filter will get the existing stream, and it should return\n   * a new stream with the applied filter.\n   *\n   * @param filter the filter to register.\n   * @returns MediaStreamFilterRegistrationResult\n   */\n  registerFilter(\n    filter: MediaStreamFilter,\n  ): MediaStreamFilterRegistrationResult {\n    const entry: MediaStreamFilterEntry = {\n      start: filter,\n      stop: undefined,\n    };\n    this.call.tracer.trace(`registerFilter.${TrackType[this.trackType]}`, null);\n    const registered = withoutConcurrency(\n      this.filterRegistrationConcurrencyTag,\n      async () => {\n        await settled(this.statusChangeConcurrencyTag);\n        this.filters.push(entry);\n        await this.applySettingsToStream();\n      },\n    );\n\n    return {\n      registered,\n      unregister: () =>\n        withoutConcurrency(this.filterRegistrationConcurrencyTag, async () => {\n          await settled(this.statusChangeConcurrencyTag);\n          entry.stop?.();\n          this.filters = this.filters.filter((f) => f !== entry);\n          await this.applySettingsToStream();\n          this.call.tracer.trace(\n            `unregisterFilter.${TrackType[this.trackType]}`,\n            null,\n          );\n        }),\n    };\n  }\n\n  /**\n   * Will set the default constraints for the device.\n   *\n   * @param constraints the constraints to set.\n   */\n  setDefaultConstraints(constraints: C) {\n    this.state.setDefaultConstraints(constraints);\n  }\n\n  /**\n   * Selects a device.\n   *\n   * Note: This method is not supported in React Native\n   * @param deviceId the device id to select.\n   */\n  async select(deviceId: string | undefined) {\n    if (isReactNative()) {\n      throw new Error('This method is not supported in React Native.');\n    }\n    const prevDeviceId = this.state.selectedDevice;\n    if (deviceId === prevDeviceId) {\n      return;\n    }\n    try {\n      this.state.setDevice(deviceId);\n      await this.applySettingsToStream();\n    } catch (error) {\n      this.state.setDevice(prevDeviceId);\n      throw error;\n    }\n  }\n\n  /**\n   * Disposes the manager.\n   *\n   * @internal\n   */\n  dispose = () => {\n    this.subscriptions.forEach((s) => s());\n    this.subscriptions = [];\n    this.areSubscriptionsSetUp = false;\n  };\n\n  protected async applySettingsToStream() {\n    console.log('applySettingsToStream ');\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      if (this.enabled) {\n        try {\n          await this.muteStream();\n          this.state.setStatus('disabled');\n\n          if (signal.aborted) {\n            return;\n          }\n\n          await this.unmuteStream();\n          this.state.setStatus('enabled');\n        } finally {\n          if (!signal.aborted) {\n            this.state.setPendingStatus(this.state.status);\n          }\n        }\n      }\n    });\n  }\n\n  protected abstract getDevices(): Observable<MediaDeviceInfo[]>;\n\n  protected abstract getStream(constraints: C): Promise<MediaStream>;\n\n  protected publishStream(\n    stream: MediaStream,\n    options?: TrackPublishOptions,\n  ): Promise<void> {\n    return this.call.publish(stream, this.trackType, options);\n  }\n\n  protected stopPublishStream(): Promise<void> {\n    return this.call.stopPublish(this.trackType);\n  }\n\n  protected getTracks(): MediaStreamTrack[] {\n    return this.state.mediaStream?.getTracks() ?? [];\n  }\n\n  protected async muteStream(stopTracks: boolean = true) {\n    const mediaStream = this.state.mediaStream;\n    if (!mediaStream) return;\n    this.logger.debug(`${stopTracks ? 'Stopping' : 'Disabling'} stream`);\n    if (this.call.state.callingState === CallingState.JOINED) {\n      await this.stopPublishStream();\n    }\n    this.muteLocalStream(stopTracks);\n    const allEnded = this.getTracks().every((t) => t.readyState === 'ended');\n    if (allEnded) {\n      // @ts-expect-error release() is present in react-native-webrtc\n      if (typeof mediaStream.release === 'function') {\n        // @ts-expect-error called to dispose the stream in RN\n        mediaStream.release();\n      }\n      this.state.setMediaStream(undefined, undefined);\n      this.filters.forEach((entry) => entry.stop?.());\n    }\n  }\n\n  private disableTracks() {\n    this.getTracks().forEach((track) => {\n      if (track.enabled) track.enabled = false;\n    });\n  }\n\n  private enableTracks() {\n    this.getTracks().forEach((track) => {\n      if (!track.enabled) track.enabled = true;\n    });\n  }\n\n  private stopTracks() {\n    this.getTracks().forEach((track) => {\n      if (track.readyState === 'live') track.stop();\n    });\n  }\n\n  private muteLocalStream(stopTracks: boolean) {\n    if (!this.state.mediaStream) {\n      return;\n    }\n    if (stopTracks) {\n      this.stopTracks();\n    } else {\n      this.disableTracks();\n    }\n  }\n\n  protected async unmuteStream() {\n    this.logger.debug('Starting stream');\n    let stream: MediaStream;\n    let rootStream: Promise<MediaStream> | undefined;\n    if (\n      this.state.mediaStream &&\n      this.getTracks().every((t) => t.readyState === 'live')\n    ) {\n      stream = this.state.mediaStream;\n      this.enableTracks();\n    } else {\n      const defaultConstraints = this.state.defaultConstraints;\n      const constraints: MediaTrackConstraints = {\n        ...defaultConstraints,\n        deviceId: this.state.selectedDevice\n          ? { exact: this.state.selectedDevice }\n          : undefined,\n      };\n\n      /**\n       * Chains two media streams together.\n       *\n       * In our case, filters MediaStreams are derived from their parent MediaStream.\n       * However, once a child filter's track is stopped,\n       * the tracks of the parent MediaStream aren't automatically stopped.\n       * This leads to a situation where the camera indicator light is still on\n       * even though the user stopped publishing video.\n       *\n       * This function works around this issue by stopping the parent MediaStream's tracks\n       * as well once the child filter's tracks are stopped.\n       *\n       * It works by patching the stop() method of the child filter's tracks to also stop\n       * the parent MediaStream's tracks of the same type. Here we assume that\n       * the parent MediaStream has only one track of each type.\n       *\n       * @param parentStream the parent MediaStream. Omit for the root stream.\n       */\n      const chainWith =\n        (parentStream?: Promise<MediaStream>) =>\n        async (filterStream: MediaStream): Promise<MediaStream> => {\n          if (!parentStream) return filterStream;\n          // TODO OL: take care of track.enabled property as well\n          const parent = await parentStream;\n          filterStream.getTracks().forEach((track) => {\n            const originalStop = track.stop;\n            track.stop = function stop() {\n              originalStop.call(track);\n              parent.getTracks().forEach((parentTrack) => {\n                if (parentTrack.kind === track.kind) {\n                  parentTrack.stop();\n                }\n              });\n            };\n          });\n\n          parent.getTracks().forEach((parentTrack) => {\n            // When the parent stream abruptly ends, we propagate the event\n            // to the filter stream.\n            // This usually happens when the camera/microphone permissions\n            // are revoked or when the device is disconnected.\n            const handleParentTrackEnded = () => {\n              filterStream.getTracks().forEach((track) => {\n                if (parentTrack.kind !== track.kind) return;\n                track.stop();\n                track.dispatchEvent(new Event('ended')); // propagate the event\n              });\n            };\n            parentTrack.addEventListener('ended', handleParentTrackEnded);\n            this.subscriptions.push(() => {\n              parentTrack.removeEventListener('ended', handleParentTrackEnded);\n            });\n          });\n\n          return filterStream;\n        };\n\n      // the rootStream represents the stream coming from the actual device\n      // e.g. camera or microphone stream\n      rootStream = this.getStream(constraints as C);\n      // we publish the last MediaStream of the chain\n      stream = await this.filters.reduce(\n        (parent, entry) =>\n          parent\n            .then((inputStream) => {\n              const { stop, output } = entry.start(inputStream);\n              entry.stop = stop;\n              return output;\n            })\n            .then(chainWith(parent), (error) => {\n              this.logger.warn(\n                'Filter failed to start and will be ignored',\n                error,\n              );\n              return parent;\n            }),\n        rootStream,\n      );\n    }\n    if (this.call.state.callingState === CallingState.JOINED) {\n      await this.publishStream(stream);\n    }\n    if (this.state.mediaStream !== stream) {\n      this.state.setMediaStream(stream, await rootStream);\n      const handleTrackEnded = async () => {\n        await this.statusChangeSettled();\n        if (this.enabled) {\n          this.isTrackStoppedDueToTrackEnd = true;\n          setTimeout(() => {\n            this.isTrackStoppedDueToTrackEnd = false;\n          }, 2000);\n          await this.disable();\n        }\n      };\n      const createTrackMuteHandler = (muted: boolean) => () => {\n        if (!isMobile() || this.trackType !== TrackType.VIDEO) return;\n        this.call.notifyTrackMuteState(muted, this.trackType).catch((err) => {\n          this.logger.warn('Error while notifying track mute state', err);\n        });\n      };\n      stream.getTracks().forEach((track) => {\n        const muteHandler = createTrackMuteHandler(true);\n        const unmuteHandler = createTrackMuteHandler(false);\n        track.addEventListener('mute', muteHandler);\n        track.addEventListener('unmute', unmuteHandler);\n        track.addEventListener('ended', handleTrackEnded);\n        this.subscriptions.push(() => {\n          track.removeEventListener('mute', muteHandler);\n          track.removeEventListener('unmute', unmuteHandler);\n          track.removeEventListener('ended', handleTrackEnded);\n        });\n      });\n    }\n  }\n\n  private get mediaDeviceKind() {\n    if (this.trackType === TrackType.AUDIO) {\n      return 'audioinput';\n    }\n    if (this.trackType === TrackType.VIDEO) {\n      return 'videoinput';\n    }\n    return '';\n  }\n\n  private handleDisconnectedOrReplacedDevices() {\n    this.subscriptions.push(\n      createSubscription(\n        combineLatest([\n          deviceIds$!.pipe(pairwise()),\n          this.state.selectedDevice$,\n        ]),\n        async ([[prevDevices, currentDevices], deviceId]) => {\n          try {\n            if (!deviceId) return;\n            await this.statusChangeSettled();\n\n            let isDeviceDisconnected = false;\n            let isDeviceReplaced = false;\n            const currentDevice = this.findDevice(currentDevices, deviceId);\n            const prevDevice = this.findDevice(prevDevices, deviceId);\n            if (!currentDevice && prevDevice) {\n              isDeviceDisconnected = true;\n            } else if (\n              currentDevice &&\n              prevDevice &&\n              currentDevice.deviceId === prevDevice.deviceId &&\n              currentDevice.groupId !== prevDevice.groupId\n            ) {\n              isDeviceReplaced = true;\n            }\n\n            if (isDeviceDisconnected) {\n              await this.disable();\n              await this.select(undefined);\n            }\n            if (isDeviceReplaced) {\n              if (\n                this.isTrackStoppedDueToTrackEnd &&\n                this.state.status === 'disabled'\n              ) {\n                await this.enable();\n                this.isTrackStoppedDueToTrackEnd = false;\n              } else {\n                await this.applySettingsToStream();\n              }\n            }\n          } catch (err) {\n            this.logger.warn(\n              'Unexpected error while handling disconnected or replaced device',\n              err,\n            );\n          }\n        },\n      ),\n    );\n  }\n\n  private findDevice(devices: MediaDeviceInfo[], deviceId: string) {\n    const kind = this.mediaDeviceKind;\n    return devices.find((d) => d.deviceId === deviceId && d.kind === kind);\n  }\n}\n","import {\n  BehaviorSubject,\n  distinctUntilChanged,\n  Observable,\n  of,\n  shareReplay,\n} from 'rxjs';\nimport { RxUtils } from '../store';\nimport { BrowserPermission, BrowserPermissionState } from './BrowserPermission';\n\nexport type InputDeviceStatus = 'enabled' | 'disabled' | undefined;\nexport type TrackDisableMode = 'stop-tracks' | 'disable-tracks';\n\nexport abstract class DeviceManagerState<C = MediaTrackConstraints> {\n  protected statusSubject = new BehaviorSubject<InputDeviceStatus>(undefined);\n  protected optimisticStatusSubject = new BehaviorSubject<InputDeviceStatus>(\n    undefined,\n  );\n  protected mediaStreamSubject = new BehaviorSubject<MediaStream | undefined>(\n    undefined,\n  );\n  protected selectedDeviceSubject = new BehaviorSubject<string | undefined>(\n    undefined,\n  );\n  protected defaultConstraintsSubject = new BehaviorSubject<C | undefined>(\n    undefined,\n  );\n\n  /**\n   * @internal\n   */\n  prevStatus: InputDeviceStatus;\n\n  /**\n   * An Observable that emits the current media stream, or `undefined` if the device is currently disabled.\n   *\n   */\n  mediaStream$ = this.mediaStreamSubject.asObservable();\n\n  /**\n   * An Observable that emits the currently selected device\n   */\n  selectedDevice$ = this.selectedDeviceSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the device status\n   */\n  status$ = this.statusSubject.asObservable().pipe(distinctUntilChanged());\n\n  /**\n   * An Observable the reflects the requested device status. Useful for optimistic UIs\n   */\n  optimisticStatus$ = this.optimisticStatusSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * The default constraints for the device.\n   */\n  defaultConstraints$ = this.defaultConstraintsSubject.asObservable();\n\n  /**\n   * An observable that will emit `true` if browser/system permission\n   * is granted (or at least hasn't been denied), `false` otherwise.\n   */\n  hasBrowserPermission$: Observable<boolean>;\n\n  /**\n   * An observable that emits with browser permission state changes.\n   * Gives more granular visiblity than hasBrowserPermission$.\n   */\n  browserPermissionState$: Observable<BrowserPermissionState>;\n\n  /**\n   * An observable that emits `true` when SDK is prompting for browser permission\n   * (i.e. browser's UI for allowing or disallowing device access is visible)\n   */\n  isPromptingPermission$: Observable<boolean>;\n\n  readonly disableMode: TrackDisableMode;\n\n  /**\n   * Constructs a new InputMediaDeviceManagerState instance.\n   *\n   * @param disableMode the disable mode to use.\n   * @param permission the BrowserPermission to use for querying.\n   * `undefined` means no permission is required.\n   */\n  constructor(\n    disableMode: TrackDisableMode,\n    permission: BrowserPermission | undefined,\n  ) {\n    this.disableMode = disableMode;\n    this.hasBrowserPermission$ = permission\n      ? permission.asObservable().pipe(shareReplay(1))\n      : of(true);\n\n    this.browserPermissionState$ = permission\n      ? permission.asStateObservable().pipe(shareReplay(1))\n      : of('prompt');\n\n    this.isPromptingPermission$ = permission\n      ? permission.getIsPromptingObservable().pipe(shareReplay(1))\n      : of(false);\n  }\n\n  /**\n   * The device status\n   */\n  get status() {\n    return RxUtils.getCurrentValue(this.status$);\n  }\n\n  /**\n   * The requested device status. Useful for optimistic UIs\n   */\n  get optimisticStatus() {\n    return RxUtils.getCurrentValue(this.optimisticStatus$);\n  }\n\n  /**\n   * The currently selected device\n   */\n  get selectedDevice() {\n    return RxUtils.getCurrentValue(this.selectedDevice$);\n  }\n\n  /**\n   * The current media stream, or `undefined` if the device is currently disabled.\n   */\n  get mediaStream() {\n    return RxUtils.getCurrentValue(this.mediaStream$);\n  }\n\n  /**\n   * @internal\n   * @param status\n   */\n  setStatus(status: InputDeviceStatus) {\n    RxUtils.setCurrentValue(this.statusSubject, status);\n  }\n\n  /**\n   * @internal\n   * @param pendingStatus\n   */\n  setPendingStatus(pendingStatus: InputDeviceStatus) {\n    RxUtils.setCurrentValue(this.optimisticStatusSubject, pendingStatus);\n  }\n\n  /**\n   * Updates the `mediaStream` state variable.\n   *\n   * @internal\n   * @param stream the stream to set.\n   * @param rootStream the root stream, applicable when filters are used\n   * as this is the stream that holds the actual deviceId information.\n   */\n  setMediaStream(\n    stream: MediaStream | undefined,\n    rootStream: MediaStream | undefined,\n  ) {\n    RxUtils.setCurrentValue(this.mediaStreamSubject, stream);\n    if (rootStream) {\n      this.setDevice(this.getDeviceIdFromStream(rootStream));\n    }\n  }\n\n  /**\n   * @internal\n   * @param deviceId the device id to set.\n   */\n  setDevice(deviceId: string | undefined) {\n    RxUtils.setCurrentValue(this.selectedDeviceSubject, deviceId);\n  }\n\n  /**\n   * Gets the default constraints for the device.\n   */\n  get defaultConstraints() {\n    return RxUtils.getCurrentValue(this.defaultConstraints$);\n  }\n\n  /**\n   * Sets the default constraints for the device.\n   *\n   * @internal\n   * @param constraints the constraints to set.\n   */\n  setDefaultConstraints(constraints: C | undefined) {\n    RxUtils.setCurrentValue(this.defaultConstraintsSubject, constraints);\n  }\n\n  protected abstract getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined;\n}\n","import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { DeviceManagerState } from './DeviceManagerState';\nimport { isReactNative } from '../helpers/platforms';\nimport { getVideoBrowserPermission } from './devices';\nimport { RxUtils } from '../store';\n\nexport type CameraDirection = 'front' | 'back' | undefined;\n\nexport class CameraManagerState extends DeviceManagerState {\n  private directionSubject = new BehaviorSubject<CameraDirection>(undefined);\n\n  /**\n   * Observable that emits the preferred camera direction\n   * front - means the camera facing the user\n   * back - means the camera facing the environment\n   */\n  direction$ = this.directionSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  constructor() {\n    super('stop-tracks', getVideoBrowserPermission());\n  }\n\n  /**\n   * The preferred camera direction\n   * front - means the camera facing the user\n   * back - means the camera facing the environment\n   */\n  get direction() {\n    return RxUtils.getCurrentValue(this.direction$);\n  }\n\n  /**\n   * @internal\n   */\n  setDirection(direction: CameraDirection) {\n    RxUtils.setCurrentValue(this.directionSubject, direction);\n  }\n\n  /**\n   * @internal\n   */\n  override setMediaStream(\n    stream: MediaStream | undefined,\n    rootStream: MediaStream | undefined,\n  ): void {\n    super.setMediaStream(stream, rootStream);\n    if (stream) {\n      // RN getSettings() doesn't return facingMode, so we don't verify camera direction\n      const direction = isReactNative()\n        ? this.direction\n        : stream.getVideoTracks()[0]?.getSettings().facingMode === 'environment'\n          ? 'back'\n          : 'front';\n      this.setDirection(direction);\n    }\n  }\n\n  protected override getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined {\n    const [track] = stream.getVideoTracks();\n    return track?.getSettings().deviceId;\n  }\n}\n","import { Observable } from 'rxjs';\nimport { Call } from '../Call';\nimport { CameraDirection, CameraManagerState } from './CameraManagerState';\nimport { DeviceManager } from './DeviceManager';\nimport { getVideoDevices, getVideoStream } from './devices';\nimport { OwnCapability, VideoSettingsResponse } from '../gen/coordinator';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { isMobile } from '../helpers/compatibility';\nimport { isReactNative } from '../helpers/platforms';\n\nexport class CameraManager extends DeviceManager<CameraManagerState> {\n  private targetResolution = {\n    width: 1280,\n    height: 720,\n  };\n\n  /**\n   * Constructs a new CameraManager.\n   *\n   * @param call the call instance.\n   */\n  constructor(call: Call) {\n    super(call, new CameraManagerState(), TrackType.VIDEO);\n  }\n\n  private isDirectionSupportedByDevice() {\n    return isReactNative() || isMobile();\n  }\n\n  /**\n   * Select the camera direction.\n   *\n   * @param direction the direction of the camera to select.\n   */\n  async selectDirection(direction: Exclude<CameraDirection, undefined>) {\n    if (!this.isDirectionSupportedByDevice()) {\n      this.logger.warn('Setting direction is not supported on this device');\n      return;\n    }\n\n    if (isReactNative()) {\n      const videoTrack = this.getTracks()[0] as MediaStreamTrack | undefined;\n      await videoTrack?.applyConstraints({\n        facingMode: direction === 'front' ? 'user' : 'environment',\n      });\n    }\n    // providing both device id and direction doesn't work, so we deselect the device\n    this.state.setDirection(direction);\n    this.state.setDevice(undefined);\n    if (isReactNative()) {\n      return;\n    }\n    this.getTracks().forEach((track) => track.stop());\n    try {\n      await this.unmuteStream();\n    } catch (error) {\n      if (error instanceof Error && error.name === 'NotReadableError') {\n        // the camera is already in use, and the device can't use it unless it's released.\n        // in that case, we need to stop the stream and start it again.\n        await this.muteStream();\n        await this.unmuteStream();\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Flips the camera direction: if it's front it will change to back, if it's back, it will change to front.\n   *\n   * Note: if there is no available camera with the desired direction, this method will do nothing.\n   * @returns\n   */\n  async flip() {\n    const newDirection = this.state.direction === 'front' ? 'back' : 'front';\n    await this.selectDirection(newDirection);\n  }\n\n  /**\n   * @internal\n   */\n  async selectTargetResolution(resolution: { width: number; height: number }) {\n    this.targetResolution.height = resolution.height;\n    this.targetResolution.width = resolution.width;\n    if (this.state.optimisticStatus === 'enabled') {\n      try {\n        await this.statusChangeSettled();\n      } catch (error) {\n        // couldn't enable device, target resolution will be applied the next time user attempts to start the device\n        this.logger.warn('could not apply target resolution', error);\n      }\n    }\n    if (this.enabled && this.state.mediaStream) {\n      const [videoTrack] = this.state.mediaStream.getVideoTracks();\n      if (!videoTrack) return;\n      const { width, height } = videoTrack.getSettings();\n      if (\n        width !== this.targetResolution.width ||\n        height !== this.targetResolution.height\n      ) {\n        await this.applySettingsToStream();\n        this.logger.debug(\n          `${width}x${height} target resolution applied to media stream`,\n        );\n      }\n    }\n  }\n\n  /**\n   * Applies the video settings to the camera.\n   *\n   * @param settings the video settings to apply.\n   * @param publish whether to publish the stream after applying the settings.\n   */\n  async apply(settings: VideoSettingsResponse, publish: boolean) {\n    const hasPublishedVideo = !!this.call.state.localParticipant?.videoStream;\n    const hasPermission = this.call.permissionsContext.hasPermission(\n      OwnCapability.SEND_AUDIO,\n    );\n    if (hasPublishedVideo || !hasPermission) return;\n\n    // Wait for any in progress camera operation\n    await this.statusChangeSettled();\n\n    const { target_resolution, camera_facing, camera_default_on, enabled } =\n      settings;\n    // normalize target resolution to landscape format.\n    // on mobile devices, the device itself adjusts the resolution to portrait or landscape\n    // depending on the orientation of the device. using portrait resolution\n    // will result in falling back to the default resolution (640x480).\n    let { width, height } = target_resolution;\n    if (width < height) [width, height] = [height, width];\n    await this.selectTargetResolution({ width, height });\n\n    // Set camera direction if it's not yet set\n    if (!this.state.direction && !this.state.selectedDevice) {\n      this.state.setDirection(camera_facing === 'front' ? 'front' : 'back');\n    }\n\n    if (!publish) return;\n\n    const { mediaStream } = this.state;\n    if (this.enabled && mediaStream) {\n      // The camera is already enabled (e.g. lobby screen). Publish the stream\n      await this.publishStream(mediaStream);\n    } else if (\n      this.state.status === undefined &&\n      camera_default_on &&\n      enabled\n    ) {\n      // Start camera if backend config specifies, and there is no local setting\n      await this.enable();\n    }\n  }\n\n  protected override getDevices(): Observable<MediaDeviceInfo[]> {\n    return getVideoDevices(this.call.tracer);\n  }\n\n  protected override getStream(\n    constraints: MediaTrackConstraints,\n  ): Promise<MediaStream> {\n    constraints.width = this.targetResolution.width;\n    constraints.height = this.targetResolution.height;\n    // We can't set both device id and facing mode\n    // Device id has higher priority\n\n    if (\n      !constraints.deviceId &&\n      this.state.direction &&\n      this.isDirectionSupportedByDevice()\n    ) {\n      constraints.facingMode =\n        this.state.direction === 'front' ? 'user' : 'environment';\n    }\n    return getVideoStream(constraints, this.call.tracer);\n  }\n}\n","import { DeviceManager } from './DeviceManager';\nimport { AudioDeviceManagerState } from './AudioDeviceManagerState';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\nimport { TrackPublishOptions } from '../rtc';\n\n/**\n * Base class for High Fidelity enabled Device Managers.\n */\nexport abstract class AudioDeviceManager<\n  S extends AudioDeviceManagerState<C>,\n  C = MediaTrackConstraints,\n> extends DeviceManager<S, C> {\n  /**\n   * Sets the audio bitrate profile and stereo mode.\n   */\n  async setAudioBitrateProfile(profile: AudioBitrateProfile) {\n    if (!this.call.state.settings?.audio.hifi_audio_enabled) {\n      throw new Error('High Fidelity audio is not enabled for this call');\n    }\n    this.doSetAudioBitrateProfile(profile);\n    this.state.setAudioBitrateProfile(profile);\n    if (this.enabled) {\n      await this.applySettingsToStream();\n    }\n  }\n\n  /**\n   * Overrides the default `publishStream` method to inject the audio bitrate profile.\n   */\n  protected override publishStream(\n    stream: MediaStream,\n    options?: TrackPublishOptions,\n  ): Promise<void> {\n    return super.publishStream(stream, {\n      audioBitrateProfile: this.state.audioBitrateProfile,\n      ...options,\n    });\n  }\n\n  /**\n   * Applies Device Manager's specific audio profile settings.\n   */\n  protected abstract doSetAudioBitrateProfile(\n    profile: AudioBitrateProfile,\n  ): void;\n}\n\n/**\n * Prepares a new MediaTrackConstraints set based on the provided arguments.\n */\nexport const createAudioConstraints = (\n  profile: AudioBitrateProfile,\n): MediaTrackConstraints => {\n  const stereo = profile === AudioBitrateProfile.MUSIC_HIGH_QUALITY;\n  return {\n    echoCancellation: !stereo,\n    noiseSuppression: !stereo,\n    autoGainControl: !stereo,\n    channelCount: { ideal: stereo ? 2 : 1 },\n  };\n};\n","import { BehaviorSubject, distinctUntilChanged, Observable } from 'rxjs';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\nimport { DeviceManagerState, TrackDisableMode } from './DeviceManagerState';\nimport { RxUtils } from './../store';\nimport { BrowserPermission } from './BrowserPermission';\n\n/**\n * Base state class for High Fidelity enabled device managers.\n */\nexport abstract class AudioDeviceManagerState<C> extends DeviceManagerState<C> {\n  private readonly audioBitrateProfileSubject: BehaviorSubject<AudioBitrateProfile>;\n\n  /** An Observable that emits the current audio bitrate profile. */\n  audioBitrateProfile$: Observable<AudioBitrateProfile>;\n\n  /**\n   * Constructs a new AudioDeviceManagerState instance.\n   */\n  protected constructor(\n    disableMode: TrackDisableMode,\n    permission: BrowserPermission | undefined,\n    profile: AudioBitrateProfile,\n  ) {\n    super(disableMode, permission);\n    this.audioBitrateProfileSubject = new BehaviorSubject(profile);\n    this.audioBitrateProfile$ = this.audioBitrateProfileSubject\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  /**\n   * Returns the current audio bitrate profile.\n   */\n  get audioBitrateProfile() {\n    return RxUtils.getCurrentValue(this.audioBitrateProfile$);\n  }\n\n  /**\n   * Sets the audio bitrate profile and stereo mode.\n   */\n  setAudioBitrateProfile(profile: AudioBitrateProfile) {\n    RxUtils.setCurrentValue(this.audioBitrateProfileSubject, profile);\n  }\n}\n","import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { RxUtils } from '../store';\nimport { TrackDisableMode } from './DeviceManagerState';\nimport { AudioDeviceManagerState } from './AudioDeviceManagerState';\nimport { getAudioBrowserPermission, resolveDeviceId } from './devices';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\n\nexport class MicrophoneManagerState extends AudioDeviceManagerState<MediaTrackConstraints> {\n  private speakingWhileMutedSubject = new BehaviorSubject<boolean>(false);\n\n  /**\n   * An Observable that emits `true` if the user's microphone is muted, but they're speaking.\n   */\n  speakingWhileMuted$ = this.speakingWhileMutedSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  constructor(disableMode: TrackDisableMode) {\n    super(\n      disableMode,\n      getAudioBrowserPermission(),\n      AudioBitrateProfile.VOICE_STANDARD_UNSPECIFIED,\n    );\n  }\n\n  /**\n   * `true` if the user's microphone is muted but they're speaking.\n   */\n  get speakingWhileMuted() {\n    return RxUtils.getCurrentValue(this.speakingWhileMuted$);\n  }\n\n  /**\n   * @internal\n   */\n  setSpeakingWhileMuted(isSpeaking: boolean) {\n    RxUtils.setCurrentValue(this.speakingWhileMutedSubject, isSpeaking);\n  }\n\n  protected override getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined {\n    const [track] = stream.getAudioTracks();\n    const unresolvedDeviceId = track?.getSettings().deviceId;\n    return resolveDeviceId(unresolvedDeviceId, 'audioinput');\n  }\n}\n","export type SoundDetectorOptions = {\n  /**\n   * Defines how often the detector should check whether a sound is present.\n   * Defaults to 500ms.\n   */\n  detectionFrequencyInMs?: number;\n\n  /**\n   * Defines the audio level threshold before a \"change\" is emitted.\n   * Defaults to 150. This value should be in the range of 0-255.\n   */\n  audioLevelThreshold?: number;\n\n  /**\n   * See https://developer.mozilla.org/en-US/docs/web/api/analysernode/fftsize\n   *\n   * Defaults to 128.\n   */\n  fftSize?: number;\n\n  /**\n   * Defines whether the provided audio stream should be stopped (destroyed)\n   * when the sound detector is stopped.\n   *\n   * Defaults to `true`.\n   */\n  destroyStreamOnStop?: boolean;\n};\n\nexport type SoundDetectorState = {\n  isSoundDetected: boolean;\n  /**\n   * Represented as percentage (0-100) where 100% is defined by `audioLevelThreshold` property.\n   * Decrease time between samples (to 50-100ms) with `detectionFrequencyInMs` property.\n   */\n  audioLevel: number;\n};\n\nexport type SoundStateChangeHandler = (state: SoundDetectorState) => void;\n\nconst DETECTION_FREQUENCY_IN_MS = 500;\nconst AUDIO_LEVEL_THRESHOLD = 150;\nconst FFT_SIZE = 128;\n\n/**\n * Creates a new sound detector.\n *\n * @param audioStream the audio stream to observe. Depending on the provided configuration, this stream might be destroyed when the sound detector is stopped.\n * @param onSoundDetectedStateChanged a callback which is called when the sound state changes.\n * @param options custom options for the sound detector.\n * @returns a clean-up function which once invoked stops the sound detector.\n */\nexport const createSoundDetector = (\n  audioStream: MediaStream,\n  onSoundDetectedStateChanged: SoundStateChangeHandler,\n  options: SoundDetectorOptions = {},\n) => {\n  const {\n    detectionFrequencyInMs = DETECTION_FREQUENCY_IN_MS,\n    audioLevelThreshold = AUDIO_LEVEL_THRESHOLD,\n    fftSize = FFT_SIZE,\n    destroyStreamOnStop = true,\n  } = options;\n\n  const audioContext = new AudioContext();\n  const analyser = audioContext.createAnalyser();\n  analyser.fftSize = fftSize;\n\n  const microphone = audioContext.createMediaStreamSource(audioStream);\n  microphone.connect(analyser);\n\n  const intervalId = setInterval(() => {\n    const data = new Uint8Array(analyser.frequencyBinCount);\n    analyser.getByteFrequencyData(data);\n\n    const isSoundDetected = data.some((value) => value >= audioLevelThreshold);\n\n    const averagedDataValue = data.reduce((pv, cv) => pv + cv, 0) / data.length;\n\n    const percentage =\n      averagedDataValue > audioLevelThreshold\n        ? 100\n        : Math.round((averagedDataValue / audioLevelThreshold) * 100);\n\n    // When the track is disabled, it takes time for the buffer to empty\n    // This check will ensure that we don't send anything if the track is disabled\n    if (audioStream.getAudioTracks()[0]?.enabled) {\n      onSoundDetectedStateChanged({ isSoundDetected, audioLevel: percentage });\n    } else {\n      onSoundDetectedStateChanged({ isSoundDetected: false, audioLevel: 0 });\n    }\n  }, detectionFrequencyInMs);\n\n  return async function stop() {\n    clearInterval(intervalId);\n\n    // clean-up the AudioContext elements\n    microphone.disconnect();\n    analyser.disconnect();\n    if (audioContext.state !== 'closed') {\n      await audioContext.close();\n    }\n\n    // stop the stream\n    if (destroyStreamOnStop) {\n      audioStream.getTracks().forEach((track) => {\n        track.stop();\n        audioStream.removeTrack(track);\n      });\n    }\n  };\n};\n","import { BaseStats } from '../stats';\nimport { SoundStateChangeHandler } from './sound-detector';\nimport { flatten } from '../stats/utils';\nimport { videoLoggerSystem } from '../logger';\n\nexport class RNSpeechDetector {\n  private pc1 = new RTCPeerConnection({});\n  private pc2 = new RTCPeerConnection({});\n  private audioStream: MediaStream | undefined;\n  private externalAudioStream: MediaStream | undefined;\n\n  constructor(externalAudioStream?: MediaStream) {\n    this.externalAudioStream = externalAudioStream;\n  }\n\n  /**\n   * Starts the speech detection.\n   */\n  public async start(onSoundDetectedStateChanged: SoundStateChangeHandler) {\n    try {\n      let audioStream: MediaStream;\n      if (this.externalAudioStream != null) {\n        audioStream = this.externalAudioStream;\n      } else {\n        audioStream = await navigator.mediaDevices.getUserMedia({\n          audio: true,\n        });\n        this.audioStream = audioStream;\n      }\n\n      this.pc1.addEventListener('icecandidate', async (e) => {\n        await this.pc2.addIceCandidate(\n          e.candidate as RTCIceCandidateInit | undefined,\n        );\n      });\n      this.pc2.addEventListener('icecandidate', async (e) => {\n        await this.pc1.addIceCandidate(\n          e.candidate as RTCIceCandidateInit | undefined,\n        );\n      });\n      this.pc2.addEventListener('track', (e) => {\n        e.streams[0].getTracks().forEach((track) => {\n          // In RN, the remote track is automatically added to the audio output device\n          // so we need to mute it to avoid hearing the audio back\n          // @ts-expect-error _setVolume is a private method in react-native-webrtc\n          track._setVolume(0);\n        });\n      });\n\n      audioStream\n        .getTracks()\n        .forEach((track) => this.pc1.addTrack(track, audioStream));\n      const offer = await this.pc1.createOffer({});\n      await this.pc2.setRemoteDescription(offer);\n      await this.pc1.setLocalDescription(offer);\n      const answer = await this.pc2.createAnswer();\n      await this.pc1.setRemoteDescription(answer);\n      await this.pc2.setLocalDescription(answer);\n      const unsub = this.onSpeakingDetectedStateChange(\n        onSoundDetectedStateChanged,\n      );\n      return () => {\n        unsub();\n        this.stop();\n      };\n    } catch (error) {\n      const logger = videoLoggerSystem.getLogger('RNSpeechDetector');\n      logger.error('error handling permissions: ', error);\n      return () => {};\n    }\n  }\n\n  /**\n   * Stops the speech detection and releases all allocated resources.\n   */\n  private stop() {\n    this.pc1.close();\n    this.pc2.close();\n\n    if (this.externalAudioStream != null) {\n      this.externalAudioStream = undefined;\n    } else {\n      this.cleanupAudioStream();\n    }\n  }\n\n  /**\n   * Public method that detects the audio levels and returns the status.\n   */\n  private onSpeakingDetectedStateChange(\n    onSoundDetectedStateChanged: SoundStateChangeHandler,\n  ) {\n    const initialBaselineNoiseLevel = 0.13;\n    let baselineNoiseLevel = initialBaselineNoiseLevel;\n    let speechDetected = false;\n    let speechTimer: NodeJS.Timeout | undefined;\n    let silenceTimer: NodeJS.Timeout | undefined;\n    const audioLevelHistory: number[] = []; // Store recent audio levels for smoother detection\n    const historyLength = 10;\n    const silenceThreshold = 1.1;\n    const resetThreshold = 0.9;\n    const speechTimeout = 500; // Speech is set to true after 500ms of audio detection\n    const silenceTimeout = 5000; // Reset baseline after 5 seconds of silence\n\n    const checkAudioLevel = async () => {\n      try {\n        const stats = (await this.pc1.getStats()) as RTCStatsReport;\n        const report = flatten(stats);\n        // Audio levels are present inside stats of type `media-source` and of kind `audio`\n        const audioMediaSourceStats = report.find(\n          (stat) =>\n            stat.type === 'media-source' &&\n            (stat as RTCRtpStreamStats).kind === 'audio',\n        ) as BaseStats;\n        if (audioMediaSourceStats) {\n          const { audioLevel } = audioMediaSourceStats;\n          if (audioLevel) {\n            // Update audio level history (with max historyLength sized array)\n            audioLevelHistory.push(audioLevel);\n            if (audioLevelHistory.length > historyLength) {\n              audioLevelHistory.shift();\n            }\n\n            // Calculate average audio level\n            const avgAudioLevel =\n              audioLevelHistory.reduce((a, b) => a + b, 0) /\n              audioLevelHistory.length;\n\n            // Update baseline (if necessary) based on silence detection\n            if (avgAudioLevel < baselineNoiseLevel * silenceThreshold) {\n              if (!silenceTimer) {\n                silenceTimer = setTimeout(() => {\n                  baselineNoiseLevel = Math.min(\n                    avgAudioLevel * resetThreshold,\n                    initialBaselineNoiseLevel,\n                  );\n                }, silenceTimeout);\n              }\n            } else {\n              clearTimeout(silenceTimer);\n              silenceTimer = undefined;\n            }\n\n            // Speech detection with hysteresis\n            if (avgAudioLevel > baselineNoiseLevel * 1.5) {\n              if (!speechDetected) {\n                speechDetected = true;\n                onSoundDetectedStateChanged({\n                  isSoundDetected: true,\n                  audioLevel,\n                });\n              }\n\n              clearTimeout(speechTimer);\n\n              speechTimer = setTimeout(() => {\n                speechDetected = false;\n                onSoundDetectedStateChanged({\n                  isSoundDetected: false,\n                  audioLevel: 0,\n                });\n              }, speechTimeout);\n            }\n          }\n        }\n      } catch (error) {\n        const logger = videoLoggerSystem.getLogger('RNSpeechDetector');\n        logger.error('error checking audio level from stats', error);\n      }\n    };\n\n    // Call checkAudioLevel periodically (every 100ms)\n    const intervalId = setInterval(checkAudioLevel, 100);\n\n    return () => {\n      clearInterval(intervalId);\n      clearTimeout(speechTimer);\n      clearTimeout(silenceTimer);\n    };\n  }\n\n  private cleanupAudioStream() {\n    if (!this.audioStream) {\n      return;\n    }\n    this.audioStream.getTracks().forEach((track) => track.stop());\n    if (\n      // @ts-expect-error release() is present in react-native-webrtc\n      typeof this.audioStream.release === 'function'\n    ) {\n      // @ts-expect-error called to dispose the stream in RN\n      this.audioStream.release();\n    }\n  }\n}\n","import { combineLatest, Observable } from 'rxjs';\nimport type { INoiseCancellation } from '@stream-io/audio-filters-web';\nimport { Call } from '../Call';\nimport {\n  AudioDeviceManager,\n  createAudioConstraints,\n} from './AudioDeviceManager';\nimport { MicrophoneManagerState } from './MicrophoneManagerState';\nimport { TrackDisableMode } from './DeviceManagerState';\nimport { getAudioDevices, getAudioStream } from './devices';\nimport { AudioBitrateProfile, TrackType } from '../gen/video/sfu/models/models';\nimport { createSoundDetector } from '../helpers/sound-detector';\nimport { isReactNative } from '../helpers/platforms';\nimport {\n  AudioSettingsResponse,\n  NoiseCancellationSettingsModeEnum,\n  OwnCapability,\n} from '../gen/coordinator';\nimport { CallingState } from '../store';\nimport {\n  createSafeAsyncSubscription,\n  createSubscription,\n} from '../store/rxUtils';\nimport { RNSpeechDetector } from '../helpers/RNSpeechDetector';\nimport { withoutConcurrency } from '../helpers/concurrency';\n\nexport class MicrophoneManager extends AudioDeviceManager<MicrophoneManagerState> {\n  private speakingWhileMutedNotificationEnabled = true;\n  private soundDetectorConcurrencyTag = Symbol('soundDetectorConcurrencyTag');\n  private soundDetectorCleanup?: Function;\n  private rnSpeechDetector: RNSpeechDetector | undefined;\n  private noiseCancellation: INoiseCancellation | undefined;\n  private noiseCancellationChangeUnsubscribe: (() => void) | undefined;\n  private noiseCancellationRegistration?: Promise<void>;\n  private unregisterNoiseCancellation?: () => Promise<void>;\n\n  constructor(call: Call, disableMode: TrackDisableMode = 'stop-tracks') {\n    super(call, new MicrophoneManagerState(disableMode), TrackType.AUDIO);\n  }\n\n  override setup(): void {\n    super.setup();\n    this.subscriptions.push(\n      createSafeAsyncSubscription(\n        combineLatest([\n          this.call.state.callingState$,\n          this.call.state.ownCapabilities$,\n          this.state.selectedDevice$,\n          this.state.status$,\n        ]),\n        async ([callingState, ownCapabilities, deviceId, status]) => {\n          try {\n            if (callingState === CallingState.LEFT) {\n              await this.stopSpeakingWhileMutedDetection();\n            }\n            if (callingState !== CallingState.JOINED) return;\n            if (!this.speakingWhileMutedNotificationEnabled) return;\n\n            if (ownCapabilities.includes(OwnCapability.SEND_AUDIO)) {\n              if (status === 'disabled') {\n                await this.startSpeakingWhileMutedDetection(deviceId);\n              } else {\n                await this.stopSpeakingWhileMutedDetection();\n              }\n            } else {\n              await this.stopSpeakingWhileMutedDetection();\n            }\n          } catch (err) {\n            this.logger.warn('Could not enable speaking while muted', err);\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.push(\n      createSubscription(this.call.state.callingState$, (callingState) => {\n        // do nothing when noise filtering isn't turned on\n        if (!this.noiseCancellationRegistration || !this.noiseCancellation)\n          return;\n\n        const autoOn =\n          this.call.state.settings?.audio.noise_cancellation?.mode ===\n          NoiseCancellationSettingsModeEnum.AUTO_ON;\n\n        if (autoOn && callingState === CallingState.JOINED) {\n          this.noiseCancellationRegistration\n            .then(() => {\n              if (this.noiseCancellation?.canAutoEnable) {\n                return this.noiseCancellation.canAutoEnable();\n              }\n              return true;\n            })\n            .then((canAutoEnable) => {\n              if (canAutoEnable) {\n                this.noiseCancellation?.enable();\n              }\n            })\n            .catch((err) => {\n              this.logger.warn(`Failed to enable noise cancellation`, err);\n              return this.call.notifyNoiseCancellationStopped();\n            });\n        } else if (callingState === CallingState.LEFT) {\n          this.noiseCancellationRegistration\n            .then(() => this.noiseCancellation?.disable())\n            .catch((err) => {\n              this.logger.warn(`Failed to disable noise cancellation`, err);\n            });\n        }\n      }),\n    );\n  }\n\n  /**\n   * Enables noise cancellation for the microphone.\n   *\n   * @param noiseCancellation - a noise cancellation instance to use.\n   */\n  async enableNoiseCancellation(noiseCancellation: INoiseCancellation) {\n    const { ownCapabilities, settings } = this.call.state;\n    const hasNoiseCancellationCapability = ownCapabilities.includes(\n      OwnCapability.ENABLE_NOISE_CANCELLATION,\n    );\n    if (!hasNoiseCancellationCapability) {\n      throw new Error('Noise cancellation is not available.');\n    }\n    const noiseCancellationSettings = settings?.audio.noise_cancellation;\n    if (\n      !noiseCancellationSettings ||\n      noiseCancellationSettings.mode ===\n        NoiseCancellationSettingsModeEnum.DISABLED\n    ) {\n      throw new Error('Noise cancellation is disabled for this call type.');\n    }\n    try {\n      this.noiseCancellation = noiseCancellation;\n\n      // listen for change events and notify the SFU\n      this.noiseCancellationChangeUnsubscribe = this.noiseCancellation.on(\n        'change',\n        (enabled: boolean) => {\n          this.call.tracer.trace('noiseCancellation.enabled', enabled);\n          if (enabled) {\n            this.call.notifyNoiseCancellationStarting().catch((err) => {\n              this.logger.warn(`notifyNoiseCancellationStart failed`, err);\n            });\n          } else {\n            this.call.notifyNoiseCancellationStopped().catch((err) => {\n              this.logger.warn(`notifyNoiseCancellationStop failed`, err);\n            });\n          }\n        },\n      );\n\n      if (isReactNative()) {\n        // no filter registration in React Native, its done in the native code on app init\n        this.noiseCancellationRegistration = Promise.resolve();\n      } else {\n        const registrationResult = this.registerFilter(\n          noiseCancellation.toFilter(),\n        );\n        this.noiseCancellationRegistration = registrationResult.registered;\n        this.unregisterNoiseCancellation = registrationResult.unregister;\n        await this.noiseCancellationRegistration;\n      }\n\n      // handles an edge case where a noise cancellation is enabled after\n      // the participant as joined the call -> we immediately enable NC\n      if (\n        noiseCancellationSettings.mode ===\n          NoiseCancellationSettingsModeEnum.AUTO_ON &&\n        this.call.state.callingState === CallingState.JOINED\n      ) {\n        let canAutoEnable = true;\n        if (noiseCancellation.canAutoEnable) {\n          canAutoEnable = await noiseCancellation.canAutoEnable();\n        }\n        if (canAutoEnable) {\n          noiseCancellation.enable();\n        }\n      }\n    } catch (e) {\n      this.logger.warn('Failed to enable noise cancellation', e);\n      await this.disableNoiseCancellation().catch((err) => {\n        this.logger.warn('Failed to disable noise cancellation', err);\n      });\n      throw e;\n    }\n  }\n\n  /**\n   * Disables noise cancellation for the microphone.\n   */\n  async disableNoiseCancellation() {\n    await (this.unregisterNoiseCancellation?.() ?? Promise.resolve())\n      .then(() => this.noiseCancellation?.disable())\n      .then(() => this.noiseCancellationChangeUnsubscribe?.())\n      .catch((err) => {\n        this.logger.warn('Failed to unregister noise cancellation', err);\n      });\n\n    this.call.tracer.trace('noiseCancellation.disabled', true);\n    await this.call.notifyNoiseCancellationStopped();\n  }\n\n  /**\n   * Enables speaking while muted notification.\n   */\n  async enableSpeakingWhileMutedNotification() {\n    this.speakingWhileMutedNotificationEnabled = true;\n    if (this.state.status === 'disabled') {\n      await this.startSpeakingWhileMutedDetection(this.state.selectedDevice);\n    }\n  }\n\n  /**\n   * Disables speaking while muted notification.\n   */\n  async disableSpeakingWhileMutedNotification() {\n    this.speakingWhileMutedNotificationEnabled = false;\n    await this.stopSpeakingWhileMutedDetection();\n  }\n\n  /**\n   * Applies the audio settings to the microphone.\n   * @param settings the audio settings to apply.\n   * @param publish whether to publish the stream after applying the settings.\n   */\n  async apply(settings: AudioSettingsResponse, publish: boolean) {\n    if (!publish) return;\n\n    const hasPublishedAudio = !!this.call.state.localParticipant?.audioStream;\n    const hasPermission = this.call.permissionsContext.hasPermission(\n      OwnCapability.SEND_AUDIO,\n    );\n    if (hasPublishedAudio || !hasPermission) return;\n\n    // Wait for any in progress mic operation\n    await this.statusChangeSettled();\n\n    // Publish media stream that was set before we joined\n    const { mediaStream } = this.state;\n    if (this.enabled && mediaStream) {\n      // The mic is already enabled (e.g. lobby screen). Publish the stream\n      await this.publishStream(mediaStream);\n    } else if (this.state.status === undefined && settings.mic_default_on) {\n      // Start mic if backend config specifies, and there is no local setting\n      await this.enable();\n    }\n  }\n\n  protected override getDevices(): Observable<MediaDeviceInfo[]> {\n    return getAudioDevices(this.call.tracer);\n  }\n\n  protected override getStream(\n    constraints: MediaTrackConstraints,\n  ): Promise<MediaStream> {\n    return getAudioStream(constraints, this.call.tracer);\n  }\n\n  protected override doSetAudioBitrateProfile(profile: AudioBitrateProfile) {\n    this.setDefaultConstraints({\n      ...this.state.defaultConstraints,\n      ...createAudioConstraints(profile),\n    });\n\n    if (this.noiseCancellation) {\n      const disableAudioProcessing =\n        profile === AudioBitrateProfile.MUSIC_HIGH_QUALITY;\n      if (disableAudioProcessing) {\n        this.noiseCancellation.disable(); // disable for high quality music mode\n      } else {\n        this.noiseCancellation.enable(); // restore it for other modes if available\n      }\n    }\n  }\n\n  private async startSpeakingWhileMutedDetection(deviceId?: string) {\n    await withoutConcurrency(this.soundDetectorConcurrencyTag, async () => {\n      await this.stopSpeakingWhileMutedDetection();\n      if (isReactNative()) {\n        this.rnSpeechDetector = new RNSpeechDetector();\n        const unsubscribe = await this.rnSpeechDetector.start((event) => {\n          this.state.setSpeakingWhileMuted(event.isSoundDetected);\n        });\n        this.soundDetectorCleanup = () => {\n          unsubscribe();\n          this.rnSpeechDetector = undefined;\n        };\n      } else {\n        // Need to start a new stream that's not connected to publisher\n        const stream = await this.getStream({\n          deviceId: { exact: deviceId },\n        });\n        this.soundDetectorCleanup = createSoundDetector(stream, (event) => {\n          this.state.setSpeakingWhileMuted(event.isSoundDetected);\n        });\n      }\n    });\n  }\n\n  private async stopSpeakingWhileMutedDetection() {\n    await withoutConcurrency(this.soundDetectorConcurrencyTag, async () => {\n      if (!this.soundDetectorCleanup) return;\n      const soundDetectorCleanup = this.soundDetectorCleanup;\n      this.soundDetectorCleanup = undefined;\n      this.state.setSpeakingWhileMuted(false);\n      await soundDetectorCleanup();\n    });\n  }\n}\n","import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { AudioDeviceManagerState } from './AudioDeviceManagerState';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\nimport { ScreenShareSettings } from '../types';\nimport { RxUtils } from '../store';\n\nexport class ScreenShareState extends AudioDeviceManagerState<DisplayMediaStreamOptions> {\n  private audioEnabledSubject = new BehaviorSubject<boolean>(true);\n  private settingsSubject = new BehaviorSubject<\n    ScreenShareSettings | undefined\n  >(undefined);\n\n  /**\n   * An Observable that emits the current screen share audio status.\n   */\n  audioEnabled$ = this.audioEnabledSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the current screen share settings.\n   */\n  settings$ = this.settingsSubject.asObservable();\n\n  /**\n   * Constructs a new ScreenShareState instance.\n   */\n  constructor() {\n    super('stop-tracks', undefined, AudioBitrateProfile.MUSIC_HIGH_QUALITY);\n  }\n\n  /**\n   * @internal\n   */\n  protected override getDeviceIdFromStream = (\n    stream: MediaStream,\n  ): string | undefined => {\n    const [track] = stream.getTracks();\n    return track?.getSettings().deviceId;\n  };\n\n  /**\n   * The current screen share audio status.\n   */\n  get audioEnabled() {\n    return RxUtils.getCurrentValue(this.audioEnabled$);\n  }\n\n  /**\n   * Set the current screen share audio status.\n   */\n  setAudioEnabled(isEnabled: boolean) {\n    RxUtils.setCurrentValue(this.audioEnabledSubject, isEnabled);\n  }\n\n  /**\n   * The current screen share settings.\n   */\n  get settings() {\n    return RxUtils.getCurrentValue(this.settings$);\n  }\n\n  /**\n   * Set the current screen share settings.\n   *\n   * @param settings the screen share settings to set.\n   */\n  setSettings(settings: ScreenShareSettings | undefined) {\n    RxUtils.setCurrentValue(this.settingsSubject, settings);\n  }\n}\n","import { Observable, of } from 'rxjs';\nimport {\n  AudioDeviceManager,\n  createAudioConstraints,\n} from './AudioDeviceManager';\nimport { ScreenShareState } from './ScreenShareState';\nimport { Call } from '../Call';\nimport { AudioBitrateProfile, TrackType } from '../gen/video/sfu/models/models';\nimport { getScreenShareStream } from './devices';\nimport { ScreenShareSettings } from '../types';\nimport { createSubscription } from '../store/rxUtils';\n\nexport class ScreenShareManager extends AudioDeviceManager<\n  ScreenShareState,\n  DisplayMediaStreamOptions\n> {\n  constructor(call: Call) {\n    super(call, new ScreenShareState(), TrackType.SCREEN_SHARE);\n  }\n\n  override setup(): void {\n    super.setup();\n    this.subscriptions.push(\n      createSubscription(this.call.state.settings$, (settings) => {\n        const maybeTargetResolution = settings?.screensharing.target_resolution;\n\n        if (maybeTargetResolution) {\n          this.setDefaultConstraints({\n            ...this.state.defaultConstraints,\n            video: {\n              width: maybeTargetResolution.width,\n              height: maybeTargetResolution.height,\n            },\n          });\n        }\n      }),\n    );\n  }\n\n  /**\n   * Will enable screen share audio options on supported platforms.\n   *\n   * Note: for ongoing screen share, audio won't be enabled until you\n   * re-publish the screen share stream.\n   */\n  enableScreenShareAudio(): void {\n    this.state.setAudioEnabled(true);\n  }\n\n  /**\n   * Will disable screen share audio options on supported platforms.\n   */\n  async disableScreenShareAudio(): Promise<void> {\n    this.state.setAudioEnabled(false);\n    if (this.call.publisher?.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n      await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO);\n    }\n  }\n\n  /**\n   * Returns the current screen share settings.\n   */\n  getSettings(): ScreenShareSettings | undefined {\n    return this.state.settings;\n  }\n\n  /**\n   * Sets the current screen share settings.\n   *\n   * @param settings the settings to set.\n   */\n  setSettings(settings: ScreenShareSettings | undefined): void {\n    this.state.setSettings(settings);\n  }\n\n  protected getDevices(): Observable<MediaDeviceInfo[]> {\n    return of([]); // there are no devices to be listed for Screen Share\n  }\n\n  protected override async getStream(\n    constraints: DisplayMediaStreamOptions,\n  ): Promise<MediaStream> {\n    if (!this.state.audioEnabled) {\n      constraints.audio = false;\n    }\n    const stream = await getScreenShareStream(constraints, this.call.tracer);\n    const [track] = stream.getVideoTracks();\n    const { contentHint } = this.state.settings || {};\n    if (typeof contentHint !== 'undefined' && track && 'contentHint' in track) {\n      this.call.tracer.trace(\n        'navigator.mediaDevices.getDisplayMedia.contentHint',\n        contentHint,\n      );\n      track.contentHint = contentHint;\n    }\n    return stream;\n  }\n\n  protected override doSetAudioBitrateProfile(profile: AudioBitrateProfile) {\n    const { defaultConstraints } = this.state;\n    const baseAudioConstraints =\n      typeof defaultConstraints?.audio !== 'boolean'\n        ? defaultConstraints?.audio\n        : null;\n    this.setDefaultConstraints({\n      ...defaultConstraints,\n      audio: {\n        ...baseAudioConstraints,\n        ...createAudioConstraints(profile),\n      },\n    });\n  }\n\n  protected override async stopPublishStream(): Promise<void> {\n    return this.call.stopPublish(\n      TrackType.SCREEN_SHARE,\n      TrackType.SCREEN_SHARE_AUDIO,\n    );\n  }\n\n  /**\n   * Overrides the default `select` method to throw an error.\n   */\n  override async select(): Promise<void> {\n    throw new Error('Not supported');\n  }\n}\n","import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { RxUtils } from '../store';\nimport { checkIfAudioOutputChangeSupported } from './devices';\nimport { Tracer } from '../stats';\n\nexport class SpeakerState {\n  protected selectedDeviceSubject = new BehaviorSubject<string>('');\n  protected volumeSubject = new BehaviorSubject<number>(1);\n  /**\n   * [Tells if the browser supports audio output change on 'audio' elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId).\n   */\n  readonly isDeviceSelectionSupported = checkIfAudioOutputChangeSupported();\n\n  /**\n   * An Observable that emits the currently selected device\n   *\n   * Note: this feature is not supported in React Native\n   */\n  selectedDevice$ = this.selectedDeviceSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the currently selected volume\n   *\n   * Note: this feature is not supported in React Native\n   */\n  volume$ = this.volumeSubject.asObservable().pipe(distinctUntilChanged());\n\n  constructor(private tracer: Tracer) {}\n\n  /**\n   * The currently selected device\n   *\n   * Note: this feature is not supported in React Native\n   */\n  get selectedDevice() {\n    return RxUtils.getCurrentValue(this.selectedDevice$);\n  }\n\n  /**\n   * The currently selected volume\n   *\n   * Note: this feature is not supported in React Native\n   */\n  get volume() {\n    return RxUtils.getCurrentValue(this.volume$);\n  }\n\n  /**\n   * @internal\n   * @param deviceId\n   */\n  setDevice(deviceId: string) {\n    RxUtils.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    this.tracer.trace('navigator.mediaDevices.setSinkId', deviceId);\n  }\n\n  /**\n   * @internal\n   * @param volume\n   */\n  setVolume(volume: number) {\n    RxUtils.setCurrentValue(this.volumeSubject, volume);\n  }\n}\n","import { combineLatest, Subscription } from 'rxjs';\nimport { Call } from '../Call';\nimport { isReactNative } from '../helpers/platforms';\nimport { SpeakerState } from './SpeakerState';\nimport { deviceIds$, getAudioOutputDevices } from './devices';\n\nexport class SpeakerManager {\n  readonly state: SpeakerState;\n  private subscriptions: Subscription[] = [];\n  private areSubscriptionsSetUp = false;\n  private readonly call: Call;\n\n  constructor(call: Call) {\n    this.call = call;\n    this.state = new SpeakerState(call.tracer);\n    this.setup();\n  }\n\n  setup() {\n    if (this.areSubscriptionsSetUp) {\n      return;\n    }\n\n    this.areSubscriptionsSetUp = true;\n\n    if (deviceIds$ && !isReactNative()) {\n      this.subscriptions.push(\n        combineLatest([deviceIds$!, this.state.selectedDevice$]).subscribe(\n          ([devices, deviceId]) => {\n            if (!deviceId) {\n              return;\n            }\n            const device = devices.find(\n              (d) => d.deviceId === deviceId && d.kind === 'audiooutput',\n            );\n            if (!device) {\n              this.select('');\n            }\n          },\n        ),\n      );\n    }\n  }\n\n  /**\n   * Lists the available audio output devices\n   *\n   * Note: It prompts the user for a permission to use devices (if not already granted)\n   * Note: This method is not supported in React Native\n   *\n   * @returns an Observable that will be updated if a device is connected or disconnected\n   */\n  listDevices() {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    return getAudioOutputDevices(this.call.tracer);\n  }\n\n  /**\n   * Select a device.\n   *\n   * Note: This method is not supported in React Native\n   *\n   * @param deviceId empty string means the system default\n   */\n  select(deviceId: string) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    this.state.setDevice(deviceId);\n  }\n\n  /**\n   * Disposes the manager.\n   *\n   * @internal\n   */\n  dispose = () => {\n    this.subscriptions.forEach((s) => s.unsubscribe());\n    this.subscriptions = [];\n    this.areSubscriptionsSetUp = false;\n  };\n\n  /**\n   * Set the volume of the audio elements\n   * @param volume a number between 0 and 1.\n   *\n   * Note: This method is not supported in React Native\n   */\n  setVolume(volume: number) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    if (volume && (volume < 0 || volume > 1)) {\n      throw new Error('Volume must be between 0 and 1');\n    }\n    this.state.setVolume(volume);\n  }\n\n  /**\n   * Set the volume of a participant.\n   *\n   * Note: This method is not supported in React Native.\n   *\n   * @param sessionId the participant's session id.\n   * @param volume a number between 0 and 1. Set it to `undefined` to use the default volume.\n   */\n  setParticipantVolume(sessionId: string, volume: number | undefined) {\n    if (volume && (volume < 0 || volume > 1)) {\n      throw new Error('Volume must be between 0 and 1, or undefined');\n    }\n    this.call.state.updateParticipant(sessionId, (p) => {\n      if (isReactNative() && p.audioStream) {\n        for (const track of p.audioStream.getAudioTracks()) {\n          // @ts-expect-error track._setVolume is present in react-native-webrtc\n          track?._setVolume(volume);\n        }\n      }\n      return { audioVolume: volume };\n    });\n  }\n}\n","import { StreamSfuClient } from './StreamSfuClient';\nimport {\n  Dispatcher,\n  getGenericSdp,\n  isAudioTrackType,\n  isSfuEvent,\n  muteTypeToTrackType,\n  Publisher,\n  Subscriber,\n  toRtcConfiguration,\n  TrackPublishOptions,\n  trackTypeToParticipantStreamKey,\n} from './rtc';\nimport {\n  registerEventHandlers,\n  registerRingingCallEventHandlers,\n} from './events/callEventHandlers';\nimport {\n  CallingState,\n  CallState,\n  StreamVideoWriteableStateStore,\n} from './store';\nimport {\n  createSafeAsyncSubscription,\n  createSubscription,\n  getCurrentValue,\n} from './store/rxUtils';\nimport { ScopedLogger, videoLoggerSystem } from './logger';\nimport type {\n  AcceptCallResponse,\n  BlockUserRequest,\n  BlockUserResponse,\n  CallRingEvent,\n  CallSettingsResponse,\n  CollectUserFeedbackRequest,\n  CollectUserFeedbackResponse,\n  Credentials,\n  DeleteCallRequest,\n  DeleteCallResponse,\n  EndCallResponse,\n  GetCallReportResponse,\n  GetCallResponse,\n  GetCallSessionParticipantStatsDetailsResponse,\n  GetOrCreateCallRequest,\n  GetOrCreateCallResponse,\n  GoLiveRequest,\n  GoLiveResponse,\n  JoinCallRequest,\n  JoinCallResponse,\n  KickUserRequest,\n  KickUserResponse,\n  ListRecordingsResponse,\n  ListTranscriptionsResponse,\n  MuteUsersRequest,\n  MuteUsersResponse,\n  PinRequest,\n  PinResponse,\n  QueryCallMembersRequest,\n  QueryCallMembersResponse,\n  QueryCallSessionParticipantStatsResponse,\n  QueryCallSessionParticipantStatsTimelineResponse,\n  RejectCallRequest,\n  RejectCallResponse,\n  RequestPermissionRequest,\n  RequestPermissionResponse,\n  SendCallEventRequest,\n  SendCallEventResponse,\n  SendReactionRequest,\n  SendReactionResponse,\n  StartClosedCaptionsRequest,\n  StartClosedCaptionsResponse,\n  StartFrameRecordingRequest,\n  StartFrameRecordingResponse,\n  StartHLSBroadcastingResponse,\n  StartRecordingRequest,\n  StartRecordingResponse,\n  StartRTMPBroadcastsRequest,\n  StartRTMPBroadcastsResponse,\n  StartTranscriptionRequest,\n  StartTranscriptionResponse,\n  StatsOptions,\n  StopAllRTMPBroadcastsResponse,\n  StopClosedCaptionsRequest,\n  StopClosedCaptionsResponse,\n  StopFrameRecordingResponse,\n  StopHLSBroadcastingResponse,\n  StopLiveRequest,\n  StopLiveResponse,\n  StopRecordingResponse,\n  StopRTMPBroadcastsResponse,\n  StopTranscriptionResponse,\n  UnblockUserRequest,\n  UnblockUserResponse,\n  UnpinRequest,\n  UnpinResponse,\n  UpdateCallMembersRequest,\n  UpdateCallMembersResponse,\n  UpdateCallRequest,\n  UpdateCallResponse,\n  UpdateUserPermissionsRequest,\n  UpdateUserPermissionsResponse,\n} from './gen/coordinator';\nimport { OwnCapability } from './gen/coordinator';\nimport {\n  AudioTrackType,\n  CallConstructor,\n  CallLeaveOptions,\n  ClientPublishOptions,\n  ClosedCaptionsSettings,\n  JoinCallData,\n  TrackMuteType,\n  VideoTrackType,\n} from './types';\nimport { BehaviorSubject, Subject, takeWhile } from 'rxjs';\nimport { ReconnectDetails } from './gen/video/sfu/event/events';\nimport {\n  ClientCapability,\n  ClientDetails,\n  Codec,\n  ParticipantSource,\n  PublishOption,\n  SubscribeOption,\n  TrackType,\n  VideoDimension,\n  WebsocketReconnectStrategy,\n} from './gen/video/sfu/models/models';\nimport {\n  createStatsReporter,\n  getSdkSignature,\n  SfuStatsReporter,\n  StatsReporter,\n  Tracer,\n} from './stats';\nimport { DynascaleManager } from './helpers/DynascaleManager';\nimport { PermissionsContext } from './permissions';\nimport { CallTypes } from './CallType';\nimport { StreamClient } from './coordinator/connection/client';\nimport { retryInterval, sleep } from './coordinator/connection/utils';\nimport {\n  AllCallEvents,\n  CallEventListener,\n  ErrorFromResponse,\n  RejectReason,\n  StreamCallEvent,\n} from './coordinator/connection/types';\nimport { getClientDetails } from './helpers/client-details';\nimport {\n  CameraManager,\n  MicrophoneManager,\n  ScreenShareManager,\n  SpeakerManager,\n} from './devices';\nimport { hasPending, withoutConcurrency } from './helpers/concurrency';\nimport { ensureExhausted } from './helpers/ensureExhausted';\nimport { pushToIfMissing } from './helpers/array';\nimport {\n  makeSafePromise,\n  PromiseWithResolvers,\n  promiseWithResolvers,\n} from './helpers/promise';\nimport { GetCallStatsResponse } from './gen/shims';\n\n/**\n * An object representation of a `Call`.\n */\nexport class Call {\n  /**\n   * The type of the call.\n   */\n  readonly type: string;\n\n  /**\n   * The ID of the call.\n   */\n  readonly id: string;\n\n  /**\n   * The call CID.\n   */\n  readonly cid: string;\n\n  /**\n   * The state of this call.\n   */\n  readonly state = new CallState();\n\n  /**\n   * Flag indicating whether this call is \"watched\" and receives\n   * updates from the backend.\n   */\n  watching: boolean;\n\n  /**\n   * Device manager for the camera\n   */\n  readonly camera: CameraManager;\n\n  /**\n   * Device manager for the microphone.\n   */\n  readonly microphone: MicrophoneManager;\n\n  /**\n   * Device manager for the speaker.\n   */\n  readonly speaker: SpeakerManager;\n\n  /**\n   * Device manager for the screen.\n   */\n  readonly screenShare: ScreenShareManager;\n\n  /**\n   * The DynascaleManager instance.\n   */\n  readonly dynascaleManager: DynascaleManager;\n\n  subscriber?: Subscriber;\n  publisher?: Publisher;\n\n  /**\n   * Flag telling whether this call is a \"ringing\" call.\n   */\n  private readonly ringingSubject: Subject<boolean>;\n\n  /**\n   * The permissions context of this call.\n   */\n  readonly permissionsContext = new PermissionsContext();\n  readonly tracer = new Tracer(null);\n  readonly logger: ScopedLogger;\n\n  /**\n   * The event dispatcher instance dedicated to this Call instance.\n   * @private\n   */\n  private readonly dispatcher = new Dispatcher();\n\n  private clientPublishOptions?: ClientPublishOptions;\n  private currentPublishOptions?: PublishOption[];\n  private statsReportingIntervalInMs: number = 2000;\n  private statsReporter?: StatsReporter;\n  private sfuStatsReporter?: SfuStatsReporter;\n  private dropTimeout: ReturnType<typeof setTimeout> | undefined;\n\n  private readonly clientStore: StreamVideoWriteableStateStore;\n  public readonly streamClient: StreamClient;\n  private sfuClient?: StreamSfuClient;\n  private sfuClientTag = 0;\n  private unifiedSessionId?: string;\n\n  private readonly reconnectConcurrencyTag = Symbol('reconnectConcurrencyTag');\n  private reconnectAttempts = 0;\n  private reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n  private reconnectReason = '';\n  private fastReconnectDeadlineSeconds: number = 0;\n  private disconnectionTimeoutSeconds: number = 0;\n  private lastOfflineTimestamp: number = 0;\n  private networkAvailableTask: PromiseWithResolvers<void> | undefined;\n  // maintain the order of publishing tracks to restore them after a reconnection\n  // it shouldn't contain duplicates\n  private trackPublishOrder: TrackType[] = [];\n  private joinCallData?: JoinCallData;\n  private hasJoinedOnce = false;\n  private deviceSettingsAppliedOnce = false;\n  private credentials?: Credentials;\n\n  private initialized = false;\n  private readonly joinLeaveConcurrencyTag = Symbol('joinLeaveConcurrencyTag');\n\n  /**\n   * A list hooks/functions to invoke when the call is left.\n   * A typical use case is to clean up some global event handlers.\n   * @private\n   */\n  private readonly leaveCallHooks: Set<Function> = new Set();\n\n  private readonly streamClientBasePath: string;\n  private streamClientEventHandlers = new Map<Function, () => void>();\n\n  /**\n   * A list of capabilities that the client supports and are enabled.\n   */\n  private clientCapabilities = new Set<ClientCapability>([\n    ClientCapability.SUBSCRIBER_VIDEO_PAUSE,\n  ]);\n\n  /**\n   * Constructs a new `Call` instance.\n   *\n   * NOTE: Don't call the constructor directly, instead\n   * Use the [`StreamVideoClient.call`](./StreamVideoClient.md/#call)\n   * method to construct a `Call` instance.\n   */\n  constructor({\n    type,\n    id,\n    streamClient,\n    members,\n    ownCapabilities,\n    sortParticipantsBy,\n    clientStore,\n    ringing = false,\n    watching = false,\n  }: CallConstructor) {\n    this.type = type;\n    this.id = id;\n    this.cid = `${type}:${id}`;\n    this.ringingSubject = new BehaviorSubject(ringing);\n    this.watching = watching;\n    this.streamClient = streamClient;\n    this.clientStore = clientStore;\n    this.streamClientBasePath = `/call/${this.type}/${this.id}`;\n    this.logger = videoLoggerSystem.getLogger('Call');\n\n    const callTypeConfig = CallTypes.get(type);\n    const participantSorter =\n      sortParticipantsBy || callTypeConfig.options.sortParticipantsBy;\n    if (participantSorter) {\n      this.state.setSortParticipantsBy(participantSorter);\n    }\n\n    this.state.setMembers(members || []);\n    this.state.setOwnCapabilities(ownCapabilities || []);\n    this.state.setCallingState(\n      ringing ? CallingState.RINGING : CallingState.IDLE,\n    );\n\n    this.camera = new CameraManager(this);\n    this.microphone = new MicrophoneManager(this);\n    this.speaker = new SpeakerManager(this);\n    this.screenShare = new ScreenShareManager(this);\n    this.dynascaleManager = new DynascaleManager(this.state, this.speaker);\n  }\n\n  /**\n   * Sets up the call instance.\n   *\n   * @internal an internal method and should not be used outside the SDK.\n   */\n  setup = async () => {\n    await withoutConcurrency(this.joinLeaveConcurrencyTag, async () => {\n      if (this.initialized) return;\n\n      this.leaveCallHooks.add(\n        this.on('all', (event) => {\n          // update state with the latest event data\n          this.state.updateFromEvent(event);\n        }),\n      );\n\n      this.leaveCallHooks.add(\n        this.on('changePublishOptions', (event) => {\n          this.currentPublishOptions = event.publishOptions;\n        }),\n      );\n\n      this.leaveCallHooks.add(registerEventHandlers(this, this.dispatcher));\n      this.registerEffects();\n      this.registerReconnectHandlers();\n\n      this.camera.setup();\n      this.microphone.setup();\n      this.screenShare.setup();\n      this.speaker.setup();\n\n      if (this.state.callingState === CallingState.LEFT) {\n        this.state.setCallingState(CallingState.IDLE);\n      }\n\n      this.initialized = true;\n    });\n  };\n\n  private registerEffects = () => {\n    this.leaveCallHooks.add(\n      // handles updating the permissions context when the settings change.\n      createSubscription(this.state.settings$, (settings) => {\n        if (!settings) return;\n        this.permissionsContext.setCallSettings(settings);\n      }),\n    );\n\n    this.leaveCallHooks.add(\n      // handle the case when the user permissions are modified.\n      createSafeAsyncSubscription(\n        this.state.ownCapabilities$,\n        this.handleOwnCapabilitiesUpdated,\n      ),\n    );\n\n    this.leaveCallHooks.add(\n      // handles the case when the user is blocked by the call owner.\n      createSubscription(this.state.blockedUserIds$, async (blockedUserIds) => {\n        if (!blockedUserIds || blockedUserIds.length === 0) return;\n        const currentUserId = this.currentUserId;\n        if (currentUserId && blockedUserIds.includes(currentUserId)) {\n          this.logger.info('Leaving call because of being blocked');\n          await this.leave({ message: 'user blocked' }).catch((err) => {\n            this.logger.error('Error leaving call after being blocked', err);\n          });\n        }\n      }),\n    );\n\n    if (this.ringing) {\n      // if the call is ringing, we need to register the ringing call effects\n      this.handleRingingCall();\n    } else {\n      // if the call is not ringing, we need to register the ringing call subscriptions\n      // to handle the case when the call gets ringing flag after creation event\n      this.leaveCallHooks.add(\n        // \"ringing\" mode effects and event handlers\n        createSubscription(this.ringingSubject, (isRinging) => {\n          if (!isRinging) return;\n          this.handleRingingCall();\n        }),\n      );\n    }\n\n    this.leaveCallHooks.add(\n      // cancel auto-drop when call is accepted or rejected\n      createSubscription(this.state.session$, (session) => {\n        if (!this.ringing) return;\n\n        const receiverId = this.clientStore.connectedUser?.id;\n        if (!receiverId) return;\n\n        const isAcceptedByMe = Boolean(session?.accepted_by[receiverId]);\n        const isRejectedByMe = Boolean(session?.rejected_by[receiverId]);\n\n        if (isAcceptedByMe || isRejectedByMe) {\n          this.cancelAutoDrop();\n        }\n\n        const isAcceptedElsewhere =\n          isAcceptedByMe && this.state.callingState === CallingState.RINGING;\n\n        if (\n          (isAcceptedElsewhere || isRejectedByMe) &&\n          !hasPending(this.joinLeaveConcurrencyTag)\n        ) {\n          this.leave().catch(() => {\n            this.logger.error(\n              'Could not leave a call that was accepted or rejected elsewhere',\n            );\n          });\n        }\n      }),\n    );\n  };\n\n  private handleRingingCall = () => {\n    const callSession = this.state.session;\n    const receiver_id = this.clientStore.connectedUser?.id;\n    const ended_at = callSession?.ended_at;\n    const created_by_id = this.state.createdBy?.id;\n    const rejected_by = callSession?.rejected_by;\n    const accepted_by = callSession?.accepted_by;\n    let leaveCallIdle = false;\n    if (ended_at) {\n      // call was ended before it was accepted or rejected so we should leave it to idle\n      leaveCallIdle = true;\n    } else if (created_by_id && rejected_by) {\n      if (rejected_by[created_by_id]) {\n        // call was cancelled by the caller\n        leaveCallIdle = true;\n      }\n    } else if (receiver_id && rejected_by) {\n      if (rejected_by[receiver_id]) {\n        // call was rejected by the receiver in some other device\n        leaveCallIdle = true;\n      }\n    } else if (receiver_id && accepted_by) {\n      if (accepted_by[receiver_id]) {\n        // call was accepted by the receiver in some other device\n        leaveCallIdle = true;\n      }\n    }\n    if (leaveCallIdle) {\n      if (this.state.callingState !== CallingState.IDLE) {\n        this.state.setCallingState(CallingState.IDLE);\n      }\n    } else {\n      if (this.state.callingState === CallingState.IDLE) {\n        this.state.setCallingState(CallingState.RINGING);\n      }\n      this.scheduleAutoDrop();\n      this.leaveCallHooks.add(registerRingingCallEventHandlers(this));\n    }\n  };\n\n  private handleOwnCapabilitiesUpdated = async (\n    ownCapabilities: OwnCapability[],\n  ) => {\n    // update the permission context.\n    this.permissionsContext.setPermissions(ownCapabilities);\n\n    if (!this.publisher) return;\n\n    // check if the user still has publishing permissions and stop publishing if not.\n    const permissionToTrackType = {\n      [OwnCapability.SEND_AUDIO]: TrackType.AUDIO,\n      [OwnCapability.SEND_VIDEO]: TrackType.VIDEO,\n      [OwnCapability.SCREENSHARE]: TrackType.SCREEN_SHARE,\n    };\n    for (const [permission, trackType] of Object.entries(\n      permissionToTrackType,\n    )) {\n      const hasPermission = this.permissionsContext.hasPermission(\n        permission as OwnCapability,\n      );\n      if (hasPermission) continue;\n      try {\n        switch (trackType) {\n          case TrackType.AUDIO:\n            if (this.microphone.enabled) await this.microphone.disable();\n            break;\n          case TrackType.VIDEO:\n            if (this.camera.enabled) await this.camera.disable();\n            break;\n          case TrackType.SCREEN_SHARE:\n            if (this.screenShare.enabled) await this.screenShare.disable();\n            break;\n        }\n      } catch (err) {\n        this.logger.error(\n          `Can't disable mic/camera/screenshare after revoked permissions`,\n          err,\n        );\n      }\n    }\n  };\n\n  /**\n   * You can subscribe to WebSocket events provided by the API. To remove a subscription, call the `off` method.\n   * Please note that subscribing to WebSocket events is an advanced use-case.\n   * For most use-cases, it should be enough to watch for state changes.\n   *\n   * @param eventName the event name.\n   * @param fn the event handler.\n   */\n  on = <E extends keyof AllCallEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    if (isSfuEvent(eventName)) {\n      return this.dispatcher.on(eventName, fn);\n    }\n\n    const offHandler = this.streamClient.on(eventName, (e) => {\n      const event = e as StreamCallEvent;\n      if (event.call_cid && event.call_cid === this.cid) {\n        fn(event as AllCallEvents[E]);\n      }\n    });\n\n    // keep the 'off' reference returned by the stream client\n    this.streamClientEventHandlers.set(fn, offHandler);\n    return () => {\n      this.off(eventName, fn);\n    };\n  };\n\n  /**\n   * Remove subscription for WebSocket events that were created by the `on` method.\n   *\n   * @param eventName the event name.\n   * @param fn the event handler.\n   */\n  off = <E extends keyof AllCallEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    if (isSfuEvent(eventName)) {\n      return this.dispatcher.off(eventName, fn);\n    }\n\n    // unsubscribe from the stream client event by using the 'off' reference\n    const registeredOffHandler = this.streamClientEventHandlers.get(fn);\n    if (registeredOffHandler) {\n      registeredOffHandler();\n    }\n  };\n\n  /**\n   * Leave the call and stop the media streams that were published by the call.\n   */\n  leave = async ({ reject, reason, message }: CallLeaveOptions = {}) => {\n    if (this.state.callingState === CallingState.LEFT) {\n      throw new Error('Cannot leave call that has already been left.');\n    }\n\n    await withoutConcurrency(this.joinLeaveConcurrencyTag, async () => {\n      const callingState = this.state.callingState;\n\n      if (callingState === CallingState.LEFT) {\n        return;\n      }\n\n      if (callingState === CallingState.JOINING) {\n        const waitUntilCallJoined = () => {\n          return new Promise<void>((resolve) => {\n            this.state.callingState$\n              .pipe(takeWhile((state) => state !== CallingState.JOINED, true))\n              .subscribe(() => resolve());\n          });\n        };\n        await waitUntilCallJoined();\n      }\n\n      if (callingState === CallingState.RINGING && reject !== false) {\n        if (reject) {\n          await this.reject(reason ?? 'decline');\n        } else {\n          // if reject was undefined, we still have to cancel the call automatically\n          // when I am the creator and everyone else left the call\n          const hasOtherParticipants = this.state.remoteParticipants.length > 0;\n          if (this.isCreatedByMe && !hasOtherParticipants) {\n            await this.reject('cancel');\n          }\n        }\n      }\n\n      this.statsReporter?.stop();\n      this.statsReporter = undefined;\n\n      this.sfuStatsReporter?.flush();\n      this.sfuStatsReporter?.stop();\n      this.sfuStatsReporter = undefined;\n\n      this.subscriber?.dispose();\n      this.subscriber = undefined;\n\n      this.publisher?.dispose();\n      this.publisher = undefined;\n\n      await this.sfuClient?.leaveAndClose(\n        message ?? reason ?? 'user is leaving the call',\n      );\n      this.sfuClient = undefined;\n      this.dynascaleManager.setSfuClient(undefined);\n      await this.dynascaleManager.dispose();\n\n      this.state.setCallingState(CallingState.LEFT);\n      this.state.setParticipants([]);\n      this.state.dispose();\n\n      // Call all leave call hooks, e.g. to clean up global event handlers\n      this.leaveCallHooks.forEach((hook) => hook());\n      this.initialized = false;\n      this.hasJoinedOnce = false;\n      this.unifiedSessionId = undefined;\n      this.ringingSubject.next(false);\n      this.cancelAutoDrop();\n      this.clientStore.unregisterCall(this);\n\n      this.camera.dispose();\n      this.microphone.dispose();\n      this.screenShare.dispose();\n      this.speaker.dispose();\n      this.deviceSettingsAppliedOnce = false;\n\n      const stopOnLeavePromises: Promise<void>[] = [];\n      if (this.camera.stopOnLeave) {\n        stopOnLeavePromises.push(this.camera.disable(true));\n      }\n      if (this.microphone.stopOnLeave) {\n        stopOnLeavePromises.push(this.microphone.disable(true));\n      }\n      if (this.screenShare.stopOnLeave) {\n        stopOnLeavePromises.push(this.screenShare.disable(true));\n      }\n      await Promise.all(stopOnLeavePromises);\n    });\n  };\n\n  /**\n   * A flag indicating whether the call is \"ringing\" type of call.\n   */\n  get ringing() {\n    return getCurrentValue(this.ringingSubject);\n  }\n\n  /**\n   * Retrieves the current user ID.\n   */\n  get currentUserId() {\n    return this.clientStore.connectedUser?.id;\n  }\n\n  /**\n   * A flag indicating whether the call was created by the current user.\n   */\n  get isCreatedByMe() {\n    return this.state.createdBy?.id === this.currentUserId;\n  }\n\n  /**\n   * Update from the call response from the \"call.ring\" event\n   * @internal\n   */\n  updateFromRingingEvent = async (event: CallRingEvent) => {\n    await this.setup();\n    // call.ring event excludes the call creator in the members list\n    // as the creator does not get the ring event\n    // so update the member list accordingly\n    const { created_by, settings } = event.call;\n    const creator = this.state.members.find((m) => m.user.id === created_by.id);\n    if (!creator) {\n      this.state.setMembers(event.members);\n    } else {\n      this.state.setMembers([creator, ...event.members]);\n    }\n    // update the call state with the latest event data\n    this.state.updateFromCallResponse(event.call);\n    this.watching = true;\n    this.ringingSubject.next(true);\n    // we remove the instance from the calls list to enable the following filter in useCalls hook\n    // const calls = useCalls().filter((c) => c.ringing);\n    const calls = this.clientStore.calls.filter((c) => c.cid !== this.cid);\n    this.clientStore.setCalls([this, ...calls]);\n    await this.applyDeviceConfig(settings, false);\n  };\n\n  /**\n   * Loads the information about the call.\n   *\n   * @param params.ring if set to true, a `call.ring` event will be sent to the call members.\n   * @param params.notify if set to true, a `call.notification` event will be sent to the call members.\n   * @param params.members_limit the total number of members to return as part of the response.\n   */\n  get = async (params?: {\n    ring?: boolean;\n    notify?: boolean;\n    members_limit?: number;\n  }) => {\n    await this.setup();\n    const response = await this.streamClient.get<GetCallResponse>(\n      this.streamClientBasePath,\n      params,\n    );\n\n    this.state.updateFromCallResponse(response.call);\n    this.state.setMembers(response.members);\n    this.state.setOwnCapabilities(response.own_capabilities);\n\n    if (params?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    await this.applyDeviceConfig(response.call.settings, false);\n\n    return response;\n  };\n\n  /**\n   * Loads the information about the call and creates it if it doesn't exist.\n   *\n   * @param data the data to create the call with.\n   */\n  getOrCreate = async (data?: GetOrCreateCallRequest) => {\n    await this.setup();\n    const response = await this.streamClient.post<\n      GetOrCreateCallResponse,\n      GetOrCreateCallRequest\n    >(this.streamClientBasePath, data);\n\n    this.state.updateFromCallResponse(response.call);\n    this.state.setMembers(response.members);\n    this.state.setOwnCapabilities(response.own_capabilities);\n\n    if (data?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    await this.applyDeviceConfig(response.call.settings, false);\n\n    return response;\n  };\n\n  /**\n   * Creates a call\n   *\n   * @param data the data to create the call with.\n   */\n  create = async (data?: GetOrCreateCallRequest) => {\n    return this.getOrCreate(data);\n  };\n\n  /**\n   * Deletes the call.\n   */\n  delete = async (\n    data: DeleteCallRequest = {},\n  ): Promise<DeleteCallResponse> => {\n    return this.streamClient.post<DeleteCallResponse, DeleteCallRequest>(\n      `${this.streamClientBasePath}/delete`,\n      data,\n    );\n  };\n\n  /**\n   * A shortcut for {@link Call.get} with `ring` parameter set to `true`.\n   * Will send a `call.ring` event to the call members.\n   */\n  ring = async (): Promise<GetCallResponse> => {\n    return await this.get({ ring: true });\n  };\n\n  /**\n   * A shortcut for {@link Call.get} with `notify` parameter set to `true`.\n   * Will send a `call.notification` event to the call members.\n   */\n  notify = async (): Promise<GetCallResponse> => {\n    return await this.get({ notify: true });\n  };\n\n  /**\n   * Marks the incoming call as accepted.\n   *\n   * This method should be used only for \"ringing\" call flows.\n   * {@link Call.join} invokes this method automatically for you when joining a call.\n   * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n   */\n  accept = async () => {\n    return this.streamClient.post<AcceptCallResponse>(\n      `${this.streamClientBasePath}/accept`,\n    );\n  };\n\n  /**\n   * Marks the incoming call as rejected.\n   *\n   * This method should be used only for \"ringing\" call flows.\n   * {@link Call.leave} invokes this method automatically for you when you leave or reject this call.\n   * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n   *\n   * @param reason the reason for rejecting the call.\n   */\n  reject = async (\n    reason: RejectReason = 'decline',\n  ): Promise<RejectCallResponse> => {\n    return this.streamClient.post<RejectCallResponse, RejectCallRequest>(\n      `${this.streamClientBasePath}/reject`,\n      { reason: reason },\n    );\n  };\n\n  /**\n   * Will start to watch for call related WebSocket events and initiate a call session with the server.\n   *\n   * @returns a promise which resolves once the call join-flow has finished.\n   */\n  join = async ({\n    maxJoinRetries = 3,\n    ...data\n  }: JoinCallData & {\n    maxJoinRetries?: number;\n  } = {}): Promise<void> => {\n    await this.setup();\n    const callingState = this.state.callingState;\n\n    if ([CallingState.JOINED, CallingState.JOINING].includes(callingState)) {\n      throw new Error(`Illegal State: call.join() shall be called only once`);\n    }\n\n    // we will count the number of join failures per SFU.\n    // once the number of failures reaches 2, we will piggyback on the `migrating_from`\n    // field to force the coordinator to provide us another SFU\n    const sfuJoinFailures = new Map<string, number>();\n    const joinData: JoinCallData = data;\n    maxJoinRetries = Math.max(maxJoinRetries, 1);\n    for (let attempt = 0; attempt < maxJoinRetries; attempt++) {\n      try {\n        this.logger.trace(`Joining call (${attempt})`, this.cid);\n        await this.doJoin(data);\n        delete joinData.migrating_from;\n        break;\n      } catch (err) {\n        this.logger.warn(`Failed to join call (${attempt})`, this.cid);\n        if (err instanceof ErrorFromResponse && err.unrecoverable) {\n          // if the error is unrecoverable, we should not retry as that signals\n          // that connectivity is good, but the coordinator doesn't allow the user\n          // to join the call due to some reason (e.g., ended call, expired token...)\n          throw err;\n        }\n\n        const sfuId = this.credentials?.server.edge_name || '';\n        const failures = (sfuJoinFailures.get(sfuId) || 0) + 1;\n        sfuJoinFailures.set(sfuId, failures);\n        if (failures >= 2) {\n          joinData.migrating_from = sfuId;\n        }\n\n        if (attempt === maxJoinRetries - 1) {\n          throw err;\n        }\n      }\n\n      await sleep(retryInterval(attempt));\n    }\n  };\n\n  /**\n   * Will make a single attempt to watch for call related WebSocket events\n   * and initiate a call session with the server.\n   *\n   * @returns a promise which resolves once the call join-flow has finished.\n   */\n  private doJoin = async (data?: JoinCallData): Promise<void> => {\n    const connectStartTime = Date.now();\n    const callingState = this.state.callingState;\n\n    this.joinCallData = data;\n\n    this.logger.debug('Starting join flow');\n    this.state.setCallingState(CallingState.JOINING);\n\n    const performingMigration =\n      this.reconnectStrategy === WebsocketReconnectStrategy.MIGRATE;\n    const performingRejoin =\n      this.reconnectStrategy === WebsocketReconnectStrategy.REJOIN;\n    const performingFastReconnect =\n      this.reconnectStrategy === WebsocketReconnectStrategy.FAST;\n\n    let statsOptions = this.sfuStatsReporter?.options;\n    if (\n      !this.credentials ||\n      !statsOptions ||\n      performingRejoin ||\n      performingMigration\n    ) {\n      try {\n        const joinResponse = await this.doJoinRequest(data);\n        this.credentials = joinResponse.credentials;\n        statsOptions = joinResponse.stats_options;\n      } catch (error) {\n        // prevent triggering reconnect flow if the state is OFFLINE\n        const avoidRestoreState =\n          this.state.callingState === CallingState.OFFLINE;\n\n        if (!avoidRestoreState) {\n          // restore the previous call state if the join-flow fails\n          this.state.setCallingState(callingState);\n        }\n        throw error;\n      }\n    }\n\n    const previousSfuClient = this.sfuClient;\n    const previousSessionId = previousSfuClient?.sessionId;\n    const isWsHealthy = !!previousSfuClient?.isHealthy;\n    const sfuClient =\n      performingRejoin || performingMigration || !isWsHealthy\n        ? new StreamSfuClient({\n            tag: String(this.sfuClientTag++),\n            cid: this.cid,\n            dispatcher: this.dispatcher,\n            credentials: this.credentials,\n            streamClient: this.streamClient,\n            enableTracing: statsOptions.enable_rtc_stats,\n            // a new session_id is necessary for the REJOIN strategy.\n            // we use the previous session_id if available\n            sessionId: performingRejoin ? undefined : previousSessionId,\n            onSignalClose: (reason) =>\n              this.handleSfuSignalClose(sfuClient, reason),\n          })\n        : previousSfuClient;\n    this.sfuClient = sfuClient;\n    this.unifiedSessionId ??= sfuClient.sessionId;\n    this.dynascaleManager.setSfuClient(sfuClient);\n\n    const clientDetails = await getClientDetails();\n    // we don't need to send JoinRequest if we are re-using an existing healthy SFU client\n    if (previousSfuClient !== sfuClient) {\n      // prepare a generic SDP and send it to the SFU.\n      // these are throw-away SDPs that the SFU will use to determine\n      // the capabilities of the client (codec support, etc.)\n      const [subscriberSdp, publisherSdp] = await Promise.all([\n        getGenericSdp('recvonly'),\n        getGenericSdp('sendonly'),\n      ]);\n      const isReconnecting =\n        this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED;\n      const reconnectDetails = isReconnecting\n        ? this.getReconnectDetails(data?.migrating_from, previousSessionId)\n        : undefined;\n      const preferredPublishOptions = !isReconnecting\n        ? this.getPreferredPublishOptions()\n        : this.currentPublishOptions || [];\n      const preferredSubscribeOptions = !isReconnecting\n        ? this.getPreferredSubscribeOptions()\n        : [];\n\n      try {\n        const { callState, fastReconnectDeadlineSeconds, publishOptions } =\n          await sfuClient.join({\n            unifiedSessionId: this.unifiedSessionId,\n            subscriberSdp,\n            publisherSdp,\n            clientDetails,\n            fastReconnect: performingFastReconnect,\n            reconnectDetails,\n            preferredPublishOptions,\n            preferredSubscribeOptions,\n            capabilities: Array.from(this.clientCapabilities),\n            source: ParticipantSource.WEBRTC_UNSPECIFIED,\n          });\n\n        this.currentPublishOptions = publishOptions;\n        this.fastReconnectDeadlineSeconds = fastReconnectDeadlineSeconds;\n        if (callState) {\n          this.state.updateFromSfuCallState(\n            callState,\n            sfuClient.sessionId,\n            reconnectDetails,\n          );\n        }\n      } catch (error) {\n        this.logger.warn('Join SFU request failed', error);\n        sfuClient.close(\n          StreamSfuClient.JOIN_FAILED,\n          'Join request failed, connection considered unhealthy',\n        );\n        // restore the previous call state if the join-flow fails\n        this.state.setCallingState(callingState);\n        throw error;\n      }\n    }\n\n    if (!performingMigration) {\n      // in MIGRATION, `JOINED` state is set in `this.reconnectMigrate()`\n      this.state.setCallingState(CallingState.JOINED);\n    }\n    this.hasJoinedOnce = true;\n\n    // when performing fast reconnect, or when we reuse the same SFU client,\n    // (ws remained healthy), we just need to restore the ICE connection\n    if (performingFastReconnect) {\n      // the SFU automatically issues an ICE restart on the subscriber\n      // we don't have to do it ourselves\n      await this.restoreICE(sfuClient, { includeSubscriber: false });\n    } else {\n      const connectionConfig = toRtcConfiguration(this.credentials.ice_servers);\n      this.initPublisherAndSubscriber({\n        sfuClient,\n        connectionConfig,\n        clientDetails,\n        statsOptions,\n        publishOptions: this.currentPublishOptions || [],\n        closePreviousInstances: !performingMigration,\n        unifiedSessionId: this.unifiedSessionId,\n      });\n    }\n\n    // make sure we only track connection timing if we are not calling this method as part of a reconnection flow\n    if (!performingRejoin && !performingFastReconnect && !performingMigration) {\n      this.sfuStatsReporter?.sendConnectionTime(\n        (Date.now() - connectStartTime) / 1000,\n      );\n    }\n\n    if (performingRejoin && isWsHealthy) {\n      const strategy = WebsocketReconnectStrategy[this.reconnectStrategy];\n      await previousSfuClient?.leaveAndClose(\n        `Closing previous WS after reconnect with strategy: ${strategy}`,\n      );\n    } else if (!isWsHealthy) {\n      previousSfuClient?.close(\n        StreamSfuClient.DISPOSE_OLD_SOCKET,\n        'Closing unhealthy WS after reconnect',\n      );\n    }\n\n    // device settings should be applied only once, we don't have to\n    // re-apply them on later reconnections or server-side data fetches\n    if (!this.deviceSettingsAppliedOnce && this.state.settings) {\n      await this.applyDeviceConfig(this.state.settings, true);\n      this.deviceSettingsAppliedOnce = true;\n    }\n\n    // We shouldn't persist the `ring` and `notify` state after joining the call\n    // as it's a one-time event and clashes with the potential reconnection attempts.\n    // When reconnecting, if provided with `ring: true` or `notify: true`,\n    // we will spam the other participants with push notifications and `call.ring` events.\n    delete this.joinCallData?.ring;\n    delete this.joinCallData?.notify;\n    // reset the reconnect strategy to unspecified after a successful reconnection\n    this.reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n    this.reconnectReason = '';\n\n    this.logger.info(`Joined call ${this.cid}`);\n  };\n\n  /**\n   * Prepares Reconnect Details object.\n   * @internal\n   */\n  private getReconnectDetails = (\n    migratingFromSfuId: string | undefined,\n    previousSessionId: string | undefined,\n  ): ReconnectDetails => {\n    const strategy = this.reconnectStrategy;\n    const performingRejoin = strategy === WebsocketReconnectStrategy.REJOIN;\n    const announcedTracks =\n      this.publisher?.getAnnouncedTracksForReconnect() || [];\n    return {\n      strategy,\n      announcedTracks,\n      subscriptions: this.dynascaleManager.trackSubscriptions,\n      reconnectAttempt: this.reconnectAttempts,\n      fromSfuId: migratingFromSfuId || '',\n      previousSessionId: performingRejoin ? previousSessionId || '' : '',\n      reason: this.reconnectReason,\n    };\n  };\n\n  /**\n   * Prepares the preferred codec for the call.\n   * This is an experimental client feature and subject to change.\n   * @internal\n   */\n  private getPreferredPublishOptions = (): PublishOption[] => {\n    const { preferredCodec, fmtpLine, preferredBitrate, maxSimulcastLayers } =\n      this.clientPublishOptions || {};\n    if (!preferredCodec && !preferredBitrate && !maxSimulcastLayers) return [];\n\n    const codec = preferredCodec\n      ? Codec.create({ name: preferredCodec.split('/').pop(), fmtp: fmtpLine })\n      : undefined;\n\n    const preferredPublishOptions = [\n      PublishOption.create({\n        trackType: TrackType.VIDEO,\n        codec,\n        bitrate: preferredBitrate,\n        maxSpatialLayers: maxSimulcastLayers,\n      }),\n    ];\n\n    const screenShareSettings = this.screenShare.getSettings();\n    if (screenShareSettings) {\n      preferredPublishOptions.push(\n        PublishOption.create({\n          trackType: TrackType.SCREEN_SHARE,\n          fps: screenShareSettings.maxFramerate,\n          bitrate: screenShareSettings.maxBitrate,\n        }),\n      );\n    }\n\n    return preferredPublishOptions;\n  };\n\n  /**\n   * Prepares the preferred options for subscribing to tracks.\n   * This is an experimental client feature and subject to change.\n   * @internal\n   */\n  private getPreferredSubscribeOptions = (): SubscribeOption[] => {\n    const { subscriberCodec, subscriberFmtpLine } =\n      this.clientPublishOptions || {};\n    if (!subscriberCodec || !subscriberFmtpLine) return [];\n    return [\n      SubscribeOption.create({\n        trackType: TrackType.VIDEO,\n        codecs: [\n          { name: subscriberCodec.split('/').pop(), fmtp: subscriberFmtpLine },\n        ],\n      }),\n    ];\n  };\n\n  /**\n   * Performs an ICE restart on both the Publisher and Subscriber Peer Connections.\n   * Uses the provided SFU client to restore the ICE connection.\n   *\n   * This method can throw an error if the ICE restart fails.\n   * This error should be handled by the reconnect loop,\n   * and a new reconnection shall be attempted.\n   *\n   * @internal\n   */\n  private restoreICE = async (\n    nextSfuClient: StreamSfuClient,\n    opts: { includeSubscriber?: boolean; includePublisher?: boolean } = {},\n  ) => {\n    const { includeSubscriber = true, includePublisher = true } = opts;\n    if (this.subscriber) {\n      this.subscriber.setSfuClient(nextSfuClient);\n      if (includeSubscriber) {\n        await this.subscriber.restartIce();\n      }\n    }\n    if (this.publisher) {\n      this.publisher.setSfuClient(nextSfuClient);\n      if (includePublisher && this.publisher.isPublishing()) {\n        await this.publisher.restartIce();\n      }\n    }\n  };\n\n  /**\n   * Initializes the Publisher and Subscriber Peer Connections.\n   * @internal\n   */\n  private initPublisherAndSubscriber = (opts: {\n    sfuClient: StreamSfuClient;\n    connectionConfig: RTCConfiguration;\n    statsOptions: StatsOptions;\n    clientDetails: ClientDetails;\n    publishOptions: PublishOption[];\n    closePreviousInstances: boolean;\n    unifiedSessionId: string;\n  }) => {\n    const {\n      sfuClient,\n      connectionConfig,\n      clientDetails,\n      statsOptions,\n      publishOptions,\n      closePreviousInstances,\n      unifiedSessionId,\n    } = opts;\n    const { enable_rtc_stats: enableTracing } = statsOptions;\n    if (closePreviousInstances && this.subscriber) {\n      this.subscriber.dispose();\n    }\n    this.subscriber = new Subscriber({\n      sfuClient,\n      dispatcher: this.dispatcher,\n      state: this.state,\n      connectionConfig,\n      tag: sfuClient.tag,\n      enableTracing,\n      onReconnectionNeeded: (kind, reason) => {\n        this.reconnect(kind, reason).catch((err) => {\n          const message = `[Reconnect] Error reconnecting after a subscriber error: ${reason}`;\n          this.logger.warn(message, err);\n        });\n      },\n    });\n\n    // anonymous users can't publish anything hence, there is no need\n    // to create Publisher Peer Connection for them\n    const isAnonymous = this.streamClient.user?.type === 'anonymous';\n    if (!isAnonymous) {\n      if (closePreviousInstances && this.publisher) {\n        this.publisher.dispose();\n      }\n      this.publisher = new Publisher({\n        sfuClient,\n        dispatcher: this.dispatcher,\n        state: this.state,\n        connectionConfig,\n        publishOptions,\n        tag: sfuClient.tag,\n        enableTracing,\n        onReconnectionNeeded: (kind, reason) => {\n          this.reconnect(kind, reason).catch((err) => {\n            const message = `[Reconnect] Error reconnecting after a publisher error: ${reason}`;\n            this.logger.warn(message, err);\n          });\n        },\n      });\n    }\n\n    this.statsReporter?.stop();\n    if (this.statsReportingIntervalInMs > 0) {\n      this.statsReporter = createStatsReporter({\n        subscriber: this.subscriber,\n        publisher: this.publisher,\n        state: this.state,\n        datacenter: sfuClient.edgeName,\n        pollingIntervalInMs: this.statsReportingIntervalInMs,\n      });\n    }\n\n    this.tracer.setEnabled(enableTracing);\n    this.sfuStatsReporter?.flush();\n    this.sfuStatsReporter?.stop();\n    if (statsOptions?.reporting_interval_ms > 0) {\n      this.sfuStatsReporter = new SfuStatsReporter(sfuClient, {\n        clientDetails,\n        options: statsOptions,\n        subscriber: this.subscriber,\n        publisher: this.publisher,\n        microphone: this.microphone,\n        camera: this.camera,\n        state: this.state,\n        tracer: this.tracer,\n        unifiedSessionId,\n      });\n      this.sfuStatsReporter.start();\n    }\n  };\n\n  /**\n   * Retrieves credentials for joining the call.\n   *\n   * @internal\n   *\n   * @param data the join call data.\n   */\n  doJoinRequest = async (data?: JoinCallData): Promise<JoinCallResponse> => {\n    const location = await this.streamClient.getLocationHint();\n    const request: JoinCallRequest = { ...data, location };\n    const joinResponse = await this.streamClient.post<\n      JoinCallResponse,\n      JoinCallRequest\n    >(`${this.streamClientBasePath}/join`, request);\n    this.state.updateFromCallResponse(joinResponse.call);\n    this.state.setMembers(joinResponse.members);\n    this.state.setOwnCapabilities(joinResponse.own_capabilities);\n\n    if (data?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    const isReconnecting =\n      this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED;\n\n    if (!isReconnecting && this.ringing && !this.isCreatedByMe) {\n      // signals other users that I have accepted the incoming call.\n      await this.accept();\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    return joinResponse;\n  };\n\n  /**\n   * Handles the closing of the SFU signal connection.\n   *\n   * @internal\n   * @param sfuClient the SFU client instance that was closed.\n   * @param reason the reason for the closure.\n   */\n  private handleSfuSignalClose = (\n    sfuClient: StreamSfuClient,\n    reason: string,\n  ) => {\n    this.logger.debug('[Reconnect] SFU signal connection closed');\n    const { callingState } = this.state;\n    if (\n      // SFU WS closed before we finished current join,\n      // no need to schedule reconnecting\n      callingState === CallingState.JOINING ||\n      // we are already in the process of reconnecting,\n      // no need to schedule another one\n      callingState === CallingState.RECONNECTING ||\n      // SFU WS closed as a result of unsuccessful join,\n      // and no further retries need to be made\n      callingState === CallingState.IDLE ||\n      callingState === CallingState.LEFT\n    )\n      return;\n    // normal close, no need to reconnect\n    if (sfuClient.isLeaving || sfuClient.isClosingClean) return;\n\n    const strategy =\n      this.publisher?.isHealthy() && this.subscriber?.isHealthy()\n        ? WebsocketReconnectStrategy.FAST\n        : WebsocketReconnectStrategy.REJOIN;\n    this.reconnect(strategy, reason).catch((err) => {\n      this.logger.warn('[Reconnect] Error reconnecting', err);\n    });\n  };\n\n  /**\n   * Handles the reconnection flow.\n   *\n   * @internal\n   *\n   * @param strategy the reconnection strategy to use.\n   * @param reason the reason for the reconnection.\n   */\n  private reconnect = async (\n    strategy: WebsocketReconnectStrategy,\n    reason: string,\n  ): Promise<void> => {\n    if (\n      this.state.callingState === CallingState.RECONNECTING ||\n      this.state.callingState === CallingState.MIGRATING ||\n      this.state.callingState === CallingState.RECONNECTING_FAILED\n    )\n      return;\n\n    return withoutConcurrency(this.reconnectConcurrencyTag, async () => {\n      const reconnectStartTime = Date.now();\n      this.reconnectStrategy = strategy;\n      this.reconnectReason = reason;\n\n      const markAsReconnectingFailed = async () => {\n        try {\n          // attempt to fetch the call data from the server, as the call\n          // state might have changed while we were reconnecting or were offline\n          await this.get();\n        } finally {\n          this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n        }\n      };\n\n      let attempt = 0;\n      do {\n        const reconnectingTime = Date.now() - reconnectStartTime;\n        const shouldGiveUpReconnecting =\n          this.disconnectionTimeoutSeconds > 0 &&\n          reconnectingTime / 1000 > this.disconnectionTimeoutSeconds;\n\n        if (shouldGiveUpReconnecting) {\n          this.logger.warn(\n            '[Reconnect] Stopping reconnection attempts after reaching disconnection timeout',\n          );\n          await markAsReconnectingFailed();\n          return;\n        }\n\n        // we don't increment reconnect attempts for the FAST strategy.\n        if (this.reconnectStrategy !== WebsocketReconnectStrategy.FAST) {\n          this.reconnectAttempts++;\n        }\n        const currentStrategy =\n          WebsocketReconnectStrategy[this.reconnectStrategy];\n        try {\n          // wait until the network is available\n          await this.networkAvailableTask?.promise;\n\n          this.logger.info(\n            `[Reconnect] Reconnecting with strategy ${WebsocketReconnectStrategy[this.reconnectStrategy]}`,\n          );\n\n          switch (this.reconnectStrategy) {\n            case WebsocketReconnectStrategy.UNSPECIFIED:\n            case WebsocketReconnectStrategy.DISCONNECT:\n              this.logger.debug(\n                `[Reconnect] No-op strategy ${currentStrategy}`,\n              );\n              break;\n            case WebsocketReconnectStrategy.FAST:\n              await this.reconnectFast();\n              break;\n            case WebsocketReconnectStrategy.REJOIN:\n              await this.reconnectRejoin();\n              break;\n            case WebsocketReconnectStrategy.MIGRATE:\n              await this.reconnectMigrate();\n              break;\n            default:\n              ensureExhausted(\n                this.reconnectStrategy,\n                'Unknown reconnection strategy',\n              );\n              break;\n          }\n          break; // do-while loop, reconnection worked, exit the loop\n        } catch (error) {\n          if (this.state.callingState === CallingState.OFFLINE) {\n            this.logger.debug(\n              `[Reconnect] Can't reconnect while offline, stopping reconnection attempts`,\n            );\n            break;\n            // we don't need to handle the error if the call is offline\n            // network change event will trigger the reconnection\n          }\n          if (error instanceof ErrorFromResponse && error.unrecoverable) {\n            this.logger.warn(\n              `[Reconnect] Can't reconnect due to coordinator unrecoverable error`,\n              error,\n            );\n            await markAsReconnectingFailed();\n            return;\n          }\n\n          await sleep(500);\n\n          const wasMigrating =\n            this.reconnectStrategy === WebsocketReconnectStrategy.MIGRATE;\n          const mustPerformRejoin =\n            (Date.now() - reconnectStartTime) / 1000 >\n            this.fastReconnectDeadlineSeconds;\n\n          // don't immediately switch to the REJOIN strategy, but instead attempt\n          // to reconnect with the FAST strategy for a few times before switching.\n          // in some cases, we immediately switch to the REJOIN strategy.\n          const shouldRejoin =\n            mustPerformRejoin || // if we are past the fast reconnect deadline\n            wasMigrating || // if we were migrating, but the migration failed\n            attempt >= 3 || // after 3 failed attempts\n            !(this.publisher?.isHealthy() ?? true) || // if the publisher is not healthy\n            !(this.subscriber?.isHealthy() ?? true); // if the subscriber is not healthy\n\n          attempt++;\n\n          const nextStrategy = shouldRejoin\n            ? WebsocketReconnectStrategy.REJOIN\n            : WebsocketReconnectStrategy.FAST;\n          this.reconnectStrategy = nextStrategy;\n\n          this.logger.info(\n            `[Reconnect] ${currentStrategy} (${this.reconnectAttempts}) failed. Attempting with ${WebsocketReconnectStrategy[nextStrategy]}`,\n            error,\n          );\n        }\n      } while (\n        this.state.callingState !== CallingState.JOINED &&\n        this.state.callingState !== CallingState.RECONNECTING_FAILED &&\n        this.state.callingState !== CallingState.LEFT\n      );\n      this.logger.info('[Reconnect] Reconnection flow finished');\n    });\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"fast\" strategy.\n   * @internal\n   */\n  private reconnectFast = async () => {\n    const reconnectStartTime = Date.now();\n    this.reconnectStrategy = WebsocketReconnectStrategy.FAST;\n    this.state.setCallingState(CallingState.RECONNECTING);\n    await this.doJoin(this.joinCallData);\n    await this.get(); // fetch the latest call state, as it might have changed\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.FAST,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"rejoin\" strategy.\n   * @internal\n   */\n  private reconnectRejoin = async () => {\n    const reconnectStartTime = Date.now();\n    this.reconnectStrategy = WebsocketReconnectStrategy.REJOIN;\n    this.state.setCallingState(CallingState.RECONNECTING);\n    await this.doJoin(this.joinCallData);\n    await this.restorePublishedTracks();\n    this.restoreSubscribedTracks();\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.REJOIN,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"migrate\" strategy.\n   * @internal\n   */\n  private reconnectMigrate = async () => {\n    const reconnectStartTime = Date.now();\n    const currentSfuClient = this.sfuClient;\n    if (!currentSfuClient) {\n      throw new Error('Cannot migrate without an active SFU client');\n    }\n\n    this.reconnectStrategy = WebsocketReconnectStrategy.MIGRATE;\n    this.state.setCallingState(CallingState.MIGRATING);\n    const currentSubscriber = this.subscriber;\n    const currentPublisher = this.publisher;\n\n    currentSubscriber?.detachEventHandlers();\n    currentPublisher?.detachEventHandlers();\n\n    const migrationTask = makeSafePromise(currentSfuClient.enterMigration());\n\n    try {\n      const currentSfu = currentSfuClient.edgeName;\n      await this.doJoin({ ...this.joinCallData, migrating_from: currentSfu });\n    } finally {\n      // cleanup the migration_from field after the migration is complete or failed\n      // as we don't want to keep dirty data in the join call data\n      delete this.joinCallData?.migrating_from;\n    }\n\n    await this.restorePublishedTracks();\n    this.restoreSubscribedTracks();\n\n    try {\n      // Wait for the migration to complete, then close the previous SFU client\n      // and the peer connection instances. In case of failure, the migration\n      // task would throw an error and REJOIN would be attempted.\n      await migrationTask();\n\n      // in MIGRATE, we can consider the call as joined only after\n      // `participantMigrationComplete` event is received, signaled by\n      // the `migrationTask`\n      this.state.setCallingState(CallingState.JOINED);\n    } finally {\n      currentSubscriber?.dispose();\n      currentPublisher?.dispose();\n\n      // and close the previous SFU client, without specifying close code\n      currentSfuClient.close(StreamSfuClient.NORMAL_CLOSURE, 'Migrating away');\n    }\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.MIGRATE,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Registers the various event handlers for reconnection.\n   *\n   * @internal\n   */\n  private registerReconnectHandlers = () => {\n    // handles the legacy \"goAway\" event\n    const unregisterGoAway = this.on('goAway', () => {\n      this.reconnect(WebsocketReconnectStrategy.MIGRATE, 'goAway').catch(\n        (err) => this.logger.warn('[Reconnect] Error reconnecting', err),\n      );\n    });\n\n    // handles the \"error\" event, through which the SFU can request a reconnect\n    const unregisterOnError = this.on('error', (e) => {\n      const { reconnectStrategy: strategy, error } = e;\n      if (strategy === WebsocketReconnectStrategy.UNSPECIFIED) return;\n      if (strategy === WebsocketReconnectStrategy.DISCONNECT) {\n        this.leave({ message: 'SFU instructed to disconnect' }).catch((err) => {\n          this.logger.warn(`Can't leave call after disconnect request`, err);\n        });\n      } else {\n        this.reconnect(strategy, error?.message || 'SFU Error').catch((err) => {\n          this.logger.warn('[Reconnect] Error reconnecting', err);\n        });\n      }\n    });\n\n    const unregisterNetworkChanged = this.streamClient.on(\n      'network.changed',\n      (e) => {\n        this.tracer.trace('network.changed', e);\n        if (!e.online) {\n          this.logger.debug('[Reconnect] Going offline');\n          if (!this.hasJoinedOnce) return;\n          this.lastOfflineTimestamp = Date.now();\n          // create a new task that would resolve when the network is available\n          const networkAvailableTask = promiseWithResolvers();\n          networkAvailableTask.promise.then(() => {\n            let strategy = WebsocketReconnectStrategy.FAST;\n            if (this.lastOfflineTimestamp) {\n              const offline = (Date.now() - this.lastOfflineTimestamp) / 1000;\n              if (offline > this.fastReconnectDeadlineSeconds) {\n                // We shouldn't attempt FAST if we have exceeded the deadline.\n                // The SFU would have already wiped out the session.\n                strategy = WebsocketReconnectStrategy.REJOIN;\n              }\n            }\n\n            this.reconnect(strategy, 'Going online').catch((err) => {\n              this.logger.warn(\n                '[Reconnect] Error reconnecting after going online',\n                err,\n              );\n            });\n          });\n          this.networkAvailableTask = networkAvailableTask;\n          this.sfuStatsReporter?.stop();\n          this.state.setCallingState(CallingState.OFFLINE);\n        } else {\n          this.logger.debug('[Reconnect] Going online');\n          this.sfuClient?.close(\n            StreamSfuClient.DISPOSE_OLD_SOCKET,\n            'Closing WS to reconnect after going online',\n          );\n          // we went online, release the previous waiters and reset the state\n          this.networkAvailableTask?.resolve();\n          this.networkAvailableTask = undefined;\n          this.sfuStatsReporter?.start();\n        }\n      },\n    );\n\n    this.leaveCallHooks\n      .add(unregisterGoAway)\n      .add(unregisterOnError)\n      .add(unregisterNetworkChanged);\n  };\n\n  /**\n   * Restores the published tracks after a reconnection.\n   * @internal\n   */\n  private restorePublishedTracks = async () => {\n    // the tracks need to be restored in their original order of publishing\n    // otherwise, we might get `m-lines order mismatch` errors\n    for (const trackType of this.trackPublishOrder) {\n      let mediaStream: MediaStream | undefined;\n      switch (trackType) {\n        case TrackType.AUDIO:\n          mediaStream = this.microphone.state.mediaStream;\n          break;\n        case TrackType.VIDEO:\n          mediaStream = this.camera.state.mediaStream;\n          break;\n        case TrackType.SCREEN_SHARE:\n          mediaStream = this.screenShare.state.mediaStream;\n          break;\n        // screen share audio can't exist without a screen share, so we handle it there\n        case TrackType.SCREEN_SHARE_AUDIO:\n        case TrackType.UNSPECIFIED:\n          break;\n        default:\n          ensureExhausted(trackType, 'Unknown track type');\n          break;\n      }\n\n      if (mediaStream) await this.publish(mediaStream, trackType);\n    }\n  };\n\n  /**\n   * Restores the subscribed tracks after a reconnection.\n   * @internal\n   */\n  private restoreSubscribedTracks = () => {\n    const { remoteParticipants } = this.state;\n    if (remoteParticipants.length <= 0) return;\n    this.dynascaleManager.applyTrackSubscriptions(undefined);\n  };\n\n  /**\n   * Starts publishing the given video stream to the call.\n   * @deprecated use `call.publish()`.\n   */\n  publishVideoStream = async (videoStream: MediaStream) => {\n    await this.publish(videoStream, TrackType.VIDEO);\n  };\n\n  /**\n   * Starts publishing the given audio stream to the call.\n   * @deprecated use `call.publish()`\n   */\n  publishAudioStream = async (audioStream: MediaStream) => {\n    await this.publish(audioStream, TrackType.AUDIO);\n  };\n\n  /**\n   * Starts publishing the given screen-share stream to the call.\n   * @deprecated use `call.publish()`\n   */\n  publishScreenShareStream = async (screenShareStream: MediaStream) => {\n    await this.publish(screenShareStream, TrackType.SCREEN_SHARE);\n  };\n\n  /**\n   * Publishes the given media stream.\n   *\n   * @param mediaStream the media stream to publish.\n   * @param trackType the type of the track to announce.\n   * @param options the publish options.\n   */\n  publish = async (\n    mediaStream: MediaStream,\n    trackType: TrackType,\n    options?: TrackPublishOptions,\n  ) => {\n    if (!this.sfuClient) throw new Error(`Call is not joined yet`);\n    // joining is in progress, and we should wait until the client is ready\n    await this.sfuClient.joinTask;\n\n    if (!this.permissionsContext.canPublish(trackType)) {\n      throw new Error(`No permission to publish ${TrackType[trackType]}`);\n    }\n\n    if (!this.publisher) throw new Error('Publisher is not initialized');\n\n    const [track] = isAudioTrackType(trackType)\n      ? mediaStream.getAudioTracks()\n      : mediaStream.getVideoTracks();\n\n    if (!track) {\n      throw new Error(\n        `There is no ${TrackType[trackType]} track in the stream`,\n      );\n    }\n\n    if (track.readyState === 'ended') {\n      throw new Error(`Can't publish ended tracks.`);\n    }\n\n    pushToIfMissing(this.trackPublishOrder, trackType);\n    await this.publisher.publish(track, trackType, options);\n\n    const trackTypes = [trackType];\n    if (trackType === TrackType.SCREEN_SHARE) {\n      const [audioTrack] = mediaStream.getAudioTracks();\n      if (audioTrack) {\n        const screenShareAudio = TrackType.SCREEN_SHARE_AUDIO;\n        pushToIfMissing(this.trackPublishOrder, screenShareAudio);\n        await this.publisher.publish(audioTrack, screenShareAudio, options);\n        trackTypes.push(screenShareAudio);\n      }\n    }\n\n    if (track.kind === 'video') {\n      // schedules calibration report - the SFU will use the performance stats\n      // to adjust the quality thresholds as early as possible\n      this.sfuStatsReporter?.scheduleOne(3000);\n    }\n\n    await this.updateLocalStreamState(mediaStream, ...trackTypes);\n  };\n\n  /**\n   * Stops publishing the given track type to the call, if it is currently being published.\n   *\n   * @param trackTypes the track types to stop publishing.\n   */\n  stopPublish = async (...trackTypes: TrackType[]) => {\n    if (!this.sfuClient || !this.publisher) return;\n    this.publisher.stopTracks(...trackTypes);\n    await this.updateLocalStreamState(undefined, ...trackTypes);\n  };\n\n  /**\n   * Updates the call state with the new stream.\n   *\n   * @param mediaStream the new stream to update the call state with.\n   * If undefined, the stream will be removed from the call state.\n   * @param trackTypes the track types to update the call state with.\n   */\n  private updateLocalStreamState = async (\n    mediaStream: MediaStream | undefined,\n    ...trackTypes: TrackType[]\n  ) => {\n    if (!this.sfuClient || !this.sfuClient.sessionId) return;\n    await this.notifyTrackMuteState(!mediaStream, ...trackTypes);\n\n    const { sessionId } = this.sfuClient;\n    for (const trackType of trackTypes) {\n      const streamStateProp = trackTypeToParticipantStreamKey(trackType);\n      if (!streamStateProp) continue;\n\n      this.state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: mediaStream\n          ? pushToIfMissing([...p.publishedTracks], trackType)\n          : p.publishedTracks.filter((t) => t !== trackType),\n        [streamStateProp]: mediaStream,\n      }));\n    }\n  };\n\n  /**\n   * Updates the preferred publishing options\n   *\n   * @internal\n   * @param options the options to use.\n   */\n  updatePublishOptions = (options: ClientPublishOptions) => {\n    this.logger.warn(\n      '[call.updatePublishOptions]: You are manually overriding the publish options for this call. ' +\n        'This is not recommended, and it can cause call stability/compatibility issues. Use with caution.',\n    );\n    if (this.state.callingState === CallingState.JOINED) {\n      this.logger.warn(\n        'Updating publish options after joining the call does not have an effect',\n      );\n    }\n    this.clientPublishOptions = { ...this.clientPublishOptions, ...options };\n  };\n\n  /**\n   * Notifies the SFU that a noise cancellation process has started.\n   *\n   * @internal\n   */\n  notifyNoiseCancellationStarting = async () => {\n    return this.sfuClient?.startNoiseCancellation().catch((err) => {\n      this.logger.warn('Failed to notify start of noise cancellation', err);\n    });\n  };\n\n  /**\n   * Notifies the SFU that a noise cancellation process has stopped.\n   *\n   * @internal\n   */\n  notifyNoiseCancellationStopped = async () => {\n    return this.sfuClient?.stopNoiseCancellation().catch((err) => {\n      this.logger.warn('Failed to notify stop of noise cancellation', err);\n    });\n  };\n\n  /**\n   * Notifies the SFU about the mute state of the given track types.\n   * @internal\n   */\n  notifyTrackMuteState = async (muted: boolean, ...trackTypes: TrackType[]) => {\n    const key = `muteState.${this.cid}.${trackTypes.join('-')}`;\n    await withoutConcurrency(key, async () => {\n      if (!this.sfuClient) return;\n      await this.sfuClient.updateMuteStates(\n        trackTypes.map((trackType) => ({ trackType, muted })),\n      );\n    });\n  };\n\n  /**\n   * Will enhance the reported stats with additional participant-specific information (`callStatsReport$` state [store variable](./StreamVideoClient.md/#readonlystatestore)).\n   * This is usually helpful when detailed stats for a specific participant are needed.\n   *\n   * @param sessionId the sessionId to start reporting for.\n   */\n  startReportingStatsFor = (sessionId: string) => {\n    return this.statsReporter?.startReportingStatsFor(sessionId);\n  };\n\n  /**\n   * Opposite of `startReportingStatsFor`.\n   * Will turn off stats reporting for a specific participant.\n   *\n   * @param sessionId the sessionId to stop reporting for.\n   */\n  stopReportingStatsFor = (sessionId: string) => {\n    return this.statsReporter?.stopReportingStatsFor(sessionId);\n  };\n\n  /**\n   * Sets the frequency of the call stats reporting.\n   *\n   * @param intervalInMs the interval in milliseconds to report the stats.\n   */\n  setStatsReportingIntervalInMs = (intervalInMs: number) => {\n    this.statsReportingIntervalInMs = intervalInMs;\n  };\n\n  /**\n   * Resets the last sent reaction for the user holding the given `sessionId`. This is a local action, it won't reset the reaction on the backend.\n   *\n   * @param sessionId the session id.\n   */\n  resetReaction = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      reaction: undefined,\n    });\n  };\n\n  /**\n   * Sets the list of criteria to sort the participants by.\n   *\n   * @param criteria the list of criteria to sort the participants by.\n   */\n  setSortParticipantsBy: CallState['setSortParticipantsBy'] = (criteria) => {\n    return this.state.setSortParticipantsBy(criteria);\n  };\n\n  /**\n   * Sends a reaction to the other call participants.\n   *\n   * @param reaction the reaction to send.\n   */\n  sendReaction = async (\n    reaction: SendReactionRequest,\n  ): Promise<SendReactionResponse> => {\n    return this.streamClient.post<SendReactionResponse, SendReactionRequest>(\n      `${this.streamClientBasePath}/reaction`,\n      reaction,\n    );\n  };\n\n  /**\n   * Blocks the user with the given `userId`.\n   *\n   * @param userId the id of the user to block.\n   */\n  blockUser = async (userId: string) => {\n    return this.streamClient.post<BlockUserResponse, BlockUserRequest>(\n      `${this.streamClientBasePath}/block`,\n      {\n        user_id: userId,\n      },\n    );\n  };\n\n  /**\n   * Unblocks the user with the given `userId`.\n   *\n   * @param userId the id of the user to unblock.\n   */\n  unblockUser = async (userId: string) => {\n    return this.streamClient.post<UnblockUserResponse, UnblockUserRequest>(\n      `${this.streamClientBasePath}/unblock`,\n      {\n        user_id: userId,\n      },\n    );\n  };\n\n  /**\n   * Kicks the user with the given `userId`.\n   * @param data the kick request.\n   */\n  kickUser = async (data: KickUserRequest): Promise<KickUserResponse> => {\n    return this.streamClient.post<KickUserResponse, KickUserRequest>(\n      `${this.streamClientBasePath}/kick`,\n      data,\n    );\n  };\n\n  /**\n   * Mutes the current user.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteSelf = (type: TrackMuteType) => {\n    const myUserId = this.currentUserId;\n    if (myUserId) {\n      return this.muteUser(myUserId, type);\n    }\n  };\n\n  /**\n   * Mutes all the other participants.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteOthers = (type: TrackMuteType) => {\n    const trackType = muteTypeToTrackType(type);\n    if (!trackType) return;\n    const userIdsToMute: string[] = [];\n    for (const participant of this.state.remoteParticipants) {\n      if (participant.publishedTracks.includes(trackType)) {\n        userIdsToMute.push(participant.userId);\n      }\n    }\n\n    if (userIdsToMute.length > 0) {\n      return this.muteUser(userIdsToMute, type);\n    }\n  };\n\n  /**\n   * Mutes the user with the given `userId`.\n   *\n   * @param userId the id of the user to mute.\n   * @param type the type of the mute operation.\n   */\n  muteUser = (userId: string | string[], type: TrackMuteType) => {\n    return this.streamClient.post<MuteUsersResponse, MuteUsersRequest>(\n      `${this.streamClientBasePath}/mute_users`,\n      {\n        user_ids: Array.isArray(userId) ? userId : [userId],\n        [type]: true,\n      },\n    );\n  };\n\n  /**\n   * Will mute all users in the call.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteAllUsers = (type: TrackMuteType) => {\n    return this.streamClient.post<MuteUsersResponse, MuteUsersRequest>(\n      `${this.streamClientBasePath}/mute_users`,\n      {\n        mute_all_users: true,\n        [type]: true,\n      },\n    );\n  };\n\n  /**\n   * Starts recording the call\n   */\n  startRecording = async (request?: StartRecordingRequest) => {\n    return this.streamClient.post<\n      StartRecordingResponse,\n      StartRecordingRequest\n    >(`${this.streamClientBasePath}/start_recording`, request ? request : {});\n  };\n\n  /**\n   * Stops recording the call\n   */\n  stopRecording = async () => {\n    return this.streamClient.post<StopRecordingResponse>(\n      `${this.streamClientBasePath}/stop_recording`,\n      {},\n    );\n  };\n\n  /**\n   * Starts the transcription of the call.\n   *\n   * @param request the request data.\n   */\n  startTranscription = async (\n    request?: StartTranscriptionRequest,\n  ): Promise<StartTranscriptionResponse> => {\n    return this.streamClient.post<\n      StartTranscriptionResponse,\n      StartTranscriptionRequest\n    >(`${this.streamClientBasePath}/start_transcription`, request);\n  };\n\n  /**\n   * Stops the transcription of the call.\n   */\n  stopTranscription = async (): Promise<StopTranscriptionResponse> => {\n    return this.streamClient.post<StopTranscriptionResponse>(\n      `${this.streamClientBasePath}/stop_transcription`,\n    );\n  };\n\n  /**\n   * Starts the closed captions of the call.\n   */\n  startClosedCaptions = async (\n    options?: StartClosedCaptionsRequest,\n  ): Promise<StartClosedCaptionsResponse> => {\n    const trx = this.state.setCaptioning(true); // optimistic update\n    try {\n      return await this.streamClient.post<\n        StartClosedCaptionsResponse,\n        StartClosedCaptionsRequest\n      >(`${this.streamClientBasePath}/start_closed_captions`, options);\n    } catch (err) {\n      trx.rollback(); // revert the optimistic update\n      throw err;\n    }\n  };\n\n  /**\n   * Stops the closed captions of the call.\n   */\n  stopClosedCaptions = async (\n    options?: StopClosedCaptionsRequest,\n  ): Promise<StopClosedCaptionsResponse> => {\n    const trx = this.state.setCaptioning(false); // optimistic update\n    try {\n      return await this.streamClient.post<\n        StopClosedCaptionsResponse,\n        StopClosedCaptionsRequest\n      >(`${this.streamClientBasePath}/stop_closed_captions`, options);\n    } catch (err) {\n      trx.rollback(); // revert the optimistic update\n      throw err;\n    }\n  };\n\n  /**\n   * Updates the closed caption settings.\n   *\n   * @param config the closed caption settings to apply\n   */\n  updateClosedCaptionSettings = (config: Partial<ClosedCaptionsSettings>) => {\n    this.state.updateClosedCaptionSettings(config);\n  };\n\n  /**\n   * Sends a `call.permission_request` event to all users connected to the call.\n   * The call settings object contains information about which permissions can be requested during a call\n   * (for example, a user might be allowed to request permission to publish audio, but not video).\n   */\n  requestPermissions = async (\n    data: RequestPermissionRequest,\n  ): Promise<RequestPermissionResponse> => {\n    const { permissions } = data;\n    const canRequestPermissions = permissions.every((permission) =>\n      this.permissionsContext.canRequest(permission as OwnCapability),\n    );\n    if (!canRequestPermissions) {\n      throw new Error(\n        `You are not allowed to request permissions: ${permissions.join(', ')}`,\n      );\n    }\n    return this.streamClient.post<\n      RequestPermissionResponse,\n      RequestPermissionRequest\n    >(`${this.streamClientBasePath}/request_permission`, data);\n  };\n\n  /**\n   * Allows you to grant certain permissions to a user in a call.\n   * The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * Supported permissions that can be granted are:\n   * - `send-audio`\n   * - `send-video`\n   * - `screenshare`\n   *\n   * @param userId the id of the user to grant permissions to.\n   * @param permissions the permissions to grant.\n   */\n  grantPermissions = async (userId: string, permissions: string[]) => {\n    return this.updateUserPermissions({\n      user_id: userId,\n      grant_permissions: permissions,\n    });\n  };\n\n  /**\n   * Allows you to revoke certain permissions from a user in a call.\n   * The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * Supported permissions that can be revoked are:\n   * - `send-audio`\n   * - `send-video`\n   * - `screenshare`\n   *\n   * @param userId the id of the user to revoke permissions from.\n   * @param permissions the permissions to revoke.\n   */\n  revokePermissions = async (userId: string, permissions: string[]) => {\n    return this.updateUserPermissions({\n      user_id: userId,\n      revoke_permissions: permissions,\n    });\n  };\n\n  /**\n   * Allows you to grant or revoke a specific permission to a user in a call. The permissions are specific to the call experience and do not survive the call itself.\n   * When revoking a permission, this endpoint will also mute the relevant track from the user. This is similar to muting a user with the difference that the user will not be able to unmute afterwards.\n   * Supported permissions that can be granted or revoked: `send-audio`, `send-video` and `screenshare`.\n   *\n   * `call.permissions_updated` event is sent to all members of the call.\n   */\n  updateUserPermissions = async (data: UpdateUserPermissionsRequest) => {\n    return this.streamClient.post<\n      UpdateUserPermissionsResponse,\n      UpdateUserPermissionsRequest\n    >(`${this.streamClientBasePath}/user_permissions`, data);\n  };\n\n  /**\n   * Starts the livestreaming of the call.\n   *\n   * @param data the request data.\n   * @param params the request params.\n   */\n  goLive = async (data: GoLiveRequest = {}, params?: { notify?: boolean }) => {\n    return this.streamClient.post<GoLiveResponse, GoLiveRequest>(\n      `${this.streamClientBasePath}/go_live`,\n      data,\n      params,\n    );\n  };\n\n  /**\n   * Stops the livestreaming of the call.\n   */\n  stopLive = async (data: StopLiveRequest = {}) => {\n    return this.streamClient.post<StopLiveResponse>(\n      `${this.streamClientBasePath}/stop_live`,\n      data,\n    );\n  };\n\n  /**\n   * Starts the broadcasting of the call.\n   */\n  startHLS = async () => {\n    return this.streamClient.post<StartHLSBroadcastingResponse>(\n      `${this.streamClientBasePath}/start_broadcasting`,\n      {},\n    );\n  };\n\n  /**\n   * Stops the broadcasting of the call.\n   */\n  stopHLS = async () => {\n    return this.streamClient.post<StopHLSBroadcastingResponse>(\n      `${this.streamClientBasePath}/stop_broadcasting`,\n      {},\n    );\n  };\n\n  /**\n   * Starts the RTMP-out broadcasting of the call.\n   */\n  startRTMPBroadcasts = async (\n    data: StartRTMPBroadcastsRequest,\n  ): Promise<StartRTMPBroadcastsResponse> => {\n    return this.streamClient.post<\n      StartRTMPBroadcastsResponse,\n      StartRTMPBroadcastsRequest\n    >(`${this.streamClientBasePath}/rtmp_broadcasts`, data);\n  };\n\n  /**\n   * Stops all RTMP-out broadcasting of the call.\n   */\n  stopAllRTMPBroadcasts = async (): Promise<StopAllRTMPBroadcastsResponse> => {\n    return this.streamClient.post<StopAllRTMPBroadcastsResponse>(\n      `${this.streamClientBasePath}/rtmp_broadcasts/stop`,\n    );\n  };\n\n  /**\n   * Stops the RTMP-out broadcasting of the call specified by it's name.\n   */\n  stopRTMPBroadcast = async (\n    name: string,\n  ): Promise<StopRTMPBroadcastsResponse> => {\n    return this.streamClient.post<StopRTMPBroadcastsResponse>(\n      `${this.streamClientBasePath}/rtmp_broadcasts/${name}/stop`,\n    );\n  };\n\n  /**\n   * Starts frame by frame recording.\n   * Sends call.frame_recording_started events\n   */\n  startFrameRecording = async (\n    data: StartFrameRecordingRequest,\n  ): Promise<StartFrameRecordingResponse> => {\n    return this.streamClient.post<\n      StartFrameRecordingResponse,\n      StartFrameRecordingRequest\n    >(`${this.streamClientBasePath}/start_frame_recording`, data);\n  };\n\n  /**\n   * Stops frame recording.\n   */\n  stopFrameRecording = async (): Promise<StopFrameRecordingResponse> => {\n    return this.streamClient.post<StopFrameRecordingResponse>(\n      `${this.streamClientBasePath}/stop_frame_recording`,\n    );\n  };\n\n  /**\n   * Updates the call settings or custom data.\n   *\n   * @param updates the updates to apply to the call.\n   */\n  update = async (updates: UpdateCallRequest) => {\n    const response = await this.streamClient.patch<\n      UpdateCallResponse,\n      UpdateCallRequest\n    >(`${this.streamClientBasePath}`, updates);\n\n    const { call, members, own_capabilities } = response;\n    this.state.updateFromCallResponse(call);\n    this.state.setMembers(members);\n    this.state.setOwnCapabilities(own_capabilities);\n\n    return response;\n  };\n\n  /**\n   * Ends the call. Once the call is ended, it cannot be re-joined.\n   */\n  endCall = async () => {\n    return this.streamClient.post<EndCallResponse>(\n      `${this.streamClientBasePath}/mark_ended`,\n    );\n  };\n\n  /**\n   * Pins the given session to the top of the participants list.\n   *\n   * @param sessionId the sessionId to pin.\n   */\n  pin = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      pin: {\n        isLocalPin: true,\n        pinnedAt: Date.now(),\n      },\n    });\n  };\n\n  /**\n   * Unpins the given session from the top of the participants list.\n   *\n   * @param sessionId the sessionId to unpin.\n   */\n  unpin = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      pin: undefined,\n    });\n  };\n\n  /**\n   * Pins the given session to the top of the participants list for everyone\n   * in the call.\n   * You can execute this method only if you have the `pin-for-everyone` capability.\n   *\n   * @param request the request object.\n   */\n  pinForEveryone = async (request: PinRequest) => {\n    return this.streamClient.post<PinResponse, PinRequest>(\n      `${this.streamClientBasePath}/pin`,\n      request,\n    );\n  };\n\n  /**\n   * Unpins the given session from the top of the participants list for everyone\n   * in the call.\n   * You can execute this method only if you have the `pin-for-everyone` capability.\n   *\n   * @param request the request object.\n   */\n  unpinForEveryone = async (request: UnpinRequest) => {\n    return this.streamClient.post<UnpinResponse, UnpinRequest>(\n      `${this.streamClientBasePath}/unpin`,\n      request,\n    );\n  };\n\n  /**\n   * Query call members with filter query. The result won't be stored in call state.\n   * @param request\n   * @returns\n   */\n  queryMembers = (request?: Omit<QueryCallMembersRequest, 'type' | 'id'>) => {\n    return this.streamClient.post<\n      QueryCallMembersResponse,\n      QueryCallMembersRequest\n    >('/call/members', {\n      ...(request || {}),\n      id: this.id,\n      type: this.type,\n    });\n  };\n\n  /**\n   * Will update the call members.\n   *\n   * @param data the request data.\n   */\n  updateCallMembers = async (\n    data: UpdateCallMembersRequest,\n  ): Promise<UpdateCallMembersResponse> => {\n    return this.streamClient.post<\n      UpdateCallMembersResponse,\n      UpdateCallMembersRequest\n    >(`${this.streamClientBasePath}/members`, data);\n  };\n\n  /**\n   * Schedules an auto-drop timeout based on the call settings.\n   * Applicable only for ringing calls.\n   */\n  private scheduleAutoDrop = () => {\n    this.cancelAutoDrop();\n\n    const settings = this.state.settings;\n    if (!settings) return;\n    // ignore if the call is not ringing\n    if (this.state.callingState !== CallingState.RINGING) return;\n\n    const timeoutInMs = this.isCreatedByMe\n      ? settings.ring.auto_cancel_timeout_ms\n      : settings.ring.incoming_call_timeout_ms;\n\n    // 0 means no auto-drop\n    if (timeoutInMs <= 0) return;\n    this.dropTimeout = setTimeout(() => {\n      // the call might have stopped ringing by this point,\n      // e.g. it was already accepted and joined\n      if (this.state.callingState !== CallingState.RINGING) return;\n      this.leave({\n        reject: true,\n        reason: 'timeout',\n        message: `ringing timeout - ${this.isCreatedByMe ? 'no one accepted' : `user didn't interact with incoming call screen`}`,\n      }).catch((err) => {\n        this.logger.error('Failed to drop call', err);\n      });\n    }, timeoutInMs);\n  };\n\n  /**\n   * Cancels a scheduled auto-drop timeout.\n   */\n  private cancelAutoDrop = () => {\n    clearTimeout(this.dropTimeout);\n    this.dropTimeout = undefined;\n  };\n\n  /**\n   * Retrieves the list of recordings for the current call or call session.\n   *\n   * If `callSessionId` is provided, it will return the recordings for that call session.\n   * Otherwise, all recordings for the current call will be returned.\n   *\n   * @param callSessionId the call session id to retrieve recordings for.\n   */\n  queryRecordings = async (\n    callSessionId?: string,\n  ): Promise<ListRecordingsResponse> => {\n    let endpoint = this.streamClientBasePath;\n    if (callSessionId) {\n      endpoint = `${endpoint}/${callSessionId}`;\n    }\n    return this.streamClient.get<ListRecordingsResponse>(\n      `${endpoint}/recordings`,\n    );\n  };\n\n  /**\n   * Retrieves the list of transcriptions for the current call.\n   *\n   * @returns the list of transcriptions.\n   */\n  queryTranscriptions = async (): Promise<ListTranscriptionsResponse> => {\n    return this.streamClient.get<ListTranscriptionsResponse>(\n      `${this.streamClientBasePath}/transcriptions`,\n    );\n  };\n\n  /**\n   * Retrieve call statistics for a particular call session (historical).\n   * Here `callSessionID` is mandatory.\n   *\n   * @param callSessionID the call session ID to retrieve statistics for.\n   * @returns The call stats.\n   * @deprecated use `call.getCallReport` instead.\n   * @internal\n   */\n  getCallStats = async (callSessionID: string) => {\n    const endpoint = `${this.streamClientBasePath}/stats/${callSessionID}`;\n    return this.streamClient.get<GetCallStatsResponse>(endpoint);\n  };\n\n  /**\n   * Retrieve call report. If the `callSessionID` is not specified, then the\n   * report for the latest call session is retrieved. If it is specified, then\n   * the report for that particular session is retrieved if it exists.\n   *\n   * @param callSessionID the optional call session ID to retrieve statistics for\n   * @returns the call report\n   */\n  getCallReport = async (callSessionID: string = '') => {\n    const endpoint = `${this.streamClientBasePath}/report`;\n    const params = callSessionID !== '' ? { session_id: callSessionID } : {};\n    return this.streamClient.get<GetCallReportResponse>(endpoint, params);\n  };\n\n  /**\n   * Loads the call participant stats for the given parameters.\n   */\n  getCallParticipantsStats = async (opts: {\n    sessionId?: string;\n    userId?: string;\n    userSessionId?: string;\n    kind?: 'timeline' | 'details';\n  }): Promise<\n    | QueryCallSessionParticipantStatsResponse\n    | GetCallSessionParticipantStatsDetailsResponse\n    | QueryCallSessionParticipantStatsTimelineResponse\n    | undefined\n  > => {\n    const {\n      sessionId = this.state.session?.id,\n      userId = this.currentUserId,\n      userSessionId = this.unifiedSessionId,\n      kind = 'details',\n    } = opts;\n    if (!sessionId) return;\n    const base = `${this.streamClient.baseURL}/call_stats/${this.type}/${this.id}/${sessionId}`;\n    if (!userId || !userSessionId) {\n      return this.streamClient.get<QueryCallSessionParticipantStatsResponse>(\n        `${base}/participants`,\n      );\n    }\n    if (kind === 'details') {\n      return this.streamClient.get<GetCallSessionParticipantStatsDetailsResponse>(\n        `${base}/participant/${userId}/${userSessionId}/details`,\n      );\n    }\n    return this.streamClient.get<QueryCallSessionParticipantStatsTimelineResponse>(\n      `${base}/participants/${userId}/${userSessionId}/timeline`,\n    );\n  };\n\n  /**\n   * Submit user feedback for the call\n   *\n   * @param rating Rating between 1 and 5 denoting the experience of the user in the call\n   * @param reason The reason/description for the rating\n   * @param custom Custom data\n   */\n  submitFeedback = async (\n    rating: number,\n    {\n      reason,\n      custom,\n    }: Pick<CollectUserFeedbackRequest, 'reason' | 'custom'> = {},\n  ): Promise<CollectUserFeedbackResponse> => {\n    const { sdkName, sdkVersion, ...platform } = getSdkSignature(\n      await getClientDetails(),\n    );\n    return this.streamClient.post<\n      CollectUserFeedbackResponse,\n      CollectUserFeedbackRequest\n    >(`${this.streamClientBasePath}/feedback`, {\n      rating,\n      reason,\n      user_session_id: this.sfuClient?.sessionId,\n      sdk: sdkName,\n      sdk_version: sdkVersion,\n      custom: {\n        ...custom,\n        'x-stream-platform-data': platform,\n      },\n    });\n  };\n\n  /**\n   * Sends a custom event to all call participants.\n   *\n   * @param payload the payload to send.\n   */\n  sendCustomEvent = async (payload: { [key: string]: any }) => {\n    return this.streamClient.post<SendCallEventResponse, SendCallEventRequest>(\n      `${this.streamClientBasePath}/event`,\n      { custom: payload },\n    );\n  };\n\n  /**\n   * Applies the device configuration from the backend.\n   *\n   * @internal\n   */\n  applyDeviceConfig = async (\n    settings: CallSettingsResponse,\n    publish: boolean,\n  ) => {\n    await this.camera.apply(settings.video, publish).catch((err) => {\n      this.logger.warn('Camera init failed', err);\n    });\n    await this.microphone.apply(settings.audio, publish).catch((err) => {\n      this.logger.warn('Mic init failed', err);\n    });\n  };\n\n  /**\n   * Will begin tracking the given element for visibility changes within the\n   * configured viewport element (`call.setViewport`).\n   *\n   * @param element the element to track.\n   * @param sessionId the session id.\n   * @param trackType the video mode.\n   */\n  trackElementVisibility = <T extends HTMLElement>(\n    element: T,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    return this.dynascaleManager.trackElementVisibility(\n      element,\n      sessionId,\n      trackType,\n    );\n  };\n\n  /**\n   * Sets the viewport element to track bound video elements for visibility.\n   *\n   * @param element the viewport element.\n   */\n  setViewport = <T extends HTMLElement>(element: T) => {\n    return this.dynascaleManager.setViewport(element);\n  };\n\n  /**\n   * Binds a DOM <video> element to the given session id.\n   * This method will make sure that the video element will play\n   * the correct video stream for the given session id.\n   *\n   * Under the hood, it would also keep track of the video element dimensions\n   * and update the subscription accordingly in order to optimize the bandwidth.\n   *\n   * If a \"viewport\" is configured, the video element will be automatically\n   * tracked for visibility and the subscription will be updated accordingly.\n   *\n   * @param videoElement the video element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   */\n  bindVideoElement = (\n    videoElement: HTMLVideoElement,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const unbind = this.dynascaleManager.bindVideoElement(\n      videoElement,\n      sessionId,\n      trackType,\n    );\n\n    if (!unbind) return;\n    this.leaveCallHooks.add(unbind);\n    return () => {\n      this.leaveCallHooks.delete(unbind);\n      unbind();\n    };\n  };\n\n  /**\n   * Binds a DOM <audio> element to the given session id.\n   *\n   * This method will make sure that the audio element will\n   * play the correct audio stream for the given session id.\n   *\n   * @param audioElement the audio element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of audio.\n   */\n  bindAudioElement = (\n    audioElement: HTMLAudioElement,\n    sessionId: string,\n    trackType: AudioTrackType = 'audioTrack',\n  ) => {\n    const unbind = this.dynascaleManager.bindAudioElement(\n      audioElement,\n      sessionId,\n      trackType,\n    );\n\n    if (!unbind) return;\n    this.leaveCallHooks.add(unbind);\n    return () => {\n      this.leaveCallHooks.delete(unbind);\n      unbind();\n    };\n  };\n\n  /**\n   * Binds a DOM <img> element to this call's thumbnail (if enabled in settings).\n   *\n   * @param imageElement the image element to bind to.\n   * @param opts options for the binding.\n   */\n  bindCallThumbnailElement = (\n    imageElement: HTMLImageElement,\n    opts: {\n      fallbackImageSource?: string;\n    } = {},\n  ) => {\n    const handleError = () => {\n      imageElement.src =\n        opts.fallbackImageSource ||\n        'https://getstream.io/random_svg/?name=x&id=x';\n    };\n\n    const unsubscribe = createSubscription(\n      this.state.thumbnails$,\n      (thumbnails) => {\n        if (!thumbnails) return;\n        imageElement.addEventListener('error', handleError);\n\n        const thumbnailUrl = new URL(thumbnails.image_url);\n        thumbnailUrl.searchParams.set('w', String(imageElement.clientWidth));\n        thumbnailUrl.searchParams.set('h', String(imageElement.clientHeight));\n\n        imageElement.src = thumbnailUrl.toString();\n      },\n    );\n\n    return () => {\n      unsubscribe();\n      imageElement.removeEventListener('error', handleError);\n    };\n  };\n\n  /**\n   * Specify preference for incoming video resolution. The preference will\n   * be matched as close as possible, but actual resolution will depend\n   * on the video source quality and client network conditions. Will enable\n   * incoming video, if previously disabled.\n   *\n   * @param resolution preferred resolution, or `undefined` to clear preference\n   * @param sessionIds optionally specify session ids of the participants this\n   * preference has effect on. Affects all participants by default.\n   */\n  setPreferredIncomingVideoResolution = (\n    resolution: VideoDimension | undefined,\n    sessionIds?: string[],\n  ) => {\n    this.dynascaleManager.setVideoTrackSubscriptionOverrides(\n      resolution\n        ? {\n            enabled: true,\n            dimension: resolution,\n          }\n        : undefined,\n      sessionIds,\n    );\n    this.dynascaleManager.applyTrackSubscriptions();\n  };\n\n  /**\n   * Enables or disables incoming video from all remote call participants,\n   * and removes any preference for preferred resolution.\n   */\n  setIncomingVideoEnabled = (enabled: boolean) => {\n    this.dynascaleManager.setVideoTrackSubscriptionOverrides(\n      enabled ? undefined : { enabled: false },\n    );\n    this.dynascaleManager.applyTrackSubscriptions();\n  };\n\n  /**\n   * Sets the maximum amount of time a user can remain waiting for a reconnect\n   * after a network disruption\n   * @param timeoutSeconds Timeout in seconds, or 0 to keep reconnecting indefinetely\n   */\n  setDisconnectionTimeout = (timeoutSeconds: number) => {\n    this.disconnectionTimeoutSeconds = timeoutSeconds;\n  };\n\n  /**\n   * Enables the provided client capabilities.\n   */\n  enableClientCapabilities = (...capabilities: ClientCapability[]) => {\n    for (const capability of capabilities) {\n      this.clientCapabilities.add(capability);\n    }\n  };\n\n  /**\n   * Disables the provided client capabilities.\n   */\n  disableClientCapabilities = (...capabilities: ClientCapability[]) => {\n    for (const capability of capabilities) {\n      this.clientCapabilities.delete(capability);\n    }\n  };\n}\n","export default null;","export const APIErrorCodes: Record<number, string> = {\n  [-1]: 'InternalSystemError',\n  2: 'AccessKeyError',\n  3: 'AuthenticationFailedError',\n  4: 'InputError',\n  5: 'AuthenticationError',\n  6: 'DuplicateUsernameError',\n  9: 'RateLimitError',\n  16: 'DoesNotExistError',\n  17: 'NotAllowedError',\n  18: 'EventNotSupportedError',\n  19: 'ChannelFeatureNotSupportedError',\n  20: 'MessageTooLongError',\n  21: 'MultipleNestingLevelError',\n  22: 'PayloadTooBigError',\n  23: 'RequestTimeoutError',\n  24: 'MaxHeaderSizeExceededError',\n  40: 'AuthErrorTokenExpired',\n  41: 'AuthErrorTokenNotValidYet',\n  42: 'AuthErrorTokenUsedBeforeIssuedAt',\n  43: 'AuthErrorTokenSignatureInvalid',\n  44: 'CustomCommandEndpointMissingError',\n  45: 'CustomCommandEndpointCallError',\n  46: 'ConnectionIDNotFoundError',\n  60: 'CoolDownError',\n  69: 'ErrWrongRegion',\n  70: 'ErrQueryChannelPermissions',\n  71: 'ErrTooManyConnections',\n  73: 'MessageModerationFailedError',\n  99: 'AppSuspendedError',\n};\n","import { StreamClient } from './client';\nimport {\n  addConnectionEventListeners,\n  isCloseEvent,\n  KnownCodes,\n  removeConnectionEventListeners,\n  retryInterval,\n  sleep,\n} from './utils';\nimport type { StreamVideoEvent, UR } from './types';\nimport type { LogLevel } from '@stream-io/logger';\nimport type {\n  ConnectedEvent,\n  ConnectionErrorEvent,\n  WSAuthMessage,\n} from '../../gen/coordinator';\nimport { makeSafePromise, type SafePromise } from '../../helpers/promise';\nimport { getTimers } from '../../timers';\nimport { APIErrorCodes } from './errors';\n\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */\nexport class StableWSConnection {\n  // local vars\n  connectionID?: string;\n  private connectionOpenSafe?: SafePromise<ConnectedEvent>;\n  consecutiveFailures: number;\n  pingInterval: number;\n  healthCheckTimeoutRef?: number;\n  isConnecting: boolean;\n  isDisconnected: boolean;\n  isHealthy: boolean;\n  isConnectionOpenResolved?: boolean;\n  lastEvent: Date | null;\n  connectionCheckTimeout: number;\n  connectionCheckTimeoutRef?: NodeJS.Timeout;\n  rejectConnectionOpen?: (\n    reason?: Error & {\n      code?: string | number;\n      isWSFailure?: boolean;\n      StatusCode?: string | number;\n    },\n  ) => void;\n  resolveConnectionOpen?: (value: ConnectedEvent) => void;\n  totalFailures: number;\n  ws?: WebSocket;\n  wsID: number;\n\n  client: StreamClient;\n\n  constructor(client: StreamClient) {\n    this.client = client;\n    /** consecutive failures influence the duration of the timeout */\n    this.consecutiveFailures = 0;\n    /** keep track of the total number of failures */\n    this.totalFailures = 0;\n    /** We only make 1 attempt to reconnect at the same time.. */\n    this.isConnecting = false;\n    /** To avoid reconnect if client is disconnected */\n    this.isDisconnected = false;\n    /** Boolean that indicates if the connection promise is resolved */\n    this.isConnectionOpenResolved = false;\n    /** Boolean that indicates if we have a working connection to the server */\n    this.isHealthy = false;\n    /** Incremented when a new WS connection is made */\n    this.wsID = 1;\n    /** Store the last event time for health checks */\n    this.lastEvent = null;\n    /** Send a health check message every 25 seconds */\n    this.pingInterval = 25 * 1000;\n    this.connectionCheckTimeout = this.pingInterval + 10 * 1000;\n\n    addConnectionEventListeners(this.onlineStatusChanged);\n  }\n\n  _log = (msg: string, extra: UR = {}, level: LogLevel = 'info') => {\n    this.client.logger[level](`connection:${msg}`, extra);\n  };\n\n  setClient = (client: StreamClient) => {\n    this.client = client;\n  };\n\n  /**\n   * connect - Connect to the WS URL\n   * the default 15s timeout allows between 2~3 tries\n   * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n   */\n  async connect(timeout = 15000) {\n    if (this.isConnecting) {\n      throw Error(\n        `You've called connect twice, can only attempt 1 connection at the time`,\n      );\n    }\n\n    this.isDisconnected = false;\n\n    try {\n      const healthCheck = await this._connect();\n      this.consecutiveFailures = 0;\n\n      this._log(\n        `connect() - Established ws connection with healthcheck: ${healthCheck}`,\n      );\n    } catch (error) {\n      this.isHealthy = false;\n      this.consecutiveFailures += 1;\n\n      if (\n        // @ts-expect-error type issue\n        error.code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        this._log(\n          'connect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n        this._reconnect({ refreshToken: true });\n      } else {\n        // @ts-expect-error type issue\n        if (!error.isWSFailure) {\n          // API rejected the connection and we should not retry\n          throw new Error(\n            JSON.stringify({\n              // @ts-expect-error type issue\n              code: error.code,\n              // @ts-expect-error type issue\n              StatusCode: error.StatusCode,\n              // @ts-expect-error type issue\n              message: error.message,\n              // @ts-expect-error type issue\n              isWSFailure: error.isWSFailure,\n            }),\n          );\n        }\n      }\n    }\n\n    return await this._waitForHealthy(timeout);\n  }\n\n  /**\n   * _waitForHealthy polls the promise connection to see if its resolved until it times out\n   * the default 15s timeout allows between 2~3 tries\n   * @param timeout duration(ms)\n   */\n  async _waitForHealthy(timeout = 15000) {\n    return Promise.race([\n      (async () => {\n        const interval = 50; // ms\n        for (let i = 0; i <= timeout; i += interval) {\n          try {\n            return await this.connectionOpen;\n          } catch (error: any) {\n            if (i === timeout) {\n              throw new Error(\n                JSON.stringify({\n                  code: error.code,\n                  StatusCode: error.StatusCode,\n                  message: error.message,\n                  isWSFailure: error.isWSFailure,\n                }),\n              );\n            }\n            await sleep(interval);\n          }\n        }\n      })(),\n      (async () => {\n        await sleep(timeout);\n        this.isConnecting = false;\n        throw new Error(\n          JSON.stringify({\n            code: '',\n            StatusCode: '',\n            message: 'initial WS connection could not be established',\n            isWSFailure: true,\n          }),\n        );\n      })(),\n    ]);\n  }\n\n  /**\n   * Builds and returns the url for websocket.\n   * @private\n   * @returns url string\n   */\n  _buildUrl = () => {\n    const params = new URLSearchParams();\n    params.set('api_key', this.client.key);\n    params.set('stream-auth-type', this.client.getAuthType());\n    params.set('X-Stream-Client', this.client.getUserAgent());\n\n    return `${this.client.wsBaseURL}/connect?${params.toString()}`;\n  };\n\n  /**\n   * disconnect - Disconnect the connection and doesn't recover...\n   *\n   */\n  disconnect(timeout?: number) {\n    this._log(\n      `disconnect() - Closing the websocket connection for wsID ${this.wsID}`,\n    );\n\n    this.wsID += 1;\n    this.isConnecting = false;\n    this.isDisconnected = true;\n\n    // start by removing all the listeners\n    if (this.healthCheckTimeoutRef) {\n      getTimers().clearInterval(this.healthCheckTimeoutRef);\n    }\n    if (this.connectionCheckTimeoutRef) {\n      clearInterval(this.connectionCheckTimeoutRef);\n    }\n\n    removeConnectionEventListeners(this.onlineStatusChanged);\n\n    this.isHealthy = false;\n\n    let isClosedPromise: Promise<void>;\n    // and finally close...\n    // Assigning to local here because we will remove it from this before the\n    // promise resolves.\n    const { ws } = this;\n    if (ws && ws.close && ws.readyState === ws.OPEN) {\n      isClosedPromise = new Promise((resolve) => {\n        const onclose = (event: CloseEvent) => {\n          this._log(\n            `disconnect() - resolving isClosedPromise ${\n              event ? 'with' : 'without'\n            } close frame`,\n            { event },\n          );\n          resolve();\n        };\n\n        ws.onclose = onclose;\n        // In case we don't receive close frame websocket server in time,\n        // lets not wait for more than 1 second.\n        setTimeout(onclose, timeout != null ? timeout : 1000);\n      });\n\n      this._log(\n        `disconnect() - Manually closed connection by calling client.disconnect()`,\n      );\n\n      ws.close(\n        KnownCodes.WS_CLOSED_SUCCESS,\n        'Manually closed connection by calling client.disconnect()',\n      );\n    } else {\n      this._log(\n        `disconnect() - ws connection doesn't exist or it is already closed.`,\n      );\n      isClosedPromise = Promise.resolve();\n    }\n\n    delete this.ws;\n\n    return isClosedPromise;\n  }\n\n  /**\n   * _connect - Connect to the WS endpoint\n   *\n   * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n   */\n  async _connect() {\n    if (this.isConnecting) return; // ignore _connect if it's currently trying to connect\n    this.isConnecting = true;\n    let isTokenReady = false;\n    try {\n      this._log(`_connect() - waiting for token`);\n      await this.client.tokenManager.tokenReady();\n      isTokenReady = true;\n    } catch {\n      // token provider has failed before, so try again\n    }\n\n    try {\n      if (!isTokenReady) {\n        this._log(\n          `_connect() - tokenProvider failed before, so going to retry`,\n        );\n        await this.client.tokenManager.loadToken();\n      }\n\n      if (!this.client.isConnectionIsPromisePending) {\n        this.client._setupConnectionIdPromise();\n      }\n      this._setupConnectionPromise();\n      const wsURL = this._buildUrl();\n      this._log(`_connect() - Connecting to ${wsURL}`);\n      const WS = this.client.options.WebSocketImpl ?? WebSocket;\n      this.ws = new WS(wsURL);\n      this.ws.onopen = this.onopen.bind(this, this.wsID);\n      this.ws.onclose = this.onclose.bind(this, this.wsID);\n      this.ws.onerror = this.onerror.bind(this, this.wsID);\n      this.ws.onmessage = this.onmessage.bind(this, this.wsID);\n      const response = await this.connectionOpen;\n      this.isConnecting = false;\n\n      if (response) {\n        this.connectionID = response.connection_id;\n        this.client.resolveConnectionId?.(this.connectionID);\n        return response;\n      }\n    } catch (err) {\n      this.client._setupConnectionIdPromise();\n      this.isConnecting = false;\n      // @ts-expect-error type issue\n      this._log(`_connect() - Error - `, err);\n      this.client.rejectConnectionId?.(err);\n      throw err;\n    }\n  }\n\n  /**\n   * _reconnect - Retry the connection to WS endpoint\n   *\n   * @param {{ interval?: number; refreshToken?: boolean }} options Following options are available\n   *\n   * - `interval`\t{int}\t\t\tnumber of ms that function should wait before reconnecting\n   * - `refreshToken` {boolean}\treload/refresh user token be refreshed before attempting reconnection.\n   */\n  async _reconnect(\n    options: { interval?: number; refreshToken?: boolean } = {},\n  ): Promise<void> {\n    this._log('_reconnect() - Initiating the reconnect');\n\n    // only allow 1 connection at the time\n    if (this.isConnecting || this.isHealthy) {\n      this._log('_reconnect() - Abort (1) since already connecting or healthy');\n      return;\n    }\n\n    // reconnect in case of on error or on close\n    // also reconnect if the health check cycle fails\n    let interval = options.interval;\n    if (!interval) {\n      interval = retryInterval(this.consecutiveFailures);\n    }\n    // reconnect, or try again after a little while...\n    await sleep(interval);\n\n    // Check once again if by some other call to _reconnect is active or connection is\n    // already restored, then no need to proceed.\n    if (this.isConnecting || this.isHealthy) {\n      this._log('_reconnect() - Abort (2) since already connecting or healthy');\n      return;\n    }\n\n    if (this.isDisconnected) {\n      this._log('_reconnect() - Abort (3) since disconnect() is called');\n      return;\n    }\n\n    this._log('_reconnect() - Destroying current WS connection');\n\n    // cleanup the old connection\n    this._destroyCurrentWSConnection();\n\n    if (options.refreshToken) {\n      await this.client.tokenManager.loadToken();\n    }\n\n    try {\n      await this._connect();\n      this._log('_reconnect() - Waiting for recoverCallBack');\n      // await this.client.recoverState();\n      this._log('_reconnect() - Finished recoverCallBack');\n\n      this.consecutiveFailures = 0;\n    } catch (error: any) {\n      this.isHealthy = false;\n      this.consecutiveFailures += 1;\n      if (\n        error.code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        this._log(\n          '_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n\n        return this._reconnect({ refreshToken: true });\n      }\n\n      // reconnect on WS failures, don't reconnect if there is a code bug\n      if (error.isWSFailure) {\n        this._log('_reconnect() - WS failure, so going to try to reconnect');\n\n        this._reconnect();\n      }\n    }\n    this._log('_reconnect() - == END ==');\n  }\n\n  /**\n   * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n   *\n   * @param {Event} event Event with type online or offline\n   *\n   */\n  onlineStatusChanged = (event: Event) => {\n    if (event.type === 'offline') {\n      // mark the connection as down\n      this._log('onlineStatusChanged() - Status changing to offline');\n      // we know that the app is offline so dispatch the unhealthy connection event immediately\n      this._setHealth(false, true);\n    } else if (event.type === 'online') {\n      // retry right now...\n      // We check this.isHealthy, not sure if it's always\n      // smart to create a new WS connection if the old one is still up and running.\n      // it's possible we didn't miss any messages, so this process is just expensive and not needed.\n      this._log(\n        `onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`,\n      );\n      if (!this.isHealthy) {\n        this._reconnect({ interval: 10 });\n      }\n    }\n  };\n\n  onopen = (wsID: number) => {\n    if (this.wsID !== wsID) return;\n\n    const user = this.client.user;\n    if (!user) {\n      this.client.logger.error(`User not set, can't connect to WS`);\n      return;\n    }\n\n    const token = this.client._getToken();\n    if (!token) {\n      this.client.logger.error(`Token not set, can't connect authenticate`);\n      return;\n    }\n\n    const authMessage = JSON.stringify({\n      token,\n      user_details: {\n        id: user.id,\n        name: user.name,\n        image: user.image,\n        custom: user.custom,\n      },\n    } as WSAuthMessage);\n\n    this._log(`onopen() - Sending auth message ${authMessage}`, {}, 'trace');\n\n    this.ws?.send(authMessage);\n    this._log('onopen() - onopen callback', { wsID });\n  };\n\n  onmessage = (wsID: number, event: MessageEvent) => {\n    if (this.wsID !== wsID) return;\n\n    const data =\n      typeof event.data === 'string'\n        ? (JSON.parse(event.data) as StreamVideoEvent)\n        : null;\n\n    // we wait till the first message before we consider the connection open.\n    // the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n    // after that a ws.onclose.\n    if (\n      !this.isConnectionOpenResolved &&\n      data &&\n      data.type === 'connection.error'\n    ) {\n      this.isConnectionOpenResolved = true;\n      if (data.error) {\n        this.rejectConnectionOpen?.(this._errorFromWSEvent(data, false));\n        return;\n      }\n    }\n\n    // trigger the event..\n    this.lastEvent = new Date();\n\n    if (\n      data &&\n      (data.type === 'health.check' || data.type === 'connection.ok')\n    ) {\n      // the initial health-check should come from the client\n      this.scheduleNextPing();\n    }\n\n    if (data && data.type === 'connection.ok') {\n      this.resolveConnectionOpen?.(data);\n      this._setHealth(true);\n    }\n\n    if (data && data.type === 'connection.error' && data.error) {\n      const { code } = data.error;\n      this.isHealthy = false;\n      this.isConnecting = false;\n      this.consecutiveFailures += 1;\n      if (\n        code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        clearTimeout(this.connectionCheckTimeoutRef);\n        this._log(\n          'connect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n        this._reconnect({ refreshToken: true });\n      }\n    }\n\n    if (data) {\n      data.received_at = new Date();\n      this.client.dispatchEvent(data);\n    }\n    this.scheduleConnectionCheck();\n  };\n\n  onclose = (wsID: number, event: CloseEvent) => {\n    if (this.wsID !== wsID) return;\n\n    this._log('onclose() - onclose callback - ' + event.code, { event, wsID });\n\n    if (event.code === KnownCodes.WS_CLOSED_SUCCESS) {\n      // this is a permanent error raised by stream..\n      // usually caused by invalid auth details\n      const error = new Error(\n        `WS connection reject with error ${event.reason}`,\n      );\n\n      // @ts-expect-error type issue\n      error.reason = event.reason;\n      // @ts-expect-error type issue\n      error.code = event.code;\n      // @ts-expect-error type issue\n      error.wasClean = event.wasClean;\n      // @ts-expect-error type issue\n      error.target = event.target;\n\n      this.rejectConnectionOpen?.(error);\n      this._log(`onclose() - WS connection reject with error ${event.reason}`, {\n        event,\n      });\n    } else {\n      this.consecutiveFailures += 1;\n      this.totalFailures += 1;\n      this._setHealth(false);\n      this.isConnecting = false;\n\n      this.rejectConnectionOpen?.(this._errorFromWSEvent(event));\n\n      this._log(`onclose() - WS connection closed. Calling reconnect ...`, {\n        event,\n      });\n\n      // reconnect if its an abnormal failure\n      this._reconnect();\n    }\n  };\n\n  onerror = (wsID: number, event: Event) => {\n    if (this.wsID !== wsID) return;\n\n    this.consecutiveFailures += 1;\n    this.totalFailures += 1;\n    this._setHealth(false);\n    this.isConnecting = false;\n    this._log(`onerror() - WS connection resulted into error`, { event });\n\n    this._reconnect();\n  };\n\n  /**\n   * _setHealth - Sets the connection to healthy or unhealthy.\n   * Broadcasts an event in case the connection status changed.\n   *\n   * @param {boolean} healthy boolean indicating if the connection is healthy or not\n   * @param {boolean} dispatchImmediately boolean indicating to dispatch event immediately even if the connection is unhealthy\n   */\n  _setHealth = (healthy: boolean, dispatchImmediately = false) => {\n    if (healthy === this.isHealthy) return;\n\n    this.isHealthy = healthy;\n\n    if (this.isHealthy || dispatchImmediately) {\n      this.client.dispatchEvent({\n        type: 'connection.changed',\n        online: this.isHealthy,\n      });\n      return;\n    }\n\n    // we're offline, wait few seconds and fire and event if still offline\n    setTimeout(() => {\n      if (this.isHealthy) return;\n      this.client.dispatchEvent({\n        type: 'connection.changed',\n        online: this.isHealthy,\n      });\n    }, 5000);\n  };\n\n  /**\n   * _errorFromWSEvent - Creates an error object for the WS event\n   */\n  private _errorFromWSEvent = (\n    event: CloseEvent | ConnectionErrorEvent,\n    isWSFailure = true,\n  ) => {\n    let code: number;\n    let statusCode: number;\n    let message: string;\n    if (isCloseEvent(event)) {\n      code = event.code;\n      message = event.reason;\n      statusCode = 0;\n    } else {\n      const { error } = event;\n      code = error.code;\n      message = error.message;\n      statusCode = error.StatusCode;\n    }\n\n    const msg = `WS failed with code: ${code}: ${APIErrorCodes[code] || code} and reason: ${message}`;\n    this._log(msg, { event }, 'warn');\n    const error = new Error(msg) as Error & {\n      code?: number;\n      isWSFailure?: boolean;\n      StatusCode?: number;\n    };\n    error.code = code;\n    /**\n     * StatusCode does not exist on any event types but has been left\n     * as is to preserve JS functionality during the TS implementation\n     */\n    error.StatusCode = statusCode;\n    error.isWSFailure = isWSFailure;\n    return error;\n  };\n\n  /**\n   * _destroyCurrentWSConnection - Removes the current WS connection\n   *\n   */\n  _destroyCurrentWSConnection() {\n    // increment the ID, meaning we will ignore all messages from the old\n    // ws connection from now on.\n    this.wsID += 1;\n\n    try {\n      this?.ws?.close();\n    } catch {\n      // we don't care\n    }\n  }\n\n  /**\n   * _setupPromise - sets up the this.connectOpen promise\n   */\n  _setupConnectionPromise = () => {\n    this.isConnectionOpenResolved = false;\n    /** a promise that is resolved once ws.open is called */\n    this.connectionOpenSafe = makeSafePromise(\n      new Promise<ConnectedEvent>((resolve, reject) => {\n        this.resolveConnectionOpen = resolve;\n        this.rejectConnectionOpen = reject;\n      }),\n    );\n  };\n\n  get connectionOpen() {\n    return this.connectionOpenSafe?.();\n  }\n\n  /**\n   * Schedules a next health check ping for websocket.\n   */\n  scheduleNextPing = () => {\n    const timers = getTimers();\n    if (this.healthCheckTimeoutRef) {\n      timers.clearTimeout(this.healthCheckTimeoutRef);\n    }\n\n    // 30 seconds is the recommended interval (messenger uses this)\n    this.healthCheckTimeoutRef = timers.setTimeout(() => {\n      // send the healthcheck..., server replies with a health check event\n      const data = [{ type: 'health.check', client_id: this.client.clientID }];\n      // try to send on the connection\n      try {\n        this.ws?.send(JSON.stringify(data));\n      } catch {\n        // error will already be detected elsewhere\n      }\n    }, this.pingInterval);\n  };\n\n  /**\n   * scheduleConnectionCheck - schedules a check for time difference between last received event and now.\n   * If the difference is more than 35 seconds, it means our health check logic has failed and websocket needs\n   * to be reconnected.\n   */\n  scheduleConnectionCheck = () => {\n    clearTimeout(this.connectionCheckTimeoutRef);\n    this.connectionCheckTimeoutRef = setTimeout(() => {\n      const now = new Date();\n      if (\n        this.lastEvent &&\n        now.getTime() - this.lastEvent.getTime() > this.connectionCheckTimeout\n      ) {\n        this._log('scheduleConnectionCheck - going to reconnect');\n        this._setHealth(false);\n        this._reconnect();\n      }\n    }, this.connectionCheckTimeout);\n  };\n}\n","export function getUserFromToken(token: string) {\n  const fragments = token.split('.');\n  if (fragments.length !== 3) {\n    return '';\n  }\n  const b64Payload = fragments[1];\n  const payload = decodeBase64(b64Payload);\n  const data = JSON.parse(payload);\n  return data.user_id as string | undefined;\n}\n\n// base-64 decoder throws exception if encoded string is not padded by '=' to make string length\n// in multiples of 4. So gonna use our own method for this purpose to keep backwards compatibility\n// https://github.com/beatgammit/base64-js/blob/master/index.js#L26\nconst decodeBase64 = (s: string): string => {\n  const e = {} as { [key: string]: number },\n    w = String.fromCharCode,\n    L = s.length;\n  let i,\n    b = 0,\n    c,\n    x,\n    l = 0,\n    a,\n    r = '';\n  const A = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (i = 0; i < 64; i++) {\n    e[A.charAt(i)] = i;\n  }\n  for (x = 0; x < L; x++) {\n    c = e[s.charAt(x)];\n    b = (b << 6) + c;\n    l += 6;\n    while (l >= 8) {\n      if ((a = (b >>> (l -= 8)) & 0xff) || x < L - 2) r += w(a);\n    }\n  }\n  return r;\n};\n","import { getUserFromToken } from './signing';\nimport { isFunction } from './utils';\nimport type { TokenOrProvider, UserWithId } from './types';\n\n/**\n * TokenManager\n *\n * Handles all the operations around user token.\n */\nexport class TokenManager {\n  private loadTokenPromise: Promise<string> | null = null;\n  private type: 'static' | 'provider' = 'static';\n  private readonly secret?: string;\n  private token?: string;\n  private tokenProvider?: TokenOrProvider;\n  private user?: UserWithId;\n  private isAnonymous?: boolean;\n\n  constructor(secret?: string) {\n    this.secret = secret;\n  }\n\n  /**\n   * Set the static string token or token provider.\n   * Token provider should return a token string or a promise which resolves to string token.\n   *\n   * @param {TokenOrProvider} tokenOrProvider - the token or token provider.\n   * @param {UserResponse} user - the user object.\n   * @param {boolean} isAnonymous - whether the user is anonymous or not.\n   */\n  setTokenOrProvider = async (\n    tokenOrProvider: TokenOrProvider,\n    user: UserWithId,\n    isAnonymous: boolean,\n  ) => {\n    this.user = user;\n    this.isAnonymous = isAnonymous;\n    this.validateToken(tokenOrProvider);\n\n    if (isFunction(tokenOrProvider)) {\n      this.tokenProvider = tokenOrProvider;\n      this.type = 'provider';\n    }\n\n    if (typeof tokenOrProvider === 'string') {\n      this.token = tokenOrProvider;\n      this.type = 'static';\n    }\n\n    await this.loadToken();\n  };\n\n  /**\n   * Resets the token manager.\n   * Useful for client disconnection or switching user.\n   */\n  reset = () => {\n    this.token = undefined;\n    this.tokenProvider = undefined;\n    this.type = 'static';\n    this.user = undefined;\n    this.loadTokenPromise = null;\n  };\n\n  // Validates the user token.\n  validateToken = (tokenOrProvider: TokenOrProvider) => {\n    // allow empty token for anon user\n    if (this.user && this.isAnonymous && !tokenOrProvider) return;\n\n    // Don't allow empty token for non-server side client.\n    if (!this.secret && !tokenOrProvider) {\n      throw new Error('User token can not be empty');\n    }\n\n    if (typeof tokenOrProvider !== 'string' && !isFunction(tokenOrProvider)) {\n      throw new Error('User token should either be a string or a function');\n    }\n\n    if (typeof tokenOrProvider === 'string') {\n      // Allow empty token for anonymous users\n      if (this.isAnonymous && tokenOrProvider === '') return;\n\n      const tokenUserId = getUserFromToken(tokenOrProvider);\n      if (\n        tokenOrProvider != null &&\n        (tokenUserId == null ||\n          tokenUserId === '' ||\n          (!this.isAnonymous && tokenUserId !== this.user!.id))\n      ) {\n        throw new Error(\n          'userToken does not have a user_id or is not matching with user.id',\n        );\n      }\n    }\n  };\n\n  // Resolves when token is ready. This function is simply to check if loadToken is in progress, in which\n  // case a function should wait.\n  tokenReady = () => this.loadTokenPromise;\n\n  // Fetches a token from tokenProvider function and sets in tokenManager.\n  // In case of static token, it will simply resolve to static token.\n  loadToken = () => {\n    this.loadTokenPromise = new Promise(async (resolve, reject) => {\n      if (this.type === 'static') {\n        return resolve(this.token as string);\n      }\n\n      if (this.tokenProvider && typeof this.tokenProvider !== 'string') {\n        try {\n          const token = await this.tokenProvider();\n          this.validateToken(token);\n          this.token = token;\n        } catch (e) {\n          return reject(\n            new Error(`Call to tokenProvider failed with message: ${e}`, {\n              cause: e,\n            }),\n          );\n        }\n        resolve(this.token);\n      }\n    });\n\n    return this.loadTokenPromise;\n  };\n\n  // Returns a current token\n  getToken = () => {\n    if (this.token) {\n      return this.token;\n    }\n\n    if (this.user && !this.token) {\n      return this.token;\n    }\n\n    throw new Error(\n      `User token is not set. Either client.connectUser wasn't called or client.disconnect was called`,\n    );\n  };\n\n  isStatic = () => this.type === 'static';\n}\n","import { videoLoggerSystem } from '../../logger';\n\nexport const getLocationHint = async (\n  hintUrl = `https://hint.stream-io-video.com/`,\n  timeout = 2000,\n  maxAttempts = 3,\n): Promise<string> => {\n  const logger = videoLoggerSystem.getLogger('location-hint');\n\n  let attempt = 0;\n  let locationHint = 'ERR';\n  do {\n    const abortController = new AbortController();\n    const timeoutId = setTimeout(() => abortController.abort(), timeout);\n    try {\n      const response = await fetch(hintUrl, {\n        method: 'HEAD',\n        signal: abortController.signal,\n      });\n      const awsPop = response.headers.get('x-amz-cf-pop') || 'ERR';\n      logger.debug(`Location header: ${awsPop}`);\n      locationHint = awsPop.substring(0, 3); // AMS1-P2 -> AMS\n    } catch (e) {\n      logger.warn(`Failed to get location hint from ${hintUrl}`, e);\n      locationHint = 'ERR';\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  } while (locationHint === 'ERR' && ++attempt < maxAttempts);\n\n  return locationHint;\n};\n","import axios, {\n  AxiosError,\n  AxiosInstance,\n  AxiosRequestConfig,\n  AxiosResponse,\n} from 'axios';\nimport https from 'https';\nimport { StableWSConnection } from './connection';\nimport { TokenManager } from './token_manager';\nimport {\n  addConnectionEventListeners,\n  generateUUIDv4,\n  isErrorResponse,\n  KnownCodes,\n  removeConnectionEventListeners,\n  retryInterval,\n  sleep,\n} from './utils';\nimport {\n  AllClientEvents,\n  AllClientEventTypes,\n  APIErrorResponse,\n  ClientEventListener,\n  ConnectAPIResponse,\n  ErrorFromResponse,\n  StreamClientOptions,\n  StreamVideoEvent,\n  TokenOrProvider,\n  User,\n  UserWithId,\n} from './types';\nimport { getLocationHint } from './location';\nimport {\n  ConnectedEvent,\n  CreateGuestRequest,\n  CreateGuestResponse,\n} from '../../gen/coordinator';\nimport { makeSafePromise, type SafePromise } from '../../helpers/promise';\nimport { ScopedLogger, videoLoggerSystem } from '../../logger';\n\nexport class StreamClient {\n  _user?: UserWithId;\n  anonymous: boolean;\n  persistUserOnConnectionFailure?: boolean;\n  axiosInstance: AxiosInstance;\n  baseURL?: string;\n  browser: boolean;\n  clientID?: string;\n  key: string;\n  listeners: Partial<\n    Record<AllClientEventTypes, ClientEventListener<any>[] | undefined>\n  > = {};\n  logger: ScopedLogger;\n\n  private locationHint: Promise<string> | undefined;\n\n  node: boolean;\n  options: StreamClientOptions;\n  secret?: string;\n  connectUserTask: ConnectAPIResponse | null;\n  tokenManager: TokenManager;\n  user?: UserWithId;\n  private cachedUserAgent?: string;\n  userID?: string;\n  wsBaseURL?: string;\n  wsConnection: StableWSConnection | null;\n  private wsPromiseSafe: SafePromise<ConnectedEvent | undefined> | null;\n  consecutiveFailures: number;\n  defaultWSTimeout: number;\n  resolveConnectionId?: Function;\n  rejectConnectionId?: Function;\n  private connectionIdPromiseSafe?: SafePromise<string | undefined>;\n  guestUserCreatePromise?: Promise<CreateGuestResponse>;\n\n  /**\n   * Initialize a client.\n   *\n   * @param {string} key - the api key\n   * @param {StreamClientOptions} [options] - additional options, here you can pass custom options to axios instance\n   * @param {string} [options.secret] - the api secret\n   * @param {boolean} [options.browser] - enforce the client to be in browser mode\n   * @param {boolean} [options.warmUp] - default to false, if true, client will open a connection as soon as possible to speed up following requests\n   * @param {Logger} [options.Logger] - custom logger\n   * @param {number} [options.timeout] - default to 3000\n   * @param {httpsAgent} [options.httpsAgent] - custom httpsAgent, in node it's default to https.agent()\n   */\n  constructor(key: string, options?: StreamClientOptions) {\n    // set the key\n    this.key = key;\n\n    // set the secret\n    this.secret = options?.secret;\n\n    // set the options... and figure out defaults...\n    const inputOptions = options\n      ? options\n      : ({\n          browser: typeof window !== 'undefined',\n        } as Partial<StreamClientOptions>);\n\n    this.browser = inputOptions.browser || typeof window !== 'undefined';\n    this.node = !this.browser;\n\n    if (this.browser) {\n      this.locationHint = getLocationHint(\n        options?.locationHintUrl,\n        options?.locationHintTimeout,\n        options?.locationHintMaxAttempts,\n      );\n    }\n\n    this.options = {\n      timeout: 5000,\n      withCredentials: false, // making sure cookies are not sent\n      ...inputOptions,\n    };\n\n    if (this.node && !this.options.httpsAgent) {\n      this.options.httpsAgent = new https.Agent({\n        keepAlive: true,\n        keepAliveMsecs: 3000,\n      });\n    }\n\n    this.setBaseURL(\n      this.options.baseURL || 'https://video.stream-io-api.com/video',\n    );\n\n    this.axiosInstance = axios.create({\n      ...this.options,\n      baseURL: this.baseURL,\n    });\n\n    // WS connection is initialized when setUser is called\n    this.wsConnection = null;\n    this.wsPromiseSafe = null;\n    this.connectUserTask = null;\n\n    // mapping between channel groups and configs\n    this.anonymous = false;\n    this.persistUserOnConnectionFailure =\n      this.options?.persistUserOnConnectionFailure;\n\n    // If it is a server-side client, then lets initialize the tokenManager, since token will be\n    // generated from secret.\n    this.tokenManager = new TokenManager(this.secret);\n    this.consecutiveFailures = 0;\n\n    this.defaultWSTimeout = this.options.defaultWsTimeout ?? 15000;\n\n    this.logger = videoLoggerSystem.getLogger('coordinator');\n  }\n\n  getAuthType = () => {\n    return this.anonymous ? 'anonymous' : 'jwt';\n  };\n\n  setBaseURL = (baseURL: string) => {\n    this.baseURL = baseURL;\n    this.wsBaseURL = this.baseURL\n      .replace('http', 'ws')\n      .replace(':3030', ':8800');\n  };\n\n  getLocationHint = async (\n    hintUrl?: string,\n    timeout?: number,\n  ): Promise<string> => {\n    const hint = await this.locationHint;\n    if (!hint || hint === 'ERR') {\n      this.locationHint = getLocationHint(\n        hintUrl ?? this.options.locationHintUrl,\n        timeout ?? this.options.locationHintTimeout,\n      );\n      return this.locationHint;\n    }\n    return hint;\n  };\n\n  _getConnectionID = () => this.wsConnection?.connectionID;\n\n  _hasConnectionID = () => Boolean(this._getConnectionID());\n\n  /**\n   * connectUser - Set the current user and open a WebSocket connection\n   *\n   * @param user Data about this user. IE {name: \"john\"}\n   * @param {TokenOrProvider} tokenOrProvider Token or provider\n   *\n   * @return {ConnectAPIResponse} Returns a promise that resolves when the connection is setup\n   */\n  connectUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ): ConnectAPIResponse => {\n    if (!user.id) {\n      throw new Error('The \"id\" field on the user is missing');\n    }\n\n    /**\n     * Calling connectUser multiple times is potentially the result of a  bad integration, however,\n     * If the user id remains the same we don't throw error\n     */\n    if (this.userID === user.id && this.connectUserTask) {\n      this.logger.warn(\n        'Consecutive calls to connectUser is detected, ideally you should only call this function once in your app.',\n      );\n      return this.connectUserTask;\n    }\n\n    if (this.userID) {\n      throw new Error(\n        'Use client.disconnect() before trying to connect as a different user. connectUser was called twice.',\n      );\n    }\n\n    if ((this.secret || this.node) && !this.options.allowServerSideConnect) {\n      this.logger.warn(\n        'Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/',\n      );\n    }\n\n    // we generate the client id client side\n    this.userID = user.id;\n    this.anonymous = false;\n    await this.tokenManager.setTokenOrProvider(tokenOrProvider, user, false);\n    this._setUser(user);\n\n    this.connectUserTask = this.openConnection();\n\n    try {\n      addConnectionEventListeners(this.updateNetworkConnectionStatus);\n      return await this.connectUserTask;\n    } catch (err) {\n      if (this.persistUserOnConnectionFailure) {\n        // cleanup client to allow the user to retry connectUser again\n        await this.closeConnection();\n      } else {\n        await this.disconnectUser();\n      }\n      throw err;\n    }\n  };\n\n  _setUser = (user: UserWithId) => {\n    /**\n     * This one is used by the frontend. This is a copy of the current user object stored on backend.\n     * It contains reserved properties and own user properties which are not present in `this._user`.\n     */\n    this.user = user;\n    this.userID = user.id;\n    // this one is actually used for requests. This is a copy of current user provided to `connectUser` function.\n    this._user = { ...user };\n  };\n\n  /**\n   * Disconnects the websocket connection, without removing the user set on client.\n   * client.closeConnection will not trigger default auto-retry mechanism for reconnection. You need\n   * to call client.openConnection to reconnect to websocket.\n   *\n   * This is mainly useful on mobile side. You can only receive push notifications\n   * if you don't have active websocket connection.\n   * So when your app goes to background, you can call `client.closeConnection`.\n   * And when app comes back to foreground, call `client.openConnection`.\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming succesful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  closeConnection = async (timeout?: number) => {\n    await this.wsConnection?.disconnect(timeout);\n  };\n\n  /**\n   * Creates a new WebSocket connection with the current user. Returns empty promise, if there is an active connection\n   */\n  openConnection = async () => {\n    if (!this.userID) {\n      throw Error(\n        'UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead',\n      );\n    }\n\n    const wsPromise = this.wsPromiseSafe?.();\n    if (this.wsConnection?.isConnecting && wsPromise) {\n      this.logger.info(\n        'client:openConnection() - connection already in progress',\n      );\n      return await wsPromise;\n    }\n\n    if (this.wsConnection?.isHealthy && this._hasConnectionID()) {\n      this.logger.info(\n        'client:openConnection() - openConnection called twice, healthy connection already exists',\n      );\n\n      return;\n    }\n\n    this._setupConnectionIdPromise();\n\n    this.clientID = `${this.userID}--${generateUUIDv4()}`;\n    const newWsPromise = this.connect();\n    this.wsPromiseSafe = makeSafePromise(newWsPromise);\n    return await newWsPromise;\n  };\n\n  /**\n   * Disconnects the websocket and removes the user from client.\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  disconnectUser = async (timeout?: number) => {\n    this.logger.info('client:disconnect() - Disconnecting the client');\n\n    // remove the user specific fields\n    delete this.user;\n    delete this._user;\n    delete this.userID;\n\n    this.anonymous = false;\n\n    await this.closeConnection(timeout);\n    removeConnectionEventListeners(this.updateNetworkConnectionStatus);\n\n    this.tokenManager.reset();\n\n    this.connectionIdPromiseSafe = undefined;\n    this.rejectConnectionId = undefined;\n    this.resolveConnectionId = undefined;\n  };\n\n  connectGuestUser = async (user: User & { type: 'guest' }) => {\n    this.guestUserCreatePromise = this.doAxiosRequest<\n      CreateGuestResponse,\n      CreateGuestRequest\n    >('post', '/guest', { user }, { publicEndpoint: true });\n\n    const response = await this.guestUserCreatePromise;\n    this.guestUserCreatePromise.finally(\n      () => (this.guestUserCreatePromise = undefined),\n    );\n\n    return this.connectUser(response.user, response.access_token);\n  };\n\n  /**\n   * connectAnonymousUser - Set an anonymous user and open a WebSocket connection\n   */\n  connectAnonymousUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ) => {\n    addConnectionEventListeners(this.updateNetworkConnectionStatus);\n    this._setupConnectionIdPromise();\n\n    this.anonymous = true;\n    await this.tokenManager.setTokenOrProvider(tokenOrProvider, user, true);\n\n    this._setUser(user);\n    // some endpoints require a connection_id to be resolved.\n    // as anonymous users aren't allowed to open WS connections, we just\n    // resolve the connection_id here.\n    this.resolveConnectionId?.();\n  };\n\n  /**\n   * on - Listen to events on all channels and users your watching\n   *\n   * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n   *\n   * @param eventName The event type to listen for (optional)\n   * @param callback The callback to call\n   *\n   * @return  Returns a function which, when called, unsubscribes the event handler.\n   */\n  on = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.logger.debug(`Adding listener for ${eventName} event`);\n    this.listeners[eventName]?.push(callback as ClientEventListener<any>);\n    return () => {\n      this.off(eventName, callback);\n    };\n  };\n\n  /**\n   * off - Remove the event handler\n   */\n  off = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.logger.debug(`Removing listener for ${eventName} event`);\n    this.listeners[eventName] = this.listeners[eventName]?.filter(\n      (value) => value !== callback,\n    );\n  };\n\n  /**\n   * sets up the this.connectionIdPromise\n   */\n  _setupConnectionIdPromise = () => {\n    /** a promise that is resolved once connection id is set */\n    this.connectionIdPromiseSafe = makeSafePromise(\n      new Promise<string | undefined>((resolve, reject) => {\n        this.resolveConnectionId = resolve;\n        this.rejectConnectionId = reject;\n      }),\n    );\n  };\n\n  get connectionIdPromise() {\n    return this.connectionIdPromiseSafe?.();\n  }\n\n  get isConnectionIsPromisePending() {\n    return this.connectionIdPromiseSafe?.checkPending() ?? false;\n  }\n\n  get wsPromise() {\n    return this.wsPromiseSafe?.();\n  }\n\n  _logApiRequest = (\n    type: string,\n    url: string,\n    data: unknown,\n    config: AxiosRequestConfig & {\n      config?: AxiosRequestConfig & { maxBodyLength?: number };\n    },\n  ) => {\n    if (this.logger.getLogLevel() !== 'trace') return;\n    this.logger.trace(`client: ${type} - Request - ${url}`, {\n      payload: data,\n      config,\n    });\n  };\n\n  _logApiResponse = <T>(\n    type: string,\n    url: string,\n    response: AxiosResponse<T>,\n  ) => {\n    if (this.logger.getLogLevel() !== 'trace') return;\n    this.logger.trace(\n      `client:${type} - Response - url: ${url} > status ${response.status}`,\n      {\n        response,\n      },\n    );\n  };\n\n  doAxiosRequest = async <T, D = unknown>(\n    type: string,\n    url: string,\n    data?: D,\n    options: AxiosRequestConfig & {\n      config?: AxiosRequestConfig & { maxBodyLength?: number };\n      publicEndpoint?: boolean;\n    } = {},\n  ): Promise<T> => {\n    if (!options.publicEndpoint) {\n      await Promise.all([\n        this.tokenManager.tokenReady(),\n        this.guestUserCreatePromise,\n      ]);\n      // we need to wait for presence of connection id before making requests\n      try {\n        await this.connectionIdPromise;\n      } catch {\n        // in case connection id was rejected\n        // reconnection maybe in progress\n        // we can wait for healthy connection to resolve, which rejects when 15s timeout is reached\n        await this.wsConnection?._waitForHealthy();\n        await this.connectionIdPromise;\n      }\n    }\n    const requestConfig = this._enrichAxiosOptions(options);\n    try {\n      let response: AxiosResponse<T>;\n      this._logApiRequest(type, url, data, requestConfig);\n      switch (type) {\n        case 'get':\n          response = await this.axiosInstance.get(url, requestConfig);\n          break;\n        case 'delete':\n          response = await this.axiosInstance.delete(url, requestConfig);\n          break;\n        case 'post':\n          response = await this.axiosInstance.post(url, data, requestConfig);\n          break;\n        case 'put':\n          response = await this.axiosInstance.put(url, data, requestConfig);\n          break;\n        case 'patch':\n          response = await this.axiosInstance.patch(url, data, requestConfig);\n          break;\n        case 'options':\n          response = await this.axiosInstance.options(url, requestConfig);\n          break;\n        default:\n          throw new Error('Invalid request type');\n      }\n      this._logApiResponse<T>(type, url, response);\n      this.consecutiveFailures = 0;\n      return response.data;\n    } catch (e: any /**TODO: generalize error types  */) {\n      e.client_request_id = requestConfig.headers?.['x-client-request-id'];\n\n      this.consecutiveFailures += 1;\n      const { response } = e;\n      if (!response || !isErrorResponse(response)) {\n        this.logger.error(`client:${type} url: ${url}`, e);\n        throw e as AxiosError<APIErrorResponse>;\n      }\n\n      const { data: responseData, status } = response;\n      const isTokenExpired = responseData.code === KnownCodes.TOKEN_EXPIRED;\n      if (isTokenExpired && !this.tokenManager.isStatic()) {\n        this.logger.warn(`client:${type}: url: ${url}`, response);\n        if (this.consecutiveFailures > 1) {\n          await sleep(retryInterval(this.consecutiveFailures));\n        }\n        // refresh and retry the request\n        await this.tokenManager.loadToken();\n        return await this.doAxiosRequest<T, D>(type, url, data, options);\n      } else {\n        this.logger.error(`client:${type} url: ${url}`, response);\n        throw new ErrorFromResponse<APIErrorResponse>({\n          message: `Stream error code ${responseData.code}: ${responseData.message}`,\n          code: responseData.code ?? null,\n          unrecoverable: responseData.unrecoverable ?? null,\n          response: response,\n          status: status,\n        });\n      }\n    }\n  };\n\n  get = <T>(url: string, params?: AxiosRequestConfig['params']) => {\n    return this.doAxiosRequest<T, unknown>('get', url, null, {\n      params,\n    });\n  };\n\n  put = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('put', url, data, { params });\n  };\n\n  post = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('post', url, data, { params });\n  };\n\n  patch = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('patch', url, data, { params });\n  };\n\n  delete = <T>(url: string, params?: AxiosRequestConfig['params']) => {\n    return this.doAxiosRequest<T, unknown>('delete', url, null, {\n      params,\n    });\n  };\n\n  dispatchEvent = (event: StreamVideoEvent) => {\n    this.logger.debug(`Dispatching event: ${event.type}`, event);\n    if (!this.listeners) return;\n\n    // call generic listeners\n    for (const listener of this.listeners.all || []) {\n      listener(event);\n    }\n\n    // call type specific listeners\n    for (const listener of this.listeners[event.type] || []) {\n      listener(event);\n    }\n  };\n\n  /**\n   * @private\n   */\n  connect = async () => {\n    if (!this.userID || !this._user) {\n      throw Error(\n        'Call connectUser or connectAnonymousUser before starting the connection',\n      );\n    }\n    if (!this.wsBaseURL) throw Error('Websocket base url not set');\n    if (!this.clientID) throw Error('clientID is not set');\n\n    // The StableWSConnection handles all the reconnection logic.\n    this.wsConnection = new StableWSConnection(this);\n\n    this.logger.info('StreamClient.connect: this.wsConnection.connect()');\n    return await this.wsConnection.connect(this.defaultWSTimeout);\n  };\n\n  getUserAgent = (): string => {\n    if (!this.cachedUserAgent) {\n      const { clientAppIdentifier = {} } = this.options;\n      const {\n        sdkName = 'js',\n        sdkVersion = process.env.PKG_VERSION || '0.0.0',\n        ...extras\n      } = clientAppIdentifier;\n\n      this.cachedUserAgent = [\n        `stream-video-${sdkName}-v${sdkVersion}`,\n        ...Object.entries(extras).map(([key, value]) => `${key}=${value}`),\n        `client_bundle=${process.env.CLIENT_BUNDLE || (this.node ? 'node' : 'browser')}`,\n      ].join('|');\n    }\n\n    return this.cachedUserAgent;\n  };\n\n  _enrichAxiosOptions = (\n    options: AxiosRequestConfig & { config?: AxiosRequestConfig } & {\n      publicEndpoint?: boolean;\n    } = {\n      params: {},\n      headers: {},\n      config: {},\n    },\n  ): AxiosRequestConfig => {\n    const token =\n      options.publicEndpoint && !this.user ? undefined : this._getToken();\n    const authorization = token ? { Authorization: token } : undefined;\n\n    if (!options.headers?.['x-client-request-id']) {\n      options.headers = {\n        ...options.headers,\n        'x-client-request-id': generateUUIDv4(),\n      };\n    }\n\n    const {\n      params: axiosConfigParams,\n      headers: axiosConfigHeaders,\n      ...axiosRequestConfig\n    } = this.options.axiosRequestConfig || {};\n\n    return {\n      params: {\n        user_id: this.userID,\n        connection_id: this._getConnectionID(),\n        api_key: this.key,\n        ...options.params,\n        ...axiosConfigParams,\n      },\n      headers: {\n        ...authorization,\n        'stream-auth-type':\n          options.publicEndpoint && !this.user\n            ? 'anonymous'\n            : this.getAuthType(),\n        'X-Stream-Client': this.getUserAgent(),\n        ...options.headers,\n        ...axiosConfigHeaders,\n      },\n      ...options.config,\n      ...axiosRequestConfig,\n    };\n  };\n\n  _getToken = () => {\n    if (!this.tokenManager) return null;\n\n    return this.tokenManager.getToken();\n  };\n\n  updateNetworkConnectionStatus = (\n    event: { type: 'online' | 'offline' } | Event,\n  ) => {\n    if (event.type === 'offline') {\n      this.logger.debug('device went offline');\n      this.dispatchEvent({ type: 'network.changed', online: false });\n    } else if (event.type === 'online') {\n      this.logger.debug('device went online');\n      this.dispatchEvent({ type: 'network.changed', online: true });\n    }\n  };\n}\n","import type {\n  ClientAppIdentifier,\n  StreamClientOptions,\n  TokenOrProvider,\n  User,\n} from '../coordinator/connection/types';\nimport { StreamClient } from '../coordinator/connection/client';\nimport { getSdkInfo } from './client-details';\nimport { SdkType } from '../gen/video/sfu/models/models';\nimport type { StreamVideoClientOptions } from '../StreamVideoClient';\n\n/**\n * Utility function to get the instance key.\n */\nexport const getInstanceKey = (apiKey: string, user: User) => {\n  return `${apiKey}/${user.id}`;\n};\n\n/**\n * Returns a concurrency tag for call initialization.\n * @internal\n *\n * @param cid the call cid.\n */\nexport const getCallInitConcurrencyTag = (cid: string) => `call.init-${cid}`;\n\n/**\n * Utility function to get the client app identifier.\n */\nconst getClientAppIdentifier = (\n  options?: StreamClientOptions,\n): ClientAppIdentifier => {\n  const appId = options?.clientAppIdentifier || {};\n  const sdkInfo = getSdkInfo();\n  if (sdkInfo) {\n    // ensure the sdk name and version are set correctly,\n    // overriding any user-provided values\n    appId.sdkName = SdkType[sdkInfo.type].toLowerCase();\n    appId.sdkVersion = `${sdkInfo.major}.${sdkInfo.minor}.${sdkInfo.patch}`;\n  }\n  return appId;\n};\n\n/**\n * Creates a coordinator client.\n */\nexport const createCoordinatorClient = (\n  apiKey: string,\n  options: StreamClientOptions | undefined,\n) => {\n  const clientAppIdentifier = getClientAppIdentifier(options);\n\n  return new StreamClient(apiKey, {\n    persistUserOnConnectionFailure: true,\n    ...options,\n    clientAppIdentifier,\n  });\n};\n\n/**\n * Creates a token provider and allows integrators to provide\n * a static token and a token provider at the same time.\n *\n * When both of them are provided, this function will create an internal\n * token provider that will use the static token on the first invocation\n * and the token provider on the later invocations.\n */\nexport const createTokenOrProvider = (\n  options: StreamVideoClientOptions,\n): TokenOrProvider => {\n  const { token, tokenProvider } = options;\n  if (token && tokenProvider) {\n    let initialTokenUsed = false;\n    return async function wrappedTokenProvider(): Promise<string> {\n      if (!initialTokenUsed) {\n        initialTokenUsed = true;\n        return token;\n      }\n      return tokenProvider();\n    };\n  }\n  return token || tokenProvider;\n};\n","import { Call } from './Call';\nimport { StreamClient } from './coordinator/connection/client';\nimport {\n  CallingState,\n  StreamVideoReadOnlyStateStore,\n  StreamVideoWriteableStateStore,\n} from './store';\nimport type {\n  CallCreatedEvent,\n  CallRingEvent,\n  ConnectedEvent,\n  CreateDeviceRequest,\n  CreateGuestRequest,\n  CreateGuestResponse,\n  GetEdgesResponse,\n  ListDevicesResponse,\n  QueryAggregateCallStatsRequest,\n  QueryAggregateCallStatsResponse,\n  QueryCallsRequest,\n  QueryCallsResponse,\n  QueryCallStatsRequest,\n  QueryCallStatsResponse,\n} from './gen/coordinator';\nimport {\n  AllClientEvents,\n  ClientEventListener,\n  StreamClientOptions,\n  TokenOrProvider,\n  TokenProvider,\n  User,\n  UserWithId,\n} from './coordinator/connection/types';\nimport { retryInterval, sleep } from './coordinator/connection/utils';\nimport {\n  createCoordinatorClient,\n  createTokenOrProvider,\n  getCallInitConcurrencyTag,\n  getInstanceKey,\n} from './helpers/clientUtils';\nimport { logToConsole, ScopedLogger, videoLoggerSystem } from './logger';\nimport { withoutConcurrency } from './helpers/concurrency';\nimport { enableTimerWorker } from './timers';\n\nexport type StreamVideoClientOptions = {\n  apiKey: string;\n  options?: StreamClientOptions;\n  user?: User;\n  token?: string;\n  tokenProvider?: TokenProvider;\n};\n\n/**\n * A `StreamVideoClient` instance lets you communicate with our API, and authenticate users.\n */\nexport class StreamVideoClient {\n  /**\n   * A reactive store that exposes all the state variables reactively.\n   * You can subscribe to changes of the different state variables.\n   * Our library is built in a way that all state changes are exposed in this store,\n   * o all UI changes in your application should be handled by subscribing to these variables.\n   *\n   * @deprecated use the `client.state` getter.\n   */\n  readonly readOnlyStateStore: StreamVideoReadOnlyStateStore;\n  readonly logger: ScopedLogger;\n\n  protected readonly writeableStateStore: StreamVideoWriteableStateStore;\n  streamClient: StreamClient;\n\n  private effectsRegistered = false;\n  private eventHandlersToUnregister: Array<() => void> = [];\n  private readonly connectionConcurrencyTag = Symbol(\n    'connectionConcurrencyTag',\n  );\n\n  private static _instances = new Map<string, StreamVideoClient>();\n  private rejectCallWhenBusy = false;\n\n  /**\n   * You should create only one instance of `StreamVideoClient`.\n   */\n  constructor(apiKey: string, opts?: StreamClientOptions);\n  constructor(args: StreamVideoClientOptions);\n  constructor(\n    apiKeyOrArgs: string | StreamVideoClientOptions,\n    opts?: StreamClientOptions,\n  ) {\n    const apiKey =\n      typeof apiKeyOrArgs === 'string' ? apiKeyOrArgs : apiKeyOrArgs.apiKey;\n    const clientOptions =\n      typeof apiKeyOrArgs === 'string' ? opts : apiKeyOrArgs.options;\n\n    if (clientOptions?.enableTimerWorker) enableTimerWorker();\n\n    const rootLogger = clientOptions?.logger || logToConsole;\n\n    videoLoggerSystem.configureLoggers({\n      default: { sink: rootLogger, level: clientOptions?.logLevel || 'warn' },\n      ...clientOptions?.logOptions,\n    });\n\n    this.logger = videoLoggerSystem.getLogger('client');\n    this.rejectCallWhenBusy = clientOptions?.rejectCallWhenBusy ?? false;\n\n    this.streamClient = createCoordinatorClient(apiKey, clientOptions);\n\n    this.writeableStateStore = new StreamVideoWriteableStateStore();\n    this.readOnlyStateStore = new StreamVideoReadOnlyStateStore(\n      this.writeableStateStore,\n    );\n\n    if (typeof apiKeyOrArgs !== 'string' && apiKeyOrArgs.user) {\n      const user = apiKeyOrArgs.user;\n      if (user.type === 'anonymous') user.id = '!anon';\n      if (user.id) this.registerClientInstance(apiKey, user);\n\n      const tokenOrProvider = createTokenOrProvider(apiKeyOrArgs);\n      this.connectUser(user, tokenOrProvider).catch((err) => {\n        this.logger.error('Failed to connect', err);\n      });\n    }\n  }\n\n  /**\n   * Gets or creates a StreamVideoClient instance based on the given options.\n   */\n  static getOrCreateInstance(\n    args: StreamVideoClientOptions & { user: User },\n  ): StreamVideoClient {\n    const { apiKey, user, token, tokenProvider } = args;\n    if (!user.id && user.type !== 'anonymous') {\n      throw new Error('user.id is required for a non-anonymous user');\n    }\n\n    if (\n      !token &&\n      !tokenProvider &&\n      user.type !== 'anonymous' &&\n      user.type !== 'guest'\n    ) {\n      throw new Error(\n        'tokenProvider or token is required for a authenticated users',\n      );\n    }\n\n    return (\n      StreamVideoClient._instances.get(getInstanceKey(apiKey, user)) ||\n      new StreamVideoClient(args)\n    );\n  }\n\n  private registerClientInstance = (apiKey: string, user: User) => {\n    const instanceKey = getInstanceKey(apiKey, user);\n    if (StreamVideoClient._instances.has(instanceKey)) {\n      this.logger.warn(\n        `A StreamVideoClient already exists for ${user.id}; Prefer using getOrCreateInstance method`,\n      );\n    }\n    StreamVideoClient._instances.set(instanceKey, this);\n  };\n\n  /**\n   * Return the reactive state store, use this if you want to be notified about changes to the client state\n   */\n  get state() {\n    return this.readOnlyStateStore;\n  }\n\n  private registerEffects = () => {\n    if (this.effectsRegistered) return;\n\n    this.eventHandlersToUnregister.push(\n      this.on('call.created', (event) => this.initCallFromEvent(event)),\n      this.on('call.ring', (event) => this.initCallFromEvent(event)),\n      this.on('connection.changed', (event) => {\n        if (!event.online) return;\n\n        const callsToReWatch = this.writeableStateStore.calls\n          .filter((call) => call.watching)\n          .map((call) => call.cid);\n        if (callsToReWatch.length <= 0) return;\n\n        this.logger.info(`Rewatching calls ${callsToReWatch.join(', ')}`);\n        this.queryCalls({\n          watch: true,\n          filter_conditions: { cid: { $in: callsToReWatch } },\n          sort: [{ field: 'cid', direction: 1 }],\n        }).catch((err) => {\n          this.logger.error('Failed to re-watch calls', err);\n        });\n      }),\n    );\n\n    this.effectsRegistered = true;\n  };\n\n  /**\n   * Initializes a call from a call created or ringing event.\n   * @param e the event.\n   */\n  private initCallFromEvent = async (e: CallCreatedEvent | CallRingEvent) => {\n    if (this.state.connectedUser?.id === e.call.created_by.id) {\n      this.logger.debug(`Ignoring ${e.type} event sent by the current user`);\n      return;\n    }\n\n    try {\n      const concurrencyTag = getCallInitConcurrencyTag(e.call_cid);\n      await withoutConcurrency(concurrencyTag, async () => {\n        const ringing = e.type === 'call.ring';\n        let call = this.writeableStateStore.findCall(e.call.type, e.call.id);\n        if (call) {\n          if (ringing) {\n            if (this.shouldRejectCall(call.cid)) {\n              this.logger.info(\n                `Leaving call with busy reject reason ${call.cid} because user is busy`,\n              );\n              // remove the instance from the state store\n              await call.leave();\n              // explicitly reject the call with busy reason as calling state was not ringing before and leave would not call it therefore\n              await call.reject('busy');\n            } else {\n              await call.updateFromRingingEvent(e as CallRingEvent);\n            }\n          } else {\n            call.state.updateFromCallResponse(e.call);\n          }\n          return;\n        }\n\n        call = new Call({\n          streamClient: this.streamClient,\n          type: e.call.type,\n          id: e.call.id,\n          members: e.members,\n          clientStore: this.writeableStateStore,\n          ringing,\n        });\n\n        if (ringing) {\n          if (this.shouldRejectCall(call.cid)) {\n            this.logger.info(`Rejecting call ${call.cid} because user is busy`);\n            // call is not in the state store yet, so just reject api is enough\n            await call.reject('busy');\n          } else {\n            await call.updateFromRingingEvent(e as CallRingEvent);\n            await call.get();\n          }\n        } else {\n          call.state.updateFromCallResponse(e.call);\n          this.writeableStateStore.registerCall(call);\n          this.logger.info(`New call created and registered: ${call.cid}`);\n        }\n      });\n    } catch (err) {\n      this.logger.error(`Failed to init call from event ${e.type}`, err);\n    }\n  };\n\n  /**\n   * Connects the given user to the client.\n   * Only one user can connect at a time, if you want to change users, call `disconnectUser` before connecting a new user.\n   * If the connection is successful, the connected user [state variable](#readonlystatestore) will be updated accordingly.\n   *\n   * @param user the user to connect.\n   * @param tokenOrProvider a token or a function that returns a token.\n   */\n  connectUser = async (\n    user: User,\n    tokenOrProvider?: TokenOrProvider,\n  ): Promise<void | ConnectedEvent> => {\n    if (user.type === 'anonymous') {\n      user.id = '!anon';\n      return this.connectAnonymousUser(user as UserWithId, tokenOrProvider);\n    }\n\n    const connectUserResponse = await withoutConcurrency(\n      this.connectionConcurrencyTag,\n      async () => {\n        const client = this.streamClient;\n        const { onConnectUserError, persistUserOnConnectionFailure } =\n          client.options;\n        let { maxConnectUserRetries = 5 } = client.options;\n        maxConnectUserRetries = Math.max(maxConnectUserRetries, 1);\n\n        const errorQueue: Error[] = [];\n        for (let attempt = 0; attempt < maxConnectUserRetries; attempt++) {\n          try {\n            this.logger.trace(`Connecting user (${attempt})`, user);\n            return user.type === 'guest'\n              ? await client.connectGuestUser(user)\n              : await client.connectUser(user, tokenOrProvider);\n          } catch (err) {\n            this.logger.warn(`Failed to connect a user (${attempt})`, err);\n            errorQueue.push(err as Error);\n            if (attempt === maxConnectUserRetries - 1) {\n              onConnectUserError?.(err as Error, errorQueue);\n              throw err;\n            }\n\n            // we need to force to disconnect the user if the client is\n            // configured to persist the user on connection failure\n            if (persistUserOnConnectionFailure) {\n              await client.disconnectUser();\n            }\n\n            await sleep(retryInterval(attempt));\n          }\n        }\n      },\n    );\n\n    // connectUserResponse will be void if connectUser called twice for the same user\n    if (connectUserResponse?.me) {\n      this.writeableStateStore.setConnectedUser(connectUserResponse.me);\n    }\n\n    this.registerEffects();\n\n    return connectUserResponse;\n  };\n\n  /**\n   * Disconnects the currently connected user from the client.\n   *\n   * If the connection is successfully disconnected, the connected user [state variable](#readonlystatestore) will be updated accordingly\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  disconnectUser = async (timeout?: number) => {\n    await withoutConcurrency(this.connectionConcurrencyTag, async () => {\n      const { user, key } = this.streamClient;\n      if (!user) return;\n\n      await this.streamClient.disconnectUser(timeout);\n\n      if (user.id) {\n        StreamVideoClient._instances.delete(getInstanceKey(key, user));\n      }\n      this.eventHandlersToUnregister.forEach((unregister) => unregister());\n      this.eventHandlersToUnregister = [];\n      this.effectsRegistered = false;\n      this.writeableStateStore.setConnectedUser(undefined);\n    });\n  };\n\n  /**\n   * You can subscribe to WebSocket events provided by the API.\n   * To remove a subscription, call the `off` method or, execute the returned unsubscribe function.\n   * Please note that subscribing to WebSocket events is an advanced use-case, for most use-cases it should be enough to watch for changes in the reactive [state store](#readonlystatestore).\n   *\n   * @param eventName the event name or 'all'.\n   * @param callback the callback which will be called when the event is emitted.\n   * @returns an unsubscribe function.\n   */\n  on = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    return this.streamClient.on(eventName, callback);\n  };\n\n  /**\n   * Remove subscription for WebSocket events that were created by the `on` method.\n   *\n   * @param eventName the event name.\n   * @param callback the callback which was passed to the `on` method.\n   */\n  off = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    return this.streamClient.off(eventName, callback);\n  };\n\n  /**\n   * Creates a new call.\n   *\n   * @param type the type of the call.\n   * @param id the id of the call.\n   * @param options additional options for call creation.\n   */\n  call = (\n    type: string,\n    id: string,\n    options: { reuseInstance?: boolean } = {},\n  ) => {\n    const call = options.reuseInstance\n      ? this.writeableStateStore.findCall(type, id)\n      : undefined;\n    return (\n      call ??\n      new Call({\n        streamClient: this.streamClient,\n        id: id,\n        type: type,\n        clientStore: this.writeableStateStore,\n      })\n    );\n  };\n\n  /**\n   * Creates a new guest user with the given data.\n   *\n   * @param data the data for the guest user.\n   */\n  createGuestUser = async (data: CreateGuestRequest) => {\n    return this.streamClient.doAxiosRequest<\n      CreateGuestResponse,\n      CreateGuestRequest\n    >('post', '/guest', data, { publicEndpoint: true });\n  };\n\n  /**\n   * Will query the API for calls matching the given filters.\n   *\n   * @param data the query data.\n   */\n  queryCalls = async (data: QueryCallsRequest = {}) => {\n    const response = await this.streamClient.post<\n      QueryCallsResponse,\n      QueryCallsRequest\n    >('/calls', data);\n    const calls = [];\n    for (const c of response.calls) {\n      const call = new Call({\n        streamClient: this.streamClient,\n        id: c.call.id,\n        type: c.call.type,\n        members: c.members,\n        ownCapabilities: c.own_capabilities,\n        watching: data.watch,\n        clientStore: this.writeableStateStore,\n      });\n      call.state.updateFromCallResponse(c.call);\n      await call.applyDeviceConfig(c.call.settings, false);\n      if (data.watch) {\n        await call.setup();\n        this.writeableStateStore.registerCall(call);\n      }\n      calls.push(call);\n    }\n    return {\n      ...response,\n      calls: calls,\n    };\n  };\n\n  /**\n   * Retrieve the list of available call statistics reports matching a particular condition.\n   *\n   * @param data Filter and sort conditions for retrieving available call report summaries.\n   * @returns List with summary of available call reports matching the condition.\n   */\n  queryCallStats = async (data: QueryCallStatsRequest = {}) => {\n    return this.streamClient.post<\n      QueryCallStatsResponse,\n      QueryCallStatsRequest\n    >(`/call/stats`, data);\n  };\n\n  /**\n   * Retrieve the list of available reports aggregated from the call stats.\n   *\n   * @param data Specify filter conditions like from and to (within last 30 days) and the report types\n   * @returns Requested reports with (mostly) raw daily data for each report type requested\n   */\n  queryAggregateCallStats = async (\n    data: QueryAggregateCallStatsRequest = {},\n  ) => {\n    return this.streamClient.post<\n      QueryAggregateCallStatsResponse,\n      QueryAggregateCallStatsRequest\n    >(`/stats`, data);\n  };\n\n  /**\n   * Returns a list of available data centers available for hosting calls.\n   */\n  edges = async () => {\n    return this.streamClient.get<GetEdgesResponse>(`/edges`);\n  };\n\n  /**\n   * addDevice - Adds a push device for a user.\n   *\n   * @param {string} id the device id\n   * @param {string} push_provider the push provider name (eg. apn, firebase)\n   * @param {string} push_provider_name user provided push provider name\n   * @param {string} [userID] the user id (defaults to current user)\n   * @param {boolean} [voip_token] enables use of VoIP token for push notifications on iOS platform\n   */\n  addDevice = async (\n    id: string,\n    push_provider: string,\n    push_provider_name?: string,\n    userID?: string,\n    voip_token?: boolean,\n  ) => {\n    return await this.streamClient.post<CreateDeviceRequest>('/devices', {\n      id,\n      push_provider,\n      voip_token,\n      ...(userID != null ? { user_id: userID } : {}),\n      ...(push_provider_name != null ? { push_provider_name } : {}),\n    });\n  };\n\n  /**\n   * addDevice - Adds a push device for a user.\n   *\n   * @param {string} id the device id\n   * @param {string} push_provider the push provider name (eg. apn, firebase)\n   * @param {string} push_provider_name user provided push provider name\n   * @param {string} [userID] the user id (defaults to current user)\n   */\n  addVoipDevice = async (\n    id: string,\n    push_provider: string,\n    push_provider_name: string,\n    userID?: string,\n  ) => {\n    return await this.addDevice(\n      id,\n      push_provider,\n      push_provider_name,\n      userID,\n      true,\n    );\n  };\n\n  /**\n   * getDevices - Returns the devices associated with a current user\n   * @param {string} [userID] User ID. Only works on serverside\n   */\n  getDevices = async (userID?: string) => {\n    return await this.streamClient.get<ListDevicesResponse>(\n      '/devices',\n      userID ? { user_id: userID } : {},\n    );\n  };\n\n  /**\n   * removeDevice - Removes the device with the given id.\n   *\n   * @param {string} id The device id\n   * @param {string} [userID] The user id. Only specify this for serverside requests\n   */\n  removeDevice = async (id: string, userID?: string) => {\n    return await this.streamClient.delete('/devices', {\n      id,\n      ...(userID ? { user_id: userID } : {}),\n    });\n  };\n\n  /**\n   * A callback that can be used to create ringing calls from push notifications. If the call already exists, it will do nothing.\n   * @param call_cid\n   * @returns\n   */\n  onRingingCall = async (call_cid: string) => {\n    return withoutConcurrency(getCallInitConcurrencyTag(call_cid), async () => {\n      // if we find the call and is already ringing, we don't need to create a new call\n      // as client would have received the call.ring state because the app had WS alive when receiving push notifications\n      let call = this.state.calls.find((c) => c.cid === call_cid && c.ringing);\n      if (!call) {\n        // if not it means that WS is not alive when receiving the push notifications and we need to fetch the call\n        const [callType, callId] = call_cid.split(':');\n        call = new Call({\n          streamClient: this.streamClient,\n          type: callType,\n          id: callId,\n          clientStore: this.writeableStateStore,\n          ringing: true,\n        });\n        await call.get();\n      }\n      return call;\n    });\n  };\n\n  /**\n   * Connects the given anonymous user to the client.\n   *\n   * @param user the user to connect.\n   * @param tokenOrProvider a token or a function that returns a token.\n   */\n  private connectAnonymousUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ) => {\n    return withoutConcurrency(this.connectionConcurrencyTag, () =>\n      this.streamClient.connectAnonymousUser(user, tokenOrProvider),\n    );\n  };\n\n  private shouldRejectCall = (currentCallId: string) => {\n    if (!this.rejectCallWhenBusy) return false;\n\n    const hasOngoingRingingCall = this.state.calls.some(\n      (c) =>\n        c.cid !== currentCallId &&\n        c.ringing &&\n        c.state.callingState !== CallingState.IDLE &&\n        c.state.callingState !== CallingState.LEFT &&\n        c.state.callingState !== CallingState.RECONNECTING_FAILED,\n    );\n\n    return hasOngoingRingingCall;\n  };\n}\n"],"names":["CallState","ICETrickle","ICETrickle$Type","Error","Error$Type","Call","ICETrickle$","Error$","RxUtils.setCurrentValue","RxUtils.getCurrentValue","RxUtils.updateValue"],"mappings":"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"}}]
}